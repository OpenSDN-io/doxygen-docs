<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenSDN source code: bgp_peer.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenSDN source code
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('db/d6b/bgp__peer_8cc_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">bgp_peer.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../db/d6b/bgp__peer_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2013 Juniper Networks, Inc. All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d2b/bgp__peer_8h.html">bgp/bgp_peer.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;boost/assign/list_of.hpp&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;boost/foreach.hpp&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;boost/tuple/tuple.hpp&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/ddd/set__util_8h.html">base/set_util.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/de9/task__annotations_8h.html">base/task_annotations.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/de2/bgp__factory_8h.html">bgp/bgp_factory.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d1a/bgp__log_8h.html">bgp/bgp_log.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d13/bgp__membership_8h.html">bgp/bgp_membership.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/ddc/bgp__peer__close_8h.html">bgp/bgp_peer_close.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/df1/bgp__sandesh_8h.html">bgp/bgp_sandesh.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d53/bgp__server_8h.html">bgp/bgp_server.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d08/bgp__session_8h.html">bgp/bgp_session.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/daa/bgp__session__manager_8h.html">bgp/bgp_session_manager.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;bgp/bgp_peer_types.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/da6/community_8h.html">bgp/community.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d47/ermvpn__table_8h.html">bgp/ermvpn/ermvpn_table.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d7d/evpn__table_8h.html">bgp/evpn/evpn_table.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d6f/inet__table_8h.html">bgp/inet/inet_table.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d69/inet6__table_8h.html">bgp/inet6/inet6_table.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d95/inet6vpn__table_8h.html">bgp/inet6vpn/inet6vpn_table.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/da0/inetvpn__table_8h.html">bgp/l3vpn/inetvpn_table.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d66/mvpn__table_8h.html">bgp/mvpn/mvpn_table.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d17/peer__close__manager_8h.html">bgp/peer_close_manager.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/db3/peer__manager_8h.html">bgp/routing-instance/peer_manager.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/df1/routing__instance_8h.html">bgp/routing-instance/routing_instance.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/de5/routing__policy__match_8h.html">bgp/routing-policy/routing_policy_match.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d37/rtarget__table_8h.html">bgp/rtarget/rtarget_table.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d6d/tunnel__encap_8h.html">bgp/tunnel_encap/tunnel_encap.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d10/control__node_8h.html">control-node/control_node.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d13/config__client__manager_8h.html">config-client-mgr/config_client_manager.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">using</span> boost::assign::list_of;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">using</span> boost::assign::map_list_of;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">using</span> boost::system::error_code;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">using</span> boost::tie;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">using</span> std::copy;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">using</span> std::dec;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">using</span> std::map;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">using</span> std::numeric_limits;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">using</span> std::ostringstream;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">using</span> std::string;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">using</span> std::vector;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html">   54</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html">BgpPeer::PeerStats</a> : <span class="keyword">public</span> <a class="code" href="../../d0/d3f/classIPeerDebugStats.html">IPeerDebugStats</a> {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#acc596717d6b9a37bbdd305ae438548bf">   56</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#acc596717d6b9a37bbdd305ae438548bf">PeerStats</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html">BgpPeer</a> *peer)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        : <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>(peer) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// Used when peer flaps.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// Reset all counters.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// Socket counters are implicitly cleared because we use a new socket.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#aaeae9ca1fc17d05060595a3028d44264">   63</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#aaeae9ca1fc17d05060595a3028d44264">Clear</a>() {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a591afd7f0ffbd3eca295743e7c0c5cdf">error_stats_</a> = <a class="code" href="../../d3/d30/structIPeerDebugStats_1_1ErrorStats.html">ErrorStats</a>();</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a42658242d52cf02483c4705cbbf92f55">proto_stats_</a>[0] = <a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html">ProtoStats</a>();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a42658242d52cf02483c4705cbbf92f55">proto_stats_</a>[1] = <a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html">ProtoStats</a>();</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ad77043cfd5968720fb3259e811ed1d70">update_stats_</a>[0] = <a class="code" href="../../d5/d26/flow__proto_8cc.html#a96f5793fe73fd4773a0d39e926099e28">UpdateStats</a>();</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ad77043cfd5968720fb3259e811ed1d70">update_stats_</a>[1] = <a class="code" href="../../d5/d26/flow__proto_8cc.html#a96f5793fe73fd4773a0d39e926099e28">UpdateStats</a>();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">// Printable name</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a4766f003b4eaea3a6d86a5efef45af0f">   72</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a4766f003b4eaea3a6d86a5efef45af0f">ToString</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a78393c5c6164db48791b727ea3a4bb65">ToString</a>();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">// Previous State of the peer</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#abd6ae4b959b4eab2e4268f28cc3717b7">   76</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#abd6ae4b959b4eab2e4268f28cc3717b7">last_state</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a194988437b7ab672a3f8c0327187dfb7">state_machine</a>()-&gt;<a class="code" href="../../d0/dc5/classStateMachine.html#ad5d6177f0ee43443091ced7b0a37ed6a">LastStateName</a>();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a2cbbd18b4a9f9f15fe9ff0cae633413c">   79</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a2cbbd18b4a9f9f15fe9ff0cae633413c">last_state_change_at</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a194988437b7ab672a3f8c0327187dfb7">state_machine</a>()-&gt;<a class="code" href="../../d0/dc5/classStateMachine.html#a46d4861c5ecbeb1a0ac7534a3d0a6779">last_state_change_at</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// Last error on this peer</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#abf1fa6653b8d48527f4d001280f98218">   83</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#abf1fa6653b8d48527f4d001280f98218">last_error</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a194988437b7ab672a3f8c0327187dfb7">state_machine</a>()-&gt;<a class="code" href="../../d0/dc5/classStateMachine.html#a132b8118abdbf2e2c93d0e6ac7390499">last_notification_in_error</a>();</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// Last Event on this peer</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a0564119924bbf26d5e538e720947a55c">   87</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a0564119924bbf26d5e538e720947a55c">last_event</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a194988437b7ab672a3f8c0327187dfb7">state_machine</a>()-&gt;<a class="code" href="../../d0/dc5/classStateMachine.html#a343b95b5bde2464a973ddde183d1ed5f">last_event</a>();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// When was the Last</span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#abac8f9eb8daa251dba285e5bca0b500c">   92</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#abac8f9eb8daa251dba285e5bca0b500c">last_flap</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#ab1df6e491ca5de15f3ef85288e61adf8">last_flap_at</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// Total number of flaps</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a033187fe5dd4eaf6c9fe717aa69d9491">   97</a></span>&#160;    <span class="keyword">virtual</span> uint64_t <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a033187fe5dd4eaf6c9fe717aa69d9491">num_flaps</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#aaed76b2d31bab91f6f78190ec1af02d4">flap_count</a>();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a134645d354bc2e026b8f28047cdc04f4">  101</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a134645d354bc2e026b8f28047cdc04f4">GetRxProtoStats</a>(<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html">ProtoStats</a> *stats)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        *stats = <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a42658242d52cf02483c4705cbbf92f55">proto_stats_</a>[0];</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a87f189e8847db04c22ac85403934d62c">  105</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a87f189e8847db04c22ac85403934d62c">GetTxProtoStats</a>(<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html">ProtoStats</a> *stats)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        *stats = <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a42658242d52cf02483c4705cbbf92f55">proto_stats_</a>[1];</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a0186fedaf68421db374295bcfe97d9fa">  109</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a0186fedaf68421db374295bcfe97d9fa">GetRxRouteUpdateStats</a>(<a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html">UpdateStats</a> *stats)<span class="keyword">  const </span>{</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        *stats = <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ad77043cfd5968720fb3259e811ed1d70">update_stats_</a>[0];</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#afd8beea20ee260b5d41f846a6ae5da15">  113</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#afd8beea20ee260b5d41f846a6ae5da15">GetTxRouteUpdateStats</a>(<a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html">UpdateStats</a> *stats)<span class="keyword">  const </span>{</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        *stats = <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ad77043cfd5968720fb3259e811ed1d70">update_stats_</a>[1];</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#aa0634150f0a4f226bd336d2512ce7698">  117</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#aa0634150f0a4f226bd336d2512ce7698">GetRxSocketStats</a>(<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html">IPeerDebugStats::SocketStats</a> *stats)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>()) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <a class="code" href="../../d2/dfc/structio_1_1SocketStats.html">io::SocketStats</a> socket_stats(<a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>()-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a0e221bb1f018a66cb630c675aa00c577">GetSocketStats</a>());</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            stats-&gt;<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a45b6655a5f057a42021896c2a384d191">calls</a> = socket_stats.<a class="code" href="../../d2/dfc/structio_1_1SocketStats.html#a5a1373ed348f7d8eae1a759c86070493">read_calls</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            stats-&gt;<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a9d77995204760aa176a9b5d7ebeec0b5">bytes</a> = socket_stats.<a class="code" href="../../d2/dfc/structio_1_1SocketStats.html#ad2d7b2f797805cb49bdd2ccb3f36269d">read_bytes</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a2af365bdc11acbb8f14c6de2d3f08bce">  125</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a2af365bdc11acbb8f14c6de2d3f08bce">GetTxSocketStats</a>(<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html">IPeerDebugStats::SocketStats</a> *stats)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>()) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <a class="code" href="../../d2/dfc/structio_1_1SocketStats.html">io::SocketStats</a> socket_stats(<a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>()-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a0e221bb1f018a66cb630c675aa00c577">GetSocketStats</a>());</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            stats-&gt;<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a45b6655a5f057a42021896c2a384d191">calls</a> = socket_stats.<a class="code" href="../../d2/dfc/structio_1_1SocketStats.html#a7fa274205b8d1033d231dffdc4eb39f3">write_calls</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            stats-&gt;<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a9d77995204760aa176a9b5d7ebeec0b5">bytes</a> = socket_stats.<a class="code" href="../../d2/dfc/structio_1_1SocketStats.html#abd7da46197bf9484dd9427c36438f190">write_bytes</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            stats-&gt;<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a80ecc028d33d85872ae91d9233ad54ba">blocked_count</a> = socket_stats.<a class="code" href="../../d2/dfc/structio_1_1SocketStats.html#aa82f6d9359b55c6a30476eae8e3c3f9c">write_blocked</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            stats-&gt;<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a6c996ba2076f750029dcd4a3a0a4c137">blocked_duration_usecs</a> =</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                socket_stats.<a class="code" href="../../d2/dfc/structio_1_1SocketStats.html#ab56ae6e859a5175b1d6dc65e0ae986cd">write_blocked_duration_usecs</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ada1ea535807a5a611d7ef9251c979474">  136</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ada1ea535807a5a611d7ef9251c979474">UpdateTxUnreachRoute</a>(uint64_t count) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ad77043cfd5968720fb3259e811ed1d70">update_stats_</a>[1].<a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#ab6e54e85b2ffb0e46a0c7027b79591f4">unreach</a> += count;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a8936af8f537847fdd587a98c4461cbe8">  140</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a8936af8f537847fdd587a98c4461cbe8">UpdateTxReachRoute</a>(uint64_t count) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ad77043cfd5968720fb3259e811ed1d70">update_stats_</a>[1].<a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#a4cab34b80ef186948646d3d8c4de4c40">reach</a> += count;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// Do nothing for bgp peers.</span></div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a6939e30edba2ef56dd977550ffdf7b6e">  145</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a6939e30edba2ef56dd977550ffdf7b6e">GetRxErrorStats</a>(<a class="code" href="../../dd/dcb/structIPeerDebugStats_1_1RxErrorStats.html">RxErrorStats</a> *stats)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a9221793902316e38af901a448299f383">  148</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a9221793902316e38af901a448299f383">GetRxRouteStats</a>(<a class="code" href="../../d1/d64/structIPeerDebugStats_1_1RxRouteStats.html">RxRouteStats</a> *stats)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        stats-&gt;<a class="code" href="../../d1/d64/structIPeerDebugStats_1_1RxRouteStats.html#a81386e072d40e5c7b7b25bd9c66e5f7d">total_path_count</a> = <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a7bf54e490f41a22eb9eba1628c7711ce">GetTotalPathCount</a>();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        stats-&gt;<a class="code" href="../../d1/d64/structIPeerDebugStats_1_1RxRouteStats.html#a9b31d90cff18b8416315e702a9ef7e75">primary_path_count</a> = <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a443e18136cc491ca12fc9763a36c1838">GetPrimaryPathCount</a>();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a9087efd9ac3b63b40965774ae3e661ac">  154</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="../../d3/d2d/classBgpPeer.html">BgpPeer</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">  156</a></span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html">BgpPeer</a> *<a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">peer_</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a591afd7f0ffbd3eca295743e7c0c5cdf">  157</a></span>&#160;    <a class="code" href="../../d3/d30/structIPeerDebugStats_1_1ErrorStats.html">ErrorStats</a> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a591afd7f0ffbd3eca295743e7c0c5cdf">error_stats_</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a42658242d52cf02483c4705cbbf92f55">  158</a></span>&#160;    <a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html">ProtoStats</a> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a42658242d52cf02483c4705cbbf92f55">proto_stats_</a>[2];</div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ad77043cfd5968720fb3259e811ed1d70">  159</a></span>&#160;    <a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html">UpdateStats</a> <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ad77043cfd5968720fb3259e811ed1d70">update_stats_</a>[2];</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;};</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="../../da/db3/classBgpPeer_1_1DeleteActor.html">  162</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html">BgpPeer::DeleteActor</a> : <span class="keyword">public</span> <a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a> {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ad71dac4f63fa978a22c520bff3dc99d7">  164</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ad71dac4f63fa978a22c520bff3dc99d7">DeleteActor</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html">BgpPeer</a> *peer)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        : <a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a>(peer-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;lifetime_manager()),</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;          <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>(peer) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#a5ce45fb5b9da30c9ef5a9bf4e1ebfe1a">  169</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#a5ce45fb5b9da30c9ef5a9bf4e1ebfe1a">MayDelete</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsQueueEmpty())</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a4443ace9ba66f9c96c4bb37166bfc324">IsCloseInProgress</a>())</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;IsQueueEmpty())</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#aa9ddef04000c7970175c551b4e4d58c5">prefix_limit_trigger_</a>.<a class="code" href="../../d3/d5f/classTaskTrigger.html#a3210a7b35d6a63583e2fb305f26b91ba">IsSet</a>())</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ae50d6cd5cef871a9bda05eb942e249d4">  182</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ae50d6cd5cef871a9bda05eb942e249d4">Shutdown</a>() {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a62e09087183a4b4bbe3bcfb7df9f9d37">Clear</a>(<a class="code" href="../../de/d90/structBgpProto_1_1Notification.html#a76086aadc422e3c1293a96dbff2f4242a9b799b265bd6c9e4de6f8ec92a5f7079">BgpProto::Notification::PeerDeconfigured</a>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#a42df8725fffbf41d4816b197b232eb3a">  187</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#a42df8725fffbf41d4816b197b232eb3a">Destroy</a>() {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#ad2a293f4a60dfffc66cd158b68d4bbb3">PostCloseRelease</a>();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a31a46e65469aad3be886f07604535b08">IsRouterTypeBGPaaS</a>()) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>()-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a60c8cc22d42634df1d6c04b21dce10de">decrement_deleting_bgpaas_count</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>()-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a020ae22723a6c93e381f2135a6e53256">decrement_deleting_count</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#ae4d0fb403cf4fae0c67ba6ab07981e17">dscp_listener_id_</a> &gt;= 0) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>()-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a9183a30ae0fa57c309ee4fd8aa2e7709">UnregisterDSCPUpdateCallback</a>(</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                                        <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#ae4d0fb403cf4fae0c67ba6ab07981e17">dscp_listener_id_</a>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#ae4d0fb403cf4fae0c67ba6ab07981e17">dscp_listener_id_</a> = -1;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a4ebb0248cac09635118a1bb64b58ace9">instance_op_</a> &gt;= 0) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>()-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a43eb0f3a32d47b86eb7df4713bbb89a9">routing_instance_mgr</a>()-&gt;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                UnregisterInstanceOpCallback(<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a4ebb0248cac09635118a1bb64b58ace9">instance_op_</a>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a4ebb0248cac09635118a1bb64b58ace9">instance_op_</a> = -1;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#ab34104b39633be52168105bd0933e4e7">asn_listener_id_</a> &gt;= 0) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>()-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a746c85fe658cccdc727a310911cc5c49">UnregisterASNUpdateCallback</a>(</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#ab34104b39633be52168105bd0933e4e7">asn_listener_id_</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#ab34104b39633be52168105bd0933e4e7">asn_listener_id_</a> = -1;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        assert(!<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a4eb418f66ddf6308f018b5c444000b66">membership_req_pending</a>());</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        assert(!<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsMembershipInUse());</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a681ad0a18a6afd9daf99a4644fd4115c">peer_manager</a>()-&gt;<a class="code" href="../../d2/dc6/classPeerManager.html#a567efc92a3e1ac2c1eacc56fbeada341">DestroyIPeer</a>(<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">  216</a></span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html">BgpPeer</a> *<a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">peer_</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;};</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">// Constructor for BgpPeerFamilyAttributes.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a626750d5c853963c1267bad272fbc7c8">  222</a></span>&#160;<a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a626750d5c853963c1267bad272fbc7c8">BgpPeerFamilyAttributes::BgpPeerFamilyAttributes</a>(</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d0/dbd/classBgpNeighborConfig.html">BgpNeighborConfig</a> *config,</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d7/d24/structBgpFamilyAttributesConfig.html">BgpFamilyAttributesConfig</a> &amp;family_config) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> (family_config.<a class="code" href="../../d7/d24/structBgpFamilyAttributesConfig.html#abfe6024444b1ccf5db596e50d5265021">loop_count</a>) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a5025bb43309e209010c4422eede95711">loop_count</a> = family_config.<a class="code" href="../../d7/d24/structBgpFamilyAttributesConfig.html#abfe6024444b1ccf5db596e50d5265021">loop_count</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a5025bb43309e209010c4422eede95711">loop_count</a> = config-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a850bd0cf87df8177985c7902cf4e8e21">loop_count</a>();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#ab008a35741579ad0a3734bcda2420e89">prefix_limit</a> = family_config.<a class="code" href="../../d7/d24/structBgpFamilyAttributesConfig.html#a3c8d64e3033ea5503497c73b675b578e">prefix_limit</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a734896ec0aa40b85f212fb82e7710fa8">idle_timeout</a> = family_config.<a class="code" href="../../d7/d24/structBgpFamilyAttributesConfig.html#a5ae3e90ae58f995c3511ff2e62fd4f27">idle_timeout</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a70b942e9210fcf61378748d01c2ecd5b">default_tunnel_encap_list</a> = family_config.<a class="code" href="../../d7/d24/structBgpFamilyAttributesConfig.html#a23e5468b0a6a49de5a387cc0356f5bc1">default_tunnel_encap_list</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (config-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a53340543fd3b70d6d3b466c91943b227">router_type</a>() == <span class="stringliteral">&quot;bgpaas-client&quot;</span>) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">if</span> (family_config.<a class="code" href="../../d7/d24/structBgpFamilyAttributesConfig.html#aca096236b122189b98e05ebd89e28c06">family</a> == <span class="stringliteral">&quot;inet&quot;</span>) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a1859f71355fd0c6e1769d1c8094b7af9">gateway_address</a> = config-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a5a2fd771459c3e4647f0a7e64f529352">gateway_address</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1d93db3747cf6c75ab622601c30544a0">Address::INET</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (family_config.<a class="code" href="../../d7/d24/structBgpFamilyAttributesConfig.html#aca096236b122189b98e05ebd89e28c06">family</a> == <span class="stringliteral">&quot;inet6&quot;</span>) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a1859f71355fd0c6e1769d1c8094b7af9">gateway_address</a> = config-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a5a2fd771459c3e4647f0a7e64f529352">gateway_address</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa474968a53fad182e1b6340dd2eb80fc">Address::INET6</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a64601f208abf0f1bdb212ebb9d92dcdf">  243</a></span>&#160;<a class="code" href="../../d2/d43/structRibExportPolicy.html">RibExportPolicy</a> <a class="code" href="../../d3/d2d/classBgpPeer.html#a64601f208abf0f1bdb212ebb9d92dcdf">BgpPeer::BuildRibExportPolicy</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="../../d2/d43/structRibExportPolicy.html">RibExportPolicy</a> policy;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html">BgpPeerFamilyAttributes</a> *family_attributes =</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[family];</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span> (!family_attributes) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        policy = <a class="code" href="../../d2/d43/structRibExportPolicy.html">RibExportPolicy</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a16c7a2791391e99800565214393441cd">peer_type_</a>, <a class="code" href="../../d2/d43/structRibExportPolicy.html#a59a5d47be78560b3c60112864e9c2743af98a513e68e63910ee5c010c4e666ce8">RibExportPolicy::BGP</a>, <a class="code" href="../../d3/d2d/classBgpPeer.html#ae2f3e2ea66d940a3a1fa5c348e9977be">peer_as_</a>,</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a2ea223263d00cf47550588bf59fd0595">as_override_</a>, <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>-&gt;IsCloseLongLivedGraceful(),</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a050d412214c666daa6c3be3353ae4b82">as4_supported_</a>, -1, <a class="code" href="../../d3/d2d/classBgpPeer.html#a9314eb1207cbd9262434f824aaf3ce3e">cluster_id_</a>, <a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        policy = <a class="code" href="../../d2/d43/structRibExportPolicy.html">RibExportPolicy</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a16c7a2791391e99800565214393441cd">peer_type_</a>, <a class="code" href="../../d2/d43/structRibExportPolicy.html#a59a5d47be78560b3c60112864e9c2743af98a513e68e63910ee5c010c4e666ce8">RibExportPolicy::BGP</a>, <a class="code" href="../../d3/d2d/classBgpPeer.html#ae2f3e2ea66d940a3a1fa5c348e9977be">peer_as_</a>,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a2ea223263d00cf47550588bf59fd0595">as_override_</a>, <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>-&gt;IsCloseLongLivedGraceful(),</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a050d412214c666daa6c3be3353ae4b82">as4_supported_</a>, family_attributes-&gt;<a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a1859f71355fd0c6e1769d1c8094b7af9">gateway_address</a>,</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            -1, <a class="code" href="../../d3/d2d/classBgpPeer.html#a9314eb1207cbd9262434f824aaf3ce3e">cluster_id_</a>, family_attributes-&gt;<a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a70b942e9210fcf61378748d01c2ecd5b">default_tunnel_encap_list</a>,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#aefda4110ad1fed88ad32ccd49d930106">private_as_action_</a> == <span class="stringliteral">&quot;remove&quot;</span>) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        policy.<a class="code" href="../../d2/d43/structRibExportPolicy.html#a30d3782906c7a6ef6d0f1ba0c27689a6">SetRemovePrivatePolicy</a>(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#aefda4110ad1fed88ad32ccd49d930106">private_as_action_</a> == <span class="stringliteral">&quot;remove-all&quot;</span>) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        policy.<a class="code" href="../../d2/d43/structRibExportPolicy.html#a30d3782906c7a6ef6d0f1ba0c27689a6">SetRemovePrivatePolicy</a>(<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#aefda4110ad1fed88ad32ccd49d930106">private_as_action_</a> == <span class="stringliteral">&quot;replace-all&quot;</span>) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        policy.<a class="code" href="../../d2/d43/structRibExportPolicy.html#a30d3782906c7a6ef6d0f1ba0c27689a6">SetRemovePrivatePolicy</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> policy;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a5c02ccc7d79dc94f18e2beb0f62a38d8">  270</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a5c02ccc7d79dc94f18e2beb0f62a38d8">BgpPeer::ReceiveEndOfRIB</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family, <span class="keywordtype">size_t</span> msgsize) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;ProcessEORMarkerReceived(family);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#aca40f9fa6ac0e1d9e91bd1968289bad3">eor_receive_timer_</a>[family]-&gt;<a class="code" href="../../dc/dea/classTimer.html#a18a9ec123397a973c72243c8372c237f">Cancel</a>();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// If EoR for RTarget is received, start registration for other families.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> (family == <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a>)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a0a48bde677ad31fe55db68ee701d8bf3">RegisterToVpnTables</a>();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ada118d66290b0e2ac1ce92aa1743c095">  279</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ada118d66290b0e2ac1ce92aa1743c095">BgpPeer::SendEndOfRIBActual</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">spin_mutex_</a>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// Bail if there&#39;s no session for the peer anymore.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="../../d2/db2/structBgpProto_1_1Update.html">BgpProto::Update</a> update;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    uint16_t afi;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    uint8_t safi;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    tie(afi, safi) = <a class="code" href="../../d4/dc3/classBgpAf.html#a9cbc6441473fd1b787c786d677e66b8e">BgpAf::FamilyToAfiSafi</a>(family);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="../../db/d34/structBgpMpNlri.html">BgpMpNlri</a> *nlri = <span class="keyword">new</span> <a class="code" href="../../db/d34/structBgpMpNlri.html">BgpMpNlri</a>(<a class="code" href="../../d9/dc1/classBgpAttribute.html#a0f53da2f5b76912fd8742705d23faae1aba319b9db10a6716e9ca3e7ca7773cf9">BgpAttribute::MPUnreachNlri</a>, afi, safi);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    update.<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a05ee4842131545a933e64f27bd4492c6">path_attributes</a>.push_back(nlri);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    uint8_t data[256];</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordtype">int</span> msgsize = <a class="code" href="../../d2/d4b/classBgpProto.html#ac8662f1bc2628e1297105bbabcf4e94c">BgpProto::Encode</a>(&amp;update, data, <span class="keyword">sizeof</span>(data), NULL,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                   <a class="code" href="../../d3/d2d/classBgpPeer.html#addeee4e254b6236de084a1f5b3bffdf0">Is4ByteAsSupported</a>());</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    assert(msgsize &gt; <a class="code" href="../../d2/d4b/classBgpProto.html#a35267d69369befe457dfffa9dfcbec74">BgpProto::kMinMessageSize</a>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, msgsize, NULL);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a2ed22608e8b0462e04f01ca9f0320c44">inc_tx_end_of_rib</a>();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ab2e4f5d28e8ebf2d5612a3940d62aa7c">inc_tx_update</a>();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#af9b1c09de0cc94078c7505280dcfb639">BGP_PEER_DIR_OUT</a>,</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="stringliteral">&quot;EndOfRib marker family &quot;</span> &lt;&lt; <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family) &lt;&lt;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="stringliteral">&quot; size &quot;</span> &lt;&lt; msgsize);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#acc346122f8681b018974e711a1531927">  305</a></span>&#160;uint32_t <a class="code" href="../../d3/d2d/classBgpPeer.html#acc346122f8681b018974e711a1531927">BgpPeer::GetOutputQueueDepth</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table = <a class="code" href="../../d3/d2d/classBgpPeer.html#a14ce206222db976a1296319fb49c6613">GetRoutingInstance</a>()-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(family);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ae1b50989fe8347f00f3acb93e86198cb">membership_mgr</a>()-&gt;<a class="code" href="../../d2/d45/classBgpMembershipManager.html#ac6d0968c1da6524be4820f5e7efcf4e8">GetRibOutQueueDepth</a>(<span class="keyword">this</span>, table);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a0d82a27f155c53c1c38e3825f876c5bf">  310</a></span>&#160;time_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a0d82a27f155c53c1c38e3825f876c5bf">BgpPeer::GetEorSendTimerElapsedTime</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d91/time__util_8h.html#a0554f180759dcae72e6bf12be4ab4fd2">UTCTimestamp</a>() - <a class="code" href="../../d3/d2d/classBgpPeer.html#a9d0dcf4763c498416ddf0ff9fba41209">eor_send_timer_start_time_</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a08360c7d1461faccbc2eb3b2a3fcb31c">  314</a></span>&#160;uint32_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a08360c7d1461faccbc2eb3b2a3fcb31c">BgpPeer::GetEndOfRibReceiveTime</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span> family == <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a> ?</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a063bb5b5859c11683138ce724728a530">kRouteTargetEndOfRibTimeSecs</a> : <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a54cb8e78f9517a5960ddf3d0256008d8">GetEndOfRibReceiveTime</a>();</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a8526fd7599531dc2dcd11c26751748ac">  319</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a8526fd7599531dc2dcd11c26751748ac">BgpPeer::IsServerStartingUp</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#abed7c44cd2587b18214811e9cfffada0">IsServerStartingUp</a>();</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#adc2d06691ea5a8f5cf131a8376ea61d1">  323</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#adc2d06691ea5a8f5cf131a8376ea61d1">BgpPeer::IsCloseGraceful</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>-&gt;IsCloseGraceful();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ac0ca6e9cdce613708d3c89b021d13119">  327</a></span>&#160;time_t <a class="code" href="../../d3/d2d/classBgpPeer.html#ac0ca6e9cdce613708d3c89b021d13119">BgpPeer::GetRTargetTableLastUpdatedTimeStamp</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#adae21688a383eaededb3319f4d465683">GetRTargetTableLastUpdatedTimeStamp</a>();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ac4d5017c934f975a17aab76601dcdb60">  331</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ac4d5017c934f975a17aab76601dcdb60">BgpPeer::EndOfRibSendTimerExpired</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a4a04145f6f6dfbc0bff82cbfb0d1fd67">IsReady</a>())</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// Send EoR if wait time has exceeded the configured maximum.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a0d82a27f155c53c1c38e3825f876c5bf">GetEorSendTimerElapsedTime</a>() &gt;= <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a2682da2ea2d21bf3d8f425d5fea5bb82">GetEndOfRibSendTime</a>()) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ada118d66290b0e2ac1ce92aa1743c095">SendEndOfRIBActual</a>(family);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">// Defer if output queue has not been fully drained yet.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    uint32_t output_depth = <a class="code" href="../../d3/d2d/classBgpPeer.html#acc346122f8681b018974e711a1531927">GetOutputQueueDepth</a>(family);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (output_depth) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a2c469ffda39e3c510ec0ff5e41ad186d">eor_send_timer_</a>[family]-&gt;<a class="code" href="../../dc/dea/classTimer.html#ad93f44a498d55194c695da6a977f6dab">Reschedule</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">kEndOfRibSendRetryTime</a> * 1000);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#af9b1c09de0cc94078c7505280dcfb639">BGP_PEER_DIR_OUT</a>,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="stringliteral">&quot;EndOfRib Send Timer rescheduled for family &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family) &lt;&lt; <span class="stringliteral">&quot; to fire after &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">kEndOfRibSendRetryTime</a> &lt;&lt; <span class="stringliteral">&quot; second(s) &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="stringliteral">&quot;due to non-empty output queue (&quot;</span> &lt;&lt; output_depth &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// Send EoR if we are not still under [re-]starting phase.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a8526fd7599531dc2dcd11c26751748ac">IsServerStartingUp</a>()) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ada118d66290b0e2ac1ce92aa1743c095">SendEndOfRIBActual</a>(family);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// Defer if configuration processing is not complete yet.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d27/classConfigClientManager.html#acfb0de48a2240988ffe6e033a769021d">ConfigClientManager::end_of_rib_computed</a>()) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a2c469ffda39e3c510ec0ff5e41ad186d">eor_send_timer_</a>[family]-&gt;<a class="code" href="../../dc/dea/classTimer.html#ad93f44a498d55194c695da6a977f6dab">Reschedule</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">kEndOfRibSendRetryTime</a> * 1000);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#af9b1c09de0cc94078c7505280dcfb639">BGP_PEER_DIR_OUT</a>,</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="stringliteral">&quot;EndOfRib Send Timer rescheduled for family &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family) &lt;&lt; <span class="stringliteral">&quot; to fire after &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">kEndOfRibSendRetryTime</a> &lt;&lt; <span class="stringliteral">&quot; second(s) &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="stringliteral">&quot;as bgp (under restart) has not completed initial configuration&quot;</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <span class="stringliteral">&quot; processing&quot;</span>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// For all families except route-target, wait for a certain amount of time</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// before sending eor as bgp is still in [re-]starting phase (60s).</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span> (family != <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a>) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a2c469ffda39e3c510ec0ff5e41ad186d">eor_send_timer_</a>[family]-&gt;<a class="code" href="../../dc/dea/classTimer.html#ad93f44a498d55194c695da6a977f6dab">Reschedule</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">kEndOfRibSendRetryTime</a> * 1000);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO,</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#af9b1c09de0cc94078c7505280dcfb639">BGP_PEER_DIR_OUT</a>,</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="stringliteral">&quot;EndOfRib Send Timer rescheduled for family &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family) &lt;&lt; <span class="stringliteral">&quot; to fire after &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">kEndOfRibSendRetryTime</a> &lt;&lt; <span class="stringliteral">&quot; second(s) &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                <span class="stringliteral">&quot;as bgp is still under [re-]starting phase&quot;</span>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment">// Defer EoR if any new route-target was added to the table recently (6s).</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d91/time__util_8h.html#a0554f180759dcae72e6bf12be4ab4fd2">UTCTimestamp</a>() - <a class="code" href="../../d3/d2d/classBgpPeer.html#ac0ca6e9cdce613708d3c89b021d13119">GetRTargetTableLastUpdatedTimeStamp</a>() &lt;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            0.02 * <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a2682da2ea2d21bf3d8f425d5fea5bb82">GetEndOfRibSendTime</a>()) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a2c469ffda39e3c510ec0ff5e41ad186d">eor_send_timer_</a>[family]-&gt;<a class="code" href="../../dc/dea/classTimer.html#ad93f44a498d55194c695da6a977f6dab">Reschedule</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">kEndOfRibSendRetryTime</a> * 1000);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO,</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#af9b1c09de0cc94078c7505280dcfb639">BGP_PEER_DIR_OUT</a>,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                <span class="stringliteral">&quot;EndOfRib Send Timer rescheduled for family &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family) &lt;&lt; <span class="stringliteral">&quot; to fire after &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">kEndOfRibSendRetryTime</a> &lt;&lt; <span class="stringliteral">&quot; second(s) &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <span class="stringliteral">&quot;as new route-targets are still being added to the table&quot;</span>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// Send eor as [re-]starting phase is complete for this family.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ada118d66290b0e2ac1ce92aa1743c095">SendEndOfRIBActual</a>(family);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;}</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ab4fe51bc07c5954c149293b2409d0218">  404</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ab4fe51bc07c5954c149293b2409d0218">BgpPeer::SendEndOfRIB</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a9d0dcf4763c498416ddf0ff9fba41209">eor_send_timer_start_time_</a> = <a class="code" href="../../d0/d91/time__util_8h.html#a0554f180759dcae72e6bf12be4ab4fd2">UTCTimestamp</a>();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#af9b1c09de0cc94078c7505280dcfb639">BGP_PEER_DIR_OUT</a>,</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="stringliteral">&quot;EndOfRib Send Timer scheduled for family &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family) &lt;&lt;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="stringliteral">&quot; to fire after &quot;</span> &lt;&lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">kEndOfRibSendRetryTime</a>  &lt;&lt; <span class="stringliteral">&quot; second(s)&quot;</span>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a2c469ffda39e3c510ec0ff5e41ad186d">eor_send_timer_</a>[family]-&gt;<a class="code" href="../../dc/dea/classTimer.html#a884738fb312e353e7d89fce007f02485">Start</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">kEndOfRibSendRetryTime</a> * 1000,</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#ac4d5017c934f975a17aab76601dcdb60">BgpPeer::EndOfRibSendTimerExpired</a>, <span class="keyword">this</span>, family),</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a47297b9f364826787a529982ad025399">BgpPeer::EndOfRibTimerErrorHandler</a>, <span class="keyword">this</span>, _1, _2));</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a798072845d07ac98223db93d44ac3387">  416</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a798072845d07ac98223db93d44ac3387">BgpPeer::BGPPeerInfoSend</a>(<span class="keyword">const</span> BgpPeerInfoData &amp;peer_info)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    assert(!peer_info.get_name().empty());</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#ad55ab976b64334697c76c147ac81dae3">BGP_UVE_SEND</a>(BGPPeerInfo, peer_info);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a094c7e36349f557e52452365b7f268e0">  421</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a094c7e36349f557e52452365b7f268e0">BgpPeer::CanUseMembershipManager</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">membership_req_pending_</a>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">// Callback from BgpMembershipManager.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">// Update pending membership request count and send EndOfRib for the family</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">// in question.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a8d1b42de6a0f71c58c43a2e6cf828ceb">  430</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a8d1b42de6a0f71c58c43a2e6cf828ceb">BgpPeer::MembershipRequestCallback</a>(<a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsMembershipInUse()) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;MembershipRequestCallback();</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    assert(<a class="code" href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">membership_req_pending_</a> &gt; 0);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">membership_req_pending_</a>--;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// Resume if CloseManager is waiting to use membership manager.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">membership_req_pending_</a> &amp;&amp;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsMembershipInWait()) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;MembershipRequest();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// Resume close if it was deferred and this is the last pending callback.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// Don&#39;t bother sending EndOfRib if close is deferred.</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a525e1f8e0acbf5402c491c122d3269f9">defer_close_</a>) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">membership_req_pending_</a>) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a525e1f8e0acbf5402c491c122d3269f9">defer_close_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a776f37f2ee75907d1dfc806995404184">trigger_</a>.<a class="code" href="../../d3/d5f/classTaskTrigger.html#ada3590b85844a485e0f663adaf697d4e">Set</a>();</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ab4fe51bc07c5954c149293b2409d0218">SendEndOfRIB</a>(table-&gt;<a class="code" href="../../d0/def/classBgpTable.html#ae03997dea3dbab64d82a5403715eaa1c">family</a>());</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a7069688838dd408a58c39a41304b3d40">  458</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a7069688838dd408a58c39a41304b3d40">BgpPeer::MembershipPathCallback</a>(<a class="code" href="../../d3/da7/classDBTablePartBase.html">DBTablePartBase</a> *tpart, <a class="code" href="../../d6/dbd/classBgpRoute.html">BgpRoute</a> *route,</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                     <a class="code" href="../../d7/d0c/classBgpPath.html">BgpPath</a> *path) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;MembershipPathCallback(tpart, route, path);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a64a70aa9404b4cddb429c880fc30be7b">  463</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a64a70aa9404b4cddb429c880fc30be7b">BgpPeer::ResumeClose</a>() {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>-&gt;Close(<a class="code" href="../../d3/d2d/classBgpPeer.html#ac2dc047bb6d7480e8447744cf0e74bc1">graceful_close_</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ac2dc047bb6d7480e8447744cf0e74bc1">graceful_close_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aff027af7beba693f1b7f21edbbd860f6">  469</a></span>&#160;<a class="code" href="../../d3/d2d/classBgpPeer.html#aff027af7beba693f1b7f21edbbd860f6">BgpPeer::BgpPeer</a>(<a class="code" href="../../db/d26/classBgpServer.html">BgpServer</a> *server, <a class="code" href="../../de/ddf/classRoutingInstance.html">RoutingInstance</a> *instance,</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                 <span class="keyword">const</span> <a class="code" href="../../d0/dbd/classBgpNeighborConfig.html">BgpNeighborConfig</a> *config)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        : server_(server),</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          rtinstance_(instance),</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          peer_key_(config),</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          peer_port_(config-&gt;source_port()),</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;          peer_name_(config-&gt;name()),</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          router_type_(config-&gt;router_type()),</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;          config_(config),</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;          index_(server-&gt;RegisterPeer(this)),</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          trigger_(<a class="code" href="../../d4/da9/namespaceboost.html">boost</a>::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html">BgpPeer</a>::ResumeClose, this),</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                   <a class="code" href="../../df/ddc/classTaskScheduler.html">TaskScheduler</a>::GetInstance()-&gt;GetTaskId(<span class="stringliteral">&quot;bgp::StateMachine&quot;</span>),</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                   GetTaskInstance()),</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;          prefix_limit_idle_timer_(</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;              <a class="code" href="../../d9/d81/classTimerManager.html">TimerManager</a>::CreateTimer(*server-&gt;ioservice(),</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;              <span class="stringliteral">&quot;BGP prefix limit idle timer&quot;</span>,</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;              <a class="code" href="../../df/ddc/classTaskScheduler.html">TaskScheduler</a>::GetInstance()-&gt;GetTaskId(<span class="stringliteral">&quot;bgp::StateMachine&quot;</span>),</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;              GetTaskInstance())),</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;          prefix_limit_trigger_(<a class="code" href="../../d4/da9/namespaceboost.html">boost</a>::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html">BgpPeer</a>::CheckPrefixLimits, this),</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                   <a class="code" href="../../df/ddc/classTaskScheduler.html">TaskScheduler</a>::GetInstance()-&gt;GetTaskId(<span class="stringliteral">&quot;bgp::StateMachine&quot;</span>),</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                   GetTaskInstance()),</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          buffer_capacity_(GetBufferCapacity()),</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;          session_(NULL),</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;          keepalive_timer_(<a class="code" href="../../d9/d81/classTimerManager.html">TimerManager</a>::CreateTimer(*server-&gt;ioservice(),</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                     <span class="stringliteral">&quot;BGP keepalive timer&quot;</span>,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                   <a class="code" href="../../df/ddc/classTaskScheduler.html">TaskScheduler</a>::GetInstance()-&gt;GetTaskId(<span class="stringliteral">&quot;bgp::StateMachine&quot;</span>),</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                   GetTaskInstance())),</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;          eor_send_timer_start_time_(0),</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          send_ready_(true),</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          admin_down_(config-&gt;admin_down()),</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          passive_(config-&gt;passive()),</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;          resolve_paths_(config-&gt;router_type() == <span class="stringliteral">&quot;bgpaas-client&quot;</span>),</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;          as_override_(config-&gt;as_override()),</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;          cluster_id_(config-&gt;cluster_id()),</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;          origin_override_(config-&gt;origin_override()),</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;          defer_close_(false),</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;          graceful_close_(true),</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;          as4_supported_(false),</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;          vpn_tables_registered_(false),</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;          hold_time_(config-&gt;hold_time()),</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;          local_as_(config-&gt;local_as()),</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;          peer_as_(config-&gt;peer_as()),</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;          local_bgp_id_(config-&gt;local_identifier()),</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;          peer_bgp_id_(0),</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;          family_primary_path_count_(<a class="code" href="../../de/d6b/classAddress.html">Address</a>::NUM_FAMILIES),</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;          peer_type_((config-&gt;peer_as() == config-&gt;local_as()) ?</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                         <a class="code" href="../../d2/d4b/classBgpProto.html">BgpProto</a>::IBGP : <a class="code" href="../../d2/d4b/classBgpProto.html">BgpProto</a>::EBGP),</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;          state_machine_(<a class="code" href="../../d2/d7c/structBgpStaticObjectFactory.html">BgpStaticObjectFactory</a>::Create&lt;<a class="code" href="../../d0/dc5/classStateMachine.html">StateMachine</a>&gt;(this)),</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;          peer_close_(<a class="code" href="../../d2/d7c/structBgpStaticObjectFactory.html">BgpStaticObjectFactory</a>::Create&lt;<a class="code" href="../../d8/d25/classBgpPeerClose.html">BgpPeerClose</a>&gt;(this)),</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          peer_stats_(new <a class="code" href="../../d8/db7/classBgpPeer_1_1PeerStats.html">PeerStats</a>(this)),</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;          deleter_(new <a class="code" href="../../da/db3/classBgpPeer_1_1DeleteActor.html">DeleteActor</a>(this)),</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          instance_delete_ref_(this, instance ? instance-&gt;<a class="code" href="../../db/d83/structdeleter.html">deleter</a>() : NULL),</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          flap_count_(0),</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;          total_flap_count_(0),</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;          last_flap_(0),</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;          dscp_listener_id_(-1),</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          inuse_authkey_type_(<a class="code" href="../../d1/df6/classAuthenticationData.html">AuthenticationData</a>::NIL),</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;          asn_listener_id_(-1),</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;          instance_op_(-1) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">buffer_</a>.reserve(<a class="code" href="../../d3/d2d/classBgpPeer.html#aac75008b7b3f952b6f060680de787c49">buffer_capacity_</a>);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>.reset(</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        BgpStaticObjectFactory::Create&lt;PeerCloseManager&gt;(<span class="keyword">static_cast&lt;</span><a class="code" href="../../da/d00/classIPeerClose.html">IPeerClose</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>.get())));</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    ostringstream oss1;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    oss1 &lt;&lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a759df848bedd73ef687c021097d25958">peer_key_</a>.<a class="code" href="../../dd/dde/structBgpPeerKey.html#a8c28ff869e728f1b25ad457733965c8c">endpoint</a>.address();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a759df848bedd73ef687c021097d25958">peer_key_</a>.<a class="code" href="../../dd/dde/structBgpPeerKey.html#a8c28ff869e728f1b25ad457733965c8c">endpoint</a>.port() != <a class="code" href="../../da/d05/classBgpConfigManager.html#a0d8c4c38b3836163b34b005b75bf3e30">BgpConfigManager::kDefaultPort</a>)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        oss1 &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; dec &lt;&lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a759df848bedd73ef687c021097d25958">peer_key_</a>.<a class="code" href="../../dd/dde/structBgpPeerKey.html#a8c28ff869e728f1b25ad457733965c8c">endpoint</a>.port();</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#af46253ddf5ca5a05a44727d48c08f468">to_str_</a> = oss1.str();</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    ostringstream oss2;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        oss2 &lt;&lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a04603321cf74e128aee933a6d0e8cd52">name</a>() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    oss2 &lt;&lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ad54f5b0be875a76940384140ab6a40c3">localname</a>() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    oss2 &lt;&lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a55f500957c1100f8f913228785a391d7">peer_name</a>();</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a50a671ef57a34aea04f0423aeda22401">uve_key_str_</a> = oss2.str();</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;control-node&quot;</span> ||</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;external-control-node&quot;</span>) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#af8fec1c26625ae12122c7f195b20c92c">peer_is_control_node_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#af8fec1c26625ae12122c7f195b20c92c">peer_is_control_node_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ae4d0fb403cf4fae0c67ba6ab07981e17">dscp_listener_id_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ab941a0ccb2d5812c6a4aae87aef72efd">RegisterDSCPUpdateCallback</a>(boost::bind(</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        &amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#ad097ad83c3dc7e706052d06a8430b582">BgpPeer::DSCPUpdateCallback</a>, <span class="keyword">this</span>, _1));</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a31a46e65469aad3be886f07604535b08">IsRouterTypeBGPaaS</a>()) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ab34104b39633be52168105bd0933e4e7">asn_listener_id_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ae00c165286238c3cb64eef4895350fc7">RegisterASNUpdateCallback</a>(boost::bind(</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            &amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a43ba0b3ac1a00c95a5670c7f5903c9d7">BgpPeer::ASNUpdateCallback</a>, <span class="keyword">this</span>, _1, _2));</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a4ebb0248cac09635118a1bb64b58ace9">instance_op_</a>=<a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a43eb0f3a32d47b86eb7df4713bbb89a9">routing_instance_mgr</a>()-&gt;<a class="code" href="../../d2/d72/classRoutingInstanceMgr.html#ad615001baabfb243775068d2953e0271">RegisterInstanceOpCallback</a>(</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a10e845b8144df7ad26cbe2bf6e81ef01">BgpPeer::RoutingInstanceCallback</a>, <span class="keyword">this</span>, _1, _2));</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">membership_req_pending_</a> = 0;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d9/df2/http__client_8h.html#a5667b805d857c6d28f83f6038a0272d3">Event</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>, <span class="stringliteral">&quot;Created&quot;</span>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a> &amp;&amp; <a class="code" href="../../d3/d2d/classBgpPeer.html#a5164b853c8f042c1d39d4661c5f53813">peer_name_</a>.find(<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a04603321cf74e128aee933a6d0e8cd52">name</a>()) == 0) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a682c20234fec93855a0ebffefc58d2da">peer_basename_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a5164b853c8f042c1d39d4661c5f53813">peer_name_</a>.substr(<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a04603321cf74e128aee933a6d0e8cd52">name</a>().size() + 1);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a682c20234fec93855a0ebffefc58d2da">peer_basename_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a5164b853c8f042c1d39d4661c5f53813">peer_name_</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family = <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4">Address::UNSPEC</a>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            family &lt; <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1932708671ede7d14f0dda2710c51b19">Address::NUM_FAMILIES</a>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            family = <span class="keyword">static_cast&lt;</span><a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a><span class="keyword">&gt;</span>(family + 1)) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a76bcc2d6066f3c610b5b8ee7d6fc3b36">family_primary_path_count_</a>[family] = 0;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;         <a class="code" href="../../d3/d2d/classBgpPeer.html#a2c469ffda39e3c510ec0ff5e41ad186d">eor_send_timer_</a>[family] =</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;             <a class="code" href="../../d9/d81/classTimerManager.html#af55b055e89bf6fc46607894d27a61341">TimerManager::CreateTimer</a>(*<a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a14aa2a7a0dcf0db482a2c14a292bd390">ioservice</a>(),</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                 <span class="stringliteral">&quot;BGP EoR Send timer for &quot;</span> + <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family),</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                 <a class="code" href="../../df/ddc/classTaskScheduler.html#a951ae2a1d1b7700618defdcc1ea53a70">TaskScheduler::GetInstance</a>()-&gt;<a class="code" href="../../df/ddc/classTaskScheduler.html#a2b2c4c05c286d6c22fdfdaee461e1489">GetTaskId</a>(<span class="stringliteral">&quot;bgp::StateMachine&quot;</span>),</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                 <a class="code" href="../../d3/d2d/classBgpPeer.html#adc279e2cf7262d19cf3cd3d3c8c1a2a5">GetTaskInstance</a>());</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;         <a class="code" href="../../d3/d2d/classBgpPeer.html#aca40f9fa6ac0e1d9e91bd1968289bad3">eor_receive_timer_</a>[family] =</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;             <a class="code" href="../../d9/d81/classTimerManager.html#af55b055e89bf6fc46607894d27a61341">TimerManager::CreateTimer</a>(*<a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a14aa2a7a0dcf0db482a2c14a292bd390">ioservice</a>(),</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                 <span class="stringliteral">&quot;BGP EoR Receive timer for &quot;</span> + <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family),</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                 <a class="code" href="../../df/ddc/classTaskScheduler.html#a951ae2a1d1b7700618defdcc1ea53a70">TaskScheduler::GetInstance</a>()-&gt;<a class="code" href="../../df/ddc/classTaskScheduler.html#a2b2c4c05c286d6c22fdfdaee461e1489">GetTaskId</a>(<span class="stringliteral">&quot;bgp::StateMachine&quot;</span>),</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                 <a class="code" href="../../d3/d2d/classBgpPeer.html#adc279e2cf7262d19cf3cd3d3c8c1a2a5">GetTaskInstance</a>());</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a7d9ab4f623607a3c41488cd3fa03490e">total_path_count_</a> = 0;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a4e7a52b9a0ea3693ac43721f1cbd12c4">primary_path_count_</a> = 0;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">// Check rtinstance_ to accommodate unit tests.</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#af1f1b0f23b0f9f1b1587d72bf1635089">resolve_paths_</a> &amp;&amp; <a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1d93db3747cf6c75ab622601c30544a0">Address::INET</a>)-&gt;<a class="code" href="../../d0/def/classBgpTable.html#a2511a870274f94ba58c6ee12909233cd">LocatePathResolver</a>();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa474968a53fad182e1b6340dd2eb80fc">Address::INET6</a>)-&gt;<a class="code" href="../../d0/def/classBgpTable.html#a2511a870274f94ba58c6ee12909233cd">LocatePathResolver</a>();</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#adef0aa0aed24fcdf0e121315384bced1">ProcessEndpointConfig</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a601f03d97c8d5a3249d0f9c0787e5324">ProcessAuthKeyChainConfig</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a4bf3425c9560fce04fa57e547ec26752">ProcessFamilyAttributesConfig</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    BgpPeerInfoData peer_info;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    peer_info.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    peer_info.set_admin_down(<a class="code" href="../../d3/d2d/classBgpPeer.html#a018e5430f3a5941f6c44c6b047cbac4b">admin_down_</a>);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    peer_info.set_passive(<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9a26ddbf41063fefe2d4645329ac417">passive_</a>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    peer_info.set_as_override(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2ea223263d00cf47550588bf59fd0595">as_override_</a>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    peer_info.set_origin_override(<a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a>.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a6b6be16eb780109f8b5f504ebe53cb34">origin_override</a>);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a>.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a6b6be16eb780109f8b5f504ebe53cb34">origin_override</a>) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        peer_info.set_route_origin(</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <a class="code" href="../../d5/dcf/classBgpAttr.html#a3685944fbf9c8eadd96b6d4b01f1a1dc">BgpAttr::OriginToString</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a>.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a9c56683360b67adbbe41750aa3c34b3e">origin</a>));</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        peer_info.set_route_origin(<span class="stringliteral">&quot;-&quot;</span>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    peer_info.set_router_type(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    peer_info.set_cluster_id(<a class="code" href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a9314eb1207cbd9262434f824aaf3ce3e">cluster_id_</a>).to_string());</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    peer_info.set_peer_type(</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a0ab2250b92472afbff2e4f16c3eeba46">PeerType</a>() == <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a0cae037af860ebb2c9546ca55adf5ad7">BgpProto::IBGP</a> ? <span class="stringliteral">&quot;internal&quot;</span> : <span class="stringliteral">&quot;external&quot;</span>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    peer_info.set_local_asn(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a>);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    peer_info.set_peer_asn(<a class="code" href="../../d3/d2d/classBgpPeer.html#ae2f3e2ea66d940a3a1fa5c348e9977be">peer_as_</a>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    peer_info.set_peer_port(<a class="code" href="../../d3/d2d/classBgpPeer.html#a4d363f73759dc8252d352297d2f6cdf1">peer_port_</a>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    peer_info.set_hold_time(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3d419e3aedd871d1513a715724f6572f">hold_time_</a>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    peer_info.set_local_id(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3acf24b370055bcfb818a85b1af598b6">local_bgp_id_</a>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    peer_info.set_configured_families(<a class="code" href="../../d3/d2d/classBgpPeer.html#a392026641ae9d88934f856dc428e1ce5">configured_families_</a>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    peer_info.set_peer_address(<a class="code" href="../../d3/d2d/classBgpPeer.html#a759df848bedd73ef687c021097d25958">peer_key_</a>.<a class="code" href="../../dd/dde/structBgpPeerKey.html#a8c28ff869e728f1b25ad457733965c8c">endpoint</a>.address().to_string());</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a798072845d07ac98223db93d44ac3387">BGPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;}</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ac1b7d4e0e631ff9d860c894cdd311c8e">  625</a></span>&#160;<a class="code" href="../../d3/d2d/classBgpPeer.html#ac1b7d4e0e631ff9d860c894cdd311c8e">BgpPeer::~BgpPeer</a>() {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    assert(!<a class="code" href="../../d3/d2d/classBgpPeer.html#ae00713836759229368ad53eb1c5ca416">close_manager</a>()-&gt;<a class="code" href="../../d3/d2d/classBgpPeer.html#a4443ace9ba66f9c96c4bb37166bfc324">IsCloseInProgress</a>());</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    assert(!<a class="code" href="../../d3/d2d/classBgpPeer.html#a4443ace9ba66f9c96c4bb37166bfc324">IsCloseInProgress</a>());</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    assert(<a class="code" href="../../d3/d2d/classBgpPeer.html#a7bf54e490f41a22eb9eba1628c7711ce">GetTotalPathCount</a>() == 0);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="../../d8/d3c/util_8h.html#a6a5e9319fe8e7bf71605737943de589e">STLDeleteValues</a>(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a94547f28bac0a2a9abf0dffd009bae50">ClearListenSocketAuthKey</a>();</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    BgpPeerInfoData peer_info;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    peer_info.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    peer_info.set_deleted(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a798072845d07ac98223db93d44ac3387">BGPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    PeerStatsData peer_stats_data;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    peer_stats_data.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    peer_stats_data.set_deleted(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    assert(!peer_stats_data.get_name().empty());</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a94e494e50f1e43efc626cf6162b1d032">BGP_UVE_SEND2</a>(PeerStatsUve, peer_stats_data, <span class="stringliteral">&quot;ObjectBgpPeer&quot;</span>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    PeerFlapData peer_flap_data;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    peer_flap_data.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    peer_flap_data.set_deleted(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    assert(!peer_flap_data.get_name().empty());</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a94e494e50f1e43efc626cf6162b1d032">BGP_UVE_SEND2</a>(PeerFlap, peer_flap_data, <span class="stringliteral">&quot;ObjectBgpPeer&quot;</span>);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d9/df2/http__client_8h.html#a5667b805d857c6d28f83f6038a0272d3">Event</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>, <span class="stringliteral">&quot;Deleted&quot;</span>);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#acf3e34c62d8b0127ec7304969565ad30">  652</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#acf3e34c62d8b0127ec7304969565ad30">BgpPeer::Initialize</a>() {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a018e5430f3a5941f6c44c6b047cbac4b">admin_down_</a>)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;Initialize();</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;}</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a459f899b4b4b66ff5254034b51e8f200">  657</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a459f899b4b4b66ff5254034b51e8f200">BgpPeer::GetBufferCapacity</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// For testing only - configure through environment variable.</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordtype">char</span> *buffer_capacity_str = getenv(<span class="stringliteral">&quot;BGP_PEER_BUFFER_SIZE&quot;</span>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span> (buffer_capacity_str) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordtype">size_t</span> env_buffer_capacity = strtoul(buffer_capacity_str, NULL, 0);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">if</span> (env_buffer_capacity &lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a0a79b1a6ef7ba34ec32fea239c74c462">kMinBufferCapacity</a>)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            env_buffer_capacity = <a class="code" href="../../d3/d2d/classBgpPeer.html#a0a79b1a6ef7ba34ec32fea239c74c462">kMinBufferCapacity</a>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">if</span> (env_buffer_capacity &gt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a85cf366c70361bed5c48e035274a255b">kMaxBufferCapacity</a>)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            env_buffer_capacity = <a class="code" href="../../d3/d2d/classBgpPeer.html#a85cf366c70361bed5c48e035274a255b">kMaxBufferCapacity</a>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">return</span> env_buffer_capacity;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// Return internal default based on peer router-type.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a31a46e65469aad3be886f07604535b08">IsRouterTypeBGPaaS</a>()) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a0a79b1a6ef7ba34ec32fea239c74c462">kMinBufferCapacity</a>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a85cf366c70361bed5c48e035274a255b">kMaxBufferCapacity</a>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ae838666794c0a9d51f24c8d329c9b262">  677</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ae838666794c0a9d51f24c8d329c9b262">BgpPeer::CheckSplitHorizon</a>(uint32_t server_cluster_id,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        uint32_t ribout_cid)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a0ab2250b92472afbff2e4f16c3eeba46">PeerType</a>() == <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a0cae037af860ebb2c9546ca55adf5ad7">BgpProto::IBGP</a>) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="comment">// check if router is a route reflector</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">if</span> (!server_cluster_id) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="comment">// check if received from client or non-client by comparing the clusterId</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="comment">// of router with that of peer from which we this route is received</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">if</span> (server_cluster_id != <a class="code" href="../../d3/d2d/classBgpPeer.html#a9314eb1207cbd9262434f824aaf3ce3e">cluster_id_</a>) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="comment">// If received from non-client, reflect to all the clients only</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <span class="keywordflow">if</span> (ribout_cid &amp;&amp; ribout_cid != server_cluster_id) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#abaf66eb5863b6912c2217f18e53f89bd">  694</a></span>&#160;<a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#abaf66eb5863b6912c2217f18e53f89bd">BgpPeer::GetRTargetTable</a>() {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="../../d2/d72/classRoutingInstanceMgr.html">RoutingInstanceMgr</a> *instance_mgr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a43eb0f3a32d47b86eb7df4713bbb89a9">routing_instance_mgr</a>();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">if</span> (!instance_mgr)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <a class="code" href="../../de/ddf/classRoutingInstance.html">RoutingInstance</a> *master = instance_mgr-&gt;<a class="code" href="../../d2/d72/classRoutingInstanceMgr.html#a6ebf31404a14e516e9d4a38cc8bd53b4">GetDefaultRoutingInstance</a>();</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">if</span> (!master)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">return</span> master-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;}</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#abbce940762ab39fe2f0f860a9f50b888">  704</a></span>&#160;<a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> <a class="code" href="../../d3/d2d/classBgpPeer.html#abbce940762ab39fe2f0f860a9f50b888">BgpPeer::GetRouteTargetRouteAttr</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="../../d7/d4d/bgp__attr_8h.html#a56e3ac88ed7dbb0e4adaee7d33267fb9">BgpAttrSpec</a> attrs;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="../../dc/d8a/structBgpAttrNextHop.html">BgpAttrNextHop</a> nexthop(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a5452a99665e1301ec4842f7bf3ab895d">bgp_identifier</a>());</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    attrs.push_back(&amp;nexthop);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="../../d2/d67/structBgpAttrOrigin.html">BgpAttrOrigin</a> origin(<a class="code" href="../../d2/d67/structBgpAttrOrigin.html#a1f0335457b6dfe5cff7205c3fa362257a727baecbd99c40e5d89a1fa45e75dd8b">BgpAttrOrigin::IGP</a>);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    attrs.push_back(&amp;origin);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ad1c0d588bba7e1d3430187f5b3d2ce0b">attr_db</a>()-&gt;<a class="code" href="../../d6/dd7/classBgpPathAttributeDB.html#a44082a171f6f497d89a5cf77c240c5f6">Locate</a>(attrs);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;}</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">// Add one route-target route to bgp.rtarget.0 table.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a8831f701afd0f99921221e25e9c12c9f">  714</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a8831f701afd0f99921221e25e9c12c9f">BgpPeer::BGPaaSAddRTarget</a>(<a class="code" href="../../db/d4e/bgp__common_8h.html#add8e85a92ef8e9194921ce44a16d8b5c">as_t</a> as, <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table, <a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> attr,</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                               RouteTargetList::const_iterator it) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dd/d0f/classRouteTarget.html">RouteTarget</a> rtarget = *it;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="../../d7/df9/structDBRequest.html">DBRequest</a> req;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="../../de/d40/classRTargetPrefix.html">RTargetPrefix</a> rt_prefix(as, rtarget);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    req.<a class="code" href="../../d7/df9/structDBRequest.html#a94c88f5224b1f8cb6adad61400c970d4">key</a>.reset(<span class="keyword">new</span> <a class="code" href="../../df/dc8/structRTargetTable_1_1RequestKey.html">RTargetTable::RequestKey</a>(rt_prefix, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    req.<a class="code" href="../../d7/df9/structDBRequest.html#ad287a746780e9771d3073c392045d64e">data</a>.reset(<span class="keyword">new</span> <a class="code" href="../../dc/d08/structBgpTable_1_1RequestData.html">RTargetTable::RequestData</a>(attr, 0, 0, 0, 0));</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    req.<a class="code" href="../../d7/df9/structDBRequest.html#a54b713cdde96ab6887520e208872ac25">oper</a> = <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45">DBRequest::DB_ENTRY_ADD_CHANGE</a>;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    table-&gt;<a class="code" href="../../d7/df2/classDBTableBase.html#a1b8bb5fe5c7b5e8a65dbca701d5f1c94">Enqueue</a>(&amp;req);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">// Add import route-targets of associated routing-instance in order to attract</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">// the VN routes, if bgpaas session comes up within the instance.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#afc35f98d3e155dc2d16eb98067196696">  727</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#afc35f98d3e155dc2d16eb98067196696">BgpPeer::AddRTargets</a>(<a class="code" href="../../db/d4e/bgp__common_8h.html#add8e85a92ef8e9194921ce44a16d8b5c">as_t</a> as) {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a31a46e65469aad3be886f07604535b08">IsRouterTypeBGPaaS</a>())</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    assert(<a class="code" href="../../d3/d2d/classBgpPeer.html#a4a04145f6f6dfbc0bff82cbfb0d1fd67">IsReady</a>());</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table = <a class="code" href="../../d3/d2d/classBgpPeer.html#abaf66eb5863b6912c2217f18e53f89bd">GetRTargetTable</a>();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    assert(table);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> attr = <a class="code" href="../../d3/d2d/classBgpPeer.html#abbce940762ab39fe2f0f860a9f50b888">GetRouteTargetRouteAttr</a>();</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a799a52aacc8079c338a72a289f395f6b">rtargets_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a8948697ed04175cdad2205625ca6bbb4">GetImportList</a>();</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">for</span> (RouteTargetList::const_iterator it = <a class="code" href="../../d3/d2d/classBgpPeer.html#a799a52aacc8079c338a72a289f395f6b">rtargets_</a>.begin();</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            it != <a class="code" href="../../d3/d2d/classBgpPeer.html#a799a52aacc8079c338a72a289f395f6b">rtargets_</a>.end(); it++) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a8831f701afd0f99921221e25e9c12c9f">BGPaaSAddRTarget</a>(as, table, attr, it);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;}</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">// Delete one route-target route from bgp.rtarget.0 table.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ac2c2d0452c0048c316767db3054883a4">  742</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ac2c2d0452c0048c316767db3054883a4">BgpPeer::BGPaaSDeleteRTarget</a>(<a class="code" href="../../db/d4e/bgp__common_8h.html#add8e85a92ef8e9194921ce44a16d8b5c">as_t</a> as, <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table,</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                                  RouteTargetList::const_iterator it) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dd/d0f/classRouteTarget.html">RouteTarget</a> rtarget = *it;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <a class="code" href="../../d7/df9/structDBRequest.html">DBRequest</a> req;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <a class="code" href="../../de/d40/classRTargetPrefix.html">RTargetPrefix</a> rt_prefix(as, rtarget);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    req.<a class="code" href="../../d7/df9/structDBRequest.html#a94c88f5224b1f8cb6adad61400c970d4">key</a>.reset(<span class="keyword">new</span> <a class="code" href="../../df/dc8/structRTargetTable_1_1RequestKey.html">RTargetTable::RequestKey</a>(rt_prefix, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    req.<a class="code" href="../../d7/df9/structDBRequest.html#a54b713cdde96ab6887520e208872ac25">oper</a> = <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2ca9cc4d4d54d396a1fe3ec4eeb38defb9f">DBRequest::DB_ENTRY_DELETE</a>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    table-&gt;<a class="code" href="../../d7/df2/classDBTableBase.html#a1b8bb5fe5c7b5e8a65dbca701d5f1c94">Enqueue</a>(&amp;req);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">// Delete import route-targets of associated routing-instance in order to</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">// not to attract the VN routes any more, if bgpaas session goes down within</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">// the instance.</span></div>
<div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a3925dbab46e9133879f0410ec889341b">  755</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a3925dbab46e9133879f0410ec889341b">BgpPeer::DeleteRTargets</a>(<a class="code" href="../../db/d4e/bgp__common_8h.html#add8e85a92ef8e9194921ce44a16d8b5c">as_t</a> as) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a31a46e65469aad3be886f07604535b08">IsRouterTypeBGPaaS</a>())</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table = <a class="code" href="../../d3/d2d/classBgpPeer.html#abaf66eb5863b6912c2217f18e53f89bd">GetRTargetTable</a>();</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">if</span> (!table)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">for</span> (RouteTargetList::const_iterator it = <a class="code" href="../../d3/d2d/classBgpPeer.html#a799a52aacc8079c338a72a289f395f6b">rtargets_</a>.begin();</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            it != <a class="code" href="../../d3/d2d/classBgpPeer.html#a799a52aacc8079c338a72a289f395f6b">rtargets_</a>.end(); it++) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ac2c2d0452c0048c316767db3054883a4">BGPaaSDeleteRTarget</a>(as, table, it);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a799a52aacc8079c338a72a289f395f6b">rtargets_</a>.clear();</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;}</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a43ba0b3ac1a00c95a5670c7f5903c9d7">  768</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a43ba0b3ac1a00c95a5670c7f5903c9d7">BgpPeer::ASNUpdateCallback</a>(<a class="code" href="../../db/d4e/bgp__common_8h.html#add8e85a92ef8e9194921ce44a16d8b5c">as_t</a> old_asn, <a class="code" href="../../db/d4e/bgp__common_8h.html#add8e85a92ef8e9194921ce44a16d8b5c">as_t</a> old_local_asn) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a3925dbab46e9133879f0410ec889341b">DeleteRTargets</a>(old_local_asn);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a4a04145f6f6dfbc0bff82cbfb0d1fd67">IsReady</a>())</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#afc35f98d3e155dc2d16eb98067196696">AddRTargets</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ac7583398387bd7e3a853607a932158e1">local_autonomous_system</a>());</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">// Process changes to routing-instance configuration. Specifically, we need</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">// to track all import route-targets so that they can be correctly updated</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">// when bgpaas sessions come up or go down.</span></div>
<div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a10e845b8144df7ad26cbe2bf6e81ef01">  779</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a10e845b8144df7ad26cbe2bf6e81ef01">BgpPeer::RoutingInstanceCallback</a>(<span class="keyword">const</span> std::string &amp;vrf_name, <span class="keywordtype">int</span> op) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    assert(<a class="code" href="../../d3/d2d/classBgpPeer.html#a31a46e65469aad3be886f07604535b08">IsRouterTypeBGPaaS</a>());</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">if</span> (op != <a class="code" href="../../d2/d72/classRoutingInstanceMgr.html#aaba823b33b8dd20428d1c25362782458a20b9cdbe89e76ac0c17d4f2b89680d94">RoutingInstanceMgr::INSTANCE_UPDATE</a> || !<a class="code" href="../../d3/d2d/classBgpPeer.html#a4a04145f6f6dfbc0bff82cbfb0d1fd67">IsReady</a>())</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">if</span> (vrf_name != <a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a04603321cf74e128aee933a6d0e8cd52">name</a>())</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="../../d2/d72/classRoutingInstanceMgr.html">RoutingInstanceMgr</a> *instance_mgr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a43eb0f3a32d47b86eb7df4713bbb89a9">routing_instance_mgr</a>();</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="../../de/ddf/classRoutingInstance.html">RoutingInstance</a> *master = instance_mgr-&gt;<a class="code" href="../../d2/d72/classRoutingInstanceMgr.html#a6ebf31404a14e516e9d4a38cc8bd53b4">GetDefaultRoutingInstance</a>();</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table = master-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a>);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    assert(table);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> attr = <a class="code" href="../../d3/d2d/classBgpPeer.html#abbce940762ab39fe2f0f860a9f50b888">GetRouteTargetRouteAttr</a>();</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="../../db/ddd/set__util_8h.html#a067b995af9dcfdbcbc405204332c0549">set_synchronize</a>(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a799a52aacc8079c338a72a289f395f6b">rtargets_</a>, &amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a8948697ed04175cdad2205625ca6bbb4">GetImportList</a>(),</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a8831f701afd0f99921221e25e9c12c9f">BgpPeer::BGPaaSAddRTarget</a>, <span class="keyword">this</span>,</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ac7583398387bd7e3a853607a932158e1">local_autonomous_system</a>(), table, attr, _1),</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#ac2c2d0452c0048c316767db3054883a4">BgpPeer::BGPaaSDeleteRTarget</a>, <span class="keyword">this</span>,</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                    <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ac7583398387bd7e3a853607a932158e1">local_autonomous_system</a>(), table, _1));</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a799a52aacc8079c338a72a289f395f6b">rtargets_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a8948697ed04175cdad2205625ca6bbb4">GetImportList</a>();</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;}</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ade10aa628ccfa131835072c2e1c3c2c0">  798</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ade10aa628ccfa131835072c2e1c3c2c0">BgpPeer::NotifyEstablished</a>(<span class="keywordtype">bool</span> established) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span> (established) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a31a46e65469aad3be886f07604535b08">IsRouterTypeBGPaaS</a>()) {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a360fc5f484f5f394ca27ea542a75485b">IncrementUpBgpaasPeerCount</a>();</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#afc35f98d3e155dc2d16eb98067196696">AddRTargets</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ac7583398387bd7e3a853607a932158e1">local_autonomous_system</a>());</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a47b9c6475976fae82d1c55444a401242">IncrementUpPeerCount</a>();</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a31a46e65469aad3be886f07604535b08">IsRouterTypeBGPaaS</a>()) {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a5d5696b7eb64ffb0d68e171ac48daf82">DecrementUpBgpaasPeerCount</a>();</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a38073568ca06acebcba187cdad366944">DecrementUpPeerCount</a>();</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;}</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ac653c49c4d028ca2621a1634017d2126">  815</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ac653c49c4d028ca2621a1634017d2126">BgpPeer::BindLocalEndpoint</a>(<a class="code" href="../../d5/de5/classBgpSession.html">BgpSession</a> *session) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;}</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">// Just return the first entry for now.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#adfb5dbce264b528f83d70452e539c591">  819</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#adfb5dbce264b528f83d70452e539c591">BgpPeer::GetBestAuthKey</a>(<a class="code" href="../../d8/dbc/structAuthenticationKey.html">AuthenticationKey</a> *auth_key,</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23a">KeyType</a> *key_type)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a84cf0c63dfef6264acba5626a7dc17cb">auth_data_</a>.<a class="code" href="../../d1/df6/classAuthenticationData.html#a05f771dd4fdce84837a3b33c80af0959">Empty</a>()) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    }</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    assert(auth_key);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="../../d1/df6/classAuthenticationData.html#a0afd6f0f60eb71adab95700c8015ca83">AuthenticationData::const_iterator</a> iter = <a class="code" href="../../d3/d2d/classBgpPeer.html#a84cf0c63dfef6264acba5626a7dc17cb">auth_data_</a>.<a class="code" href="../../d1/df6/classAuthenticationData.html#a8568b7cead983a8e01b8f7f7939c82f0">begin</a>();</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    *auth_key = *iter;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    *key_type = <a class="code" href="../../d3/d2d/classBgpPeer.html#a84cf0c63dfef6264acba5626a7dc17cb">auth_data_</a>.<a class="code" href="../../d1/df6/classAuthenticationData.html#ae7bf0fb3bd085ce33e63e1739ded616e">key_type</a>();</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;}</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a601f03d97c8d5a3249d0f9c0787e5324">  831</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a601f03d97c8d5a3249d0f9c0787e5324">BgpPeer::ProcessAuthKeyChainConfig</a>(<span class="keyword">const</span> <a class="code" href="../../d0/dbd/classBgpNeighborConfig.html">BgpNeighborConfig</a> *config) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/df6/classAuthenticationData.html">AuthenticationData</a> &amp;input_auth_data = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a29fb28db9f8dce1ccd9e34b8a13fe5d7">auth_data</a>();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a84cf0c63dfef6264acba5626a7dc17cb">auth_data_</a> == input_auth_data) {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a84cf0c63dfef6264acba5626a7dc17cb">auth_data_</a> = input_auth_data;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a08af9ae120c1441ef9dd1aec891998d0">InstallAuthKeys</a>();</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;}</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; </div>
<div class="line"><a name="l00842"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a08af9ae120c1441ef9dd1aec891998d0">  842</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a08af9ae120c1441ef9dd1aec891998d0">BgpPeer::InstallAuthKeys</a>() {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a1006a62ba4c1dfbf2fe6edbb2b63bc8f">PeerAddress</a>()) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="../../d8/dbc/structAuthenticationKey.html">AuthenticationKey</a> auth_key;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23a">KeyType</a> key_type;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordtype">bool</span> valid = <a class="code" href="../../d3/d2d/classBgpPeer.html#adfb5dbce264b528f83d70452e539c591">GetBestAuthKey</a>(&amp;auth_key, &amp;key_type);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">if</span> (valid) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordflow">if</span> (key_type == <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23aad7c4a5f838c6ed060336b61a450c0dc6">AuthenticationData::MD5</a>) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a1ca9c1795b5f6eac4c3ffb5a49f39e02">LogInstallAuthKeys</a>(<span class="stringliteral">&quot;Listen&quot;</span>, <span class="stringliteral">&quot;add&quot;</span>, auth_key, key_type);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#acccfc20f34ff15ce55698825409bea7a">SetListenSocketAuthKey</a>(auth_key, key_type);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#aba20078a2bbe187ca93119cf3eb65dda">SetInuseAuthKeyInfo</a>(auth_key, key_type);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="comment">// If there are no valid available keys but an older one is currently</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="comment">// installed, un-install it.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a1a8ddbd1ad4936224fe699c2dfd8b8b1">inuse_authkey_type_</a> == <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23aad7c4a5f838c6ed060336b61a450c0dc6">AuthenticationData::MD5</a>) {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a1ca9c1795b5f6eac4c3ffb5a49f39e02">LogInstallAuthKeys</a>(<span class="stringliteral">&quot;Listen&quot;</span>, <span class="stringliteral">&quot;delete&quot;</span>, <a class="code" href="../../d3/d2d/classBgpPeer.html#ac0e3b53cc8013a0c67097bb8f5daf919">inuse_auth_key_</a>,</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                               <a class="code" href="../../d3/d2d/classBgpPeer.html#a1a8ddbd1ad4936224fe699c2dfd8b8b1">inuse_authkey_type_</a>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a94547f28bac0a2a9abf0dffd009bae50">ClearListenSocketAuthKey</a>();</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="comment">// Resetting the key information must be done last.</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#ab2a4badba19741cd7ae84c33dfd2a0bb">ResetInuseAuthKeyInfo</a>();</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;}</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aba20078a2bbe187ca93119cf3eb65dda">  870</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#aba20078a2bbe187ca93119cf3eb65dda">BgpPeer::SetInuseAuthKeyInfo</a>(<span class="keyword">const</span> <a class="code" href="../../d8/dbc/structAuthenticationKey.html">AuthenticationKey</a> &amp;key, <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23a">KeyType</a> <a class="code" href="../../de/dcb/load__balance_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a>) {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ac0e3b53cc8013a0c67097bb8f5daf919">inuse_auth_key_</a> = key;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a1a8ddbd1ad4936224fe699c2dfd8b8b1">inuse_authkey_type_</a> = <a class="code" href="../../de/dcb/load__balance_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;}</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ab2a4badba19741cd7ae84c33dfd2a0bb">  875</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ab2a4badba19741cd7ae84c33dfd2a0bb">BgpPeer::ResetInuseAuthKeyInfo</a>() {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ac0e3b53cc8013a0c67097bb8f5daf919">inuse_auth_key_</a>.<a class="code" href="../../d8/dbc/structAuthenticationKey.html#a32e2e0153c41966a7eb5a952eac4e580">Reset</a>();</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a1a8ddbd1ad4936224fe699c2dfd8b8b1">inuse_authkey_type_</a> = <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23aa513a8f1409e8477eeab41abdefac6db6">AuthenticationData::NIL</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;}</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#acccfc20f34ff15ce55698825409bea7a">  880</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#acccfc20f34ff15ce55698825409bea7a">BgpPeer::SetListenSocketAuthKey</a>(<span class="keyword">const</span> <a class="code" href="../../d8/dbc/structAuthenticationKey.html">AuthenticationKey</a> &amp;auth_key,</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                                     <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23a">KeyType</a> key_type) {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> (key_type == <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23aad7c4a5f838c6ed060336b61a450c0dc6">AuthenticationData::MD5</a>) {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#adec0acb47c2c37fc42da6896ac752061">session_manager</a>()-&gt;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            SetListenSocketMd5Option(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1006a62ba4c1dfbf2fe6edbb2b63bc8f">PeerAddress</a>(), auth_key.<a class="code" href="../../d8/dbc/structAuthenticationKey.html#af1c47da1f48da7eb051431ae6b8391e5">value</a>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;}</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a94547f28bac0a2a9abf0dffd009bae50">  888</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a94547f28bac0a2a9abf0dffd009bae50">BgpPeer::ClearListenSocketAuthKey</a>() {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a1a8ddbd1ad4936224fe699c2dfd8b8b1">inuse_authkey_type_</a> == <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23aad7c4a5f838c6ed060336b61a450c0dc6">AuthenticationData::MD5</a>) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#adec0acb47c2c37fc42da6896ac752061">session_manager</a>()-&gt;<a class="code" href="../../de/df9/classTcpServer.html#a56d2d38051e1233ef46fcdcc378b2aad">SetListenSocketMd5Option</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1006a62ba4c1dfbf2fe6edbb2b63bc8f">PeerAddress</a>(), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;}</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a32c8021fee01ca20c763462c1ff4ef6a">  894</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a32c8021fee01ca20c763462c1ff4ef6a">BgpPeer::SetSessionSocketAuthKey</a>(<a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *session) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d2d/classBgpPeer.html#a1a8ddbd1ad4936224fe699c2dfd8b8b1">inuse_authkey_type_</a> == <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23aad7c4a5f838c6ed060336b61a450c0dc6">AuthenticationData::MD5</a>) &amp;&amp; <a class="code" href="../../d3/d2d/classBgpPeer.html#a1006a62ba4c1dfbf2fe6edbb2b63bc8f">PeerAddress</a>()) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        assert(!<a class="code" href="../../d3/d2d/classBgpPeer.html#ac0e3b53cc8013a0c67097bb8f5daf919">inuse_auth_key_</a>.<a class="code" href="../../d8/dbc/structAuthenticationKey.html#af1c47da1f48da7eb051431ae6b8391e5">value</a>.empty());</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a1ca9c1795b5f6eac4c3ffb5a49f39e02">LogInstallAuthKeys</a>(<span class="stringliteral">&quot;Session&quot;</span>, <span class="stringliteral">&quot;add&quot;</span>, <a class="code" href="../../d3/d2d/classBgpPeer.html#ac0e3b53cc8013a0c67097bb8f5daf919">inuse_auth_key_</a>,</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                           <a class="code" href="../../d3/d2d/classBgpPeer.html#a1a8ddbd1ad4936224fe699c2dfd8b8b1">inuse_authkey_type_</a>);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a653bcca1fc3065f242cf9176a038ad6f">SetMd5SocketOption</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1006a62ba4c1dfbf2fe6edbb2b63bc8f">PeerAddress</a>(), <a class="code" href="../../d3/d2d/classBgpPeer.html#ac0e3b53cc8013a0c67097bb8f5daf919">inuse_auth_key_</a>.<a class="code" href="../../d8/dbc/structAuthenticationKey.html#af1c47da1f48da7eb051431ae6b8391e5">value</a>);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;}</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#af3f5ecd5fb352e7354d236973b6001aa">  903</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#af3f5ecd5fb352e7354d236973b6001aa">BgpPeer::SetSessionSocketOptionDscp</a>(<a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *session) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    uint8_t dscp_value = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a702dbbeec9f748c4fb259013b67f4538">global_qos</a>()-&gt;<a class="code" href="../../d6/dd3/classBgpGlobalQosConfig.html#a9983dc4b188351033d44ccb756146312">control_dscp</a>();</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a57ef8832dcd60314f1d8b562bbcc656c">socket</a>()) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="keywordflow">if</span> (dscp_value != 0xFF) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af24e37114e7cc1f364810c741cb708ec">SetDscpSocketOption</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a702dbbeec9f748c4fb259013b67f4538">global_qos</a>()-&gt;<a class="code" href="../../d6/dd3/classBgpGlobalQosConfig.html#a9983dc4b188351033d44ccb756146312">control_dscp</a>());</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a4ea71af11e9874ecdcc69ac4d10e394c">  914</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a4ea71af11e9874ecdcc69ac4d10e394c">BgpPeer::GetInuseAuthKeyValue</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ac0e3b53cc8013a0c67097bb8f5daf919">inuse_auth_key_</a>.<a class="code" href="../../d8/dbc/structAuthenticationKey.html#af1c47da1f48da7eb051431ae6b8391e5">value</a>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;}</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a1ca9c1795b5f6eac4c3ffb5a49f39e02">  918</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a1ca9c1795b5f6eac4c3ffb5a49f39e02">BgpPeer::LogInstallAuthKeys</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;socket_name,</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;oper, <span class="keyword">const</span> <a class="code" href="../../d8/dbc/structAuthenticationKey.html">AuthenticationKey</a> &amp;auth_key,</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <a class="code" href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23a">KeyType</a> key_type) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordtype">string</span> logstr = socket_name + <span class="stringliteral">&quot; socket kernel &quot;</span> + oper + <span class="stringliteral">&quot; of key id &quot;</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                          + <a class="code" href="../../dd/d70/string__util_8h.html#abf0bb328a638b537a16cc43e3014ab72">integerToString</a>(auth_key.<a class="code" href="../../d8/dbc/structAuthenticationKey.html#a51055836a1be63de9b5f51b887eb22dc">id</a>) + <span class="stringliteral">&quot;, type &quot;</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                          + <a class="code" href="../../d1/df6/classAuthenticationData.html#a3a96121ab2ad33482b3a6803e3268d0b">AuthenticationData::KeyTypeToString</a>(key_type)</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                          + <span class="stringliteral">&quot;, peer &quot;</span> + <a class="code" href="../../d3/d2d/classBgpPeer.html#a5164b853c8f042c1d39d4661c5f53813">peer_name_</a>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(Config, <span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                 <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>, logstr);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">// Check if the configured prefix limit for any address family has been</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">// exceeded. If yes, clear the peer by sending a notification with a cease</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">// subcode of MaxPrefixes.</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a99dfccf12b2cdfc39806527efe31c9e1">  934</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a99dfccf12b2cdfc39806527efe31c9e1">BgpPeer::CheckPrefixLimits</a>() {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ab0d579a8bac0b458cfb681ba9266fc49">RetryDelete</a>();</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a4a04145f6f6dfbc0bff82cbfb0d1fd67">IsReady</a>())</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4">Address::UNSPEC</a>; idx &lt; <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1932708671ede7d14f0dda2710c51b19">Address::NUM_FAMILIES</a>; ++idx) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html">BgpPeerFamilyAttributes</a> *family_attributes =</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[idx];</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordflow">if</span> (!family_attributes || family_attributes-&gt;<a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#ab008a35741579ad0a3734bcda2420e89">prefix_limit</a> == 0)</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a76bcc2d6066f3c610b5b8ee7d6fc3b36">family_primary_path_count_</a>[idx] &lt;= family_attributes-&gt;<a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#ab008a35741579ad0a3734bcda2420e89">prefix_limit</a>)</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a62e09087183a4b4bbe3bcfb7df9f9d37">Clear</a>(<a class="code" href="../../de/d90/structBgpProto_1_1Notification.html#a76086aadc422e3c1293a96dbff2f4242a89abcc9b212ac5e435dfe669f47e8d3f">BgpProto::Notification::MaxPrefixes</a>);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a9efaaabeaec8c777cfc6bfa9e780c9c0">StartPrefixLimitIdleTimer</a>(family_attributes-&gt;<a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a734896ec0aa40b85f212fb82e7710fa8">idle_timeout</a> * 1000);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">// Process family attributes configuration and update the family attributes</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">// list.</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">// Return true is there&#39;s a change, false otherwise.</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a4bf3425c9560fce04fa57e547ec26752">  958</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a4bf3425c9560fce04fa57e547ec26752">BgpPeer::ProcessFamilyAttributesConfig</a>(<span class="keyword">const</span> <a class="code" href="../../d0/dbd/classBgpNeighborConfig.html">BgpNeighborConfig</a> *config) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#adb14c1e02ee5ade74dbb2d1fed40f200">FamilyAttributesList</a> family_attributes_list(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1932708671ede7d14f0dda2710c51b19">Address::NUM_FAMILIES</a>);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    BOOST_FOREACH(<span class="keyword">const</span> <a class="code" href="../../d7/d24/structBgpFamilyAttributesConfig.html">BgpFamilyAttributesConfig</a> family_config,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#ac072d721a34ad0d6272ee53c371200dc">family_attributes_list</a>()) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family =</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <a class="code" href="../../de/d6b/classAddress.html#a70c3156878df1ff6e35d2ff8385d80cd">Address::FamilyFromString</a>(family_config.<a class="code" href="../../d7/d24/structBgpFamilyAttributesConfig.html#aca096236b122189b98e05ebd89e28c06">family</a>);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        assert(family != <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4">Address::UNSPEC</a>);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html">BgpPeerFamilyAttributes</a> *family_attributes =</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <span class="keyword">new</span> <a class="code" href="../../d0/dfd/structBgpPeerFamilyAttributes.html">BgpPeerFamilyAttributes</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>, family_config);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        family_attributes_list[family] = family_attributes;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordtype">int</span> ret = <a class="code" href="../../d8/d3c/util_8h.html#a5672c8488456562edbaac01dbb7a5dec">STLSortedCompare</a>(</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        family_attributes_list.begin(), family_attributes_list.end(),</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>.begin(), <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>.end(),</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <a class="code" href="../../d6/d9e/structBgpPeerFamilyAttributesCompare.html">BgpPeerFamilyAttributesCompare</a>());</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <a class="code" href="../../d8/d3c/util_8h.html#a6a5e9319fe8e7bf71605737943de589e">STLDeleteValues</a>(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a> = family_attributes_list;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a392026641ae9d88934f856dc428e1ce5">configured_families_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a03da42f41bf4ce3b571a88a20b6a7499">GetAddressFamilies</a>();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">return</span> (ret != 0);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;}</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#adef0aa0aed24fcdf0e121315384bced1">  980</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#adef0aa0aed24fcdf0e121315384bced1">BgpPeer::ProcessEndpointConfig</a>(<span class="keyword">const</span> <a class="code" href="../../d0/dbd/classBgpNeighborConfig.html">BgpNeighborConfig</a> *config) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a53340543fd3b70d6d3b466c91943b227">router_type</a>() == <span class="stringliteral">&quot;bgpaas-client&quot;</span>) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ad9de19d5cf1b3e011ebc014f85f48b5e">endpoint_</a> = <a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">TcpSession::Endpoint</a>(<a class="code" href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a>(), <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a21f645c0e77aa558f2ef90089ab29834">source_port</a>());</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ad9de19d5cf1b3e011ebc014f85f48b5e">endpoint_</a> = <a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">TcpSession::Endpoint</a>();</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;}</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#afb2f1db35adabcf17bb623fc247ed3a7">  988</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#afb2f1db35adabcf17bb623fc247ed3a7">BgpPeer::TriggerPrefixLimitCheck</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#aa9ddef04000c7970175c551b4e4d58c5">prefix_limit_trigger_</a>.<a class="code" href="../../d3/d5f/classTaskTrigger.html#ada3590b85844a485e0f663adaf697d4e">Set</a>();</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;}</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ada4f1ca4d3dd5e0565d5a1ccdd3ba8dd">  992</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ada4f1ca4d3dd5e0565d5a1ccdd3ba8dd">BgpPeer::ConfigUpdate</a>(<span class="keyword">const</span> <a class="code" href="../../d0/dbd/classBgpNeighborConfig.html">BgpNeighborConfig</a> *config) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a4cb7f0c4ea1d54f1ed05ad2418b974f3">IsDeleted</a>())</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a3b2252c68f950ba662ddf8e8c6aca614">config_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="comment">// During peer deletion, configuration gets completely deleted. In that</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="comment">// case, there is no need to update the rest and flap the peer.</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a3b2252c68f950ba662ddf8e8c6aca614">config_</a>)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordtype">bool</span> admin_down_changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    BgpPeerInfoData peer_info;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    peer_info.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a018e5430f3a5941f6c44c6b047cbac4b">admin_down_</a> != <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a811f01f5b0982003b7b85925fc8e1687">admin_down</a>()) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#af80c1c1596c6a3f809ebf15f4f5e58aa">SetAdminState</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a811f01f5b0982003b7b85925fc8e1687">admin_down</a>());</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        peer_info.set_admin_down(<a class="code" href="../../d3/d2d/classBgpPeer.html#a018e5430f3a5941f6c44c6b047cbac4b">admin_down_</a>);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        admin_down_changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9a26ddbf41063fefe2d4645329ac417">passive_</a> != <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#adf2929a6675f599e8ba94c92c09baf42">passive</a>()) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ac9a26ddbf41063fefe2d4645329ac417">passive_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#adf2929a6675f599e8ba94c92c09baf42">passive</a>();</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        peer_info.set_passive(<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9a26ddbf41063fefe2d4645329ac417">passive_</a>);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a2ea223263d00cf47550588bf59fd0595">as_override_</a> != <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#ad6e3c22260ee2dd118f6e3af863d51c4">as_override</a>()) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a2ea223263d00cf47550588bf59fd0595">as_override_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#ad6e3c22260ee2dd118f6e3af863d51c4">as_override</a>();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        peer_info.set_as_override(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2ea223263d00cf47550588bf59fd0595">as_override_</a>);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a9314eb1207cbd9262434f824aaf3ce3e">cluster_id_</a> != <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a1e017885bf5231c2f1f01112550a0709">cluster_id</a>()) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a9314eb1207cbd9262434f824aaf3ce3e">cluster_id_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a1e017885bf5231c2f1f01112550a0709">cluster_id</a>();</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        peer_info.set_cluster_id(<a class="code" href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a9314eb1207cbd9262434f824aaf3ce3e">cluster_id_</a>).to_string());</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html">OriginOverride</a> origin_override(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a114f42a62d8e00d5a0afe2a44e6c6119">origin_override</a>());</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a> != origin_override) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a> = origin_override;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        peer_info.set_origin_override(<a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a>.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a6b6be16eb780109f8b5f504ebe53cb34">origin_override</a>);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a>.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a6b6be16eb780109f8b5f504ebe53cb34">origin_override</a>) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            peer_info.set_route_origin(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a114f42a62d8e00d5a0afe2a44e6c6119">origin_override</a>().<a class="code" href="../../db/df6/structBgpNeighborConfig_1_1OriginOverrideConfig.html#a87a99ee838689529ecd4534217c83416">origin</a>);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            peer_info.set_route_origin(<span class="stringliteral">&quot;-&quot;</span>);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> != <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a53340543fd3b70d6d3b466c91943b227">router_type</a>()) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a53340543fd3b70d6d3b466c91943b227">router_type</a>();</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        peer_info.set_router_type(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a>);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#af1f1b0f23b0f9f1b1587d72bf1635089">resolve_paths_</a> = (<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a53340543fd3b70d6d3b466c91943b227">router_type</a>() == <span class="stringliteral">&quot;bgpaas-client&quot;</span>);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;control-node&quot;</span> ||</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;external-control-node&quot;</span>) {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#af8fec1c26625ae12122c7f195b20c92c">peer_is_control_node_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#af8fec1c26625ae12122c7f195b20c92c">peer_is_control_node_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="comment">// Check if there is any change in the peer address.</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="comment">// If the peer address is changing, remove the key for the older address.</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="comment">// Update with the new peer address and then process the key chain info</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="comment">// for the new peer below.</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="../../dd/dde/structBgpPeerKey.html">BgpPeerKey</a> key(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a759df848bedd73ef687c021097d25958">peer_key_</a> != key) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a94547f28bac0a2a9abf0dffd009bae50">ClearListenSocketAuthKey</a>();</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a759df848bedd73ef687c021097d25958">peer_key_</a> = key;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        peer_info.set_peer_address(<a class="code" href="../../d3/d2d/classBgpPeer.html#a759df848bedd73ef687c021097d25958">peer_key_</a>.<a class="code" href="../../dd/dde/structBgpPeerKey.html#a8c28ff869e728f1b25ad457733965c8c">endpoint</a>.address().to_string());</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a601f03d97c8d5a3249d0f9c0787e5324">ProcessAuthKeyChainConfig</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>)) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a4d363f73759dc8252d352297d2f6cdf1">peer_port_</a> != <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a21f645c0e77aa558f2ef90089ab29834">source_port</a>()) {</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a4d363f73759dc8252d352297d2f6cdf1">peer_port_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a21f645c0e77aa558f2ef90089ab29834">source_port</a>();</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        peer_info.set_peer_port(<a class="code" href="../../d3/d2d/classBgpPeer.html#a4d363f73759dc8252d352297d2f6cdf1">peer_port_</a>);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#adef0aa0aed24fcdf0e121315384bced1">ProcessEndpointConfig</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a> != <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#ac6e32c1a0f499d4884c429869e59f905">local_as</a>()) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#aff45cdfc81cbeeb7413ff44a4c8353c2">BGP_LOG_STR</a>(BgpConfig, SandeshLevel::SYS_DEBUG,</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>,</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                <span class="stringliteral">&quot;Updated Local Autonomous System from &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a> &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#ac6e32c1a0f499d4884c429869e59f905">local_as</a>());</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#ac6e32c1a0f499d4884c429869e59f905">local_as</a>();</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        peer_info.set_local_asn(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a>);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160; </div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3d419e3aedd871d1513a715724f6572f">hold_time_</a> != <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#ad2a687dcfaba791e29b65d8dca94aa46">hold_time</a>()) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#aff45cdfc81cbeeb7413ff44a4c8353c2">BGP_LOG_STR</a>(BgpConfig, SandeshLevel::SYS_DEBUG,</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>,</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                <span class="stringliteral">&quot;Updated Hold Time from &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#a3d419e3aedd871d1513a715724f6572f">hold_time_</a> &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#ad2a687dcfaba791e29b65d8dca94aa46">hold_time</a>());</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a3d419e3aedd871d1513a715724f6572f">hold_time_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#ad2a687dcfaba791e29b65d8dca94aa46">hold_time</a>();</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        peer_info.set_hold_time(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3d419e3aedd871d1513a715724f6572f">hold_time_</a>);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#ae2f3e2ea66d940a3a1fa5c348e9977be">peer_as_</a> != <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a6e03f7754a8a4249241c3cb2c9bd54bc">peer_as</a>()) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#aff45cdfc81cbeeb7413ff44a4c8353c2">BGP_LOG_STR</a>(BgpConfig, SandeshLevel::SYS_DEBUG,</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>,</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                <span class="stringliteral">&quot;Updated Peer Autonomous System from &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#ae2f3e2ea66d940a3a1fa5c348e9977be">peer_as_</a> &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a6e03f7754a8a4249241c3cb2c9bd54bc">peer_as</a>());</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ae2f3e2ea66d940a3a1fa5c348e9977be">peer_as_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a6e03f7754a8a4249241c3cb2c9bd54bc">peer_as</a>();</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        peer_info.set_peer_asn(<a class="code" href="../../d3/d2d/classBgpPeer.html#ae2f3e2ea66d940a3a1fa5c348e9977be">peer_as_</a>);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    boost::system::error_code ec;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    uint32_t local_bgp_id = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a32ebf9e3c38e9412680df0f7780970a5">local_identifier</a>();</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3acf24b370055bcfb818a85b1af598b6">local_bgp_id_</a> != local_bgp_id) {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a3acf24b370055bcfb818a85b1af598b6">local_bgp_id_</a> = local_bgp_id;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        peer_info.set_local_id(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3acf24b370055bcfb818a85b1af598b6">local_bgp_id_</a>);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698">BgpProto::BgpPeerType</a> old_type = <a class="code" href="../../d3/d2d/classBgpPeer.html#a0ab2250b92472afbff2e4f16c3eeba46">PeerType</a>();</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a16c7a2791391e99800565214393441cd">peer_type_</a> = (<a class="code" href="../../d3/d2d/classBgpPeer.html#ae2f3e2ea66d940a3a1fa5c348e9977be">peer_as_</a> == <a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a>) ? <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a0cae037af860ebb2c9546ca55adf5ad7">BgpProto::IBGP</a> : <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a4f08aded12df5e7e04ba6af46fa2bf8f">BgpProto::EBGP</a>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordflow">if</span> (old_type != <a class="code" href="../../d3/d2d/classBgpPeer.html#a0ab2250b92472afbff2e4f16c3eeba46">PeerType</a>()) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        peer_info.set_peer_type(</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a0ab2250b92472afbff2e4f16c3eeba46">PeerType</a>() == <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a0cae037af860ebb2c9546ca55adf5ad7">BgpProto::IBGP</a> ? <span class="stringliteral">&quot;internal&quot;</span> : <span class="stringliteral">&quot;external&quot;</span>);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="comment">// Check if there is any change in private-as-action configuration.</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#aefda4110ad1fed88ad32ccd49d930106">private_as_action_</a> != <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a6ecbbb8e3e1493fbd8d1f67f9966ce43">private_as_action</a>()) {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#aefda4110ad1fed88ad32ccd49d930106">private_as_action_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>-&gt;<a class="code" href="../../d0/dbd/classBgpNeighborConfig.html#a6ecbbb8e3e1493fbd8d1f67f9966ce43">private_as_action</a>();</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    }</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="comment">// Check if there is any change in the configured address families.</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a4bf3425c9560fce04fa57e547ec26752">ProcessFamilyAttributesConfig</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">config</a>)) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        peer_info.set_configured_families(<a class="code" href="../../d3/d2d/classBgpPeer.html#a392026641ae9d88934f856dc428e1ce5">configured_families_</a>);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#afb2f1db35adabcf17bb623fc247ed3a7">TriggerPrefixLimitCheck</a>();</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    }</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="comment">// Note that the state machine would have been stopped via SetAdminDown</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="comment">// if admin down was set to true above.  Further, it&#39;s not necessary to</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="comment">// clear the peer if it&#39;s already admin down.</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordflow">if</span> (!admin_down_changed &amp;&amp; !<a class="code" href="../../d3/d2d/classBgpPeer.html#a018e5430f3a5941f6c44c6b047cbac4b">admin_down_</a> &amp;&amp; <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a>) {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(Config, <span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                     <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>,</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                     <span class="stringliteral">&quot;Session cleared due to configuration change&quot;</span>);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a62e09087183a4b4bbe3bcfb7df9f9d37">Clear</a>(<a class="code" href="../../de/d90/structBgpProto_1_1Notification.html#a76086aadc422e3c1293a96dbff2f4242a0fc2ac3d3bf4781aae57fe2350735b01">BgpProto::Notification::OtherConfigChange</a>);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="comment">// Send the UVE as appropriate.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (admin_down_changed || <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">clear_session</a>) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a6eba769ad71a0a49b13ee82e72915f1a">StopPrefixLimitIdleTimer</a>();</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a798072845d07ac98223db93d44ac3387">BGPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    }</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;}</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a3506e76496faf7d161ac6970c34ce08f"> 1162</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a3506e76496faf7d161ac6970c34ce08f">BgpPeer::ClearConfig</a>() {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a3b2252c68f950ba662ddf8e8c6aca614">config_</a> = NULL;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;}</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#afc5dcd5327183690ee022abea6c56bfa"> 1167</a></span>&#160;<a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#afc5dcd5327183690ee022abea6c56bfa">BgpPeer::deleter</a>() {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a7dde8892a9cfa640966daa3779158101">deleter_</a>.get();</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;}</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment">// Check if the given address family has been negotiated with the peer.</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#adce95c79428ec1f1cec2bed3be5e0921"> 1174</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#adce95c79428ec1f1cec2bed3be5e0921">BgpPeer::IsFamilyNegotiated</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family) {</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">// Bail if the family is not configured locally.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#af8eb2a2278be678e35e74bab505be298">LookupFamily</a>(family))</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="comment">// Check if the peer advertised it in his Open message.</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    uint16_t afi;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    uint8_t safi;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    tie(afi, safi) = <a class="code" href="../../d4/dc3/classBgpAf.html#a9cbc6441473fd1b787c786d677e66b8e">BgpAf::FamilyToAfiSafi</a>(family);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a0b70797d50f8e65dd91cc933cdcae829">MpNlriAllowed</a>(afi, safi);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;}</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">// Release resources for a peer that is going to be deleted.</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ad2a293f4a60dfffc66cd158b68d4bbb3"> 1187</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ad2a293f4a60dfffc66cd158b68d4bbb3">BgpPeer::PostCloseRelease</a>() {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#af5c38ac16b6ccedf8bff763258bc3a2b">index_</a> != -1) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a3ee7eec1ab55e08858fabf8eb658eaa6">UnregisterPeer</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#af5c38ac16b6ccedf8bff763258bc3a2b">index_</a> = -1;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    }</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <a class="code" href="../../d9/d81/classTimerManager.html#ab91db5e3454ac9f7941a67a3335e3743">TimerManager::DeleteTimer</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#adae7bc0e2cb426238926d3512e636e07">keepalive_timer_</a>);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <a class="code" href="../../d9/d81/classTimerManager.html#ab91db5e3454ac9f7941a67a3335e3743">TimerManager::DeleteTimer</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a00e9cf5b955eb4518efc57aa165aeb90">prefix_limit_idle_timer_</a>);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family = <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4">Address::UNSPEC</a>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            family &lt; <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1932708671ede7d14f0dda2710c51b19">Address::NUM_FAMILIES</a>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            family = <span class="keyword">static_cast&lt;</span><a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a><span class="keyword">&gt;</span>(family + 1)) {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <a class="code" href="../../d9/d81/classTimerManager.html#ab91db5e3454ac9f7941a67a3335e3743">TimerManager::DeleteTimer</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2c469ffda39e3c510ec0ff5e41ad186d">eor_send_timer_</a>[family]);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <a class="code" href="../../d9/d81/classTimerManager.html#ab91db5e3454ac9f7941a67a3335e3743">TimerManager::DeleteTimer</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#aca40f9fa6ac0e1d9e91bd1968289bad3">eor_receive_timer_</a>[family]);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;}</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">// IsReady</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">// Check whether this peer is up and ready</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a4a04145f6f6dfbc0bff82cbfb0d1fd67"> 1207</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a4a04145f6f6dfbc0bff82cbfb0d1fd67">BgpPeer::IsReady</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;get_state() == <a class="code" href="../../d0/dc5/classStateMachine.html#a8ec52ec2ac33298c4ee7fafc13a4bc70a18fd9a8aca1252c7c0be04f0aa464c14">StateMachine::ESTABLISHED</a>;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;}</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160; </div>
<div class="line"><a name="l01211"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a010fbb84889be26a27be10b4c5158ef8"> 1211</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a010fbb84889be26a27be10b4c5158ef8">BgpPeer::IsXmppPeer</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a9ee4b134fd38ef29913828a1c004b723"> 1215</a></span>&#160;uint32_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a9ee4b134fd38ef29913828a1c004b723">BgpPeer::local_bgp_identifier</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="keywordflow">return</span> ntohl(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3acf24b370055bcfb818a85b1af598b6">local_bgp_id_</a>);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;}</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a530cf05306c8304e4e1729074977f43c"> 1219</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a530cf05306c8304e4e1729074977f43c">BgpPeer::local_bgp_identifier_string</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a>(ntohl(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3acf24b370055bcfb818a85b1af598b6">local_bgp_id_</a>)).to_string();</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;}</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; </div>
<div class="line"><a name="l01223"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a87083f0e72327048e783de2a425547cb"> 1223</a></span>&#160;uint32_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a87083f0e72327048e783de2a425547cb">BgpPeer::bgp_identifier</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">return</span> ntohl(<a class="code" href="../../d3/d2d/classBgpPeer.html#a68bd7f909a3873fb16e0ff9006435465">peer_bgp_id_</a>);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;}</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ae90027428ee465500a28c240e4acaa8c"> 1227</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ae90027428ee465500a28c240e4acaa8c">BgpPeer::bgp_identifier_string</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a>(ntohl(<a class="code" href="../../d3/d2d/classBgpPeer.html#a68bd7f909a3873fb16e0ff9006435465">peer_bgp_id_</a>)).to_string();</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;}</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a46e607fef94d156b8dcd846435ad59ec"> 1231</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a46e607fef94d156b8dcd846435ad59ec">BgpPeer::transport_address_string</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">TcpSession::Endpoint</a> <a class="code" href="../../d3/d2d/classBgpPeer.html#a3d1ce042860a05573a019d2915d18c82">endpoint</a>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    ostringstream oss;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>)</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a3d1ce042860a05573a019d2915d18c82">endpoint</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#aad9581939723edb82291a3ef635f4ae7">remote_endpoint</a>();</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    oss &lt;&lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a3d1ce042860a05573a019d2915d18c82">endpoint</a>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">return</span> oss.str();</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;}</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aa01a377c3b7bc0bbe7c1b054918a0231"> 1240</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#aa01a377c3b7bc0bbe7c1b054918a0231">BgpPeer::gateway_address_string</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[family])</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <span class="keywordflow">return</span> string();</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[family]-&gt;gateway_address.to_string();</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;}</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment">// Customized close routing for BgpPeers.</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">// Reset all stored capabilities information and cancel outstanding timers.</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a182ee51061a14b2e861217d3a8b9f88a"> 1251</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a182ee51061a14b2e861217d3a8b9f88a">BgpPeer::CustomClose</a>() {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a5b43b5b05fe0fcce645e4d58b6682b81">ResetCapabilities</a>();</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#adae7bc0e2cb426238926d3512e636e07">keepalive_timer_</a>-&gt;<a class="code" href="../../dc/dea/classTimer.html#a18a9ec123397a973c72243c8372c237f">Cancel</a>();</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family = <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4">Address::UNSPEC</a>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            family &lt; <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1932708671ede7d14f0dda2710c51b19">Address::NUM_FAMILIES</a>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            family = <span class="keyword">static_cast&lt;</span><a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a><span class="keyword">&gt;</span>(family + 1)) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a2c469ffda39e3c510ec0ff5e41ad186d">eor_send_timer_</a>[family]-&gt;<a class="code" href="../../dc/dea/classTimer.html#a18a9ec123397a973c72243c8372c237f">Cancel</a>();</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#aca40f9fa6ac0e1d9e91bd1968289bad3">eor_receive_timer_</a>[family]-&gt;<a class="code" href="../../dc/dea/classTimer.html#a18a9ec123397a973c72243c8372c237f">Cancel</a>();</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    }</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsInDeleteState())</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a3925dbab46e9133879f0410ec889341b">DeleteRTargets</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ac7583398387bd7e3a853607a932158e1">local_autonomous_system</a>());</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;}</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment">// Close this peer by closing all of it&#39;s RIBs.</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a357a8d467ed57bc7f11390afd26aa830"> 1269</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a357a8d467ed57bc7f11390afd26aa830">BgpPeer::Close</a>(<span class="keywordtype">bool</span> graceful) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">send_ready_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">membership_req_pending_</a> &amp;&amp; !<a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsMembershipInUse()) {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d9/df2/http__client_8h.html#a5667b805d857c6d28f83f6038a0272d3">Event</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>, <span class="stringliteral">&quot;Close procedure deferred&quot;</span>);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a525e1f8e0acbf5402c491c122d3269f9">defer_close_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <span class="comment">// Note down non-graceful closures. Once a close is non-graceful,</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="comment">// it shall remain as non-graceful.</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ac2dc047bb6d7480e8447744cf0e74bc1">graceful_close_</a> &amp;= graceful;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>-&gt;Close(graceful);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;}</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ae56b523bffe4e0369618906925db1df5"> 1285</a></span>&#160;<a class="code" href="../../da/d00/classIPeerClose.html">IPeerClose</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#ae56b523bffe4e0369618906925db1df5">BgpPeer::peer_close</a>() {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>.get();</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;}</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a5ee3c15e76d1ea9c66b87fac6779a2c6"> 1289</a></span>&#160;<a class="code" href="../../da/d00/classIPeerClose.html">IPeerClose</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#ae56b523bffe4e0369618906925db1df5">BgpPeer::peer_close</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>.get();</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;}</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a5024121f2f13b2b1771a95c2a73020bd"> 1293</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a5024121f2f13b2b1771a95c2a73020bd">BgpPeer::UpdateCloseRouteStats</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family,</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d7/d0c/classBgpPath.html">BgpPath</a> *old_path, uint32_t path_flags)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ae56b523bffe4e0369618906925db1df5">peer_close</a>()-&gt;<a class="code" href="../../da/d00/classIPeerClose.html#ade0b5761ba130a6ade69f2b9237d69cf">UpdateRouteStats</a>(family, old_path, path_flags);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;}</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e"> 1298</a></span>&#160;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html">IPeerDebugStats</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">BgpPeer::peer_stats</a>() {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>.get();</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;}</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a4df81ef6af7332b3128169eaa4027069"> 1302</a></span>&#160;<span class="keyword">const</span> <a class="code" href="../../d0/d3f/classIPeerDebugStats.html">IPeerDebugStats</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">BgpPeer::peer_stats</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>.get();</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;}</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a62e09087183a4b4bbe3bcfb7df9f9d37"> 1306</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a62e09087183a4b4bbe3bcfb7df9f9d37">BgpPeer::Clear</a>(<span class="keywordtype">int</span> subcode) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>, <span class="stringliteral">&quot;bgp::StateMachine&quot;</span>);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;Shutdown(subcode);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;}</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment">// Check whether this peer has been marked for deletion from configuration</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a4cb7f0c4ea1d54f1ed05ad2418b974f3"> 1314</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a4cb7f0c4ea1d54f1ed05ad2418b974f3">BgpPeer::IsDeleted</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a7dde8892a9cfa640966daa3779158101">deleter_</a>-&gt;IsDeleted();</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;}</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; </div>
<div class="line"><a name="l01318"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a1c492e9da62a80d4d064154576528fac"> 1318</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a1c492e9da62a80d4d064154576528fac">BgpPeer::IsInGRTimerWaitState</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsInGRTimerWaitState();</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a4443ace9ba66f9c96c4bb37166bfc324"> 1322</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a4443ace9ba66f9c96c4bb37166bfc324">BgpPeer::IsCloseInProgress</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>, <span class="stringliteral">&quot;bgp::StateMachine&quot;</span>);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="comment">// trigger is set only after defer_close is reset</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    assert(!(<a class="code" href="../../d3/d2d/classBgpPeer.html#a525e1f8e0acbf5402c491c122d3269f9">defer_close_</a> &amp;&amp; <a class="code" href="../../d3/d2d/classBgpPeer.html#a776f37f2ee75907d1dfc806995404184">trigger_</a>.<a class="code" href="../../d3/d5f/classTaskTrigger.html#a3210a7b35d6a63583e2fb305f26b91ba">IsSet</a>()));</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a525e1f8e0acbf5402c491c122d3269f9">defer_close_</a> || <a class="code" href="../../d3/d2d/classBgpPeer.html#a776f37f2ee75907d1dfc806995404184">trigger_</a>.<a class="code" href="../../d3/d5f/classTaskTrigger.html#a3210a7b35d6a63583e2fb305f26b91ba">IsSet</a>() ||</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            (<a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsCloseInProgress() &amp;&amp;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;             !<a class="code" href="../../d3/d2d/classBgpPeer.html#a1c492e9da62a80d4d064154576528fac">IsInGRTimerWaitState</a>());</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;}</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a70ce123e15d80f21acd11bdebff9260d"> 1332</a></span>&#160;<a class="code" href="../../d0/dc5/classStateMachine.html#a8ec52ec2ac33298c4ee7fafc13a4bc70">StateMachine::State</a> <a class="code" href="../../d3/d2d/classBgpPeer.html#a70ce123e15d80f21acd11bdebff9260d">BgpPeer::GetState</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;get_state();</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;}</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a0c4c8832df8bf1227ae289fde48c277e"> 1336</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a0c4c8832df8bf1227ae289fde48c277e">BgpPeer::GetStateName</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;StateName();</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;}</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ab02c6f9d1399c2ed4bfed60234135c36"> 1340</a></span>&#160;<a class="code" href="../../d5/de5/classBgpSession.html">BgpSession</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#ab02c6f9d1399c2ed4bfed60234135c36">BgpPeer::CreateSession</a>() {</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a06cc62ee3c988583a518e66b3da2955c">PrefixLimitIdleTimerRunning</a>())</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#adec0acb47c2c37fc42da6896ac752061">session_manager</a>()-&gt;<a class="code" href="../../d1/df7/classBgpSessionManager.html#a54bb4751fb4ba70bec0b7812af6e5280">CreateSession</a>();</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a> == NULL)</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="comment">// Set valid keys, if any, in the socket.</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a32c8021fee01ca20c763462c1ff4ef6a">SetSessionSocketAuthKey</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="../../d5/de5/classBgpSession.html">BgpSession</a> *bgp_session = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d5/de5/classBgpSession.html">BgpSession</a> *<span class="keyword">&gt;</span>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ac653c49c4d028ca2621a1634017d2126">BindLocalEndpoint</a>(bgp_session);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    bgp_session-&gt;<a class="code" href="../../d5/de5/classBgpSession.html#afa411750e22ce2e1caf7ae80d85743b1">set_peer</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">return</span> bgp_session;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;}</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160; </div>
<div class="line"><a name="l01357"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#af80c1c1596c6a3f809ebf15f4f5e58aa"> 1357</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#af80c1c1596c6a3f809ebf15f4f5e58aa">BgpPeer::SetAdminState</a>(<span class="keywordtype">bool</span> down, <span class="keywordtype">int</span> subcode) {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a018e5430f3a5941f6c44c6b047cbac4b">admin_down_</a> == down)</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a018e5430f3a5941f6c44c6b047cbac4b">admin_down_</a> = down;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;SetAdminState(down, subcode);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a018e5430f3a5941f6c44c6b047cbac4b">admin_down_</a>) {</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(Config, <span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                     <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>, <span class="stringliteral">&quot;Session cleared due to admin down&quot;</span>);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;}</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ad2a86222e3132e08e6bbbe96a6c2a4f6"> 1369</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ad2a86222e3132e08e6bbbe96a6c2a4f6">BgpPeer::AcceptSession</a>(<a class="code" href="../../d5/de5/classBgpSession.html">BgpSession</a> *session) {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>-&gt;<a class="code" href="../../d5/de5/classBgpSession.html#afa411750e22ce2e1caf7ae80d85743b1">set_peer</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="comment">// Set valid keys, if any, in the socket.</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a32c8021fee01ca20c763462c1ff4ef6a">SetSessionSocketAuthKey</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="comment">// Set control dscp, if any</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#af3f5ecd5fb352e7354d236973b6001aa">SetSessionSocketOptionDscp</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;PassiveOpen(<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;}</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160; </div>
<div class="line"><a name="l01381"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#af7006c98dad8eb5e1221440d60d41f2c"> 1381</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#af7006c98dad8eb5e1221440d60d41f2c">BgpPeer::Register</a>(<a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table, <span class="keyword">const</span> <a class="code" href="../../d2/d43/structRibExportPolicy.html">RibExportPolicy</a> &amp;policy) {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="comment">// In a highly corner case scenario, GR timer could fire right after a</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="comment">// session comes back up. In that case, CloseManager possibly could still</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="comment">// be using membership manager. Instead of creating a queue of these</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="comment">// register requests until close manager is done processing and process</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="comment">// them later, we could just as well just reset the session.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsMembershipInUse()) {</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(Config, <span class="keyword">this</span>, SandeshLevel::SYS_NOTICE, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                     <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>, <span class="stringliteral">&quot;Session cleared due to GR not ready&quot;</span>);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a357a8d467ed57bc7f11390afd26aa830">Close</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    }</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsMembershipInWait())</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        assert(<a class="code" href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">membership_req_pending_</a> &gt; 0);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <a class="code" href="../../d2/d45/classBgpMembershipManager.html">BgpMembershipManager</a> *membership_mgr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ae1b50989fe8347f00f3acb93e86198cb">membership_mgr</a>();</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">membership_req_pending_</a>++;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    membership_mgr-&gt;<a class="code" href="../../d2/d45/classBgpMembershipManager.html#a5112c7f29e64f9cad6339dc3b6bc87e7">Register</a>(<span class="keyword">this</span>, table, policy);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160; </div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="comment">// Start EndOfRib receive timer.</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ae482ba7c1c0f2f40555ae1e7379508b7">StartEndOfRibReceiveTimer</a>(table-&gt;<a class="code" href="../../d0/def/classBgpTable.html#ae03997dea3dbab64d82a5403715eaa1c">family</a>());</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;}</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aca8a10a2d87fba1d8fa5dca1459a3ead"> 1403</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#af7006c98dad8eb5e1221440d60d41f2c">BgpPeer::Register</a>(<a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table) {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsMembershipInUse()) {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(Config, <span class="keyword">this</span>, SandeshLevel::SYS_NOTICE, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                     <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>, <span class="stringliteral">&quot;Session cleared due to GR not ready&quot;</span>);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a357a8d467ed57bc7f11390afd26aa830">Close</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    }</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160; </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;IsMembershipInWait())</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        assert(<a class="code" href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">membership_req_pending_</a> &gt; 0);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <a class="code" href="../../d2/d45/classBgpMembershipManager.html">BgpMembershipManager</a> *membership_mgr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ae1b50989fe8347f00f3acb93e86198cb">membership_mgr</a>();</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    membership_mgr-&gt;<a class="code" href="../../d2/d45/classBgpMembershipManager.html#a25559126009032fdeeddd99d0e1df407">RegisterRibIn</a>(<span class="keyword">this</span>, table);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160; </div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="comment">// Start EndOfRib receive timer.</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ae482ba7c1c0f2f40555ae1e7379508b7">StartEndOfRibReceiveTimer</a>(table-&gt;<a class="code" href="../../d0/def/classBgpTable.html#ae03997dea3dbab64d82a5403715eaa1c">family</a>());</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;}</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160; </div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">// Register to tables for negotiated address families.</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">// If the route-target family is negotiated, defer ribout registration</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">// to VPN tables till we receive End-Of-RIB marker for the route-target</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment">// NLRI or till the EndOfRibTimer expires.  This ensures that we do not</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">// start sending VPN routes to the peer till we know what route targets</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment">// the peer is interested in.</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">// Note that we do ribin registration right away even if the route-target</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment">// family is negotiated. This allows received VPN routes to be processed</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">// normally before ribout registration to VPN tables is completed.</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a8ea7652fb2e28ec7087455cc3e6d2b6a"> 1432</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a8ea7652fb2e28ec7087455cc3e6d2b6a">BgpPeer::RegisterAllTables</a>() {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="../../de/ddf/classRoutingInstance.html">RoutingInstance</a> *instance = <a class="code" href="../../d3/d2d/classBgpPeer.html#a14ce206222db976a1296319fb49c6613">GetRoutingInstance</a>();</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d9/df2/http__client_8h.html#a5667b805d857c6d28f83f6038a0272d3">Event</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>, <span class="stringliteral">&quot;Established&quot;</span>);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160; </div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    vector&lt;Address::Family&gt; family_list = list_of</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1d93db3747cf6c75ab622601c30544a0">Address::INET</a>)(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ad786bbe2191d6c8829644e8142499fba">Address::INETMPLS</a>)(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa474968a53fad182e1b6340dd2eb80fc">Address::INET6</a>);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    BOOST_FOREACH(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family, family_list) {</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#adce95c79428ec1f1cec2bed3be5e0921">IsFamilyNegotiated</a>(family))</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table = instance-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(family);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a883486a15a9c3f619896a5c4e96dbeb6">BGP_LOG_PEER_TABLE</a>(<span class="keyword">this</span>, SandeshLevel::SYS_DEBUG, <a class="code" href="../../d1/d1a/bgp__log_8h.html#acdca7f274a30c6a20ed5b0d96adf52d9">BGP_LOG_FLAG_TRACE</a>,</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                           table, <span class="stringliteral">&quot;Register peer with the table&quot;</span>);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#af7006c98dad8eb5e1221440d60d41f2c">Register</a>(table, <a class="code" href="../../d3/d2d/classBgpPeer.html#a64601f208abf0f1bdb212ebb9d92dcdf">BuildRibExportPolicy</a>(family));</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordflow">if</span> (((<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-client&quot;</span>) ||</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-server&quot;</span>)) &amp;&amp;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        (instance-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a48f5f305d63c857cf5b774043c3355f5">routing_instance_vxlan</a>() != <span class="stringliteral">&quot;&quot;</span>)) {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <a class="code" href="../../d2/d72/classRoutingInstanceMgr.html">RoutingInstanceMgr</a> *mgr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>()-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a43eb0f3a32d47b86eb7df4713bbb89a9">routing_instance_mgr</a>();</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        <span class="keywordflow">if</span> (mgr != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            <a class="code" href="../../de/ddf/classRoutingInstance.html">RoutingInstance</a> *vxlan_ri =</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                mgr-&gt;<a class="code" href="../../d2/d72/classRoutingInstanceMgr.html#a46ebac8012bd3458e862b6cb5b7f88a5">GetRoutingInstance</a>(instance-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a48f5f305d63c857cf5b774043c3355f5">routing_instance_vxlan</a>());</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            <span class="keywordflow">if</span> (vxlan_ri != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table = vxlan_ri-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a92d4f4ab7dc7f6525846c8f226918325">Address::EVPN</a>);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a883486a15a9c3f619896a5c4e96dbeb6">BGP_LOG_PEER_TABLE</a>(<span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#acdca7f274a30c6a20ed5b0d96adf52d9">BGP_LOG_FLAG_TRACE</a>,</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                    table, <span class="stringliteral">&quot;Register ribin for peer with the table&quot;</span>);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#af7006c98dad8eb5e1221440d60d41f2c">Register</a>(table);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            }</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    }</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160; </div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#af2d4c482bf49352ef5460162f7017d96">vpn_tables_registered_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#adce95c79428ec1f1cec2bed3be5e0921">IsFamilyNegotiated</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a>)) {</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a0a48bde677ad31fe55db68ee701d8bf3">RegisterToVpnTables</a>();</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    }</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family = <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table = instance-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(family);</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a883486a15a9c3f619896a5c4e96dbeb6">BGP_LOG_PEER_TABLE</a>(<span class="keyword">this</span>, SandeshLevel::SYS_DEBUG, <a class="code" href="../../d1/d1a/bgp__log_8h.html#acdca7f274a30c6a20ed5b0d96adf52d9">BGP_LOG_FLAG_TRACE</a>,</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        table, <span class="stringliteral">&quot;Register peer with the table&quot;</span>);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#af7006c98dad8eb5e1221440d60d41f2c">Register</a>(table, <a class="code" href="../../d3/d2d/classBgpPeer.html#a64601f208abf0f1bdb212ebb9d92dcdf">BuildRibExportPolicy</a>(family));</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    vector&lt;Address::Family&gt; vpn_family_list = list_of</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987abb069c400a63792e38aed961e280c935">Address::INETVPN</a>)(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a94c20c6da3c99af083baf8ae3a7bc186">Address::INET6VPN</a>)(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa3c44729b5b0659bc3627dca7209b231">Address::ERMVPN</a>)(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a92d4f4ab7dc7f6525846c8f226918325">Address::EVPN</a>)</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987abec1c916426a0ed6e2fea0edab67ab79">Address::MVPN</a>);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    BOOST_FOREACH(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> vpn_family, vpn_family_list) {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#adce95c79428ec1f1cec2bed3be5e0921">IsFamilyNegotiated</a>(vpn_family))</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table = instance-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(vpn_family);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a883486a15a9c3f619896a5c4e96dbeb6">BGP_LOG_PEER_TABLE</a>(<span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#acdca7f274a30c6a20ed5b0d96adf52d9">BGP_LOG_FLAG_TRACE</a>,</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            table, <span class="stringliteral">&quot;Register ribin for peer with the table&quot;</span>);</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#af7006c98dad8eb5e1221440d60d41f2c">Register</a>(table);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    }</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;}</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="keyword">const</span> vector&lt;Address::Family&gt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">BgpPeer::supported_families_</a> = list_of</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1d93db3747cf6c75ab622601c30544a0">Address::INET</a>)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ad786bbe2191d6c8829644e8142499fba">Address::INETMPLS</a>)</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987abb069c400a63792e38aed961e280c935">Address::INETVPN</a>)</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a92d4f4ab7dc7f6525846c8f226918325">Address::EVPN</a>)</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a>)</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa3c44729b5b0659bc3627dca7209b231">Address::ERMVPN</a>)</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987abec1c916426a0ed6e2fea0edab67ab79">Address::MVPN</a>)</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa474968a53fad182e1b6340dd2eb80fc">Address::INET6</a>)</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a94c20c6da3c99af083baf8ae3a7bc186">Address::INET6VPN</a>);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160; </div>
<div class="line"><a name="l01502"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a8cd1bedb5b622944a0505ea8010350d2"> 1502</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a8cd1bedb5b622944a0505ea8010350d2">BgpPeer::SendOpen</a>(<a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *session) {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <a class="code" href="../../d1/d38/structBgpProto_1_1OpenMessage.html">BgpProto::OpenMessage</a> openmsg;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    openmsg.<a class="code" href="../../d1/d38/structBgpProto_1_1OpenMessage.html#a26c203d47737e778882fb75d50ecb40e">as_num</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a> &gt; 0xffff ? <a class="code" href="../../db/d4e/bgp__common_8h.html#a3f7cf820fc365a92523b26d0dc0831cb">AS_TRANS</a> : <a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a>;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    openmsg.<a class="code" href="../../d1/d38/structBgpProto_1_1OpenMessage.html#a609025987601cbb52aac6276866fe92f">holdtime</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;GetConfiguredHoldTime();</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    openmsg.<a class="code" href="../../d1/d38/structBgpProto_1_1OpenMessage.html#abdcb80e6d44362e4540fcd53e509c352">identifier</a> = ntohl(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3acf24b370055bcfb818a85b1af598b6">local_bgp_id_</a>);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <a class="code" href="../../d1/dcc/structBgpProto_1_1OpenMessage_1_1OptParam.html">BgpProto::OpenMessage::OptParam</a> *opt_param =</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        <span class="keyword">new</span> <a class="code" href="../../d1/dcc/structBgpProto_1_1OpenMessage_1_1OptParam.html">BgpProto::OpenMessage::OptParam</a>;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160; </div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint8_t cap_mp[][4] = {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        { 0, (uint8_t) <a class="code" href="../../d4/dc3/classBgpAf.html#a9dce2de0c64040ff04fceeb08d0eba35">BgpAf::FamilyToAfi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[0]), 0,</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;             <a class="code" href="../../d4/dc3/classBgpAf.html#ab16718e60776df3b918c692f4dc079fe">BgpAf::FamilyToSafi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[0]) },</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        { 0, (uint8_t) <a class="code" href="../../d4/dc3/classBgpAf.html#a9dce2de0c64040ff04fceeb08d0eba35">BgpAf::FamilyToAfi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[1]), 0,</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;             <a class="code" href="../../d4/dc3/classBgpAf.html#ab16718e60776df3b918c692f4dc079fe">BgpAf::FamilyToSafi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[1]) },</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        { 0, (uint8_t) <a class="code" href="../../d4/dc3/classBgpAf.html#a9dce2de0c64040ff04fceeb08d0eba35">BgpAf::FamilyToAfi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[2]), 0,</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;             <a class="code" href="../../d4/dc3/classBgpAf.html#ab16718e60776df3b918c692f4dc079fe">BgpAf::FamilyToSafi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[2]) },</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        { 0, (uint8_t) <a class="code" href="../../d4/dc3/classBgpAf.html#a9dce2de0c64040ff04fceeb08d0eba35">BgpAf::FamilyToAfi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[3]), 0,</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;             <a class="code" href="../../d4/dc3/classBgpAf.html#ab16718e60776df3b918c692f4dc079fe">BgpAf::FamilyToSafi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[3]) },</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        { 0, (uint8_t) <a class="code" href="../../d4/dc3/classBgpAf.html#a9dce2de0c64040ff04fceeb08d0eba35">BgpAf::FamilyToAfi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[4]), 0,</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;             <a class="code" href="../../d4/dc3/classBgpAf.html#ab16718e60776df3b918c692f4dc079fe">BgpAf::FamilyToSafi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[4]) },</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        { 0, (uint8_t) <a class="code" href="../../d4/dc3/classBgpAf.html#a9dce2de0c64040ff04fceeb08d0eba35">BgpAf::FamilyToAfi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[5]), 0,</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;             <a class="code" href="../../d4/dc3/classBgpAf.html#ab16718e60776df3b918c692f4dc079fe">BgpAf::FamilyToSafi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[5]) },</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        { 0, (uint8_t) <a class="code" href="../../d4/dc3/classBgpAf.html#a9dce2de0c64040ff04fceeb08d0eba35">BgpAf::FamilyToAfi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[6]), 0,</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;             <a class="code" href="../../d4/dc3/classBgpAf.html#ab16718e60776df3b918c692f4dc079fe">BgpAf::FamilyToSafi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[6]) },</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        { 0, (uint8_t) <a class="code" href="../../d4/dc3/classBgpAf.html#a9dce2de0c64040ff04fceeb08d0eba35">BgpAf::FamilyToAfi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[7]), 0,</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;             <a class="code" href="../../d4/dc3/classBgpAf.html#ab16718e60776df3b918c692f4dc079fe">BgpAf::FamilyToSafi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[7]) },</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        { 0, (uint8_t) <a class="code" href="../../d4/dc3/classBgpAf.html#a9dce2de0c64040ff04fceeb08d0eba35">BgpAf::FamilyToAfi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[8]), 0,</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;             <a class="code" href="../../d4/dc3/classBgpAf.html#ab16718e60776df3b918c692f4dc079fe">BgpAf::FamilyToSafi</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[8]) },</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    };</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a7af00c325d899f484e330033cb81caf2">FamilyToCapabilityMap</a> family_to_cap_map = map_list_of</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[0], cap_mp[0])</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[1], cap_mp[1])</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[2], cap_mp[2])</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[3], cap_mp[3])</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[4], cap_mp[4])</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[5], cap_mp[5])</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[6], cap_mp[6])</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[7], cap_mp[7])</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">supported_families_</a>[8], cap_mp[8]);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160; </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="comment">// Add capabilities for configured address families.</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    BOOST_FOREACH(<span class="keyword">const</span> FamilyToCapabilityMap::value_type &amp;val,</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        family_to_cap_map) {</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#af8eb2a2278be678e35e74bab505be298">LookupFamily</a>(val.first))</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <a class="code" href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html">BgpProto::OpenMessage::Capability</a> *cap =</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;            <span class="keyword">new</span> <a class="code" href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html">BgpProto::OpenMessage::Capability</a>(</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                <a class="code" href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html#a46605c45103217eea00915e432cf1eaaab17a95991b0c5d91b1df2990d0f700b5">BgpProto::OpenMessage::Capability::MpExtension</a>, val.second, 4);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        opt_param-&gt;<a class="code" href="../../d1/dcc/structBgpProto_1_1OpenMessage_1_1OptParam.html#adfceab5b96ee15533d925c4ff5077af4">capabilities</a>.push_back(cap);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    }</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a25823685d85a4ba486aa69412427cc27">enable_4byte_as</a>()) {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        uint32_t asn = ntohl(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a>);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        <a class="code" href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html">BgpProto::OpenMessage::Capability</a> *cap =</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                <span class="keyword">new</span> <a class="code" href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html">BgpProto::OpenMessage::Capability</a>(</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                    <a class="code" href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html#a46605c45103217eea00915e432cf1eaaaaf7b4a7d7bc307e710decb6842e58daf">BgpProto::OpenMessage::Capability::AS4Support</a>,</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                    (<span class="keyword">const</span> uint8_t *)(&amp;asn), 4);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        opt_param-&gt;<a class="code" href="../../d1/dcc/structBgpProto_1_1OpenMessage_1_1OptParam.html#adfceab5b96ee15533d925c4ff5077af4">capabilities</a>.push_back(cap);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>-&gt;AddGRCapabilities(opt_param);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>-&gt;AddLLGRCapabilities(opt_param);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordflow">if</span> (opt_param-&gt;<a class="code" href="../../d1/dcc/structBgpProto_1_1OpenMessage_1_1OptParam.html#adfceab5b96ee15533d925c4ff5077af4">capabilities</a>.size()) {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        openmsg.<a class="code" href="../../d1/d38/structBgpProto_1_1OpenMessage.html#af5aba5010e43452ba2fcfcf0911fede9">opt_params</a>.push_back(opt_param);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <span class="keyword">delete</span> opt_param;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    }</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    uint8_t data[256];</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordtype">int</span> result = <a class="code" href="../../d2/d4b/classBgpProto.html#ac8662f1bc2628e1297105bbabcf4e94c">BgpProto::Encode</a>(&amp;openmsg, data, <span class="keyword">sizeof</span>(data));</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    assert(result &gt; <a class="code" href="../../d2/d4b/classBgpProto.html#a35267d69369befe457dfffa9dfcbec74">BgpProto::kMinMessageSize</a>);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                 <a class="code" href="../../d1/d1a/bgp__log_8h.html#af9b1c09de0cc94078c7505280dcfb639">BGP_PEER_DIR_OUT</a>, <span class="stringliteral">&quot;Open &quot;</span>  &lt;&lt; openmsg.<a class="code" href="../../d1/d38/structBgpProto_1_1OpenMessage.html#af47646925381a271aad9237c58333937">ToString</a>());</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, result, NULL);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a5f5f83c2101c9ad27235f146a9899f23">inc_tx_open</a>();</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;}</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a6a58c253a2a2fb3477b1d1d85a14101c"> 1578</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a6a58c253a2a2fb3477b1d1d85a14101c">BgpPeer::SendKeepalive</a>(<span class="keywordtype">bool</span> from_timer) {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">spin_mutex_</a>);</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160; </div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="comment">// Bail if there&#39;s no session for the peer anymore.</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>)</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160; </div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <a class="code" href="../../da/d15/structBgpProto_1_1Keepalive.html">BgpProto::Keepalive</a> msg;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    uint8_t data[<a class="code" href="../../d2/d4b/classBgpProto.html#a35267d69369befe457dfffa9dfcbec74">BgpProto::kMinMessageSize</a>];</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="keywordtype">int</span> result = <a class="code" href="../../d2/d4b/classBgpProto.html#ac8662f1bc2628e1297105bbabcf4e94c">BgpProto::Encode</a>(&amp;msg, data, <span class="keyword">sizeof</span>(data));</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    assert(result == <a class="code" href="../../d2/d4b/classBgpProto.html#a35267d69369befe457dfffa9dfcbec74">BgpProto::kMinMessageSize</a>);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <a class="code" href="../../de/dcb/load__balance_8h.html#a1d127017fb298b889f4ba24752d08b8e">SandeshLevel::type</a> log_level = from_timer ? <a class="code" href="../../de/d75/classSandesh.html#a43a495eada28d343bab14c2eb021b327">Sandesh::LoggingUtLevel</a>() :</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                                                SandeshLevel::SYS_INFO;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, log_level, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>,</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                 <a class="code" href="../../d1/d1a/bgp__log_8h.html#af9b1c09de0cc94078c7505280dcfb639">BGP_PEER_DIR_OUT</a>, <span class="stringliteral">&quot;Keepalive&quot;</span>);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">send_ready_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, result, NULL);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#afbaea4830890a359cfd3075fbfd789cf">inc_tx_keepalive</a>();</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;}</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"><a class="line" href="../../db/d6b/bgp__peer_8cc.html#af708dde1180c231e91c294f8e9a14740"> 1597</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../db/d6b/bgp__peer_8cc.html#af708dde1180c231e91c294f8e9a14740">SkipUpdateSend</a>() {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> init_;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> skip_;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160; </div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordflow">if</span> (init_) <span class="keywordflow">return</span> skip_;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    skip_ = getenv(<span class="stringliteral">&quot;BGP_SKIP_UPDATE_SEND&quot;</span>) != NULL;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    init_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160; </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keywordflow">return</span> skip_;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;}</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160; </div>
<div class="line"><a name="l01609"></a><span class="lineno"><a class="line" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a076ffe7c7bc3c79a858b7028e25507ea"> 1609</a></span>&#160;<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a076ffe7c7bc3c79a858b7028e25507ea">BgpPeer::OriginOverride::OriginOverride</a>(</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                <span class="keyword">const</span> <a class="code" href="../../db/df6/structBgpNeighborConfig_1_1OriginOverrideConfig.html">BgpNeighborConfig::OriginOverrideConfig</a> &amp;config)</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        : origin_override(config.origin_override),</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        origin(<a class="code" href="../../d5/dcf/classBgpAttr.html">BgpAttr</a>::OriginFromString(config.origin)) {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;}</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"><a class="line" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a0e5e95b968e4912c458047a1386d192f"> 1615</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a0e5e95b968e4912c458047a1386d192f">BgpPeer::OriginOverride::operator!=</a>(<span class="keyword">const</span> <a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html">OriginOverride</a> &amp;rhs)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">if</span> (origin_override != rhs.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a6b6be16eb780109f8b5f504ebe53cb34">origin_override</a>) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    }</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160; </div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="comment">// compare origin only if override is set</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="keywordflow">if</span> (origin_override &amp;&amp; origin != rhs.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a9c56683360b67adbbe41750aa3c34b3e">origin</a>) {</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    }</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;}</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160; </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="comment">// Accumulate the message in the update buffer.</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="comment">// Flush the existing buffer if the message can&#39;t fit.</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">// Note that FlushUpdateUnlocked clears the buffer.</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a6c0192118e75aca18d758709197da283">BgpPeer::SendUpdate</a>(<span class="keyword">const</span> uint8_t *msg, <span class="keywordtype">size_t</span> msgsize,</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span> *msg_str) {</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">spin_mutex_</a>);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a56a48fb3b2d12c99f1d1bd53f13c1e23">send_ready</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">buffer_</a>.size() + msgsize &gt; <a class="code" href="../../d3/d2d/classBgpPeer.html#aac75008b7b3f952b6f060680de787c49">buffer_capacity_</a>) {</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a56a48fb3b2d12c99f1d1bd53f13c1e23">send_ready</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a6f630a3bb2239674719bf611b9435757">FlushUpdateUnlocked</a>();</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        assert(<a class="code" href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">buffer_</a>.empty());</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    }</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">buffer_</a>.insert(<a class="code" href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">buffer_</a>.end(), msg, msg + msgsize);</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ab2e4f5d28e8ebf2d5612a3940d62aa7c">inc_tx_update</a>();</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a56a48fb3b2d12c99f1d1bd53f13c1e23">send_ready</a>;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;}</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a6f630a3bb2239674719bf611b9435757"> 1645</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a6f630a3bb2239674719bf611b9435757">BgpPeer::FlushUpdateUnlocked</a>() {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="comment">// Bail if the update buffer is empty.</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">buffer_</a>.empty())</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="comment">// Bail if there&#39;s no session for the peer anymore.</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">buffer_</a>.clear();</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    }</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160; </div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../db/d6b/bgp__peer_8cc.html#af708dde1180c231e91c294f8e9a14740">SkipUpdateSend</a>()) {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">send_ready_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">buffer_</a>.data(), <a class="code" href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">buffer_</a>.size(), NULL);</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">buffer_</a>.clear();</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">send_ready_</a>) {</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#ae8e003de765c518ea9b54da3fb222f42">StartKeepaliveTimerUnlocked</a>();</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a34de40ee21a6231704e4a053dc5839c5">StopKeepaliveTimerUnlocked</a>();</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        }</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">send_ready_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">send_ready_</a>) {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d9/df2/http__client_8h.html#a5667b805d857c6d28f83f6038a0272d3">Event</a>, <span class="keyword">this</span>, SandeshLevel::SYS_DEBUG, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;                     <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>, <span class="stringliteral">&quot;Send blocked&quot;</span>);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    }</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">send_ready_</a>;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;}</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a0a4bd056f757764efe2c0856875e7134"> 1675</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a0a4bd056f757764efe2c0856875e7134">BgpPeer::FlushUpdate</a>() {</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">spin_mutex_</a>);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a6f630a3bb2239674719bf611b9435757">FlushUpdateUnlocked</a>();</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;}</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160; </div>
<div class="line"><a name="l01680"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#abf3b22af254044c4d894f13d5b827eeb"> 1680</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#abf3b22af254044c4d894f13d5b827eeb">BgpPeer::notification</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>-&gt;gr_params().notification();</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;}</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160; </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="comment">// Check if GR Helper mode sould be attempted.</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aeba705d7a3c468fc8f98494b99d3dfe4"> 1685</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#aeba705d7a3c468fc8f98494b99d3dfe4">BgpPeer::AttemptGRHelperMode</a>(<span class="keywordtype">int</span> code, <span class="keywordtype">int</span> subcode)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keywordflow">if</span> (!code)</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160; </div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <span class="keywordflow">if</span> (code == <a class="code" href="../../de/d90/structBgpProto_1_1Notification.html#a8f2d267fef6858fcc3d2b2cc877b002eab8c32e2eb993a67eb9145b20e33081f5">BgpProto::Notification::Cease</a> &amp;&amp;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            (subcode == <a class="code" href="../../de/d90/structBgpProto_1_1Notification.html#a76086aadc422e3c1293a96dbff2f4242a23323e5de4a8bb5bf68c68a2ef8ba06f">BgpProto::Notification::HardReset</a> ||</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;             subcode == <a class="code" href="../../de/d90/structBgpProto_1_1Notification.html#a76086aadc422e3c1293a96dbff2f4242a9b799b265bd6c9e4de6f8ec92a5f7079">BgpProto::Notification::PeerDeconfigured</a>)) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    }</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160; </div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <span class="comment">// If Peer supports Notification (N) bit, then attempt GR-Helper for all</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <span class="comment">// other notifications, not otherwise.</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#abf3b22af254044c4d894f13d5b827eeb">notification</a>();</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;}</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a885046480ba6883c062acb3f7c099e7d"> 1700</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a885046480ba6883c062acb3f7c099e7d">BgpPeer::SendNotification</a>(<a class="code" href="../../d5/de5/classBgpSession.html">BgpSession</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>,</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="keywordtype">int</span> code, <span class="keywordtype">int</span> subcode, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;data) {</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">spin_mutex_</a>);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>-&gt;<a class="code" href="../../d5/de5/classBgpSession.html#a5447543863ba268c9416f9145e8d20ec">SendNotification</a>(code, subcode, data);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;set_last_notification_out(code, subcode, data);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a7f7f98cd813eef8642881c62c8e88852">inc_tx_notification</a>();</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;}</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aa1159c7e6920e052779c40281158e537"> 1708</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#aa1159c7e6920e052779c40281158e537">BgpPeer::SetCapabilities</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d38/structBgpProto_1_1OpenMessage.html">BgpProto::OpenMessage</a> *msg) {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a68bd7f909a3873fb16e0ff9006435465">peer_bgp_id_</a> = htonl(msg-&gt;<a class="code" href="../../d1/d38/structBgpProto_1_1OpenMessage.html#abdcb80e6d44362e4540fcd53e509c352">identifier</a>);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">capabilities_</a>.clear();</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    vector&lt;BgpProto::OpenMessage::OptParam *&gt;::const_iterator it;</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">for</span> (it = msg-&gt;<a class="code" href="../../d1/d38/structBgpProto_1_1OpenMessage.html#af5aba5010e43452ba2fcfcf0911fede9">opt_params</a>.begin(); it &lt; msg-&gt;opt_params.end(); ++it) {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">capabilities_</a>.insert(<a class="code" href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">capabilities_</a>.end(), (*it)-&gt;capabilities.begin(),</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                             (*it)-&gt;capabilities.end());</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        (*it)-&gt;capabilities.clear();</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    }</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160; </div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a050d412214c666daa6c3be3353ae4b82">as4_supported_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a25823685d85a4ba486aa69412427cc27">enable_4byte_as</a>()) {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        vector&lt;BgpProto::OpenMessage::Capability *&gt;::iterator c_it;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <span class="keywordflow">for</span> (c_it = <a class="code" href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">capabilities_</a>.begin(); c_it &lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">capabilities_</a>.end(); ++c_it) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            <span class="keywordflow">if</span> ((*c_it)-&gt;code ==<a class="code" href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html#a46605c45103217eea00915e432cf1eaaaaf7b4a7d7bc307e710decb6842e58daf">BgpProto::OpenMessage::Capability::AS4Support</a>) {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#a050d412214c666daa6c3be3353ae4b82">as4_supported_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            }</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        }</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    BgpPeerInfoData peer_info;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    peer_info.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    peer_info.set_peer_id(<a class="code" href="../../d3/d2d/classBgpPeer.html#a68bd7f909a3873fb16e0ff9006435465">peer_bgp_id_</a>);</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160; </div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    vector&lt;string&gt; families;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    vector&lt;BgpProto::OpenMessage::Capability *&gt;::iterator cap_it;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="keywordflow">for</span> (cap_it = <a class="code" href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">capabilities_</a>.begin(); cap_it &lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">capabilities_</a>.end();</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;         ++cap_it) {</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        <span class="keywordflow">if</span> ((*cap_it)-&gt;code != <a class="code" href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html#a46605c45103217eea00915e432cf1eaaab17a95991b0c5d91b1df2990d0f700b5">BgpProto::OpenMessage::Capability::MpExtension</a>)</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        uint8_t *data = (*cap_it)-&gt;capability.data();</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        uint16_t afi = <a class="code" href="../../d1/d66/parse__object_8h.html#a7523283d5d39b27b9f1409e28887d1f0">get_value</a>(data, 2);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        uint8_t safi = <a class="code" href="../../d1/d66/parse__object_8h.html#a7523283d5d39b27b9f1409e28887d1f0">get_value</a>(data + 3, 1);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family = <a class="code" href="../../d4/dc3/classBgpAf.html#ae2c45f2bc1070881b2c7910c5204daf1">BgpAf::AfiSafiToFamily</a>(afi, safi);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        <span class="keywordflow">if</span> (family == <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4">Address::UNSPEC</a>) {</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            families.push_back(<a class="code" href="../../d4/dc3/classBgpAf.html#af6f40be8104520509a4c3b49cc5e65f7">BgpAf::ToString</a>(afi, safi));</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;            families.push_back(<a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family));</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        }</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    }</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    peer_info.set_families(families);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160; </div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ab600afcbe2f1898e69f8f8755a2697b4">negotiated_families_</a>.clear();</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4">Address::UNSPEC</a>; idx &lt; <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1932708671ede7d14f0dda2710c51b19">Address::NUM_FAMILIES</a>; ++idx) {</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[idx])</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family = <span class="keyword">static_cast&lt;</span><a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a><span class="keyword">&gt;</span>(idx);</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        uint16_t afi;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        uint8_t safi;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        tie(afi, safi) = <a class="code" href="../../d4/dc3/classBgpAf.html#a9cbc6441473fd1b787c786d677e66b8e">BgpAf::FamilyToAfiSafi</a>(family);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a0b70797d50f8e65dd91cc933cdcae829">MpNlriAllowed</a>(afi, safi))</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ab600afcbe2f1898e69f8f8755a2697b4">negotiated_families_</a>.push_back(<a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family));</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    }</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    sort(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab600afcbe2f1898e69f8f8755a2697b4">negotiated_families_</a>.begin(), <a class="code" href="../../d3/d2d/classBgpPeer.html#ab600afcbe2f1898e69f8f8755a2697b4">negotiated_families_</a>.end());</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    peer_info.set_negotiated_families(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab600afcbe2f1898e69f8f8755a2697b4">negotiated_families_</a>);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="comment">// Process GR/LLGR capabilities and close non-gracefully if any ongoing GR</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="comment">// needs be aborted.</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>-&gt;SetGRCapabilities(&amp;peer_info)) {</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                     <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>, <span class="stringliteral">&quot;Close non-gracefully&quot;</span>);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a357a8d467ed57bc7f11390afd26aa830">Close</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;}</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="comment">// Reset capabilities stored inside peer structure.</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="comment">// When open message is processed, we directly take the capabilities off the</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">// open message and store inside the peer structure.</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a5b43b5b05fe0fcce645e4d58b6682b81"> 1781</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a5b43b5b05fe0fcce645e4d58b6682b81">BgpPeer::ResetCapabilities</a>() {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <a class="code" href="../../d8/d3c/util_8h.html#a6a5e9319fe8e7bf71605737943de589e">STLDeleteValues</a>(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">capabilities_</a>);</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    BgpPeerInfoData peer_info;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    peer_info.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    vector&lt;string&gt; families = vector&lt;string&gt;();</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    peer_info.set_families(families);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    vector&lt;string&gt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a711413a89c13b031eb6914731a3f40c0">negotiated_families</a> = vector&lt;string&gt;();</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    peer_info.set_negotiated_families(<a class="code" href="../../d3/d2d/classBgpPeer.html#a711413a89c13b031eb6914731a3f40c0">negotiated_families</a>);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    peer_info.set_graceful_restart_families(vector&lt;string&gt;());</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a798072845d07ac98223db93d44ac3387">BGPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;}</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160; </div>
<div class="line"><a name="l01793"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a0b70797d50f8e65dd91cc933cdcae829"> 1793</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a0b70797d50f8e65dd91cc933cdcae829">BgpPeer::MpNlriAllowed</a>(uint16_t afi, uint8_t safi) {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    vector&lt;BgpProto::OpenMessage::Capability *&gt;::iterator it;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="keywordflow">for</span> (it = <a class="code" href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">capabilities_</a>.begin(); it &lt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">capabilities_</a>.end(); ++it) {</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <span class="keywordflow">if</span> ((*it)-&gt;code != <a class="code" href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html#a46605c45103217eea00915e432cf1eaaab17a95991b0c5d91b1df2990d0f700b5">BgpProto::OpenMessage::Capability::MpExtension</a>)</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        uint8_t *data = (*it)-&gt;capability.data();</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        uint16_t af_value = <a class="code" href="../../d1/d66/parse__object_8h.html#a7523283d5d39b27b9f1409e28887d1f0">get_value</a>(data, 2);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        uint8_t safi_value = <a class="code" href="../../d1/d66/parse__object_8h.html#a7523283d5d39b27b9f1409e28887d1f0">get_value</a>(data + 3, 1);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        <span class="keywordflow">if</span> (afi == af_value &amp;&amp; safi == safi_value) {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        }</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    }</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;}</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160; </div>
<div class="line"><a name="l01808"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#addeee4e254b6236de084a1f5b3bffdf0"> 1808</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#addeee4e254b6236de084a1f5b3bffdf0">BgpPeer::Is4ByteAsSupported</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a050d412214c666daa6c3be3353ae4b82">as4_supported_</a>;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;}</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160; </div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> TableT, <span class="keyword">typename</span> PrefixT&gt;</div>
<div class="line"><a name="l01813"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#acd6ad6020f378182ca6072765fa73dc6"> 1813</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#acd6ad6020f378182ca6072765fa73dc6">BgpPeer::ProcessNlri</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family, <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2c">DBRequest::DBOperation</a> oper,</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../db/d34/structBgpMpNlri.html">BgpMpNlri</a> *nlri, <a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> attr, uint32_t flags) {</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    TableT *table = <span class="keyword">static_cast&lt;</span>TableT *<span class="keyword">&gt;</span>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(family));</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    assert(table);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160; </div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">for</span> (vector&lt;BgpProtoPrefix *&gt;::const_iterator it = nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a98a9fe99a10123171fae1faf27f328aa">nlri</a>.begin();</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;         it != nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a98a9fe99a10123171fae1faf27f328aa">nlri</a>.end(); ++it) {</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        PrefixT prefix;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        <a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> new_attr(attr);</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        uint32_t label = 0;</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        uint32_t l3_label = 0;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        <span class="keywordtype">int</span> result = PrefixT::FromProtoPrefix(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>, **it,</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;            (oper == <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45">DBRequest::DB_ENTRY_ADD_CHANGE</a> ? attr.get() : NULL),</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;            family, &amp;prefix, &amp;new_attr, &amp;label, &amp;l3_label);</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="keywordflow">if</span> (result) {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;            <a class="code" href="../../d1/d1a/bgp__log_8h.html#a7e1aa9a8c19a146ca5f1444d8e422b1c">BGP_LOG_PEER_WARNING</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>,</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>,</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                <span class="stringliteral">&quot;MP NLRI parse error for &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family) &lt;&lt; <span class="stringliteral">&quot; route&quot;</span>);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        }</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160; </div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <a class="code" href="../../d7/df9/structDBRequest.html">DBRequest</a> req;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        req.<a class="code" href="../../d7/df9/structDBRequest.html#a54b713cdde96ab6887520e208872ac25">oper</a> = oper;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <span class="keywordflow">if</span> (oper == <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45">DBRequest::DB_ENTRY_ADD_CHANGE</a>) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            req.<a class="code" href="../../d7/df9/structDBRequest.html#ad287a746780e9771d3073c392045d64e">data</a>.reset(<span class="keyword">new</span> <span class="keyword">typename</span> TableT::RequestData(</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                new_attr, flags, label, l3_label, 0));</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        }</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        req.<a class="code" href="../../d7/df9/structDBRequest.html#a94c88f5224b1f8cb6adad61400c970d4">key</a>.reset(<span class="keyword">new</span> <span class="keyword">typename</span> TableT::RequestKey(prefix, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        table-&gt;Enqueue(&amp;req);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    }</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;}</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> PrefixT&gt;</div>
<div class="line"><a name="l01847"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a46117cb926c354a7ca1633cea5f2dd0c"> 1847</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a46117cb926c354a7ca1633cea5f2dd0c">BgpPeer::ProcessNlriBgpaas</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family, <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2c">DBRequest::DBOperation</a> oper,</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../db/d34/structBgpMpNlri.html">BgpMpNlri</a> *nlri, <a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> attr, uint32_t flags) {</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160; </div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <span class="keywordflow">for</span> (vector&lt;BgpProtoPrefix *&gt;::const_iterator it = nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a98a9fe99a10123171fae1faf27f328aa">nlri</a>.begin();</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;         it != nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a98a9fe99a10123171fae1faf27f328aa">nlri</a>.end(); ++it) {</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        PrefixT prefix;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> new_attr(attr);</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        uint32_t label = 0;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        uint32_t l3_label = 0;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="keywordtype">int</span> result = PrefixT::FromProtoPrefix(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>, **it,</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;            (oper == <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45">DBRequest::DB_ENTRY_ADD_CHANGE</a> ? attr.get() : NULL),</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            family, &amp;prefix, &amp;new_attr, &amp;label, &amp;l3_label);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        <span class="keywordflow">if</span> (result) {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;            <a class="code" href="../../d1/d1a/bgp__log_8h.html#a7e1aa9a8c19a146ca5f1444d8e422b1c">BGP_LOG_PEER_WARNING</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>,</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>,</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                <span class="stringliteral">&quot;MP NLRI parse error for  &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family) &lt;&lt; <span class="stringliteral">&quot; route&quot;</span>);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        }</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a8ebfa8e5669acf2ad1f2caa74c83719e">ProcessBgpaas</a>(oper, prefix.addr(), prefix.prefixlen(), new_attr, flags);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;}</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160; </div>
<div class="line"><a name="l01871"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a8ebfa8e5669acf2ad1f2caa74c83719e"> 1871</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a8ebfa8e5669acf2ad1f2caa74c83719e">BgpPeer::ProcessBgpaas</a>(<a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2c">DBRequest::DBOperation</a> oper,</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <a class="code" href="../../d9/d9b/address_8h.html#a7055b8d880410aad1e3ba8c041397b6c">IpAddress</a> addr, uint8_t addr_len, <a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> attr, uint32_t flags) {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160; </div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a48f5f305d63c857cf5b774043c3355f5">routing_instance_vxlan</a>() == <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <a class="code" href="../../d2/d72/classRoutingInstanceMgr.html">RoutingInstanceMgr</a> *mgr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>()-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a43eb0f3a32d47b86eb7df4713bbb89a9">routing_instance_mgr</a>();</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="keywordflow">if</span> (mgr == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    }</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <a class="code" href="../../de/ddf/classRoutingInstance.html">RoutingInstance</a> *vxlan_ri =</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        mgr-&gt;<a class="code" href="../../d2/d72/classRoutingInstanceMgr.html#a46ebac8012bd3458e862b6cb5b7f88a5">GetRoutingInstance</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a48f5f305d63c857cf5b774043c3355f5">routing_instance_vxlan</a>());</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <span class="keywordflow">if</span> (vxlan_ri == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    }</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <a class="code" href="../../da/da4/classEvpnTable.html">EvpnTable</a> *table = <span class="keyword">static_cast&lt;</span><a class="code" href="../../da/da4/classEvpnTable.html">EvpnTable</a> *<span class="keyword">&gt;</span>(vxlan_ri-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a92d4f4ab7dc7f6525846c8f226918325">Address::EVPN</a>));</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <a class="code" href="../../d0/db1/classEvpnPrefix.html">EvpnPrefix</a> prefix_evpn(<a class="code" href="../../dc/d73/classRouteDistinguisher.html#ade18bfe5e6765e02befeed1030941f04">RouteDistinguisher::kZeroRd</a>, addr, addr_len);</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <a class="code" href="../../d7/df9/structDBRequest.html">DBRequest</a> req;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    req.<a class="code" href="../../d7/df9/structDBRequest.html#a54b713cdde96ab6887520e208872ac25">oper</a> = oper;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <span class="keywordflow">if</span> (oper == <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45">DBRequest::DB_ENTRY_ADD_CHANGE</a>) {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        req.<a class="code" href="../../d7/df9/structDBRequest.html#ad287a746780e9771d3073c392045d64e">data</a>.reset(<span class="keyword">new</span> <a class="code" href="../../dc/d08/structBgpTable_1_1RequestData.html">EvpnTable::RequestData</a>(attr, flags, 0, 0, 0));</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        req.<a class="code" href="../../d7/df9/structDBRequest.html#ad287a746780e9771d3073c392045d64e">data</a>.reset(NULL);</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    }</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    req.<a class="code" href="../../d7/df9/structDBRequest.html#a94c88f5224b1f8cb6adad61400c970d4">key</a>.reset(<span class="keyword">new</span> <a class="code" href="../../d1/ded/structEvpnTable_1_1RequestKey.html">EvpnTable::RequestKey</a>(prefix_evpn, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    table-&gt;<a class="code" href="../../d7/df2/classDBTableBase.html#a1b8bb5fe5c7b5e8a65dbca701d5f1c94">Enqueue</a>(&amp;req);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;}</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160; </div>
<div class="line"><a name="l01901"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aa770b49926153162eb259868c21d48ce"> 1901</a></span>&#160;uint32_t <a class="code" href="../../d3/d2d/classBgpPeer.html#aa770b49926153162eb259868c21d48ce">BgpPeer::GetPathFlags</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family,</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/dcf/classBgpAttr.html">BgpAttr</a> *attr)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    uint32_t flags = <a class="code" href="../../d3/d2d/classBgpPeer.html#af1f1b0f23b0f9f1b1587d72bf1635089">resolve_paths_</a> ? <a class="code" href="../../d7/d0c/classBgpPath.html#afb37af7ce888242edf4b96ed03d5ed79ac0c3dbdeb4fb80c6eb6149e6b4806046">BgpPath::ResolveNexthop</a> : 0;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160; </div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="comment">// Check for OriginatorId loop in case we are an RR client.</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a16c7a2791391e99800565214393441cd">peer_type_</a> == <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a0cae037af860ebb2c9546ca55adf5ad7">BgpProto::IBGP</a> &amp;&amp;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#ad60724cd3462c80d1e0c4c5f08afc00f">originator_id</a>().to_ulong() == ntohl(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3acf24b370055bcfb818a85b1af598b6">local_bgp_id_</a>)) {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        flags |= <a class="code" href="../../d7/d0c/classBgpPath.html#afb37af7ce888242edf4b96ed03d5ed79aaf17399d650e5811131cd29b55c4f289">BgpPath::OriginatorIdLooped</a>;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160; </div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="comment">// Check for ClusterList loop in case we are an RR.</span></div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a0cd117a168a3ae68d452897e2a6fdbf9">cluster_id</a>() &amp;&amp; attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#a5d3491fa681985b78302e77796203e8a">cluster_list</a>() &amp;&amp;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;        attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#a5d3491fa681985b78302e77796203e8a">cluster_list</a>()-&gt;<a class="code" href="../../db/d43/classClusterList.html#a7a6bb0c5ac18a0a3b616db78ce445844">cluster_list</a>().<a class="code" href="../../df/d8b/structClusterListSpec.html#a2097c75b28919710e79286c5d4b5d662">ClusterListLoop</a>(</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                                             <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a0cd117a168a3ae68d452897e2a6fdbf9">cluster_id</a>())) {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;        flags |= <a class="code" href="../../d7/d0c/classBgpPath.html#afb37af7ce888242edf4b96ed03d5ed79a79048e45662dd4d34320a9da26233add">BgpPath::ClusterListLooped</a>;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <span class="keywordflow">if</span> (!attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#a14acc99c052a6c803abd70dde5733c61">as_path</a>() &amp;&amp; !attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#ac0122cee8dc0e17c54ac7b6d1a0b141b">aspath_4byte</a>())</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        <span class="keywordflow">return</span> flags;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160; </div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="comment">// Check whether neighbor has appended its AS to the AS_PATH.</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d2d/classBgpPeer.html#a0ab2250b92472afbff2e4f16c3eeba46">PeerType</a>() == <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a4f08aded12df5e7e04ba6af46fa2bf8f">BgpProto::EBGP</a>) &amp;&amp;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;          ((attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#a14acc99c052a6c803abd70dde5733c61">as_path</a>() &amp;&amp; !attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#a14acc99c052a6c803abd70dde5733c61">as_path</a>()-&gt;<a class="code" href="../../d7/dfb/classAsPath.html#a675543f03fbe8170f429b822ade053e3">path</a>().<a class="code" href="../../d6/dbf/structAsPathSpec.html#a666692cc6f20f264124e81d90f34f575">AsLeftMostMatch</a>(</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;          <a class="code" href="../../d3/d2d/classBgpPeer.html#ad22f6021787f7c70c392ede07539806d">peer_as</a>())) || (attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#ac0122cee8dc0e17c54ac7b6d1a0b141b">aspath_4byte</a>() &amp;&amp;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;          !attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#ac0122cee8dc0e17c54ac7b6d1a0b141b">aspath_4byte</a>()-&gt;<a class="code" href="../../d1/dc1/classAsPath4Byte.html#a129d1022be4a4e23e8215a54e87d84aa">path</a>().<a class="code" href="../../dd/d24/structAsPath4ByteSpec.html#abaf94d3cac095176964c5d11cb2ad45d">AsLeftMostMatch</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad22f6021787f7c70c392ede07539806d">peer_as</a>())))) {</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        flags |= <a class="code" href="../../d7/d0c/classBgpPath.html#afb37af7ce888242edf4b96ed03d5ed79a232896abadbc4f28aa116b3ac2b42656">BgpPath::NoNeighborAs</a>;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    }</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160; </div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="comment">// Check for AS_PATH loop.</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    uint8_t max_loop_count = <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[family]-&gt;loop_count;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keywordflow">if</span> (attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#a6d74a61cd19664d09a65caa357a03134">IsAsPathLoop</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">local_as_</a>, max_loop_count))</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        flags |= <a class="code" href="../../d7/d0c/classBgpPath.html#afb37af7ce888242edf4b96ed03d5ed79a9624c9443236273fc196f16bda1c38b6">BgpPath::AsPathLooped</a>;</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="keywordflow">return</span> flags;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;}</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160; </div>
<div class="line"><a name="l01937"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#afc0707e587e735c12107b5bf72b36193"> 1937</a></span>&#160;uint32_t <a class="code" href="../../d3/d2d/classBgpPeer.html#afc0707e587e735c12107b5bf72b36193">BgpPeer::GetLocalPrefFromMed</a>(uint32_t med)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a16c7a2791391e99800565214393441cd">peer_type_</a> != <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a4f08aded12df5e7e04ba6af46fa2bf8f">BgpProto::EBGP</a>)</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#af8fec1c26625ae12122c7f195b20c92c">peer_is_control_node_</a>)</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="keywordflow">if</span> (med == 0)</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <span class="keywordflow">if</span> (med == 100)</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        <span class="keywordflow">return</span> 200;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <span class="keywordflow">if</span> (med == 200)</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        <span class="keywordflow">return</span> 100;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="keywordflow">return</span> numeric_limits&lt;uint32_t&gt;::max() - med;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;}</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160; </div>
<div class="line"><a name="l01951"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aba7ea24955c73d1ba18b400a133b8187"> 1951</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#aba7ea24955c73d1ba18b400a133b8187">BgpPeer::ProcessUpdate</a>(<span class="keyword">const</span> <a class="code" href="../../d2/db2/structBgpProto_1_1Update.html">BgpProto::Update</a> *msg, <span class="keywordtype">size_t</span> msgsize) {</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> attr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ad1c0d588bba7e1d3430187f5b3d2ce0b">attr_db</a>()-&gt;<a class="code" href="../../d6/dd7/classBgpPathAttributeDB.html#a44082a171f6f497d89a5cf77c240c5f6">Locate</a>(msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a05ee4842131545a933e64f27bd4492c6">path_attributes</a>);</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    uint32_t local_pref = <a class="code" href="../../d3/d2d/classBgpPeer.html#afc0707e587e735c12107b5bf72b36193">GetLocalPrefFromMed</a>(attr-&gt;med());</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="keywordflow">if</span> (local_pref) {</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        attr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ad1c0d588bba7e1d3430187f5b3d2ce0b">attr_db</a>()-&gt;<a class="code" href="../../d7/d34/classBgpAttrDB.html#a3b9e04df402e72067e709a518d0ee9eb">ReplaceLocalPreferenceAndLocate</a>(attr.get(),</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            local_pref);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    }</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <span class="comment">// Check if peer is marked to override the route origin attribute</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a>.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a6b6be16eb780109f8b5f504ebe53cb34">origin_override</a>) {</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        attr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ad1c0d588bba7e1d3430187f5b3d2ce0b">attr_db</a>()-&gt;<a class="code" href="../../d7/d34/classBgpAttrDB.html#a775ed2dc85c2800179c6a37dfbdd5fcd">ReplaceOriginAndLocate</a>(attr.get(),</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                                                       <a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a>.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a9c56683360b67adbbe41750aa3c34b3e">origin</a>);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    }</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160; </div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-client&quot;</span>) ||</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-server&quot;</span>)) {</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        attr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ad1c0d588bba7e1d3430187f5b3d2ce0b">attr_db</a>()-&gt;<a class="code" href="../../d7/d34/classBgpAttrDB.html#a63ebbf2ef6550332e61a5fb1387f56ea">ReplaceSubProtocolAndLocate</a>(attr.get(),</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                             <a class="code" href="../../d8/d06/routing__policy__match_8cc.html#aeb341824691080cbdfd773e3492823ec">MatchProtocolToString</a>(<a class="code" href="../../d7/df5/classMatchProtocol.html#ae995dbabc66a0bd5e1d48dbd8f7b090fa7cfd287f3d9c0da62ce27304f73fab2a">MatchProtocol::BGPaaS</a>));</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    uint32_t reach_count = 0, unreach_count = 0;</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <a class="code" href="../../de/ddf/classRoutingInstance.html">RoutingInstance</a> *instance = <a class="code" href="../../d3/d2d/classBgpPeer.html#a14ce206222db976a1296319fb49c6613">GetRoutingInstance</a>();</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a9f4f81ec7c6b110d7033d95318777028">nlri</a>.size() || msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a6a19e09cacd8f5abb908c4bf89f621dd">withdrawn_routes</a>.size()) {</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        <a class="code" href="../../d1/dc4/classInetTable.html">InetTable</a> *table =</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/dc4/classInetTable.html">InetTable</a> *<span class="keyword">&gt;</span>(instance-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1d93db3747cf6c75ab622601c30544a0">Address::INET</a>));</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        <span class="keywordflow">if</span> (!table) {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;            <a class="code" href="../../d1/d1a/bgp__log_8h.html#a65cb8abe5a6f9b5af882e29bab2cfb37">BGP_LOG_WARNING_STR</a>(BgpConfig, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                                <span class="stringliteral">&quot;Cannot find inet table&quot;</span>);</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160; </div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        unreach_count += msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a6a19e09cacd8f5abb908c4bf89f621dd">withdrawn_routes</a>.size();</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        <span class="keywordflow">for</span> (vector&lt;BgpProtoPrefix *&gt;::const_iterator it =</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;             msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a6a19e09cacd8f5abb908c4bf89f621dd">withdrawn_routes</a>.begin(); it != msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a6a19e09cacd8f5abb908c4bf89f621dd">withdrawn_routes</a>.end();</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;             ++it) {</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;            <a class="code" href="../../d3/d22/classIp4Prefix.html">Ip4Prefix</a> prefix;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;            <span class="keywordtype">int</span> result = <a class="code" href="../../d3/d22/classIp4Prefix.html#a6ba2931ee0d2753e8d039f4cf47bb1e0">Ip4Prefix::FromProtoPrefix</a>((**it), &amp;prefix);</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;            <span class="keywordflow">if</span> (result) {</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a7e1aa9a8c19a146ca5f1444d8e422b1c">BGP_LOG_PEER_WARNING</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>,</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>,</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                    <span class="stringliteral">&quot;Withdrawn route parse error for inet route&quot;</span>);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            }</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160; </div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-client&quot;</span>) ||</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-server&quot;</span>)) {</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#a8ebfa8e5669acf2ad1f2caa74c83719e">ProcessBgpaas</a>(<a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2ca9cc4d4d54d396a1fe3ec4eeb38defb9f">DBRequest::DB_ENTRY_DELETE</a>, prefix.<a class="code" href="../../d3/d22/classIp4Prefix.html#a996a5b45fc99f07ca15885b624ced4a6">addr</a>(),</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;                              prefix.<a class="code" href="../../d3/d22/classIp4Prefix.html#a0216429eefdd5b2bdbbe376154cb96d5">prefixlen</a>(), attr, 0);</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; </div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            <a class="code" href="../../d7/df9/structDBRequest.html">DBRequest</a> req;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;            req.<a class="code" href="../../d7/df9/structDBRequest.html#a54b713cdde96ab6887520e208872ac25">oper</a> = <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2ca9cc4d4d54d396a1fe3ec4eeb38defb9f">DBRequest::DB_ENTRY_DELETE</a>;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;            req.<a class="code" href="../../d7/df9/structDBRequest.html#ad287a746780e9771d3073c392045d64e">data</a>.reset(NULL);</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            req.<a class="code" href="../../d7/df9/structDBRequest.html#a94c88f5224b1f8cb6adad61400c970d4">key</a>.reset(<span class="keyword">new</span> <a class="code" href="../../d0/daa/structInetTable_1_1RequestKey.html">InetTable::RequestKey</a>(prefix, <span class="keyword">this</span>));</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;            table-&gt;<a class="code" href="../../d7/df2/classDBTableBase.html#a1b8bb5fe5c7b5e8a65dbca701d5f1c94">Enqueue</a>(&amp;req);</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        }</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160; </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;        uint32_t flags = <a class="code" href="../../d3/d2d/classBgpPeer.html#aa770b49926153162eb259868c21d48ce">GetPathFlags</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1d93db3747cf6c75ab622601c30544a0">Address::INET</a>, attr.get());</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        reach_count += msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a9f4f81ec7c6b110d7033d95318777028">nlri</a>.size();</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        <span class="keywordflow">for</span> (vector&lt;BgpProtoPrefix *&gt;::const_iterator it = msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a9f4f81ec7c6b110d7033d95318777028">nlri</a>.begin();</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;             it != msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a9f4f81ec7c6b110d7033d95318777028">nlri</a>.end(); ++it) {</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            <a class="code" href="../../d3/d22/classIp4Prefix.html">Ip4Prefix</a> prefix;</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            <span class="keywordtype">int</span> result = <a class="code" href="../../d3/d22/classIp4Prefix.html#a6ba2931ee0d2753e8d039f4cf47bb1e0">Ip4Prefix::FromProtoPrefix</a>((**it), &amp;prefix);</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;            <span class="keywordflow">if</span> (result) {</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a7e1aa9a8c19a146ca5f1444d8e422b1c">BGP_LOG_PEER_WARNING</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>,</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>,</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                    <span class="stringliteral">&quot;NLRI parse error for inet route&quot;</span>);</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            }</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160; </div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;            <a class="code" href="../../d7/df9/structDBRequest.html">DBRequest</a> req;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;            req.<a class="code" href="../../d7/df9/structDBRequest.html#a54b713cdde96ab6887520e208872ac25">oper</a> = <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45">DBRequest::DB_ENTRY_ADD_CHANGE</a>;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;            req.<a class="code" href="../../d7/df9/structDBRequest.html#ad287a746780e9771d3073c392045d64e">data</a>.reset(<span class="keyword">new</span> <a class="code" href="../../dc/d08/structBgpTable_1_1RequestData.html">InetTable::RequestData</a>(attr, flags, 0, 0, 0));</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;            req.<a class="code" href="../../d7/df9/structDBRequest.html#a94c88f5224b1f8cb6adad61400c970d4">key</a>.reset(<span class="keyword">new</span> <a class="code" href="../../d0/daa/structInetTable_1_1RequestKey.html">InetTable::RequestKey</a>(prefix, <span class="keyword">this</span>));</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            table-&gt;<a class="code" href="../../d7/df2/classDBTableBase.html#a1b8bb5fe5c7b5e8a65dbca701d5f1c94">Enqueue</a>(&amp;req);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160; </div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-client&quot;</span>) ||</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-server&quot;</span>)) {</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#a8ebfa8e5669acf2ad1f2caa74c83719e">ProcessBgpaas</a>(<a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45">DBRequest::DB_ENTRY_ADD_CHANGE</a>, prefix.<a class="code" href="../../d3/d22/classIp4Prefix.html#a996a5b45fc99f07ca15885b624ced4a6">addr</a>(),</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                              prefix.<a class="code" href="../../d3/d22/classIp4Prefix.html#a0216429eefdd5b2bdbbe376154cb96d5">prefixlen</a>(), attr, flags);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;            }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        }</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    }</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160; </div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <span class="keywordflow">for</span> (vector&lt;BgpAttribute *&gt;::const_iterator ait =</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a05ee4842131545a933e64f27bd4492c6">path_attributes</a>.begin();</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;            ait != msg-&gt;<a class="code" href="../../d2/db2/structBgpProto_1_1Update.html#a05ee4842131545a933e64f27bd4492c6">path_attributes</a>.end(); ++ait) {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2c">DBRequest::DBOperation</a> oper;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        <span class="keywordflow">if</span> ((*ait)-&gt;code == <a class="code" href="../../d9/dc1/classBgpAttribute.html#a0f53da2f5b76912fd8742705d23faae1a2f8b18b8e1ad3a8be2c1f4aa16022382">BgpAttribute::MPReachNlri</a>) {</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;            oper = <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45">DBRequest::DB_ENTRY_ADD_CHANGE</a>;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*ait)-&gt;code == <a class="code" href="../../d9/dc1/classBgpAttribute.html#a0f53da2f5b76912fd8742705d23faae1aba319b9db10a6716e9ca3e7ca7773cf9">BgpAttribute::MPUnreachNlri</a>) {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;            oper = <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2ca9cc4d4d54d396a1fe3ec4eeb38defb9f">DBRequest::DB_ENTRY_DELETE</a>;</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        }</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160; </div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        <a class="code" href="../../db/d34/structBgpMpNlri.html">BgpMpNlri</a> *nlri = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d34/structBgpMpNlri.html">BgpMpNlri</a> *<span class="keyword">&gt;</span>(*ait);</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        assert(nlri);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;        <span class="keywordflow">if</span> (oper == <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45">DBRequest::DB_ENTRY_ADD_CHANGE</a>) {</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;            reach_count += nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a98a9fe99a10123171fae1faf27f328aa">nlri</a>.size();</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;            unreach_count += nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a98a9fe99a10123171fae1faf27f328aa">nlri</a>.size();</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;        }</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160; </div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family = <a class="code" href="../../d4/dc3/classBgpAf.html#ae2c45f2bc1070881b2c7910c5204daf1">BgpAf::AfiSafiToFamily</a>(nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a3dbe76693e10b5d0859c4b7a756a6ad6">afi</a>, nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">safi</a>);</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#adce95c79428ec1f1cec2bed3be5e0921">IsFamilyNegotiated</a>(family)) {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            <a class="code" href="../../d1/d1a/bgp__log_8h.html#aa6496f953053dda69182520cd83e94b2">BGP_LOG_PEER_NOTICE</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>,</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>,</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                <span class="stringliteral">&quot;AFI &quot;</span>&lt;&lt; nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a3dbe76693e10b5d0859c4b7a756a6ad6">afi</a> &lt;&lt; <span class="stringliteral">&quot; SAFI &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">safi</a> &lt;&lt;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                <span class="stringliteral">&quot; not allowed&quot;</span>);</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;        }</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160; </div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        <span class="comment">// Handle EndOfRib marker.</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <span class="keywordflow">if</span> (oper == <a class="code" href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2ca9cc4d4d54d396a1fe3ec4eeb38defb9f">DBRequest::DB_ENTRY_DELETE</a> &amp;&amp; nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a98a9fe99a10123171fae1faf27f328aa">nlri</a>.empty()) {</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#ab617a4c6c335eea3e786fd082881b62f">inc_rx_end_of_rib</a>();</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;            <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO,</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                         <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>,</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                         <span class="stringliteral">&quot;EndOfRib marker family &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                         <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family) &lt;&lt;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                         <span class="stringliteral">&quot; size &quot;</span> &lt;&lt; msgsize);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#a5c02ccc7d79dc94f18e2beb0f62a38d8">ReceiveEndOfRIB</a>(family, msgsize);</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160; </div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        uint32_t flags = 0;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="keywordflow">if</span> ((*ait)-&gt;code == <a class="code" href="../../d9/dc1/classBgpAttribute.html#a0f53da2f5b76912fd8742705d23faae1a2f8b18b8e1ad3a8be2c1f4aa16022382">BgpAttribute::MPReachNlri</a>) {</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            flags = <a class="code" href="../../d3/d2d/classBgpPeer.html#aa770b49926153162eb259868c21d48ce">GetPathFlags</a>(family, attr.get());</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;            attr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a31b4db80e2366cf1981c3bf3e02b57aa">GetMpNlriNexthop</a>(nlri, attr);</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        }</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160; </div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="keywordflow">switch</span> (family) {</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1d93db3747cf6c75ab622601c30544a0">Address::INET</a>:</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ad786bbe2191d6c8829644e8142499fba">Address::INETMPLS</a>:</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            ProcessNlri&lt;InetTable, Ip4Prefix&gt;(</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                family, oper, nlri, attr, flags);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-client&quot;</span>) ||</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;                (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-server&quot;</span>)) {</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                ProcessNlriBgpaas&lt;Ip4Prefix&gt;(</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                    family, oper, nlri, attr, flags);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            }</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987abb069c400a63792e38aed961e280c935">Address::INETVPN</a>:</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;            ProcessNlri&lt;InetVpnTable, InetVpnPrefix&gt;(</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                family, oper, nlri, attr, flags);</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa474968a53fad182e1b6340dd2eb80fc">Address::INET6</a>:</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;            ProcessNlri&lt;Inet6Table, Inet6Prefix&gt;(</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;                family, oper, nlri, attr, flags);</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-client&quot;</span>) ||</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                (<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a> == <span class="stringliteral">&quot;bgpaas-server&quot;</span>)) {</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                ProcessNlriBgpaas&lt;Inet6Prefix&gt;(</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;                    family, oper, nlri, attr, flags);</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;            }</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a94c20c6da3c99af083baf8ae3a7bc186">Address::INET6VPN</a>:</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;            ProcessNlri&lt;Inet6VpnTable, Inet6VpnPrefix&gt;(</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                family, oper, nlri, attr, flags);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a92d4f4ab7dc7f6525846c8f226918325">Address::EVPN</a>:</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;            ProcessNlri&lt;EvpnTable, EvpnPrefix&gt;(</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                family, oper, nlri, attr, flags);</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa3c44729b5b0659bc3627dca7209b231">Address::ERMVPN</a>:</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            ProcessNlri&lt;ErmVpnTable, ErmVpnPrefix&gt;(</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                family, oper, nlri, attr, flags);</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987abec1c916426a0ed6e2fea0edab67ab79">Address::MVPN</a>:</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            ProcessNlri&lt;MvpnTable, MvpnPrefix&gt;(</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                family, oper, nlri, attr, flags);</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a>:</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;            ProcessNlri&lt;RTargetTable, RTargetPrefix&gt;(</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                family, oper, nlri, attr, flags);</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        }</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    }</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160; </div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a6c07d5a2b789f44deeba94567012f9f1">inc_rx_route_reach</a>(reach_count);</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a0a40316b8f5fae550e3d2ecf8ce3f7a1">inc_rx_route_unreach</a>(unreach_count);</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d75/classSandesh.html#a25d84f22abcc2534d85b608945260bb7">Sandesh::LoggingLevel</a>() &gt;= <a class="code" href="../../de/d75/classSandesh.html#a43a495eada28d343bab14c2eb021b327">Sandesh::LoggingUtLevel</a>()) {</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, <a class="code" href="../../de/d75/classSandesh.html#a43a495eada28d343bab14c2eb021b327">Sandesh::LoggingUtLevel</a>(),</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>,</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            <span class="stringliteral">&quot;Update size &quot;</span> &lt;&lt; msgsize &lt;&lt;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;            <span class="stringliteral">&quot; reach &quot;</span> &lt;&lt; reach_count &lt;&lt; <span class="stringliteral">&quot; unreach &quot;</span> &lt;&lt; unreach_count);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    }</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;}</div>
<div class="line"><a name="l02141"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a9ddc3ed1843f7ce153aa36604f01e0a3"> 2141</a></span>&#160;<span class="keyword">const</span> std::vector&lt;std::string&gt; <a class="code" href="../../d3/d2d/classBgpPeer.html#a9ddc3ed1843f7ce153aa36604f01e0a3">BgpPeer::GetDefaultTunnelEncap</a>(</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[family] == NULL)</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        <span class="keywordflow">return</span> std::vector&lt;std::string&gt;();</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[family]-&gt;default_tunnel_encap_list;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;}</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a5165e3e4de03e8955f887613918ad5a4"> 2148</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a5165e3e4de03e8955f887613918ad5a4">BgpPeer::ProcessPathTunnelEncapsulation</a>(<span class="keyword">const</span> <a class="code" href="../../d7/d0c/classBgpPath.html">BgpPath</a> *path, <a class="code" href="../../d5/dcf/classBgpAttr.html">BgpAttr</a> *attr,</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                                             <a class="code" href="../../d2/ddb/classExtCommunityDB.html">ExtCommunityDB</a> *extcomm_db,</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a9ddc3ed1843f7ce153aa36604f01e0a3">GetDefaultTunnelEncap</a>(table-&gt;<a class="code" href="../../d0/def/classBgpTable.html#ae03997dea3dbab64d82a5403715eaa1c">family</a>()).empty()) {</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <a class="code" href="../../d1/da6/community_8h.html#ac0dffce10e7cbdd4ef9e5a689991344e">ExtCommunityPtr</a> ext_community = attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#ab5d58214ded24f3074bb3fafca9af08a">ext_community</a>();</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        <span class="keywordtype">bool</span> tunnel_encap_found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <span class="keywordflow">if</span> (ext_community) {</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;            <span class="keywordflow">for</span> (ExtCommunity::ExtCommunityList::const_iterator iter =</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                 attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#ab5d58214ded24f3074bb3fafca9af08a">ext_community</a>()-&gt;<a class="code" href="../../da/d36/classExtCommunity.html#a968a0558c4724383c5ac0edf9f91a3d2">communities</a>().begin();</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;                 iter != attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#ab5d58214ded24f3074bb3fafca9af08a">ext_community</a>()-&gt;<a class="code" href="../../da/d36/classExtCommunity.html#a968a0558c4724383c5ac0edf9f91a3d2">communities</a>().end();</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                 ++iter) {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/d36/classExtCommunity.html#a02cdb9d746b06a359d2ddaa1b8362c82">ExtCommunity::is_tunnel_encap</a>(*iter)) {</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                    tunnel_encap_found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                }</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;            }</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        }</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <span class="comment">// Set default tunnel encap since it is not in the path</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <span class="keywordflow">if</span> (!ext_community || !tunnel_encap_found) {</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;            <a class="code" href="../../da/d36/classExtCommunity.html#a4fcc6e4052f4d113fce6afee7c0aef48">ExtCommunity::ExtCommunityList</a> encap_list;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;            BOOST_FOREACH(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;encap_string,</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                          <a class="code" href="../../d3/d2d/classBgpPeer.html#a9ddc3ed1843f7ce153aa36604f01e0a3">GetDefaultTunnelEncap</a>(table-&gt;<a class="code" href="../../d0/def/classBgpTable.html#ae03997dea3dbab64d82a5403715eaa1c">family</a>())) {</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                <a class="code" href="../../d7/dad/classTunnelEncap.html">TunnelEncap</a> tunnel_encap(encap_string);</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                encap_list.push_back(tunnel_encap.<a class="code" href="../../d7/dad/classTunnelEncap.html#a2f2e1db350ef738d6a68fe0a2ff13b1e">GetExtCommunity</a>());</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;            }</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            ext_community =</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                extcomm_db-&gt;<a class="code" href="../../d2/ddb/classExtCommunityDB.html#ad4ca3985039195a5d3293a02c5e68d86">ReplaceTunnelEncapsulationAndLocate</a>(</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                ext_community ? ext_community.get() : NULL, encap_list);</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            attr-&gt;<a class="code" href="../../d5/dcf/classBgpAttr.html#ad3d046d381285d8c5e284616b2805c1b">set_ext_community</a>(ext_community);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        }</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    }</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;}</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160; </div>
<div class="line"><a name="l02182"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a957811f426356f633856d6e2bcfb7304"> 2182</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a957811f426356f633856d6e2bcfb7304">BgpPeer::UpdatePrimaryPathCount</a>(<span class="keywordtype">int</span> count, <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a4e7a52b9a0ea3693ac43721f1cbd12c4">primary_path_count_</a> += count;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="keywordflow">if</span> (family == <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4">Address::UNSPEC</a>)</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a76bcc2d6066f3c610b5b8ee7d6fc3b36">family_primary_path_count_</a>[family] += count;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    uint32_t limit = 0;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[family])</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        limit = <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[family]-&gt;prefix_limit;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <span class="keywordflow">if</span> (limit &amp;&amp; <a class="code" href="../../d3/d2d/classBgpPeer.html#a76bcc2d6066f3c610b5b8ee7d6fc3b36">family_primary_path_count_</a>[family] &gt; limit)</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#afb2f1db35adabcf17bb623fc247ed3a7">TriggerPrefixLimitCheck</a>();</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;}</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160; </div>
<div class="line"><a name="l02194"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a9efaaabeaec8c777cfc6bfa9e780c9c0"> 2194</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a9efaaabeaec8c777cfc6bfa9e780c9c0">BgpPeer::StartPrefixLimitIdleTimer</a>(uint32_t plim_idle_time_msecs) {</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a00e9cf5b955eb4518efc57aa165aeb90">prefix_limit_idle_timer_</a>-&gt;<a class="code" href="../../dc/dea/classTimer.html#a884738fb312e353e7d89fce007f02485">Start</a>(plim_idle_time_msecs,</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#ac5edd00a203d9baefc09ca036affe7b5">BgpPeer::PrefixLimitIdleTimerExpired</a>, <span class="keyword">this</span>),</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a6b0b5ccc28a9110ab2237468fef34527">BgpPeer::PrefixLimitIdleTimerErrorHandler</a>, <span class="keyword">this</span>, _1, _2));</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;}</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160; </div>
<div class="line"><a name="l02200"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a6eba769ad71a0a49b13ee82e72915f1a"> 2200</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a6eba769ad71a0a49b13ee82e72915f1a">BgpPeer::StopPrefixLimitIdleTimer</a>() {</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a00e9cf5b955eb4518efc57aa165aeb90">prefix_limit_idle_timer_</a>-&gt;<a class="code" href="../../dc/dea/classTimer.html#a18a9ec123397a973c72243c8372c237f">Cancel</a>();</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;}</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160; </div>
<div class="line"><a name="l02204"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a06cc62ee3c988583a518e66b3da2955c"> 2204</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a06cc62ee3c988583a518e66b3da2955c">BgpPeer::PrefixLimitIdleTimerRunning</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a00e9cf5b955eb4518efc57aa165aeb90">prefix_limit_idle_timer_</a>-&gt;<a class="code" href="../../dc/dea/classTimer.html#a3894c1a4d1a83029cce2a64970d03d6e">running</a>();</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;}</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160; </div>
<div class="line"><a name="l02208"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ac5edd00a203d9baefc09ca036affe7b5"> 2208</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ac5edd00a203d9baefc09ca036affe7b5">BgpPeer::PrefixLimitIdleTimerExpired</a>() {</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;}</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160; </div>
<div class="line"><a name="l02212"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a6b0b5ccc28a9110ab2237468fef34527"> 2212</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a6b0b5ccc28a9110ab2237468fef34527">BgpPeer::PrefixLimitIdleTimerErrorHandler</a>(<span class="keywordtype">string</span> error_name,</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                                               <span class="keywordtype">string</span> error_message) {</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#ade3a82a79df2a350d5a25f1fb989d1ab">BGP_LOG_PEER_CRITICAL</a>(<a class="code" href="../../dc/dea/classTimer.html">Timer</a>, <span class="keyword">this</span>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>,</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        <span class="stringliteral">&quot;Timer error: &quot;</span> &lt;&lt; error_name &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; error_message);</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;}</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160; </div>
<div class="line"><a name="l02218"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a47297b9f364826787a529982ad025399"> 2218</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a47297b9f364826787a529982ad025399">BgpPeer::EndOfRibTimerErrorHandler</a>(<span class="keywordtype">string</span> error_name,</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                                        <span class="keywordtype">string</span> error_message) {</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#ade3a82a79df2a350d5a25f1fb989d1ab">BGP_LOG_PEER_CRITICAL</a>(<a class="code" href="../../dc/dea/classTimer.html">Timer</a>, <span class="keyword">this</span>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>,</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                 <span class="stringliteral">&quot;Timer error: &quot;</span> &lt;&lt; error_name &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; error_message);</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;}</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160; </div>
<div class="line"><a name="l02224"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a0a48bde677ad31fe55db68ee701d8bf3"> 2224</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a0a48bde677ad31fe55db68ee701d8bf3">BgpPeer::RegisterToVpnTables</a>() {</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::StateMachine&quot;</span>, <span class="stringliteral">&quot;bgp::RTFilter&quot;</span>, <span class="stringliteral">&quot;bgp::Config&quot;</span>);</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160; </div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#af2d4c482bf49352ef5460162f7017d96">vpn_tables_registered_</a>)</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#af2d4c482bf49352ef5460162f7017d96">vpn_tables_registered_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160; </div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <a class="code" href="../../de/ddf/classRoutingInstance.html">RoutingInstance</a> *instance = <a class="code" href="../../d3/d2d/classBgpPeer.html#a14ce206222db976a1296319fb49c6613">GetRoutingInstance</a>();</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    vector&lt;Address::Family&gt; vpn_family_list = list_of</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987abb069c400a63792e38aed961e280c935">Address::INETVPN</a>)(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a94c20c6da3c99af083baf8ae3a7bc186">Address::INET6VPN</a>)(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa3c44729b5b0659bc3627dca7209b231">Address::ERMVPN</a>)(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a92d4f4ab7dc7f6525846c8f226918325">Address::EVPN</a>)</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        (<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987abec1c916426a0ed6e2fea0edab67ab79">Address::MVPN</a>);</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    BOOST_FOREACH(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> vpn_family, vpn_family_list) {</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#adce95c79428ec1f1cec2bed3be5e0921">IsFamilyNegotiated</a>(vpn_family))</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        <a class="code" href="../../d0/def/classBgpTable.html">BgpTable</a> *table = instance-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">GetTable</a>(vpn_family);</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a883486a15a9c3f619896a5c4e96dbeb6">BGP_LOG_PEER_TABLE</a>(<span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#acdca7f274a30c6a20ed5b0d96adf52d9">BGP_LOG_FLAG_TRACE</a>,</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            table, <span class="stringliteral">&quot;Register peer with the table&quot;</span>);</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#af7006c98dad8eb5e1221440d60d41f2c">Register</a>(table, <a class="code" href="../../d3/d2d/classBgpPeer.html#a64601f208abf0f1bdb212ebb9d92dcdf">BuildRibExportPolicy</a>(vpn_family));</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    }</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;}</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160; </div>
<div class="line"><a name="l02245"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ae482ba7c1c0f2f40555ae1e7379508b7"> 2245</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ae482ba7c1c0f2f40555ae1e7379508b7">BgpPeer::StartEndOfRibReceiveTimer</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family) {</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    uint32_t timeout = <a class="code" href="../../d3/d2d/classBgpPeer.html#a08360c7d1461faccbc2eb3b2a3fcb31c">GetEndOfRibReceiveTime</a>(family);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160; </div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, SandeshLevel::SYS_INFO,</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#af9b1c09de0cc94078c7505280dcfb639">BGP_PEER_DIR_OUT</a>,</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;        <span class="stringliteral">&quot;EndOfRib Receive Timer scheduled for family &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;        <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(family) &lt;&lt;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        <span class="stringliteral">&quot; to fire after &quot;</span> &lt;&lt; timeout  &lt;&lt; <span class="stringliteral">&quot; second(s)&quot;</span>);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#aca40f9fa6ac0e1d9e91bd1968289bad3">eor_receive_timer_</a>[family]-&gt;<a class="code" href="../../dc/dea/classTimer.html#a884738fb312e353e7d89fce007f02485">Start</a>(timeout * 1000,</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a5eee9fef192c088aca582a2435eb0d41">BgpPeer::EndOfRibReceiveTimerExpired</a>, <span class="keyword">this</span>, family),</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a47297b9f364826787a529982ad025399">BgpPeer::EndOfRibTimerErrorHandler</a>, <span class="keyword">this</span>, _1, _2));</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;}</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160; </div>
<div class="line"><a name="l02258"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a719219bbe632932b7d61e71ac8f4f126"> 2258</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a719219bbe632932b7d61e71ac8f4f126">BgpPeer::KeepaliveTimerErrorHandler</a>(<span class="keywordtype">string</span> error_name,</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                                         <span class="keywordtype">string</span> error_message) {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#ade3a82a79df2a350d5a25f1fb989d1ab">BGP_LOG_PEER_CRITICAL</a>(<a class="code" href="../../dc/dea/classTimer.html">Timer</a>, <span class="keyword">this</span>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>,</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                 <span class="stringliteral">&quot;Timer error: &quot;</span> &lt;&lt; error_name &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; error_message);</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;}</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a5eee9fef192c088aca582a2435eb0d41"> 2264</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a5eee9fef192c088aca582a2435eb0d41">BgpPeer::EndOfRibReceiveTimerExpired</a>(<a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a> family) {</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <span class="keywordflow">if</span> (family == <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a>)</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a0a48bde677ad31fe55db68ee701d8bf3">RegisterToVpnTables</a>();</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160; </div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <span class="comment">// Fake reception of EoRs to exit from GR states and sweep all stale routes.</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;ProcessEORMarkerReceived(family);</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;}</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160; </div>
<div class="line"><a name="l02273"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a7c02ab765b3c423fbfee26c70bcab663"> 2273</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a7c02ab765b3c423fbfee26c70bcab663">BgpPeer::KeepaliveTimerExpired</a>() {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a4a04145f6f6dfbc0bff82cbfb0d1fd67">IsReady</a>())</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160; </div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a6a58c253a2a2fb3477b1d1d85a14101c">SendKeepalive</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160; </div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <span class="comment">// Start the timer again, by returning true</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;}</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160; </div>
<div class="line"><a name="l02285"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ae8e003de765c518ea9b54da3fb222f42"> 2285</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ae8e003de765c518ea9b54da3fb222f42">BgpPeer::StartKeepaliveTimerUnlocked</a>() {</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordtype">int</span> keepalive_time_msecs = <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;keepalive_time_msecs();</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <span class="keywordflow">if</span> (keepalive_time_msecs &lt;= 0)</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160; </div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#adae7bc0e2cb426238926d3512e636e07">keepalive_timer_</a>-&gt;<a class="code" href="../../dc/dea/classTimer.html#a884738fb312e353e7d89fce007f02485">Start</a>(keepalive_time_msecs,</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a7c02ab765b3c423fbfee26c70bcab663">BgpPeer::KeepaliveTimerExpired</a>, <span class="keyword">this</span>),</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        boost::bind(&amp;<a class="code" href="../../d3/d2d/classBgpPeer.html#a719219bbe632932b7d61e71ac8f4f126">BgpPeer::KeepaliveTimerErrorHandler</a>, <span class="keyword">this</span>, _1, _2));</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;}</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aa382b771acc37f616317daaf8ffcbd62"> 2295</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#aa382b771acc37f616317daaf8ffcbd62">BgpPeer::StartKeepaliveTimer</a>() {</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">spin_mutex_</a>);</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a> &amp;&amp; <a class="code" href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">send_ready_</a>)</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ae8e003de765c518ea9b54da3fb222f42">StartKeepaliveTimerUnlocked</a>();</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;}</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a34de40ee21a6231704e4a053dc5839c5"> 2301</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a34de40ee21a6231704e4a053dc5839c5">BgpPeer::StopKeepaliveTimerUnlocked</a>() {</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#adae7bc0e2cb426238926d3512e636e07">keepalive_timer_</a>-&gt;<a class="code" href="../../dc/dea/classTimer.html#a18a9ec123397a973c72243c8372c237f">Cancel</a>();</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;}</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160; </div>
<div class="line"><a name="l02305"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aa985a28821a253771cab44a28f1928c1"> 2305</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#aa985a28821a253771cab44a28f1928c1">BgpPeer::KeepaliveTimerRunning</a>() {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">spin_mutex_</a>);</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#adae7bc0e2cb426238926d3512e636e07">keepalive_timer_</a>-&gt;<a class="code" href="../../dc/dea/classTimer.html#a3894c1a4d1a83029cce2a64970d03d6e">running</a>();</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;}</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160; </div>
<div class="line"><a name="l02310"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ad7f6f6e008f83e20a234675c6410ddff"> 2310</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ad7f6f6e008f83e20a234675c6410ddff">BgpPeer::SetSendReady</a>() {</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">spin_mutex_</a>);</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(<a class="code" href="../../d9/df2/http__client_8h.html#a5667b805d857c6d28f83f6038a0272d3">Event</a>, <span class="keyword">this</span>, SandeshLevel::SYS_DEBUG, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;                 <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>, <span class="stringliteral">&quot;Send ready&quot;</span>);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">send_ready_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a> != NULL)</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#ae8e003de765c518ea9b54da3fb222f42">StartKeepaliveTimerUnlocked</a>();</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;}</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160; </div>
<div class="line"><a name="l02319"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a8c984f1cdc4d39cbef840f48ab92e0c5"> 2319</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a8c984f1cdc4d39cbef840f48ab92e0c5">BgpPeer::set_session</a>(<a class="code" href="../../d5/de5/classBgpSession.html">BgpSession</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>) {</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">spin_mutex_</a>);</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    assert(<a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a> == NULL);</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a> = <a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>;</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;}</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160; </div>
<div class="line"><a name="l02325"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5"> 2325</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">BgpPeer::clear_session</a>() {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">spin_mutex_</a>);</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>) {</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>-&gt;<a class="code" href="../../d5/de5/classBgpSession.html#ac21906397b0404d2a08f619531ef77eb">clear_peer</a>();</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a88c5dd490387ef487cae83effa4a38a9">set_observer</a>(NULL);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#afc8622774097c84a226687c406c65c89">Close</a>();</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    }</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a> = NULL;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;}</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160; </div>
<div class="line"><a name="l02335"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43"> 2335</a></span>&#160;<a class="code" href="../../d5/de5/classBgpSession.html">BgpSession</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">BgpPeer::session</a>() {</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;}</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160; </div>
<div class="line"><a name="l02339"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a25ab9a98661718f10006bf221a192b6d"> 2339</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a25ab9a98661718f10006bf221a192b6d">BgpPeer::BytesToHexString</a>(<span class="keyword">const</span> u_int8_t *msg, <span class="keywordtype">size_t</span> size) {</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    ostringstream out;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="keywordtype">char</span> buf[4];</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160; </div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; size; i ++) {</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        <span class="keywordflow">if</span> (!(i % 32)) out &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <span class="keywordflow">if</span> (!(i %  4)) out &lt;&lt; <span class="stringliteral">&quot; 0x&quot;</span>;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;        snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%02X&quot;</span>, msg[i]);</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        out &lt;&lt; buf;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    }</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="keywordflow">return</span> out.str();</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;}</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160; </div>
<div class="line"><a name="l02355"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a8cf3d53268844a13d21cbbc4119b99ef"> 2355</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a8cf3d53268844a13d21cbbc4119b99ef">BgpPeer::ReceiveMsg</a>(<a class="code" href="../../d5/de5/classBgpSession.html">BgpSession</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>, <span class="keyword">const</span> u_int8_t *msg,</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                         <span class="keywordtype">size_t</span> size) {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    <a class="code" href="../../d9/dc2/structParseErrorContext.html">ParseErrorContext</a> ec;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <a class="code" href="../../d3/d88/structBgpProto_1_1BgpMessage.html">BgpProto::BgpMessage</a> *minfo = <a class="code" href="../../d2/d4b/classBgpProto.html#a60a52c6a94a32c8bf834352a3d57dc6d">BgpProto::Decode</a>(msg, size, &amp;ec,</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                                                   <a class="code" href="../../d3/d2d/classBgpPeer.html#addeee4e254b6236de084a1f5b3bffdf0">Is4ByteAsSupported</a>());</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160; </div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="keywordflow">if</span> (minfo == NULL) {</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#aa92724a9e2f04546d9e17ad722a35ddd">BGP_TRACE_PEER_PACKET</a>(<span class="keyword">this</span>, msg, size, SandeshLevel::SYS_WARN);</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#a7e1aa9a8c19a146ca5f1444d8e422b1c">BGP_LOG_PEER_WARNING</a>(<a class="code" href="../../d6/d28/classMessage.html">Message</a>, <span class="keyword">this</span>, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                     <a class="code" href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a>,</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                     <span class="stringliteral">&quot;Error while parsing message at &quot;</span> &lt;&lt; ec.<a class="code" href="../../d9/dc2/structParseErrorContext.html#a396ef7622822679ce6ff8ae942e8caae">type_name</a>);</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;OnMessageError(<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>, &amp;ec);</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    }</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160; </div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <span class="comment">// Tracing periodic keepalive packets is not necessary.</span></div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="keywordflow">if</span> (minfo-&gt;<a class="code" href="../../d3/d88/structBgpProto_1_1BgpMessage.html#a5984d22fab979d845f9670a6105db662">type</a> != <a class="code" href="../../d2/d4b/classBgpProto.html#a16302059889af8b0aadfc5ad6f56a2b8adbf1d8a70b77bfee301d50630beba7cf">BgpProto::KEEPALIVE</a>)</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        <a class="code" href="../../d1/d1a/bgp__log_8h.html#aa92724a9e2f04546d9e17ad722a35ddd">BGP_TRACE_PEER_PACKET</a>(<span class="keyword">this</span>, msg, size, <a class="code" href="../../de/d75/classSandesh.html#a43a495eada28d343bab14c2eb021b327">Sandesh::LoggingUtLevel</a>());</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;OnMessage(<a class="code" href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">session</a>, minfo, size);</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;}</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160; </div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;<span class="comment">// Extract nexthop address from BgpMpNlri if appropriate and return updated</span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="comment">// BgpAttrPtr. The original attribute is returned for cases where there&#39;s no</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="comment">// nexthop attribute in the BgpMpNlri.</span></div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a31b4db80e2366cf1981c3bf3e02b57aa"> 2383</a></span>&#160;<a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> <a class="code" href="../../d3/d2d/classBgpPeer.html#a31b4db80e2366cf1981c3bf3e02b57aa">BgpPeer::GetMpNlriNexthop</a>(<a class="code" href="../../db/d34/structBgpMpNlri.html">BgpMpNlri</a> *nlri, <a class="code" href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a> attr) {</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="keywordtype">bool</span> update_nh = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <a class="code" href="../../d9/d9b/address_8h.html#a7055b8d880410aad1e3ba8c041397b6c">IpAddress</a> addr;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160; </div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordflow">if</span> (nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a3dbe76693e10b5d0859c4b7a756a6ad6">afi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#ae1b298caf3c626e2280fb359402778c6a74562d83502cbde56946570f27a9a604">BgpAf::IPv4</a>) {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        <span class="keywordflow">if</span> (nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">safi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6af729adf984e91b6c998774bd3fb26a53">BgpAf::Mpls</a> || nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">safi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a9291bbeae93060c4a6c72b6774b27a18">BgpAf::Unicast</a> ||</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;            nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">safi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a7cd1f9080c99003898355602bbcebfcd">BgpAf::RTarget</a> || nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">safi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a948b4ac1b6b7b434d85403d0ecaea4f2">BgpAf::MVpn</a>) {</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;            Ip4Address::bytes_type bt = { { 0 } };</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            copy(nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.begin(),</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.begin() + <span class="keyword">sizeof</span>(bt), bt.begin());</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;            addr = <a class="code" href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a>(bt);</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;            update_nh = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">safi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a9a4a89105f0afbf2f3335b67aa4a2e9c">BgpAf::Vpn</a>) {</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;            Ip4Address::bytes_type bt = { { 0 } };</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;            <span class="keywordtype">size_t</span> rdsize = <a class="code" href="../../dc/d73/classRouteDistinguisher.html#aa1314b320f91ff0ea1a8682da3fbdaa9">RouteDistinguisher::kSize</a>;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;            copy(nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.begin() + rdsize,</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;                nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.begin() + rdsize + <span class="keyword">sizeof</span>(bt), bt.begin());</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;            addr = <a class="code" href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a>(bt);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;            update_nh = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        }</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a3dbe76693e10b5d0859c4b7a756a6ad6">afi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#ae1b298caf3c626e2280fb359402778c6a0c8816042f8fc743e20028b21badd457">BgpAf::L2Vpn</a>) {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;        <span class="keywordflow">if</span> (nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">safi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a9099fbe015cf4e60f4a8cec9d08f9237">BgpAf::EVpn</a>) {</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;            Ip4Address::bytes_type bt = { { 0 } };</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;            copy(nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.begin(),</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.begin() + <span class="keyword">sizeof</span>(bt), bt.begin());</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;            addr = <a class="code" href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a>(bt);</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;            update_nh = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        }</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a3dbe76693e10b5d0859c4b7a756a6ad6">afi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#ae1b298caf3c626e2280fb359402778c6ad763720558c5bbe4730573b0863813b4">BgpAf::IPv6</a>) {</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        <span class="keywordflow">if</span> (nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">safi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a9291bbeae93060c4a6c72b6774b27a18">BgpAf::Unicast</a>) {</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;            <span class="comment">// There could be either 1 or 2 v6 addresses in the nexthop field.</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;            <span class="comment">// The first one is supposed to be global and the optional second</span></div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;            <span class="comment">// one, if present, is link local. We will be liberal and find the</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;            <span class="comment">// global address, whether it&#39;s first or second. Further, if the</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;            <span class="comment">// address is a v4-mapped v6 address, we use the corresponding v4</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;            <span class="comment">// address as the nexthop.</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = 0; idx &lt; 2; ++idx) {</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                Ip6Address::bytes_type bt = { { 0 } };</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;                <span class="keywordflow">if</span> ((idx + 1) * <span class="keyword">sizeof</span>(bt) &gt; nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.size())</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;                copy(nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.begin() + idx * <span class="keyword">sizeof</span>(bt),</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                    nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.begin() + (idx + 1) * <span class="keyword">sizeof</span>(bt), bt.begin());</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                <a class="code" href="../../d9/d9b/address_8h.html#a231be25f722543d7460102bbe5c59f5d">Ip6Address</a> v6_addr(bt);</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                <span class="keywordflow">if</span> (v6_addr.is_v4_mapped()) {</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                    addr = <a class="code" href="../../de/d6b/classAddress.html#ab34d7c07e9ade3c2ac3c7ef4654b2b77">Address::V4FromV4MappedV6</a>(v6_addr);</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                    update_nh = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;                }</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;                <span class="keywordflow">if</span> (!v6_addr.is_link_local()) {</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                    addr = v6_addr;</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                    update_nh = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                }</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;            }</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">safi</a> == <a class="code" href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a9a4a89105f0afbf2f3335b67aa4a2e9c">BgpAf::Vpn</a>) {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;            Ip6Address::bytes_type bt = { { 0 } };</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;            <span class="keywordtype">size_t</span> rdsize = <a class="code" href="../../dc/d73/classRouteDistinguisher.html#aa1314b320f91ff0ea1a8682da3fbdaa9">RouteDistinguisher::kSize</a>;</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;            copy(nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.begin() + rdsize,</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                nlri-&gt;<a class="code" href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">nexthop</a>.begin() + rdsize + <span class="keyword">sizeof</span>(bt), bt.begin());</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;            <a class="code" href="../../d9/d9b/address_8h.html#a231be25f722543d7460102bbe5c59f5d">Ip6Address</a> v6_addr(bt);</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;            <span class="keywordflow">if</span> (v6_addr.is_v4_mapped()) {</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                addr = <a class="code" href="../../de/d6b/classAddress.html#ab34d7c07e9ade3c2ac3c7ef4654b2b77">Address::V4FromV4MappedV6</a>(v6_addr);</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                update_nh = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;            }</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        }</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    }</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160; </div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="comment">// Always update the nexthop in BgpAttr with MpReachNlri-&gt;nexthop.</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    <span class="comment">// NOP in cases &lt;afi,safi&gt; doesn&#39;t carry nexthop attribute.</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    <span class="keywordflow">if</span> (update_nh) {</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        attr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ad1c0d588bba7e1d3430187f5b3d2ce0b">attr_db</a>()-&gt;<a class="code" href="../../d7/d34/classBgpAttrDB.html#a517fa916d32aa26ae794101bd51a5144">ReplaceNexthopAndLocate</a>(attr.get(), addr);</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    }</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="keywordflow">return</span> attr;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;}</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160; </div>
<div class="line"><a name="l02458"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a5143a7aa1483d62716c56dc8b5976aa5"> 2458</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a5143a7aa1483d62716c56dc8b5976aa5">BgpPeer::ManagedDelete</a>() {</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a7dde8892a9cfa640966daa3779158101">deleter_</a>-&gt;IsDeleted())</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a>(Config, <span class="keyword">this</span>, SandeshLevel::SYS_INFO, <a class="code" href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a>,</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                 <a class="code" href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a>, <span class="stringliteral">&quot;Received request for deletion&quot;</span>);</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a31a46e65469aad3be886f07604535b08">IsRouterTypeBGPaaS</a>()) {</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>()-&gt;<a class="code" href="../../db/d26/classBgpServer.html#af5bab3bc2a3774d9f7f80bff11e52187">increment_deleting_bgpaas_count</a>();</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">server</a>()-&gt;<a class="code" href="../../db/d26/classBgpServer.html#aeeae8183d39c14782b7e58e696cd7047">increment_deleting_count</a>();</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    }</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a7dde8892a9cfa640966daa3779158101">deleter_</a>-&gt;Delete();</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;}</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160; </div>
<div class="line"><a name="l02471"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ab0d579a8bac0b458cfb681ba9266fc49"> 2471</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ab0d579a8bac0b458cfb681ba9266fc49">BgpPeer::RetryDelete</a>() {</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#a7dde8892a9cfa640966daa3779158101">deleter_</a>-&gt;IsDeleted())</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a7dde8892a9cfa640966daa3779158101">deleter_</a>-&gt;RetryDelete();</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;}</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160; </div>
<div class="line"><a name="l02477"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#adc279e2cf7262d19cf3cd3d3c8c1a2a5"> 2477</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#adc279e2cf7262d19cf3cd3d3c8c1a2a5">BgpPeer::GetTaskInstance</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#af5c38ac16b6ccedf8bff763258bc3a2b">index_</a> % <a class="code" href="../../df/ddc/classTaskScheduler.html#a951ae2a1d1b7700618defdcc1ea53a70">TaskScheduler::GetInstance</a>()-&gt;<a class="code" href="../../df/ddc/classTaskScheduler.html#aa50cf620d67afe0938bc4f8da4856217">HardwareThreadCount</a>();</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;}</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160; </div>
<div class="line"><a name="l02481"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a56b858c2aed105fb0a7ad89ef08b541d"> 2481</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a56b858c2aed105fb0a7ad89ef08b541d">BgpPeer::SetDataCollectionKey</a>(BgpPeerInfo *peer_info)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>) {</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        peer_info-&gt;set_domain(<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a04603321cf74e128aee933a6d0e8cd52">name</a>());</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        peer_info-&gt;set_domain(<a class="code" href="../../da/d05/classBgpConfigManager.html#ac0e92a939b94efb93c3670093025f30d">BgpConfigManager::kMasterInstance</a>);</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    }</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160; </div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    peer_info-&gt;set_ip_address(<a class="code" href="../../d3/d2d/classBgpPeer.html#a759df848bedd73ef687c021097d25958">peer_key_</a>.<a class="code" href="../../dd/dde/structBgpPeerKey.html#a8c28ff869e728f1b25ad457733965c8c">endpoint</a>.address().to_string());</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;}</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160; </div>
<div class="line"><a name="l02491"></a><span class="lineno"><a class="line" href="../../db/d6b/bgp__peer_8cc.html#a7db4fb115e6aaa3b0e4d946c5c4d5f31"> 2491</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../db/d6b/bgp__peer_8cc.html#a7db4fb115e6aaa3b0e4d946c5c4d5f31">FillProtoStats</a>(<span class="keyword">const</span> <a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html">IPeerDebugStats::ProtoStats</a> &amp;stats,</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;                           PeerProtoStats *proto_stats) {</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    proto_stats-&gt;set_open(stats.<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#a856e37e36fbfa5559fabb63812281d2b">open</a>);</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    proto_stats-&gt;set_keepalive(stats.<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#aa08d3a6a4b8d9b0e65cbc562420cd320">keepalive</a>);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    proto_stats-&gt;set_close(stats.<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#aaafa70273b9e7312246e0da1e3d57cbc">close</a>);</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    proto_stats-&gt;set_update(stats.<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#a9057a1e097bb93e4165404cbdf7b14cb">update</a>);</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    proto_stats-&gt;set_notification(stats.<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#a4c22df200b7b5f74759d314b0dfd15ea">notification</a>);</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    proto_stats-&gt;set_total(stats.<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#a856e37e36fbfa5559fabb63812281d2b">open</a> + stats.<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#aa08d3a6a4b8d9b0e65cbc562420cd320">keepalive</a> + stats.<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#aaafa70273b9e7312246e0da1e3d57cbc">close</a> +</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        stats.<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#a9057a1e097bb93e4165404cbdf7b14cb">update</a> + stats.<a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#a4c22df200b7b5f74759d314b0dfd15ea">notification</a>);</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;}</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160; </div>
<div class="line"><a name="l02502"></a><span class="lineno"><a class="line" href="../../db/d6b/bgp__peer_8cc.html#ac446b5a7ed37b110394244f02478653b"> 2502</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../db/d6b/bgp__peer_8cc.html#ac446b5a7ed37b110394244f02478653b">FillRouteUpdateStats</a>(<span class="keyword">const</span> <a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html">IPeerDebugStats::UpdateStats</a> &amp;stats,</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;                                 PeerUpdateStats *rt_stats) {</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    rt_stats-&gt;set_reach(stats.<a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#a4cab34b80ef186948646d3d8c4de4c40">reach</a>);</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    rt_stats-&gt;set_unreach(stats.<a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#ab6e54e85b2ffb0e46a0c7027b79591f4">unreach</a>);</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    rt_stats-&gt;set_end_of_rib(stats.<a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#ac58a864f74a80d1ff1dde97e1566cb9d">end_of_rib</a>);</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    rt_stats-&gt;set_total(stats.<a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#a4cab34b80ef186948646d3d8c4de4c40">reach</a> + stats.<a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#ab6e54e85b2ffb0e46a0c7027b79591f4">unreach</a> + stats.<a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#ac58a864f74a80d1ff1dde97e1566cb9d">end_of_rib</a>);</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;}</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160; </div>
<div class="line"><a name="l02510"></a><span class="lineno"><a class="line" href="../../db/d6b/bgp__peer_8cc.html#a79234e57e3c509076578bfbbc6d96d8f"> 2510</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../db/d6b/bgp__peer_8cc.html#a79234e57e3c509076578bfbbc6d96d8f">FillSocketStats</a>(<span class="keyword">const</span> <a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html">IPeerDebugStats::SocketStats</a> &amp;socket_stats,</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;                            PeerSocketStats *peer_socket_stats) {</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    peer_socket_stats-&gt;set_calls(socket_stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a45b6655a5f057a42021896c2a384d191">calls</a>);</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    peer_socket_stats-&gt;set_bytes(socket_stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a9d77995204760aa176a9b5d7ebeec0b5">bytes</a>);</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <span class="keywordflow">if</span> (socket_stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a45b6655a5f057a42021896c2a384d191">calls</a>) {</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;        peer_socket_stats-&gt;set_average_bytes(</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;            socket_stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a9d77995204760aa176a9b5d7ebeec0b5">bytes</a>/socket_stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a45b6655a5f057a42021896c2a384d191">calls</a>);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    }</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    peer_socket_stats-&gt;set_blocked_count(socket_stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a80ecc028d33d85872ae91d9233ad54ba">blocked_count</a>);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    ostringstream os;</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    os &lt;&lt; boost::posix_time::microseconds(<span class="keywordtype">long</span>(socket_stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a6c996ba2076f750029dcd4a3a0a4c137">blocked_duration_usecs</a>));</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    peer_socket_stats-&gt;set_blocked_duration(os.str());</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <span class="keywordflow">if</span> (socket_stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a80ecc028d33d85872ae91d9233ad54ba">blocked_count</a>) {</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        os.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        os &lt;&lt; boost::posix_time::microseconds(</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;            socket_stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a6c996ba2076f750029dcd4a3a0a4c137">blocked_duration_usecs</a>/socket_stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a80ecc028d33d85872ae91d9233ad54ba">blocked_count</a>);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;        peer_socket_stats-&gt;set_average_blocked_duration(os.str());</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    }</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;}</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160; </div>
<div class="line"><a name="l02530"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a5614a26c42e85ffa4c3413707fed2edc"> 2530</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a5614a26c42e85ffa4c3413707fed2edc">BgpPeer::FillCloseInfo</a>(BgpNeighborResp *resp)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">close_manager_</a>-&gt;FillCloseInfo(resp);</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;}</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160; </div>
<div class="line"><a name="l02534"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#af962e80ca07c7f7b327cd8c0dec1384c"> 2534</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#af962e80ca07c7f7b327cd8c0dec1384c">BgpPeer::FillBgpNeighborDebugState</a>(BgpNeighborResp *bnr,</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="../../d0/d3f/classIPeerDebugStats.html">IPeerDebugStats</a> *<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>) {</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    bnr-&gt;set_last_state(<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#a16054294a20b025fafbe6f4177a87e26">last_state</a>());</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    bnr-&gt;set_last_event(<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#aa7a05e414eccbb9c6b8cc5f77bc84643">last_event</a>());</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    bnr-&gt;set_last_error(<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#a058a179cf06052a2299fe08dc0e6ff6f">last_error</a>());</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    bnr-&gt;set_last_state_at(<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#a1b759c41007bd9cf5e99a1ac84fd71b4">last_state_change_at</a>());</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    bnr-&gt;set_flap_count(<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#a0c4d3179ccf5a3d02fd411d45f1e9350">num_flaps</a>());</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    bnr-&gt;set_flap_time(<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#a38f5a61b0abbceeaae7e248888dbeab8">last_flap</a>());</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160; </div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <a class="code" href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html">IPeerDebugStats::ProtoStats</a> stats;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    PeerProtoStats proto_stats;</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#a1bc58ad5a7f56d3d6f0bb2018e41ddc4">GetRxProtoStats</a>(&amp;stats);</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    <a class="code" href="../../db/d6b/bgp__peer_8cc.html#a7db4fb115e6aaa3b0e4d946c5c4d5f31">FillProtoStats</a>(stats, &amp;proto_stats);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    bnr-&gt;set_rx_proto_stats(proto_stats);</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160; </div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#ab4aa64b64432f998aee6f407b7f8d4d7">GetTxProtoStats</a>(&amp;stats);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <a class="code" href="../../db/d6b/bgp__peer_8cc.html#a7db4fb115e6aaa3b0e4d946c5c4d5f31">FillProtoStats</a>(stats, &amp;proto_stats);</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    bnr-&gt;set_tx_proto_stats(proto_stats);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160; </div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <a class="code" href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html">IPeerDebugStats::UpdateStats</a> update_stats;</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    PeerUpdateStats rt_stats;</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#a1465dcdc2ff47b7abb2265c37b3c4173">GetRxRouteUpdateStats</a>(&amp;update_stats);</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <a class="code" href="../../db/d6b/bgp__peer_8cc.html#ac446b5a7ed37b110394244f02478653b">FillRouteUpdateStats</a>(update_stats, &amp;rt_stats);</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    bnr-&gt;set_rx_update_stats(rt_stats);</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160; </div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#a9f9588227a8d7182062934ccfa4f70d3">GetTxRouteUpdateStats</a>(&amp;update_stats);</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <a class="code" href="../../db/d6b/bgp__peer_8cc.html#ac446b5a7ed37b110394244f02478653b">FillRouteUpdateStats</a>(update_stats, &amp;rt_stats);</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    bnr-&gt;set_tx_update_stats(rt_stats);</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160; </div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html">IPeerDebugStats::SocketStats</a> socket_stats;</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;    PeerSocketStats peer_socket_stats;</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160; </div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#ad6d643c909f0d4e074bf99078f47803a">GetRxSocketStats</a>(&amp;socket_stats);</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    <a class="code" href="../../db/d6b/bgp__peer_8cc.html#a79234e57e3c509076578bfbbc6d96d8f">FillSocketStats</a>(socket_stats, &amp;peer_socket_stats);</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    bnr-&gt;set_rx_socket_stats(peer_socket_stats);</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160; </div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">peer_stats</a>-&gt;<a class="code" href="../../d0/d3f/classIPeerDebugStats.html#a8e04316f6a8af8d4f66046ad74c060b1">GetTxSocketStats</a>(&amp;socket_stats);</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <a class="code" href="../../db/d6b/bgp__peer_8cc.html#a79234e57e3c509076578bfbbc6d96d8f">FillSocketStats</a>(socket_stats, &amp;peer_socket_stats);</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    bnr-&gt;set_tx_socket_stats(peer_socket_stats);</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;}</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160; </div>
<div class="line"><a name="l02575"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aadd99bab4ab4e9b569f5220ea44e64a0"> 2575</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#aadd99bab4ab4e9b569f5220ea44e64a0">BgpPeer::FillBgpNeighborFamilyAttributes</a>(BgpNeighborResp *nbr)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    vector&lt;ShowBgpNeighborFamily&gt; show_family_attributes_list;</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4">Address::UNSPEC</a>; idx &lt; <a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1932708671ede7d14f0dda2710c51b19">Address::NUM_FAMILIES</a>; ++idx) {</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[idx])</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;        ShowBgpNeighborFamily show_family_attributes;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        show_family_attributes.set_family(</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;            <a class="code" href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a>(<span class="keyword">static_cast&lt;</span><a class="code" href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a><span class="keyword">&gt;</span>(idx)));</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;        show_family_attributes.set_loop_count(</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[idx]-&gt;loop_count);</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        show_family_attributes.set_prefix_limit(</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[idx]-&gt;prefix_limit);</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        show_family_attributes.set_idle_timeout(</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;            <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[idx]-&gt;idle_timeout);</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[idx]-&gt;gateway_address.is_unspecified()) {</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;            show_family_attributes.set_gateway_address(</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                <a class="code" href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">family_attributes_list_</a>[idx]-&gt;gateway_address.to_string());</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        }</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;        show_family_attributes_list.push_back(show_family_attributes);</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    }</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    nbr-&gt;set_family_attributes_list(show_family_attributes_list);</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;}</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160; </div>
<div class="line"><a name="l02598"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aa2431cdc0cc9b792fab3a22249d6b064"> 2598</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#aa2431cdc0cc9b792fab3a22249d6b064">BgpPeer::FillNeighborInfo</a>(<span class="keyword">const</span> <a class="code" href="../../d2/da6/structBgpSandeshContext.html">BgpSandeshContext</a> *bsc,</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    BgpNeighborResp *bnr, <span class="keywordtype">bool</span> summary)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    bnr-&gt;set_instance_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">rtinstance_</a>-&gt;<a class="code" href="../../de/ddf/classRoutingInstance.html#a04603321cf74e128aee933a6d0e8cd52">name</a>());</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    bnr-&gt;set_peer(<a class="code" href="../../d3/d2d/classBgpPeer.html#a682c20234fec93855a0ebffefc58d2da">peer_basename_</a>);</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    bnr-&gt;set_deleted(<a class="code" href="../../d3/d2d/classBgpPeer.html#a4cb7f0c4ea1d54f1ed05ad2418b974f3">IsDeleted</a>());</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    bnr-&gt;set_closed_at(<a class="code" href="../../d0/d91/time__util_8h.html#a044dc682f4fdf00e702b369cbf195d83">UTCUsecToString</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a7dde8892a9cfa640966daa3779158101">deleter_</a>-&gt;delete_time_stamp_usecs()));</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    bnr-&gt;set_admin_down(<a class="code" href="../../d3/d2d/classBgpPeer.html#a018e5430f3a5941f6c44c6b047cbac4b">admin_down_</a>);</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    bnr-&gt;set_passive(<a class="code" href="../../d3/d2d/classBgpPeer.html#ac9a26ddbf41063fefe2d4645329ac417">passive_</a>);</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    bnr-&gt;set_as_override(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2ea223263d00cf47550588bf59fd0595">as_override_</a>);</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    bnr-&gt;set_origin_override(<a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a>.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a6b6be16eb780109f8b5f504ebe53cb34">origin_override</a>);</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a>.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a6b6be16eb780109f8b5f504ebe53cb34">origin_override</a>) {</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;        bnr-&gt;set_route_origin(<a class="code" href="../../d5/dcf/classBgpAttr.html#a3685944fbf9c8eadd96b6d4b01f1a1dc">BgpAttr::OriginToString</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">origin_override_</a>.<a class="code" href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a9c56683360b67adbbe41750aa3c34b3e">origin</a>));</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        bnr-&gt;set_route_origin(<span class="stringliteral">&quot;-&quot;</span>);</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    }</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    bnr-&gt;set_private_as_action(<a class="code" href="../../d3/d2d/classBgpPeer.html#aefda4110ad1fed88ad32ccd49d930106">private_as_action_</a>);</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    bnr-&gt;set_peer_address(<a class="code" href="../../d3/d2d/classBgpPeer.html#a0a810a5996a33d5b63d221c0529c36ed">peer_address_string</a>());</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    bnr-&gt;set_peer_id(<a class="code" href="../../d3/d2d/classBgpPeer.html#ae90027428ee465500a28c240e4acaa8c">bgp_identifier_string</a>());</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    bnr-&gt;set_peer_asn(<a class="code" href="../../d3/d2d/classBgpPeer.html#ad22f6021787f7c70c392ede07539806d">peer_as</a>());</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    bnr-&gt;set_peer_port(<a class="code" href="../../d3/d2d/classBgpPeer.html#af0c212e652cc792b8b0424adeb3cf9a9">peer_port</a>());</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    bnr-&gt;set_transport_address(<a class="code" href="../../d3/d2d/classBgpPeer.html#a46e607fef94d156b8dcd846435ad59ec">transport_address_string</a>());</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    bnr-&gt;set_encoding(<span class="stringliteral">&quot;BGP&quot;</span>);</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    bnr-&gt;set_peer_type(<a class="code" href="../../d3/d2d/classBgpPeer.html#a0ab2250b92472afbff2e4f16c3eeba46">PeerType</a>() == <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a0cae037af860ebb2c9546ca55adf5ad7">BgpProto::IBGP</a> ? <span class="stringliteral">&quot;internal&quot;</span> : <span class="stringliteral">&quot;external&quot;</span>);</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    bnr-&gt;set_router_type(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">router_type_</a>);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    bnr-&gt;set_state(<a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;StateName());</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    bnr-&gt;set_local_address(<a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#a965a787f1dd30af68bf8c371a4004217">ToString</a>());</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    bnr-&gt;set_local_id(<a class="code" href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a>(ntohl(<a class="code" href="../../d3/d2d/classBgpPeer.html#a3acf24b370055bcfb818a85b1af598b6">local_bgp_id_</a>)).to_string());</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    bnr-&gt;set_local_asn(<a class="code" href="../../d3/d2d/classBgpPeer.html#af88b4529b26a77bfabfc9c057bf01ddc">local_as</a>());</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    bnr-&gt;set_cluster_id(<a class="code" href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a9314eb1207cbd9262434f824aaf3ce3e">cluster_id_</a>).to_string());</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    bnr-&gt;set_negotiated_hold_time(<a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;hold_time());</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    bnr-&gt;set_primary_path_count(<a class="code" href="../../d3/d2d/classBgpPeer.html#a443e18136cc491ca12fc9763a36c1838">GetPrimaryPathCount</a>());</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    bnr-&gt;set_task_instance(<a class="code" href="../../d3/d2d/classBgpPeer.html#adc279e2cf7262d19cf3cd3d3c8c1a2a5">GetTaskInstance</a>());</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    bnr-&gt;set_send_ready(<a class="code" href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">send_ready_</a>);</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    bnr-&gt;set_flap_count(<a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;num_flaps());</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    bnr-&gt;set_as4_supported(<a class="code" href="../../d3/d2d/classBgpPeer.html#addeee4e254b6236de084a1f5b3bffdf0">Is4ByteAsSupported</a>());</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    bnr-&gt;set_flap_time(<a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;last_flap());</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    bnr-&gt;set_auth_type(</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;        <a class="code" href="../../d1/df6/classAuthenticationData.html#a3a96121ab2ad33482b3a6803e3268d0b">AuthenticationData::KeyTypeToString</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1a8ddbd1ad4936224fe699c2dfd8b8b1">inuse_authkey_type_</a>));</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    <span class="keywordflow">if</span> (bsc-&gt;<a class="code" href="../../d2/da6/structBgpSandeshContext.html#a4023cc8e5a2f89b1d5b788fc05444f8c">test_mode</a>()) {</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;        bnr-&gt;set_auth_keys(<a class="code" href="../../d3/d2d/classBgpPeer.html#a84cf0c63dfef6264acba5626a7dc17cb">auth_data_</a>.<a class="code" href="../../d1/df6/classAuthenticationData.html#a365f1efb84596779c8f86f0359a158fa">KeysToStringDetail</a>());</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    }</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160; </div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="keywordflow">if</span> (summary)</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160; </div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    bnr-&gt;set_configured_address_families(<a class="code" href="../../d3/d2d/classBgpPeer.html#a392026641ae9d88934f856dc428e1ce5">configured_families_</a>);</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    bnr-&gt;set_negotiated_address_families(<a class="code" href="../../d3/d2d/classBgpPeer.html#ab600afcbe2f1898e69f8f8755a2697b4">negotiated_families_</a>);</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160; </div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">peer_close_</a>-&gt;FillNeighborInfo(bnr);</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160; </div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    bnr-&gt;set_configured_hold_time(<a class="code" href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">state_machine_</a>-&gt;GetConfiguredHoldTime());</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#aadd99bab4ab4e9b569f5220ea44e64a0">FillBgpNeighborFamilyAttributes</a>(bnr);</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#af962e80ca07c7f7b327cd8c0dec1384c">FillBgpNeighborDebugState</a>(bnr, <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>.get());</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;    <a class="code" href="../../d2/d45/classBgpMembershipManager.html">BgpMembershipManager</a> *mgr = <a class="code" href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">server_</a>-&gt;<a class="code" href="../../db/d26/classBgpServer.html#ae1b50989fe8347f00f3acb93e86198cb">membership_mgr</a>();</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    mgr-&gt;<a class="code" href="../../d2/d45/classBgpMembershipManager.html#abf9970223783eea416380885bb28383f">FillPeerMembershipInfo</a>(<span class="keyword">this</span>, bnr);</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    bnr-&gt;set_routing_instances(vector&lt;BgpNeighborRoutingInstance&gt;());</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a5614a26c42e85ffa4c3413707fed2edc">FillCloseInfo</a>(bnr);</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;}</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160; </div>
<div class="line"><a name="l02657"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ac65f54083de971ab834dcdcabdc38f97"> 2657</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ac65f54083de971ab834dcdcabdc38f97">BgpPeer::inc_rx_open</a>() {</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[0].open++;</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;}</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160; </div>
<div class="line"><a name="l02661"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a5f5f83c2101c9ad27235f146a9899f23"> 2661</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a5f5f83c2101c9ad27235f146a9899f23">BgpPeer::inc_tx_open</a>() {</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[1].open++;</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;}</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160; </div>
<div class="line"><a name="l02665"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#abbb1c65b1cd8845d15bac0658f8d7a41"> 2665</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#abbb1c65b1cd8845d15bac0658f8d7a41">BgpPeer::inc_rx_keepalive</a>() {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[0].keepalive++;</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;}</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160; </div>
<div class="line"><a name="l02669"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a22a6d80f6677cbab5819708559eedc32"> 2669</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a22a6d80f6677cbab5819708559eedc32">BgpPeer::get_rx_keepalive</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[0].keepalive;</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;}</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160; </div>
<div class="line"><a name="l02673"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#afbaea4830890a359cfd3075fbfd789cf"> 2673</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#afbaea4830890a359cfd3075fbfd789cf">BgpPeer::inc_tx_keepalive</a>() {</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[1].keepalive++;</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;}</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160; </div>
<div class="line"><a name="l02677"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a4d7be811a224e76c7c259e6df8782985"> 2677</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a4d7be811a224e76c7c259e6df8782985">BgpPeer::get_tx_keepalive</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[1].keepalive;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;}</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160; </div>
<div class="line"><a name="l02681"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a3f4a3080f754feefaa88ff734d756fd5"> 2681</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a3f4a3080f754feefaa88ff734d756fd5">BgpPeer::inc_rx_update</a>() {</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[0].update++;</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;}</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160; </div>
<div class="line"><a name="l02685"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ac8320bc1f3241cb3d004a64dba25257a"> 2685</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#ac8320bc1f3241cb3d004a64dba25257a">BgpPeer::get_rx_update</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[0].update;</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;}</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160; </div>
<div class="line"><a name="l02689"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ab2e4f5d28e8ebf2d5612a3940d62aa7c"> 2689</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ab2e4f5d28e8ebf2d5612a3940d62aa7c">BgpPeer::inc_tx_update</a>() {</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[1].update++;</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;}</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160; </div>
<div class="line"><a name="l02693"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aa0e722ed1bae840dc58c274918b7a258"> 2693</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#aa0e722ed1bae840dc58c274918b7a258">BgpPeer::get_tx_update</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[1].update;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;}</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160; </div>
<div class="line"><a name="l02697"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aa84ee716dc8e29ae03f2f956bb3cb23a"> 2697</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#aa84ee716dc8e29ae03f2f956bb3cb23a">BgpPeer::inc_rx_notification</a>() {</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[0].notification++;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;}</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160; </div>
<div class="line"><a name="l02701"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a05b7380891178e869b54415ca3566780"> 2701</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a05b7380891178e869b54415ca3566780">BgpPeer::get_rx_notification</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[0].notification;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;}</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160; </div>
<div class="line"><a name="l02705"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a7f7f98cd813eef8642881c62c8e88852"> 2705</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a7f7f98cd813eef8642881c62c8e88852">BgpPeer::inc_tx_notification</a>() {</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;proto_stats_[1].notification++;</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;}</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160; </div>
<div class="line"><a name="l02709"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ab617a4c6c335eea3e786fd082881b62f"> 2709</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ab617a4c6c335eea3e786fd082881b62f">BgpPeer::inc_rx_end_of_rib</a>() {</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[0].end_of_rib++;</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;}</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160; </div>
<div class="line"><a name="l02713"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a682284c883f43d7ceb440baf558fab89"> 2713</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a682284c883f43d7ceb440baf558fab89">BgpPeer::get_rx_end_of_rib</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[0].end_of_rib;</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;}</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160; </div>
<div class="line"><a name="l02717"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a2ed22608e8b0462e04f01ca9f0320c44"> 2717</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a2ed22608e8b0462e04f01ca9f0320c44">BgpPeer::inc_tx_end_of_rib</a>() {</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[1].end_of_rib++;</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;}</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160; </div>
<div class="line"><a name="l02721"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#adadb114ef688befa0bc28ab7623ee880"> 2721</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#adadb114ef688befa0bc28ab7623ee880">BgpPeer::get_tx_end_of_rib</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[1].end_of_rib;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;}</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160; </div>
<div class="line"><a name="l02725"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a6c07d5a2b789f44deeba94567012f9f1"> 2725</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a6c07d5a2b789f44deeba94567012f9f1">BgpPeer::inc_rx_route_reach</a>(uint64_t count) {</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[0].reach += count;</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;}</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160; </div>
<div class="line"><a name="l02729"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aa31a0b656d5434dfaf02142688553026"> 2729</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#aa31a0b656d5434dfaf02142688553026">BgpPeer::get_rx_route_reach</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[0].reach;</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;}</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160; </div>
<div class="line"><a name="l02733"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a76460e5e0f4a669da7a800417c6217bc"> 2733</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a76460e5e0f4a669da7a800417c6217bc">BgpPeer::get_tx_route_reach</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[1].reach;</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;}</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160; </div>
<div class="line"><a name="l02737"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a0a40316b8f5fae550e3d2ecf8ce3f7a1"> 2737</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a0a40316b8f5fae550e3d2ecf8ce3f7a1">BgpPeer::inc_rx_route_unreach</a>(uint64_t count) {</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[0].unreach += count;</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;}</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160; </div>
<div class="line"><a name="l02741"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#abef16f63669bfc9f436c0d9b60b3dde4"> 2741</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#abef16f63669bfc9f436c0d9b60b3dde4">BgpPeer::get_rx_route_unreach</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[0].unreach;</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;}</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160; </div>
<div class="line"><a name="l02745"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a076e7efe3582ac48cf00449cc1dc5ae0"> 2745</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a076e7efe3582ac48cf00449cc1dc5ae0">BgpPeer::get_tx_route_unreach</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[1].unreach;</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;}</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160; </div>
<div class="line"><a name="l02749"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a9125e08327f36c6581f25afefadf4e96"> 2749</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a9125e08327f36c6581f25afefadf4e96">BgpPeer::get_rx_route_total</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[0].reach +</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[0].unreach +</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[0].end_of_rib;</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;}</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160; </div>
<div class="line"><a name="l02755"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ad877733cd463cb95c8ef5946b9429aa4"> 2755</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#ad877733cd463cb95c8ef5946b9429aa4">BgpPeer::get_tx_route_total</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[1].reach +</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[1].unreach +</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;update_stats_[1].end_of_rib;</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;}</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160; </div>
<div class="line"><a name="l02761"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a5dfc7692bc2f3d1e68b4130c96984915"> 2761</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a5dfc7692bc2f3d1e68b4130c96984915">BgpPeer::inc_connect_error</a>() {</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;error_stats_.connect_error++;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;}</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160; </div>
<div class="line"><a name="l02765"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a59fd9509d981bd669566a077da53fff8"> 2765</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a59fd9509d981bd669566a077da53fff8">BgpPeer::inc_connect_timer_expired</a>() {</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;error_stats_.connect_timer++;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;}</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160; </div>
<div class="line"><a name="l02769"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a8f0b0d040b35d6ddad0d692969ba551a"> 2769</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a8f0b0d040b35d6ddad0d692969ba551a">BgpPeer::inc_hold_timer_expired</a>() {</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;error_stats_.hold_timer++;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;}</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160; </div>
<div class="line"><a name="l02773"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#acf0d9c0c8e7b74fea895be0956a590ba"> 2773</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#acf0d9c0c8e7b74fea895be0956a590ba">BgpPeer::inc_open_error</a>() {</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;error_stats_.open_error++;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;}</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160; </div>
<div class="line"><a name="l02777"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a458ab09125d389ef8c6313de152c2991"> 2777</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a458ab09125d389ef8c6313de152c2991">BgpPeer::inc_update_error</a>() {</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;error_stats_.update_error++;</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;}</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160; </div>
<div class="line"><a name="l02781"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a1f755ad3276ca518503c113950cf9b0c"> 2781</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a1f755ad3276ca518503c113950cf9b0c">BgpPeer::get_connect_error</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;error_stats_.connect_error;</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;}</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160; </div>
<div class="line"><a name="l02785"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ae07859cc963d3bb4504ebccf16b0ae47"> 2785</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#ae07859cc963d3bb4504ebccf16b0ae47">BgpPeer::get_connect_timer_expired</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;error_stats_.connect_timer;</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;}</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160; </div>
<div class="line"><a name="l02789"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#aa5e9594750033181a9252c6cf508a9a2"> 2789</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#aa5e9594750033181a9252c6cf508a9a2">BgpPeer::get_hold_timer_expired</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;error_stats_.hold_timer;</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;}</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160; </div>
<div class="line"><a name="l02793"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a97b4836b9c5c3cebcd8c77479d774764"> 2793</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a97b4836b9c5c3cebcd8c77479d774764">BgpPeer::get_open_error</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;error_stats_.open_error;</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;}</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160; </div>
<div class="line"><a name="l02797"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#adebcecad0be99c2e8d0e8e10bcbed3ec"> 2797</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#adebcecad0be99c2e8d0e8e10bcbed3ec">BgpPeer::get_update_error</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;error_stats_.update_error;</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;}</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160; </div>
<div class="line"><a name="l02801"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a6f421d4df2ee4395ade1c66ebf919eb3"> 2801</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a6f421d4df2ee4395ade1c66ebf919eb3">BgpPeer::get_socket_reads</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html">IPeerDebugStats::SocketStats</a> stats;</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;GetRxSocketStats(&amp;stats);</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    <span class="keywordflow">return</span> stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a45b6655a5f057a42021896c2a384d191">calls</a>;</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;}</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160; </div>
<div class="line"><a name="l02807"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a9a5f1eaa09888b463888018d97a34657"> 2807</a></span>&#160;uint64_t <a class="code" href="../../d3/d2d/classBgpPeer.html#a9a5f1eaa09888b463888018d97a34657">BgpPeer::get_socket_writes</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    <a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html">IPeerDebugStats::SocketStats</a> stats;</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">peer_stats_</a>-&gt;GetTxSocketStats(&amp;stats);</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    <span class="keywordflow">return</span> stats.<a class="code" href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a45b6655a5f057a42021896c2a384d191">calls</a>;</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;}</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160; </div>
<div class="line"><a name="l02813"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ab1df6e491ca5de15f3ef85288e61adf8"> 2813</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ab1df6e491ca5de15f3ef85288e61adf8">BgpPeer::last_flap_at</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d2d/classBgpPeer.html#a228db658f9a394324766789ada7345c5">last_flap_</a>) {</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/d70/string__util_8h.html#abf0bb328a638b537a16cc43e3014ab72">integerToString</a>(<a class="code" href="../../d0/d91/time__util_8h.html#a31337b6b9e97c9c772ea8fe38dcf92c8">UTCUsecToPTime</a>(<a class="code" href="../../d3/d2d/classBgpPeer.html#a228db658f9a394324766789ada7345c5">last_flap_</a>));</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    }</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;}</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160; </div>
<div class="line"><a name="l02821"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a490365d0594a602f89f331148d7325c8"> 2821</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a490365d0594a602f89f331148d7325c8">BgpPeer::increment_flap_count</a>() {</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a8b73358fe15d0b6f7695fd3f50157772">flap_count_</a>++;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#aad9cc9af8fe415c3fb101e7b441467d1">total_flap_count_</a>++;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a228db658f9a394324766789ada7345c5">last_flap_</a> = <a class="code" href="../../d0/d91/time__util_8h.html#afd0d4d28c676a532b89ce6cfd1fc7e95">UTCTimestampUsec</a>();</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160; </div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    BgpPeerInfoData peer_info;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    peer_info.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    PeerFlapInfo flap_info;</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    flap_info.set_flap_count(<a class="code" href="../../d3/d2d/classBgpPeer.html#a8b73358fe15d0b6f7695fd3f50157772">flap_count_</a>);</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    flap_info.set_flap_time(<a class="code" href="../../d3/d2d/classBgpPeer.html#a228db658f9a394324766789ada7345c5">last_flap_</a>);</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    peer_info.set_flap_info(flap_info);</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a798072845d07ac98223db93d44ac3387">BGPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160; </div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    PeerFlapData peer_flap_data;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;    peer_flap_data.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    peer_flap_data.set_flap_info(flap_info);</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    assert(!peer_flap_data.get_name().empty());</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a94e494e50f1e43efc626cf6162b1d032">BGP_UVE_SEND2</a>(PeerFlap, peer_flap_data, <span class="stringliteral">&quot;ObjectBgpPeer&quot;</span>);</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;}</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160; </div>
<div class="line"><a name="l02841"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a4c06d4b9741bbbb6df392c0cb12f2818"> 2841</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a4c06d4b9741bbbb6df392c0cb12f2818">BgpPeer::reset_flap_count</a>() {</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a8b73358fe15d0b6f7695fd3f50157772">flap_count_</a> = 0;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a228db658f9a394324766789ada7345c5">last_flap_</a> = 0;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160; </div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    BgpPeerInfoData peer_info;</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    peer_info.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    PeerFlapInfo flap_info;</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    peer_info.set_flap_info(flap_info);</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <a class="code" href="../../d3/d2d/classBgpPeer.html#a798072845d07ac98223db93d44ac3387">BGPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160; </div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    PeerFlapData peer_flap_data;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;    peer_flap_data.set_name(<a class="code" href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">ToUVEKey</a>());</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    peer_flap_data.set_flap_info(flap_info);</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    assert(!peer_flap_data.get_name().empty());</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    <a class="code" href="../../d1/d1a/bgp__log_8h.html#a94e494e50f1e43efc626cf6162b1d032">BGP_UVE_SEND2</a>(PeerFlap, peer_flap_data, <span class="stringliteral">&quot;ObjectBgpPeer&quot;</span>);</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;}</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160; </div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="comment">// Ignore if the peer is IBGP and a BGPaaS client since we do not support that</span></div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="comment">// combination. i.e, allow any EBGP session or any non BGPaaS-client session.</span></div>
<div class="line"><a name="l02860"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#a0e45b6c3d2cd9d7b10e6f9165187aaa6"> 2860</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a0e45b6c3d2cd9d7b10e6f9165187aaa6">BgpPeer::ProcessSession</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#a0ab2250b92472afbff2e4f16c3eeba46">PeerType</a>() != <a class="code" href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a0cae037af860ebb2c9546ca55adf5ad7">BgpProto::IBGP</a> || <a class="code" href="../../d3/d2d/classBgpPeer.html#aa89271909f15c2d9734b5cfd85fba4b6">router_type</a>() != <span class="stringliteral">&quot;bgpaas-client&quot;</span>;</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;}</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment">// Update control DSCP</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"><a class="line" href="../../d3/d2d/classBgpPeer.html#ad097ad83c3dc7e706052d06a8430b582"> 2865</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d2d/classBgpPeer.html#ad097ad83c3dc7e706052d06a8430b582">BgpPeer::DSCPUpdateCallback</a>(uint8_t dscp_value) {</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a> != NULL) &amp;&amp; (dscp_value != 0xFF)) {</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;        <a class="code" href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af24e37114e7cc1f364810c741cb708ec">SetDscpSocketOption</a>(dscp_value);</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    }</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;}</div>
<div class="ttc" id="aaddress_8h_html_a231be25f722543d7460102bbe5c59f5d"><div class="ttname"><a href="../../d9/d9b/address_8h.html#a231be25f722543d7460102bbe5c59f5d">Ip6Address</a></div><div class="ttdeci">boost::asio::ip::address_v6 Ip6Address</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00015">address.h:15</a></div></div>
<div class="ttc" id="aaddress_8h_html_a7055b8d880410aad1e3ba8c041397b6c"><div class="ttname"><a href="../../d9/d9b/address_8h.html#a7055b8d880410aad1e3ba8c041397b6c">IpAddress</a></div><div class="ttdeci">boost::asio::ip::address IpAddress</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00013">address.h:13</a></div></div>
<div class="ttc" id="aaddress_8h_html_ae475599c70b47996f862faa1f265eaa2"><div class="ttname"><a href="../../d9/d9b/address_8h.html#ae475599c70b47996f862faa1f265eaa2">Ip4Address</a></div><div class="ttdeci">boost::asio::ip::address_v4 Ip4Address</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00014">address.h:14</a></div></div>
<div class="ttc" id="abgp__attr_8h_html_a56e3ac88ed7dbb0e4adaee7d33267fb9"><div class="ttname"><a href="../../d7/d4d/bgp__attr_8h.html#a56e3ac88ed7dbb0e4adaee7d33267fb9">BgpAttrSpec</a></div><div class="ttdeci">std::vector&lt; BgpAttribute * &gt; BgpAttrSpec</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00822">bgp_attr.h:822</a></div></div>
<div class="ttc" id="abgp__attr_8h_html_afe1b7c764709d400f02f9a042d09d389"><div class="ttname"><a href="../../d7/d4d/bgp__attr_8h.html#afe1b7c764709d400f02f9a042d09d389">BgpAttrPtr</a></div><div class="ttdeci">boost::intrusive_ptr&lt; const BgpAttr &gt; BgpAttrPtr</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00997">bgp_attr.h:997</a></div></div>
<div class="ttc" id="abgp__common_8h_html_a3f7cf820fc365a92523b26d0dc0831cb"><div class="ttname"><a href="../../db/d4e/bgp__common_8h.html#a3f7cf820fc365a92523b26d0dc0831cb">AS_TRANS</a></div><div class="ttdeci">#define AS_TRANS</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4e/bgp__common_8h_source.html#l00023">bgp_common.h:23</a></div></div>
<div class="ttc" id="abgp__common_8h_html_add8e85a92ef8e9194921ce44a16d8b5c"><div class="ttname"><a href="../../db/d4e/bgp__common_8h.html#add8e85a92ef8e9194921ce44a16d8b5c">as_t</a></div><div class="ttdeci">uint32_t as_t</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4e/bgp__common_8h_source.html#l00021">bgp_common.h:21</a></div></div>
<div class="ttc" id="abgp__factory_8h_html"><div class="ttname"><a href="../../d8/de2/bgp__factory_8h.html">bgp_factory.h</a></div></div>
<div class="ttc" id="abgp__log_8h_html"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html">bgp_log.h</a></div></div>
<div class="ttc" id="abgp__log_8h_html_a170eb1e35ced4a25eaa232d976c68b52"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#a170eb1e35ced4a25eaa232d976c68b52">BGP_LOG_FLAG_ALL</a></div><div class="ttdeci">#define BGP_LOG_FLAG_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00044">bgp_log.h:44</a></div></div>
<div class="ttc" id="abgp__log_8h_html_a38efbe4931f805609e3cf03e71c8da2a"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#a38efbe4931f805609e3cf03e71c8da2a">BGP_LOG_FLAG_SYSLOG</a></div><div class="ttdeci">#define BGP_LOG_FLAG_SYSLOG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00042">bgp_log.h:42</a></div></div>
<div class="ttc" id="abgp__log_8h_html_a497f2721c83a496259b902be23f4eda4"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#a497f2721c83a496259b902be23f4eda4">BGP_LOG_PEER</a></div><div class="ttdeci">#define BGP_LOG_PEER(type, peer, level, flags, dir, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00159">bgp_log.h:159</a></div></div>
<div class="ttc" id="abgp__log_8h_html_a65cb8abe5a6f9b5af882e29bab2cfb37"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#a65cb8abe5a6f9b5af882e29bab2cfb37">BGP_LOG_WARNING_STR</a></div><div class="ttdeci">#define BGP_LOG_WARNING_STR(obj, flags, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00107">bgp_log.h:107</a></div></div>
<div class="ttc" id="abgp__log_8h_html_a7e1aa9a8c19a146ca5f1444d8e422b1c"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#a7e1aa9a8c19a146ca5f1444d8e422b1c">BGP_LOG_PEER_WARNING</a></div><div class="ttdeci">#define BGP_LOG_PEER_WARNING(type, peer, flags, dir, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00182">bgp_log.h:182</a></div></div>
<div class="ttc" id="abgp__log_8h_html_a85d9a9c3df39774684f595be6c4e20dc"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#a85d9a9c3df39774684f595be6c4e20dc">BGP_PEER_DIR_IN</a></div><div class="ttdeci">#define BGP_PEER_DIR_IN</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00139">bgp_log.h:139</a></div></div>
<div class="ttc" id="abgp__log_8h_html_a883486a15a9c3f619896a5c4e96dbeb6"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#a883486a15a9c3f619896a5c4e96dbeb6">BGP_LOG_PEER_TABLE</a></div><div class="ttdeci">#define BGP_LOG_PEER_TABLE(peer, level, flags, tbl, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00205">bgp_log.h:205</a></div></div>
<div class="ttc" id="abgp__log_8h_html_a94e494e50f1e43efc626cf6162b1d032"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#a94e494e50f1e43efc626cf6162b1d032">BGP_UVE_SEND2</a></div><div class="ttdeci">#define BGP_UVE_SEND2(type, object, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00052">bgp_log.h:52</a></div></div>
<div class="ttc" id="abgp__log_8h_html_a96e42cdb2fdbf06e0e78e1bf72791002"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#a96e42cdb2fdbf06e0e78e1bf72791002">BGP_PEER_DIR_NA</a></div><div class="ttdeci">#define BGP_PEER_DIR_NA</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00140">bgp_log.h:140</a></div></div>
<div class="ttc" id="abgp__log_8h_html_aa6496f953053dda69182520cd83e94b2"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#aa6496f953053dda69182520cd83e94b2">BGP_LOG_PEER_NOTICE</a></div><div class="ttdeci">#define BGP_LOG_PEER_NOTICE(type, peer, flags, dir, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00170">bgp_log.h:170</a></div></div>
<div class="ttc" id="abgp__log_8h_html_aa92724a9e2f04546d9e17ad722a35ddd"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#aa92724a9e2f04546d9e17ad722a35ddd">BGP_TRACE_PEER_PACKET</a></div><div class="ttdeci">#define BGP_TRACE_PEER_PACKET(peer, msg, size, level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00310">bgp_log.h:310</a></div></div>
<div class="ttc" id="abgp__log_8h_html_acdca7f274a30c6a20ed5b0d96adf52d9"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#acdca7f274a30c6a20ed5b0d96adf52d9">BGP_LOG_FLAG_TRACE</a></div><div class="ttdeci">#define BGP_LOG_FLAG_TRACE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00043">bgp_log.h:43</a></div></div>
<div class="ttc" id="abgp__log_8h_html_ad55ab976b64334697c76c147ac81dae3"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#ad55ab976b64334697c76c147ac81dae3">BGP_UVE_SEND</a></div><div class="ttdeci">#define BGP_UVE_SEND(type, object)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00046">bgp_log.h:46</a></div></div>
<div class="ttc" id="abgp__log_8h_html_ade3a82a79df2a350d5a25f1fb989d1ab"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#ade3a82a79df2a350d5a25f1fb989d1ab">BGP_LOG_PEER_CRITICAL</a></div><div class="ttdeci">#define BGP_LOG_PEER_CRITICAL(type, peer, flags, dir, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00194">bgp_log.h:194</a></div></div>
<div class="ttc" id="abgp__log_8h_html_af9b1c09de0cc94078c7505280dcfb639"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#af9b1c09de0cc94078c7505280dcfb639">BGP_PEER_DIR_OUT</a></div><div class="ttdeci">#define BGP_PEER_DIR_OUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00138">bgp_log.h:138</a></div></div>
<div class="ttc" id="abgp__log_8h_html_aff45cdfc81cbeeb7413ff44a4c8353c2"><div class="ttname"><a href="../../d1/d1a/bgp__log_8h.html#aff45cdfc81cbeeb7413ff44a4c8353c2">BGP_LOG_STR</a></div><div class="ttdeci">#define BGP_LOG_STR(obj, level, flags, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/bgp__log_8h_source.html#l00089">bgp_log.h:89</a></div></div>
<div class="ttc" id="abgp__membership_8h_html"><div class="ttname"><a href="../../d8/d13/bgp__membership_8h.html">bgp_membership.h</a></div></div>
<div class="ttc" id="abgp__peer_8cc_html_a79234e57e3c509076578bfbbc6d96d8f"><div class="ttname"><a href="../../db/d6b/bgp__peer_8cc.html#a79234e57e3c509076578bfbbc6d96d8f">FillSocketStats</a></div><div class="ttdeci">static void FillSocketStats(const IPeerDebugStats::SocketStats &amp;socket_stats, PeerSocketStats *peer_socket_stats)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02510">bgp_peer.cc:2510</a></div></div>
<div class="ttc" id="abgp__peer_8cc_html_a7db4fb115e6aaa3b0e4d946c5c4d5f31"><div class="ttname"><a href="../../db/d6b/bgp__peer_8cc.html#a7db4fb115e6aaa3b0e4d946c5c4d5f31">FillProtoStats</a></div><div class="ttdeci">static void FillProtoStats(const IPeerDebugStats::ProtoStats &amp;stats, PeerProtoStats *proto_stats)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02491">bgp_peer.cc:2491</a></div></div>
<div class="ttc" id="abgp__peer_8cc_html_ac446b5a7ed37b110394244f02478653b"><div class="ttname"><a href="../../db/d6b/bgp__peer_8cc.html#ac446b5a7ed37b110394244f02478653b">FillRouteUpdateStats</a></div><div class="ttdeci">static void FillRouteUpdateStats(const IPeerDebugStats::UpdateStats &amp;stats, PeerUpdateStats *rt_stats)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02502">bgp_peer.cc:2502</a></div></div>
<div class="ttc" id="abgp__peer_8cc_html_af708dde1180c231e91c294f8e9a14740"><div class="ttname"><a href="../../db/d6b/bgp__peer_8cc.html#af708dde1180c231e91c294f8e9a14740">SkipUpdateSend</a></div><div class="ttdeci">static bool SkipUpdateSend()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01597">bgp_peer.cc:1597</a></div></div>
<div class="ttc" id="abgp__peer_8h_html"><div class="ttname"><a href="../../de/d2b/bgp__peer_8h.html">bgp_peer.h</a></div></div>
<div class="ttc" id="abgp__peer__close_8h_html"><div class="ttname"><a href="../../d9/ddc/bgp__peer__close_8h.html">bgp_peer_close.h</a></div></div>
<div class="ttc" id="abgp__sandesh_8h_html"><div class="ttname"><a href="../../d8/df1/bgp__sandesh_8h.html">bgp_sandesh.h</a></div></div>
<div class="ttc" id="abgp__server_8h_html"><div class="ttname"><a href="../../d6/d53/bgp__server_8h.html">bgp_server.h</a></div></div>
<div class="ttc" id="abgp__session_8h_html"><div class="ttname"><a href="../../dd/d08/bgp__session_8h.html">bgp_session.h</a></div></div>
<div class="ttc" id="abgp__session__manager_8h_html"><div class="ttname"><a href="../../d9/daa/bgp__session__manager_8h.html">bgp_session_manager.h</a></div></div>
<div class="ttc" id="aclassAddress_html"><div class="ttname"><a href="../../de/d6b/classAddress.html">Address</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00017">address.h:17</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987">Address::Family</a></div><div class="ttdeci">Family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00024">address.h:24</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987a1932708671ede7d14f0dda2710c51b19"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1932708671ede7d14f0dda2710c51b19">Address::NUM_FAMILIES</a></div><div class="ttdeci">@ NUM_FAMILIES</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00036">address.h:35</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987a1d93db3747cf6c75ab622601c30544a0"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a1d93db3747cf6c75ab622601c30544a0">Address::INET</a></div><div class="ttdeci">@ INET</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00026">address.h:26</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987a92d4f4ab7dc7f6525846c8f226918325"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a92d4f4ab7dc7f6525846c8f226918325">Address::EVPN</a></div><div class="ttdeci">@ EVPN</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00031">address.h:31</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987a94c20c6da3c99af083baf8ae3a7bc186"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a94c20c6da3c99af083baf8ae3a7bc186">Address::INET6VPN</a></div><div class="ttdeci">@ INET6VPN</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00029">address.h:29</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987a955d91d679be04d62bdaac7441b4a85b">Address::RTARGET</a></div><div class="ttdeci">@ RTARGET</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00030">address.h:30</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987aa3c44729b5b0659bc3627dca7209b231"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa3c44729b5b0659bc3627dca7209b231">Address::ERMVPN</a></div><div class="ttdeci">@ ERMVPN</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00032">address.h:32</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987aa474968a53fad182e1b6340dd2eb80fc"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987aa474968a53fad182e1b6340dd2eb80fc">Address::INET6</a></div><div class="ttdeci">@ INET6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00027">address.h:27</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987abb069c400a63792e38aed961e280c935"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987abb069c400a63792e38aed961e280c935">Address::INETVPN</a></div><div class="ttdeci">@ INETVPN</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00028">address.h:28</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987abec1c916426a0ed6e2fea0edab67ab79"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987abec1c916426a0ed6e2fea0edab67ab79">Address::MVPN</a></div><div class="ttdeci">@ MVPN</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00033">address.h:33</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987ad786bbe2191d6c8829644e8142499fba"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ad786bbe2191d6c8829644e8142499fba">Address::INETMPLS</a></div><div class="ttdeci">@ INETMPLS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00034">address.h:34</a></div></div>
<div class="ttc" id="aclassAddress_html_a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4"><div class="ttname"><a href="../../de/d6b/classAddress.html#a58d0c167a9c218030c678110e9e69987ae9e6cab4d2a0c95a26a950697cc37ae4">Address::UNSPEC</a></div><div class="ttdeci">@ UNSPEC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00025">address.h:25</a></div></div>
<div class="ttc" id="aclassAddress_html_a70c3156878df1ff6e35d2ff8385d80cd"><div class="ttname"><a href="../../de/d6b/classAddress.html#a70c3156878df1ff6e35d2ff8385d80cd">Address::FamilyFromString</a></div><div class="ttdeci">static Family FamilyFromString(const std::string &amp;family)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dea/address_8cc_source.html#l00054">address.cc:54</a></div></div>
<div class="ttc" id="aclassAddress_html_ab34d7c07e9ade3c2ac3c7ef4654b2b77"><div class="ttname"><a href="../../de/d6b/classAddress.html#ab34d7c07e9ade3c2ac3c7ef4654b2b77">Address::V4FromV4MappedV6</a></div><div class="ttdeci">static Ip4Address V4FromV4MappedV6(const Ip6Address &amp;v6_address)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dea/address_8cc_source.html#l00291">address.cc:291</a></div></div>
<div class="ttc" id="aclassAddress_html_ab50a1623edef0ef932ec57e963e74cf8"><div class="ttname"><a href="../../de/d6b/classAddress.html#ab50a1623edef0ef932ec57e963e74cf8">Address::FamilyToString</a></div><div class="ttdeci">static std::string FamilyToString(Family fmly)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dea/address_8cc_source.html#l00063">address.cc:63</a></div></div>
<div class="ttc" id="aclassAsPath4Byte_html_a129d1022be4a4e23e8215a54e87d84aa"><div class="ttname"><a href="../../d1/dc1/classAsPath4Byte.html#a129d1022be4a4e23e8215a54e87d84aa">AsPath4Byte::path</a></div><div class="ttdeci">const AsPath4ByteSpec &amp; path() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9d/bgp__aspath_8h_source.html#l00285">bgp_aspath.h:285</a></div></div>
<div class="ttc" id="aclassAsPath_html_a675543f03fbe8170f429b822ade053e3"><div class="ttname"><a href="../../d7/dfb/classAsPath.html#a675543f03fbe8170f429b822ade053e3">AsPath::path</a></div><div class="ttdeci">const AsPathSpec &amp; path() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9d/bgp__aspath_8h_source.html#l00127">bgp_aspath.h:127</a></div></div>
<div class="ttc" id="aclassAuthenticationData_html"><div class="ttname"><a href="../../d1/df6/classAuthenticationData.html">AuthenticationData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00041">bgp_config.h:41</a></div></div>
<div class="ttc" id="aclassAuthenticationData_html_a05f771dd4fdce84837a3b33c80af0959"><div class="ttname"><a href="../../d1/df6/classAuthenticationData.html#a05f771dd4fdce84837a3b33c80af0959">AuthenticationData::Empty</a></div><div class="ttdeci">bool Empty() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/bgp__config_8cc_source.html#l00106">bgp_config.cc:106</a></div></div>
<div class="ttc" id="aclassAuthenticationData_html_a09906ab2c1b77b009649b348a72fb23a"><div class="ttname"><a href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23a">AuthenticationData::KeyType</a></div><div class="ttdeci">KeyType</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00043">bgp_config.h:43</a></div></div>
<div class="ttc" id="aclassAuthenticationData_html_a09906ab2c1b77b009649b348a72fb23aa513a8f1409e8477eeab41abdefac6db6"><div class="ttname"><a href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23aa513a8f1409e8477eeab41abdefac6db6">AuthenticationData::NIL</a></div><div class="ttdeci">@ NIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00044">bgp_config.h:44</a></div></div>
<div class="ttc" id="aclassAuthenticationData_html_a09906ab2c1b77b009649b348a72fb23aad7c4a5f838c6ed060336b61a450c0dc6"><div class="ttname"><a href="../../d1/df6/classAuthenticationData.html#a09906ab2c1b77b009649b348a72fb23aad7c4a5f838c6ed060336b61a450c0dc6">AuthenticationData::MD5</a></div><div class="ttdeci">@ MD5</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00045">bgp_config.h:45</a></div></div>
<div class="ttc" id="aclassAuthenticationData_html_a0afd6f0f60eb71adab95700c8015ca83"><div class="ttname"><a href="../../d1/df6/classAuthenticationData.html#a0afd6f0f60eb71adab95700c8015ca83">AuthenticationData::const_iterator</a></div><div class="ttdeci">AuthenticationKeyChain::const_iterator const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00048">bgp_config.h:48</a></div></div>
<div class="ttc" id="aclassAuthenticationData_html_a365f1efb84596779c8f86f0359a158fa"><div class="ttname"><a href="../../d1/df6/classAuthenticationData.html#a365f1efb84596779c8f86f0359a158fa">AuthenticationData::KeysToStringDetail</a></div><div class="ttdeci">std::vector&lt; std::string &gt; KeysToStringDetail() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/bgp__config_8cc_source.html#l00143">bgp_config.cc:143</a></div></div>
<div class="ttc" id="aclassAuthenticationData_html_a3a96121ab2ad33482b3a6803e3268d0b"><div class="ttname"><a href="../../d1/df6/classAuthenticationData.html#a3a96121ab2ad33482b3a6803e3268d0b">AuthenticationData::KeyTypeToString</a></div><div class="ttdeci">std::string KeyTypeToString() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/bgp__config_8cc_source.html#l00114">bgp_config.cc:114</a></div></div>
<div class="ttc" id="aclassAuthenticationData_html_a8568b7cead983a8e01b8f7f7939c82f0"><div class="ttname"><a href="../../d1/df6/classAuthenticationData.html#a8568b7cead983a8e01b8f7f7939c82f0">AuthenticationData::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00050">bgp_config.h:50</a></div></div>
<div class="ttc" id="aclassAuthenticationData_html_ae7bf0fb3bd085ce33e63e1739ded616e"><div class="ttname"><a href="../../d1/df6/classAuthenticationData.html#ae7bf0fb3bd085ce33e63e1739ded616e">AuthenticationData::key_type</a></div><div class="ttdeci">KeyType key_type() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00070">bgp_config.h:70</a></div></div>
<div class="ttc" id="aclassBgpAf_html_a8dc4963e2376427a25a495fdcf6159a6a7cd1f9080c99003898355602bbcebfcd"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a7cd1f9080c99003898355602bbcebfcd">BgpAf::RTarget</a></div><div class="ttdeci">@ RTarget</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9a/bgp__af_8h_source.html#l00030">bgp_af.h:30</a></div></div>
<div class="ttc" id="aclassBgpAf_html_a8dc4963e2376427a25a495fdcf6159a6a9099fbe015cf4e60f4a8cec9d08f9237"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a9099fbe015cf4e60f4a8cec9d08f9237">BgpAf::EVpn</a></div><div class="ttdeci">@ EVpn</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9a/bgp__af_8h_source.html#l00028">bgp_af.h:28</a></div></div>
<div class="ttc" id="aclassBgpAf_html_a8dc4963e2376427a25a495fdcf6159a6a9291bbeae93060c4a6c72b6774b27a18"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a9291bbeae93060c4a6c72b6774b27a18">BgpAf::Unicast</a></div><div class="ttdeci">@ Unicast</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9a/bgp__af_8h_source.html#l00025">bgp_af.h:25</a></div></div>
<div class="ttc" id="aclassBgpAf_html_a8dc4963e2376427a25a495fdcf6159a6a948b4ac1b6b7b434d85403d0ecaea4f2"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a948b4ac1b6b7b434d85403d0ecaea4f2">BgpAf::MVpn</a></div><div class="ttdeci">@ MVpn</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9a/bgp__af_8h_source.html#l00027">bgp_af.h:27</a></div></div>
<div class="ttc" id="aclassBgpAf_html_a8dc4963e2376427a25a495fdcf6159a6a9a4a89105f0afbf2f3335b67aa4a2e9c"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6a9a4a89105f0afbf2f3335b67aa4a2e9c">BgpAf::Vpn</a></div><div class="ttdeci">@ Vpn</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9a/bgp__af_8h_source.html#l00029">bgp_af.h:29</a></div></div>
<div class="ttc" id="aclassBgpAf_html_a8dc4963e2376427a25a495fdcf6159a6af729adf984e91b6c998774bd3fb26a53"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#a8dc4963e2376427a25a495fdcf6159a6af729adf984e91b6c998774bd3fb26a53">BgpAf::Mpls</a></div><div class="ttdeci">@ Mpls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9a/bgp__af_8h_source.html#l00026">bgp_af.h:26</a></div></div>
<div class="ttc" id="aclassBgpAf_html_a9cbc6441473fd1b787c786d677e66b8e"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#a9cbc6441473fd1b787c786d677e66b8e">BgpAf::FamilyToAfiSafi</a></div><div class="ttdeci">static std::pair&lt; uint16_t, uint8_t &gt; FamilyToAfiSafi(Address::Family family)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d44/bgp__af_8cc_source.html#l00130">bgp_af.cc:130</a></div></div>
<div class="ttc" id="aclassBgpAf_html_a9dce2de0c64040ff04fceeb08d0eba35"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#a9dce2de0c64040ff04fceeb08d0eba35">BgpAf::FamilyToAfi</a></div><div class="ttdeci">static Afi FamilyToAfi(Address::Family family)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d44/bgp__af_8cc_source.html#l00159">bgp_af.cc:159</a></div></div>
<div class="ttc" id="aclassBgpAf_html_ab16718e60776df3b918c692f4dc079fe"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#ab16718e60776df3b918c692f4dc079fe">BgpAf::FamilyToSafi</a></div><div class="ttdeci">static Safi FamilyToSafi(Address::Family family)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d44/bgp__af_8cc_source.html#l00188">bgp_af.cc:188</a></div></div>
<div class="ttc" id="aclassBgpAf_html_ae1b298caf3c626e2280fb359402778c6a0c8816042f8fc743e20028b21badd457"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#ae1b298caf3c626e2280fb359402778c6a0c8816042f8fc743e20028b21badd457">BgpAf::L2Vpn</a></div><div class="ttdeci">@ L2Vpn</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9a/bgp__af_8h_source.html#l00021">bgp_af.h:21</a></div></div>
<div class="ttc" id="aclassBgpAf_html_ae1b298caf3c626e2280fb359402778c6a74562d83502cbde56946570f27a9a604"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#ae1b298caf3c626e2280fb359402778c6a74562d83502cbde56946570f27a9a604">BgpAf::IPv4</a></div><div class="ttdeci">@ IPv4</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9a/bgp__af_8h_source.html#l00019">bgp_af.h:19</a></div></div>
<div class="ttc" id="aclassBgpAf_html_ae1b298caf3c626e2280fb359402778c6ad763720558c5bbe4730573b0863813b4"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#ae1b298caf3c626e2280fb359402778c6ad763720558c5bbe4730573b0863813b4">BgpAf::IPv6</a></div><div class="ttdeci">@ IPv6</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9a/bgp__af_8h_source.html#l00020">bgp_af.h:20</a></div></div>
<div class="ttc" id="aclassBgpAf_html_ae2c45f2bc1070881b2c7910c5204daf1"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#ae2c45f2bc1070881b2c7910c5204daf1">BgpAf::AfiSafiToFamily</a></div><div class="ttdeci">static Address::Family AfiSafiToFamily(uint16_t afi, uint8_t safi)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d44/bgp__af_8cc_source.html#l00071">bgp_af.cc:71</a></div></div>
<div class="ttc" id="aclassBgpAf_html_af6f40be8104520509a4c3b49cc5e65f7"><div class="ttname"><a href="../../d4/dc3/classBgpAf.html#af6f40be8104520509a4c3b49cc5e65f7">BgpAf::ToString</a></div><div class="ttdeci">static std::string ToString(uint16_t afi, uint8_t safi)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d44/bgp__af_8cc_source.html#l00014">bgp_af.cc:14</a></div></div>
<div class="ttc" id="aclassBgpAttrDB_html_a3b9e04df402e72067e709a518d0ee9eb"><div class="ttname"><a href="../../d7/d34/classBgpAttrDB.html#a3b9e04df402e72067e709a518d0ee9eb">BgpAttrDB::ReplaceLocalPreferenceAndLocate</a></div><div class="ttdeci">BgpAttrPtr ReplaceLocalPreferenceAndLocate(const BgpAttr *attr, uint32_t local_pref)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3e/bgp__attr_8cc_source.html#l01368">bgp_attr.cc:1368</a></div></div>
<div class="ttc" id="aclassBgpAttrDB_html_a517fa916d32aa26ae794101bd51a5144"><div class="ttname"><a href="../../d7/d34/classBgpAttrDB.html#a517fa916d32aa26ae794101bd51a5144">BgpAttrDB::ReplaceNexthopAndLocate</a></div><div class="ttdeci">BgpAttrPtr ReplaceNexthopAndLocate(const BgpAttr *attr, const IpAddress &amp;addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3e/bgp__attr_8cc_source.html#l01435">bgp_attr.cc:1435</a></div></div>
<div class="ttc" id="aclassBgpAttrDB_html_a63ebbf2ef6550332e61a5fb1387f56ea"><div class="ttname"><a href="../../d7/d34/classBgpAttrDB.html#a63ebbf2ef6550332e61a5fb1387f56ea">BgpAttrDB::ReplaceSubProtocolAndLocate</a></div><div class="ttdeci">BgpAttrPtr ReplaceSubProtocolAndLocate(const BgpAttr *attr, const std::string &amp;sbp)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3e/bgp__attr_8cc_source.html#l01418">bgp_attr.cc:1418</a></div></div>
<div class="ttc" id="aclassBgpAttrDB_html_a775ed2dc85c2800179c6a37dfbdd5fcd"><div class="ttname"><a href="../../d7/d34/classBgpAttrDB.html#a775ed2dc85c2800179c6a37dfbdd5fcd">BgpAttrDB::ReplaceOriginAndLocate</a></div><div class="ttdeci">BgpAttrPtr ReplaceOriginAndLocate(const BgpAttr *attr, BgpAttrOrigin::OriginType origin)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3e/bgp__attr_8cc_source.html#l01336">bgp_attr.cc:1336</a></div></div>
<div class="ttc" id="aclassBgpAttr_html"><div class="ttname"><a href="../../d5/dcf/classBgpAttr.html">BgpAttr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00825">bgp_attr.h:825</a></div></div>
<div class="ttc" id="aclassBgpAttr_html_a14acc99c052a6c803abd70dde5733c61"><div class="ttname"><a href="../../d5/dcf/classBgpAttr.html#a14acc99c052a6c803abd70dde5733c61">BgpAttr::as_path</a></div><div class="ttdeci">const AsPath * as_path() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00901">bgp_attr.h:901</a></div></div>
<div class="ttc" id="aclassBgpAttr_html_a3685944fbf9c8eadd96b6d4b01f1a1dc"><div class="ttname"><a href="../../d5/dcf/classBgpAttr.html#a3685944fbf9c8eadd96b6d4b01f1a1dc">BgpAttr::OriginToString</a></div><div class="ttdeci">static std::string OriginToString(BgpAttrOrigin::OriginType origin)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3e/bgp__attr_8cc_source.html#l01109">bgp_attr.cc:1109</a></div></div>
<div class="ttc" id="aclassBgpAttr_html_a5d3491fa681985b78302e77796203e8a"><div class="ttname"><a href="../../d5/dcf/classBgpAttr.html#a5d3491fa681985b78302e77796203e8a">BgpAttr::cluster_list</a></div><div class="ttdeci">const ClusterList * cluster_list() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00909">bgp_attr.h:909</a></div></div>
<div class="ttc" id="aclassBgpAttr_html_a6d74a61cd19664d09a65caa357a03134"><div class="ttname"><a href="../../d5/dcf/classBgpAttr.html#a6d74a61cd19664d09a65caa357a03134">BgpAttr::IsAsPathLoop</a></div><div class="ttdeci">int IsAsPathLoop(as_t asn, uint8_t max_loop_count=0) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3e/bgp__attr_8cc_source.html#l01228">bgp_attr.cc:1228</a></div></div>
<div class="ttc" id="aclassBgpAttr_html_ab5d58214ded24f3074bb3fafca9af08a"><div class="ttname"><a href="../../d5/dcf/classBgpAttr.html#ab5d58214ded24f3074bb3fafca9af08a">BgpAttr::ext_community</a></div><div class="ttdeci">const ExtCommunity * ext_community() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00917">bgp_attr.h:917</a></div></div>
<div class="ttc" id="aclassBgpAttr_html_ac0122cee8dc0e17c54ac7b6d1a0b141b"><div class="ttname"><a href="../../d5/dcf/classBgpAttr.html#ac0122cee8dc0e17c54ac7b6d1a0b141b">BgpAttr::aspath_4byte</a></div><div class="ttdeci">const AsPath4Byte * aspath_4byte() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00904">bgp_attr.h:904</a></div></div>
<div class="ttc" id="aclassBgpAttr_html_ad3d046d381285d8c5e284616b2805c1b"><div class="ttname"><a href="../../d5/dcf/classBgpAttr.html#ad3d046d381285d8c5e284616b2805c1b">BgpAttr::set_ext_community</a></div><div class="ttdeci">void set_ext_community(ExtCommunityPtr extcomm)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3e/bgp__attr_8cc_source.html#l01012">bgp_attr.cc:1012</a></div></div>
<div class="ttc" id="aclassBgpAttr_html_ad60724cd3462c80d1e0c4c5f08afc00f"><div class="ttname"><a href="../../d5/dcf/classBgpAttr.html#ad60724cd3462c80d1e0c4c5f08afc00f">BgpAttr::originator_id</a></div><div class="ttdeci">const Ip4Address &amp; originator_id() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00897">bgp_attr.h:897</a></div></div>
<div class="ttc" id="aclassBgpAttribute_html_a0f53da2f5b76912fd8742705d23faae1a2f8b18b8e1ad3a8be2c1f4aa16022382"><div class="ttname"><a href="../../d9/dc1/classBgpAttribute.html#a0f53da2f5b76912fd8742705d23faae1a2f8b18b8e1ad3a8be2c1f4aa16022382">BgpAttribute::MPReachNlri</a></div><div class="ttdeci">@ MPReachNlri</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de3/bgp__attr__base_8h_source.html#l00042">bgp_attr_base.h:42</a></div></div>
<div class="ttc" id="aclassBgpAttribute_html_a0f53da2f5b76912fd8742705d23faae1aba319b9db10a6716e9ca3e7ca7773cf9"><div class="ttname"><a href="../../d9/dc1/classBgpAttribute.html#a0f53da2f5b76912fd8742705d23faae1aba319b9db10a6716e9ca3e7ca7773cf9">BgpAttribute::MPUnreachNlri</a></div><div class="ttdeci">@ MPUnreachNlri</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de3/bgp__attr__base_8h_source.html#l00043">bgp_attr_base.h:43</a></div></div>
<div class="ttc" id="aclassBgpConfigManager_html_a0d8c4c38b3836163b34b005b75bf3e30"><div class="ttname"><a href="../../da/d05/classBgpConfigManager.html#a0d8c4c38b3836163b34b005b75bf3e30">BgpConfigManager::kDefaultPort</a></div><div class="ttdeci">static const int kDefaultPort</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00780">bgp_config.h:780</a></div></div>
<div class="ttc" id="aclassBgpConfigManager_html_ac0e92a939b94efb93c3670093025f30d"><div class="ttname"><a href="../../da/d05/classBgpConfigManager.html#ac0e92a939b94efb93c3670093025f30d">BgpConfigManager::kMasterInstance</a></div><div class="ttdeci">static const char * kMasterInstance</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00778">bgp_config.h:778</a></div></div>
<div class="ttc" id="aclassBgpGlobalQosConfig_html_a9983dc4b188351033d44ccb756146312"><div class="ttname"><a href="../../d6/dd3/classBgpGlobalQosConfig.html#a9983dc4b188351033d44ccb756146312">BgpGlobalQosConfig::control_dscp</a></div><div class="ttdeci">uint8_t control_dscp() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00718">bgp_config.h:718</a></div></div>
<div class="ttc" id="aclassBgpMembershipManager_html"><div class="ttname"><a href="../../d2/d45/classBgpMembershipManager.html">BgpMembershipManager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d13/bgp__membership_8h_source.html#l00086">bgp_membership.h:86</a></div></div>
<div class="ttc" id="aclassBgpMembershipManager_html_a25559126009032fdeeddd99d0e1df407"><div class="ttname"><a href="../../d2/d45/classBgpMembershipManager.html#a25559126009032fdeeddd99d0e1df407">BgpMembershipManager::RegisterRibIn</a></div><div class="ttdeci">void RegisterRibIn(IPeer *peer, BgpTable *table)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/bgp__membership_8cc_source.html#l00160">bgp_membership.cc:160</a></div></div>
<div class="ttc" id="aclassBgpMembershipManager_html_a5112c7f29e64f9cad6339dc3b6bc87e7"><div class="ttname"><a href="../../d2/d45/classBgpMembershipManager.html#a5112c7f29e64f9cad6339dc3b6bc87e7">BgpMembershipManager::Register</a></div><div class="ttdeci">virtual void Register(IPeer *peer, BgpTable *table, const RibExportPolicy &amp;policy, int instance_id=-1)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/bgp__membership_8cc_source.html#l00119">bgp_membership.cc:119</a></div></div>
<div class="ttc" id="aclassBgpMembershipManager_html_abf9970223783eea416380885bb28383f"><div class="ttname"><a href="../../d2/d45/classBgpMembershipManager.html#abf9970223783eea416380885bb28383f">BgpMembershipManager::FillPeerMembershipInfo</a></div><div class="ttdeci">void FillPeerMembershipInfo(const IPeer *peer, BgpNeighborResp *resp) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/bgp__membership_8cc_source.html#l00406">bgp_membership.cc:406</a></div></div>
<div class="ttc" id="aclassBgpMembershipManager_html_ac6d0968c1da6524be4820f5e7efcf4e8"><div class="ttname"><a href="../../d2/d45/classBgpMembershipManager.html#ac6d0968c1da6524be4820f5e7efcf4e8">BgpMembershipManager::GetRibOutQueueDepth</a></div><div class="ttdeci">uint32_t GetRibOutQueueDepth(const IPeer *peer, const BgpTable *table) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/bgp__membership_8cc_source.html#l00366">bgp_membership.cc:366</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html">BgpNeighborConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00139">bgp_config.h:139</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a03da42f41bf4ce3b571a88a20b6a7499"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a03da42f41bf4ce3b571a88a20b6a7499">BgpNeighborConfig::GetAddressFamilies</a></div><div class="ttdeci">AddressFamilyList GetAddressFamilies() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/bgp__config_8cc_source.html#l00283">bgp_config.cc:283</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a114f42a62d8e00d5a0afe2a44e6c6119"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a114f42a62d8e00d5a0afe2a44e6c6119">BgpNeighborConfig::origin_override</a></div><div class="ttdeci">const OriginOverrideConfig &amp; origin_override() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00273">bgp_config.h:273</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a1e017885bf5231c2f1f01112550a0709"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a1e017885bf5231c2f1f01112550a0709">BgpNeighborConfig::cluster_id</a></div><div class="ttdeci">uint32_t cluster_id() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00195">bgp_config.h:195</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a21f645c0e77aa558f2ef90089ab29834"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a21f645c0e77aa558f2ef90089ab29834">BgpNeighborConfig::source_port</a></div><div class="ttdeci">uint16_t source_port() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00219">bgp_config.h:219</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a29fb28db9f8dce1ccd9e34b8a13fe5d7"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a29fb28db9f8dce1ccd9e34b8a13fe5d7">BgpNeighborConfig::auth_data</a></div><div class="ttdeci">const AuthenticationData &amp; auth_data() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00244">bgp_config.h:244</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a32ebf9e3c38e9412680df0f7780970a5"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a32ebf9e3c38e9412680df0f7780970a5">BgpNeighborConfig::local_identifier</a></div><div class="ttdeci">uint32_t local_identifier() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00236">bgp_config.h:236</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a53340543fd3b70d6d3b466c91943b227"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a53340543fd3b70d6d3b466c91943b227">BgpNeighborConfig::router_type</a></div><div class="ttdeci">std::string router_type() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00222">bgp_config.h:222</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a5a2fd771459c3e4647f0a7e64f529352"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a5a2fd771459c3e4647f0a7e64f529352">BgpNeighborConfig::gateway_address</a></div><div class="ttdeci">const IpAddress &amp; gateway_address(Address::Family family) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de8/bgp__config_8cc_source.html#l00262">bgp_config.cc:262</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a6e03f7754a8a4249241c3cb2c9bd54bc"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a6e03f7754a8a4249241c3cb2c9bd54bc">BgpNeighborConfig::peer_as</a></div><div class="ttdeci">uint32_t peer_as() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00198">bgp_config.h:198</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a6ecbbb8e3e1493fbd8d1f67f9966ce43"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a6ecbbb8e3e1493fbd8d1f67f9966ce43">BgpNeighborConfig::private_as_action</a></div><div class="ttdeci">std::string private_as_action() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00190">bgp_config.h:190</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a811f01f5b0982003b7b85925fc8e1687"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a811f01f5b0982003b7b85925fc8e1687">BgpNeighborConfig::admin_down</a></div><div class="ttdeci">bool admin_down() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00181">bgp_config.h:181</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_a850bd0cf87df8177985c7902cf4e8e21"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#a850bd0cf87df8177985c7902cf4e8e21">BgpNeighborConfig::loop_count</a></div><div class="ttdeci">uint8_t loop_count() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00230">bgp_config.h:230</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_ac072d721a34ad0d6272ee53c371200dc"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#ac072d721a34ad0d6272ee53c371200dc">BgpNeighborConfig::family_attributes_list</a></div><div class="ttdeci">const FamilyAttributesList &amp; family_attributes_list() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00253">bgp_config.h:253</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_ac6e32c1a0f499d4884c429869e59f905"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#ac6e32c1a0f499d4884c429869e59f905">BgpNeighborConfig::local_as</a></div><div class="ttdeci">uint32_t local_as() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00233">bgp_config.h:233</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_ad2a687dcfaba791e29b65d8dca94aa46"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#ad2a687dcfaba791e29b65d8dca94aa46">BgpNeighborConfig::hold_time</a></div><div class="ttdeci">int hold_time() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00227">bgp_config.h:227</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_ad6e3c22260ee2dd118f6e3af863d51c4"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#ad6e3c22260ee2dd118f6e3af863d51c4">BgpNeighborConfig::as_override</a></div><div class="ttdeci">bool as_override() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00187">bgp_config.h:187</a></div></div>
<div class="ttc" id="aclassBgpNeighborConfig_html_adf2929a6675f599e8ba94c92c09baf42"><div class="ttname"><a href="../../d0/dbd/classBgpNeighborConfig.html#adf2929a6675f599e8ba94c92c09baf42">BgpNeighborConfig::passive</a></div><div class="ttdeci">bool passive() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00184">bgp_config.h:184</a></div></div>
<div class="ttc" id="aclassBgpPathAttributeDB_html_a44082a171f6f497d89a5cf77c240c5f6"><div class="ttname"><a href="../../d6/dd7/classBgpPathAttributeDB.html#a44082a171f6f497d89a5cf77c240c5f6">BgpPathAttributeDB::Locate</a></div><div class="ttdeci">TypePtr Locate(Type *attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de3/bgp__attr__base_8h_source.html#l00149">bgp_attr_base.h:149</a></div></div>
<div class="ttc" id="aclassBgpPath_html"><div class="ttname"><a href="../../d7/d0c/classBgpPath.html">BgpPath</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d57/bgp__path_8h_source.html#l00019">bgp_path.h:19</a></div></div>
<div class="ttc" id="aclassBgpPath_html_afb37af7ce888242edf4b96ed03d5ed79a232896abadbc4f28aa116b3ac2b42656"><div class="ttname"><a href="../../d7/d0c/classBgpPath.html#afb37af7ce888242edf4b96ed03d5ed79a232896abadbc4f28aa116b3ac2b42656">BgpPath::NoNeighborAs</a></div><div class="ttdeci">@ NoNeighborAs</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d57/bgp__path_8h_source.html#l00023">bgp_path.h:23</a></div></div>
<div class="ttc" id="aclassBgpPath_html_afb37af7ce888242edf4b96ed03d5ed79a79048e45662dd4d34320a9da26233add"><div class="ttname"><a href="../../d7/d0c/classBgpPath.html#afb37af7ce888242edf4b96ed03d5ed79a79048e45662dd4d34320a9da26233add">BgpPath::ClusterListLooped</a></div><div class="ttdeci">@ ClusterListLooped</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d57/bgp__path_8h_source.html#l00031">bgp_path.h:31</a></div></div>
<div class="ttc" id="aclassBgpPath_html_afb37af7ce888242edf4b96ed03d5ed79a9624c9443236273fc196f16bda1c38b6"><div class="ttname"><a href="../../d7/d0c/classBgpPath.html#afb37af7ce888242edf4b96ed03d5ed79a9624c9443236273fc196f16bda1c38b6">BgpPath::AsPathLooped</a></div><div class="ttdeci">@ AsPathLooped</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d57/bgp__path_8h_source.html#l00022">bgp_path.h:22</a></div></div>
<div class="ttc" id="aclassBgpPath_html_afb37af7ce888242edf4b96ed03d5ed79aaf17399d650e5811131cd29b55c4f289"><div class="ttname"><a href="../../d7/d0c/classBgpPath.html#afb37af7ce888242edf4b96ed03d5ed79aaf17399d650e5811131cd29b55c4f289">BgpPath::OriginatorIdLooped</a></div><div class="ttdeci">@ OriginatorIdLooped</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d57/bgp__path_8h_source.html#l00026">bgp_path.h:26</a></div></div>
<div class="ttc" id="aclassBgpPath_html_afb37af7ce888242edf4b96ed03d5ed79ac0c3dbdeb4fb80c6eb6149e6b4806046"><div class="ttname"><a href="../../d7/d0c/classBgpPath.html#afb37af7ce888242edf4b96ed03d5ed79ac0c3dbdeb4fb80c6eb6149e6b4806046">BgpPath::ResolveNexthop</a></div><div class="ttdeci">@ ResolveNexthop</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d57/bgp__path_8h_source.html#l00027">bgp_path.h:27</a></div></div>
<div class="ttc" id="aclassBgpPeerClose_html"><div class="ttname"><a href="../../d8/d25/classBgpPeerClose.html">BgpPeerClose</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/ddc/bgp__peer__close_8h_source.html#l00019">bgp_peer_close.h:19</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1DeleteActor_html"><div class="ttname"><a href="../../da/db3/classBgpPeer_1_1DeleteActor.html">BgpPeer::DeleteActor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00162">bgp_peer.cc:162</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1DeleteActor_html_a42df8725fffbf41d4816b197b232eb3a"><div class="ttname"><a href="../../da/db3/classBgpPeer_1_1DeleteActor.html#a42df8725fffbf41d4816b197b232eb3a">BgpPeer::DeleteActor::Destroy</a></div><div class="ttdeci">virtual void Destroy()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00187">bgp_peer.cc:187</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1DeleteActor_html_a5ce45fb5b9da30c9ef5a9bf4e1ebfe1a"><div class="ttname"><a href="../../da/db3/classBgpPeer_1_1DeleteActor.html#a5ce45fb5b9da30c9ef5a9bf4e1ebfe1a">BgpPeer::DeleteActor::MayDelete</a></div><div class="ttdeci">virtual bool MayDelete() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00169">bgp_peer.cc:169</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1DeleteActor_html_ab913f0cbaca944bd818561998f1aff0a"><div class="ttname"><a href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ab913f0cbaca944bd818561998f1aff0a">BgpPeer::DeleteActor::peer_</a></div><div class="ttdeci">BgpPeer * peer_</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00216">bgp_peer.cc:216</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1DeleteActor_html_ad71dac4f63fa978a22c520bff3dc99d7"><div class="ttname"><a href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ad71dac4f63fa978a22c520bff3dc99d7">BgpPeer::DeleteActor::DeleteActor</a></div><div class="ttdeci">DeleteActor(BgpPeer *peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00164">bgp_peer.cc:164</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1DeleteActor_html_ae50d6cd5cef871a9bda05eb942e249d4"><div class="ttname"><a href="../../da/db3/classBgpPeer_1_1DeleteActor.html#ae50d6cd5cef871a9bda05eb942e249d4">BgpPeer::DeleteActor::Shutdown</a></div><div class="ttdeci">virtual void Shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00182">bgp_peer.cc:182</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html">BgpPeer::PeerStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00054">bgp_peer.cc:54</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a0186fedaf68421db374295bcfe97d9fa"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a0186fedaf68421db374295bcfe97d9fa">BgpPeer::PeerStats::GetRxRouteUpdateStats</a></div><div class="ttdeci">virtual void GetRxRouteUpdateStats(UpdateStats *stats) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00109">bgp_peer.cc:109</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a033187fe5dd4eaf6c9fe717aa69d9491"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a033187fe5dd4eaf6c9fe717aa69d9491">BgpPeer::PeerStats::num_flaps</a></div><div class="ttdeci">virtual uint64_t num_flaps() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00097">bgp_peer.cc:97</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a0564119924bbf26d5e538e720947a55c"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a0564119924bbf26d5e538e720947a55c">BgpPeer::PeerStats::last_event</a></div><div class="ttdeci">virtual string last_event() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00087">bgp_peer.cc:87</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a134645d354bc2e026b8f28047cdc04f4"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a134645d354bc2e026b8f28047cdc04f4">BgpPeer::PeerStats::GetRxProtoStats</a></div><div class="ttdeci">virtual void GetRxProtoStats(ProtoStats *stats) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00101">bgp_peer.cc:101</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a2af365bdc11acbb8f14c6de2d3f08bce"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a2af365bdc11acbb8f14c6de2d3f08bce">BgpPeer::PeerStats::GetTxSocketStats</a></div><div class="ttdeci">virtual void GetTxSocketStats(IPeerDebugStats::SocketStats *stats) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00125">bgp_peer.cc:125</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a2cbbd18b4a9f9f15fe9ff0cae633413c"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a2cbbd18b4a9f9f15fe9ff0cae633413c">BgpPeer::PeerStats::last_state_change_at</a></div><div class="ttdeci">virtual string last_state_change_at() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00079">bgp_peer.cc:79</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a42658242d52cf02483c4705cbbf92f55"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a42658242d52cf02483c4705cbbf92f55">BgpPeer::PeerStats::proto_stats_</a></div><div class="ttdeci">ProtoStats proto_stats_[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00158">bgp_peer.cc:158</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a4766f003b4eaea3a6d86a5efef45af0f"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a4766f003b4eaea3a6d86a5efef45af0f">BgpPeer::PeerStats::ToString</a></div><div class="ttdeci">virtual string ToString() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00072">bgp_peer.cc:72</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a591afd7f0ffbd3eca295743e7c0c5cdf"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a591afd7f0ffbd3eca295743e7c0c5cdf">BgpPeer::PeerStats::error_stats_</a></div><div class="ttdeci">ErrorStats error_stats_</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00157">bgp_peer.cc:157</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a6939e30edba2ef56dd977550ffdf7b6e"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a6939e30edba2ef56dd977550ffdf7b6e">BgpPeer::PeerStats::GetRxErrorStats</a></div><div class="ttdeci">virtual void GetRxErrorStats(RxErrorStats *stats) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00145">bgp_peer.cc:145</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a87f189e8847db04c22ac85403934d62c"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a87f189e8847db04c22ac85403934d62c">BgpPeer::PeerStats::GetTxProtoStats</a></div><div class="ttdeci">virtual void GetTxProtoStats(ProtoStats *stats) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00105">bgp_peer.cc:105</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a8936af8f537847fdd587a98c4461cbe8"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a8936af8f537847fdd587a98c4461cbe8">BgpPeer::PeerStats::UpdateTxReachRoute</a></div><div class="ttdeci">virtual void UpdateTxReachRoute(uint64_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00140">bgp_peer.cc:140</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_a9221793902316e38af901a448299f383"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#a9221793902316e38af901a448299f383">BgpPeer::PeerStats::GetRxRouteStats</a></div><div class="ttdeci">virtual void GetRxRouteStats(RxRouteStats *stats) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00148">bgp_peer.cc:148</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_aa0634150f0a4f226bd336d2512ce7698"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#aa0634150f0a4f226bd336d2512ce7698">BgpPeer::PeerStats::GetRxSocketStats</a></div><div class="ttdeci">virtual void GetRxSocketStats(IPeerDebugStats::SocketStats *stats) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00117">bgp_peer.cc:117</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_aaeae9ca1fc17d05060595a3028d44264"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#aaeae9ca1fc17d05060595a3028d44264">BgpPeer::PeerStats::Clear</a></div><div class="ttdeci">virtual void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00063">bgp_peer.cc:63</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_ab9fd88c0c34a3d42df67af70b81c2844"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ab9fd88c0c34a3d42df67af70b81c2844">BgpPeer::PeerStats::peer_</a></div><div class="ttdeci">BgpPeer * peer_</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00156">bgp_peer.cc:156</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_abac8f9eb8daa251dba285e5bca0b500c"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#abac8f9eb8daa251dba285e5bca0b500c">BgpPeer::PeerStats::last_flap</a></div><div class="ttdeci">virtual string last_flap() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00092">bgp_peer.cc:92</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_abd6ae4b959b4eab2e4268f28cc3717b7"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#abd6ae4b959b4eab2e4268f28cc3717b7">BgpPeer::PeerStats::last_state</a></div><div class="ttdeci">virtual string last_state() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00076">bgp_peer.cc:76</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_abf1fa6653b8d48527f4d001280f98218"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#abf1fa6653b8d48527f4d001280f98218">BgpPeer::PeerStats::last_error</a></div><div class="ttdeci">virtual string last_error() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00083">bgp_peer.cc:83</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_acc596717d6b9a37bbdd305ae438548bf"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#acc596717d6b9a37bbdd305ae438548bf">BgpPeer::PeerStats::PeerStats</a></div><div class="ttdeci">PeerStats(BgpPeer *peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00056">bgp_peer.cc:56</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_ad77043cfd5968720fb3259e811ed1d70"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ad77043cfd5968720fb3259e811ed1d70">BgpPeer::PeerStats::update_stats_</a></div><div class="ttdeci">UpdateStats update_stats_[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00159">bgp_peer.cc:159</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_ada1ea535807a5a611d7ef9251c979474"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#ada1ea535807a5a611d7ef9251c979474">BgpPeer::PeerStats::UpdateTxUnreachRoute</a></div><div class="ttdeci">virtual void UpdateTxUnreachRoute(uint64_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00136">bgp_peer.cc:136</a></div></div>
<div class="ttc" id="aclassBgpPeer_1_1PeerStats_html_afd8beea20ee260b5d41f846a6ae5da15"><div class="ttname"><a href="../../d8/db7/classBgpPeer_1_1PeerStats.html#afd8beea20ee260b5d41f846a6ae5da15">BgpPeer::PeerStats::GetTxRouteUpdateStats</a></div><div class="ttdeci">virtual void GetTxRouteUpdateStats(UpdateStats *stats) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00113">bgp_peer.cc:113</a></div></div>
<div class="ttc" id="aclassBgpPeer_html"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html">BgpPeer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00082">bgp_peer.h:82</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a00e9cf5b955eb4518efc57aa165aeb90"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a00e9cf5b955eb4518efc57aa165aeb90">BgpPeer::prefix_limit_idle_timer_</a></div><div class="ttdeci">Timer * prefix_limit_idle_timer_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00479">bgp_peer.h:479</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a010fbb84889be26a27be10b4c5158ef8"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a010fbb84889be26a27be10b4c5158ef8">BgpPeer::IsXmppPeer</a></div><div class="ttdeci">virtual bool IsXmppPeer() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01211">bgp_peer.cc:1211</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a018e5430f3a5941f6c44c6b047cbac4b"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a018e5430f3a5941f6c44c6b047cbac4b">BgpPeer::admin_down_</a></div><div class="ttdeci">bool admin_down_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00510">bgp_peer.h:510</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a050d412214c666daa6c3be3353ae4b82"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a050d412214c666daa6c3be3353ae4b82">BgpPeer::as4_supported_</a></div><div class="ttdeci">bool as4_supported_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00521">bgp_peer.h:521</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a05b7380891178e869b54415ca3566780"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a05b7380891178e869b54415ca3566780">BgpPeer::get_rx_notification</a></div><div class="ttdeci">uint64_t get_rx_notification() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02701">bgp_peer.cc:2701</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a063bb5b5859c11683138ce724728a530"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a063bb5b5859c11683138ce724728a530">BgpPeer::kRouteTargetEndOfRibTimeSecs</a></div><div class="ttdeci">static const int kRouteTargetEndOfRibTimeSecs</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00085">bgp_peer.h:85</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a06cc62ee3c988583a518e66b3da2955c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a06cc62ee3c988583a518e66b3da2955c">BgpPeer::PrefixLimitIdleTimerRunning</a></div><div class="ttdeci">bool PrefixLimitIdleTimerRunning() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02204">bgp_peer.cc:2204</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a076e7efe3582ac48cf00449cc1dc5ae0"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a076e7efe3582ac48cf00449cc1dc5ae0">BgpPeer::get_tx_route_unreach</a></div><div class="ttdeci">uint64_t get_tx_route_unreach() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02745">bgp_peer.cc:2745</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a082078cc7d31738960b73af897206f0e"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a082078cc7d31738960b73af897206f0e">BgpPeer::kEndOfRibSendRetryTime</a></div><div class="ttdeci">static const int kEndOfRibSendRetryTime</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00084">bgp_peer.h:84</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a08360c7d1461faccbc2eb3b2a3fcb31c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a08360c7d1461faccbc2eb3b2a3fcb31c">BgpPeer::GetEndOfRibReceiveTime</a></div><div class="ttdeci">uint32_t GetEndOfRibReceiveTime(Address::Family family) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00314">bgp_peer.cc:314</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a08af9ae120c1441ef9dd1aec891998d0"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a08af9ae120c1441ef9dd1aec891998d0">BgpPeer::InstallAuthKeys</a></div><div class="ttdeci">bool InstallAuthKeys()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00842">bgp_peer.cc:842</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a094c7e36349f557e52452365b7f268e0"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a094c7e36349f557e52452365b7f268e0">BgpPeer::CanUseMembershipManager</a></div><div class="ttdeci">virtual bool CanUseMembershipManager() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00421">bgp_peer.cc:421</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a09b8955797282d7c3975a08ee31678e5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a09b8955797282d7c3975a08ee31678e5">BgpPeer::clear_session</a></div><div class="ttdeci">void clear_session()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02325">bgp_peer.cc:2325</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a0a40316b8f5fae550e3d2ecf8ce3f7a1"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a0a40316b8f5fae550e3d2ecf8ce3f7a1">BgpPeer::inc_rx_route_unreach</a></div><div class="ttdeci">void inc_rx_route_unreach(uint64_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02737">bgp_peer.cc:2737</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a0a48bde677ad31fe55db68ee701d8bf3"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a0a48bde677ad31fe55db68ee701d8bf3">BgpPeer::RegisterToVpnTables</a></div><div class="ttdeci">void RegisterToVpnTables()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02224">bgp_peer.cc:2224</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a0a4bd056f757764efe2c0856875e7134"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a0a4bd056f757764efe2c0856875e7134">BgpPeer::FlushUpdate</a></div><div class="ttdeci">virtual bool FlushUpdate()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01675">bgp_peer.cc:1675</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a0a79b1a6ef7ba34ec32fea239c74c462"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a0a79b1a6ef7ba34ec32fea239c74c462">BgpPeer::kMinBufferCapacity</a></div><div class="ttdeci">static const size_t kMinBufferCapacity</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00086">bgp_peer.h:86</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a0a810a5996a33d5b63d221c0529c36ed"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a0a810a5996a33d5b63d221c0529c36ed">BgpPeer::peer_address_string</a></div><div class="ttdeci">const std::string peer_address_string() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00161">bgp_peer.h:161</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a0ab2250b92472afbff2e4f16c3eeba46"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a0ab2250b92472afbff2e4f16c3eeba46">BgpPeer::PeerType</a></div><div class="ttdeci">virtual BgpProto::BgpPeerType PeerType() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00208">bgp_peer.h:208</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a0b70797d50f8e65dd91cc933cdcae829"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a0b70797d50f8e65dd91cc933cdcae829">BgpPeer::MpNlriAllowed</a></div><div class="ttdeci">virtual bool MpNlriAllowed(uint16_t afi, uint8_t safi)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01793">bgp_peer.cc:1793</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a0c4c8832df8bf1227ae289fde48c277e"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a0c4c8832df8bf1227ae289fde48c277e">BgpPeer::GetStateName</a></div><div class="ttdeci">virtual const std::string GetStateName() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01336">bgp_peer.cc:1336</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a0d82a27f155c53c1c38e3825f876c5bf"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a0d82a27f155c53c1c38e3825f876c5bf">BgpPeer::GetEorSendTimerElapsedTime</a></div><div class="ttdeci">virtual time_t GetEorSendTimerElapsedTime() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00310">bgp_peer.cc:310</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a0e45b6c3d2cd9d7b10e6f9165187aaa6"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a0e45b6c3d2cd9d7b10e6f9165187aaa6">BgpPeer::ProcessSession</a></div><div class="ttdeci">virtual bool ProcessSession() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02860">bgp_peer.cc:2860</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a1006a62ba4c1dfbf2fe6edbb2b63bc8f"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a1006a62ba4c1dfbf2fe6edbb2b63bc8f">BgpPeer::PeerAddress</a></div><div class="ttdeci">uint32_t PeerAddress() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00160">bgp_peer.h:160</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a10e845b8144df7ad26cbe2bf6e81ef01"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a10e845b8144df7ad26cbe2bf6e81ef01">BgpPeer::RoutingInstanceCallback</a></div><div class="ttdeci">void RoutingInstanceCallback(const std::string &amp;vrf_name, int op)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00779">bgp_peer.cc:779</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a12c7a7c7f4abd9318a79c2f63b05e120"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a12c7a7c7f4abd9318a79c2f63b05e120">BgpPeer::peer_stats_</a></div><div class="ttdeci">boost::scoped_ptr&lt; PeerStats &gt; peer_stats_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00537">bgp_peer.h:537</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a14ce206222db976a1296319fb49c6613"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a14ce206222db976a1296319fb49c6613">BgpPeer::GetRoutingInstance</a></div><div class="ttdeci">RoutingInstance * GetRoutingInstance()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00202">bgp_peer.h:202</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a16c7a2791391e99800565214393441cd"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a16c7a2791391e99800565214393441cd">BgpPeer::peer_type_</a></div><div class="ttdeci">BgpProto::BgpPeerType peer_type_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00533">bgp_peer.h:533</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a182ee51061a14b2e861217d3a8b9f88a"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a182ee51061a14b2e861217d3a8b9f88a">BgpPeer::CustomClose</a></div><div class="ttdeci">void CustomClose()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01251">bgp_peer.cc:1251</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a194988437b7ab672a3f8c0327187dfb7"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a194988437b7ab672a3f8c0327187dfb7">BgpPeer::state_machine</a></div><div class="ttdeci">StateMachine * state_machine()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00326">bgp_peer.h:326</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a1a8ddbd1ad4936224fe699c2dfd8b8b1"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a1a8ddbd1ad4936224fe699c2dfd8b8b1">BgpPeer::inuse_authkey_type_</a></div><div class="ttdeci">KeyType inuse_authkey_type_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00548">bgp_peer.h:548</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a1b3c7000ab2d921b0598404e2828567b"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a1b3c7000ab2d921b0598404e2828567b">BgpPeer::ToUVEKey</a></div><div class="ttdeci">virtual const std::string &amp; ToUVEKey() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00101">bgp_peer.h:101</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a1c492e9da62a80d4d064154576528fac"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a1c492e9da62a80d4d064154576528fac">BgpPeer::IsInGRTimerWaitState</a></div><div class="ttdeci">virtual bool IsInGRTimerWaitState() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01318">bgp_peer.cc:1318</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a1ca9c1795b5f6eac4c3ffb5a49f39e02"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a1ca9c1795b5f6eac4c3ffb5a49f39e02">BgpPeer::LogInstallAuthKeys</a></div><div class="ttdeci">void LogInstallAuthKeys(const std::string &amp;socket_name, const std::string &amp;oper, const AuthenticationKey &amp;auth_key, KeyType key_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00918">bgp_peer.cc:918</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a1f755ad3276ca518503c113950cf9b0c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a1f755ad3276ca518503c113950cf9b0c">BgpPeer::get_connect_error</a></div><div class="ttdeci">uint64_t get_connect_error() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02781">bgp_peer.cc:2781</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a207a159e83b8771d987ec1256a25c97c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a207a159e83b8771d987ec1256a25c97c">BgpPeer::state_machine_</a></div><div class="ttdeci">boost::scoped_ptr&lt; StateMachine &gt; state_machine_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00534">bgp_peer.h:534</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a228db658f9a394324766789ada7345c5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a228db658f9a394324766789ada7345c5">BgpPeer::last_flap_</a></div><div class="ttdeci">uint64_t last_flap_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00544">bgp_peer.h:544</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a22a6d80f6677cbab5819708559eedc32"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a22a6d80f6677cbab5819708559eedc32">BgpPeer::get_rx_keepalive</a></div><div class="ttdeci">uint64_t get_rx_keepalive() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02669">bgp_peer.cc:2669</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a2513e31b351f7b291c09b96da241e84e"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a2513e31b351f7b291c09b96da241e84e">BgpPeer::server_</a></div><div class="ttdeci">BgpServer * server_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00463">bgp_peer.h:463</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a25ab9a98661718f10006bf221a192b6d"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a25ab9a98661718f10006bf221a192b6d">BgpPeer::BytesToHexString</a></div><div class="ttdeci">std::string BytesToHexString(const u_int8_t *msg, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02339">bgp_peer.cc:2339</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a2c469ffda39e3c510ec0ff5e41ad186d"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a2c469ffda39e3c510ec0ff5e41ad186d">BgpPeer::eor_send_timer_</a></div><div class="ttdeci">Timer * eor_send_timer_[Address::NUM_FAMILIES]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00507">bgp_peer.h:507</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a2ea223263d00cf47550588bf59fd0595"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a2ea223263d00cf47550588bf59fd0595">BgpPeer::as_override_</a></div><div class="ttdeci">bool as_override_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00513">bgp_peer.h:513</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a2ed22608e8b0462e04f01ca9f0320c44"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a2ed22608e8b0462e04f01ca9f0320c44">BgpPeer::inc_tx_end_of_rib</a></div><div class="ttdeci">void inc_tx_end_of_rib()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02717">bgp_peer.cc:2717</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a31a46e65469aad3be886f07604535b08"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a31a46e65469aad3be886f07604535b08">BgpPeer::IsRouterTypeBGPaaS</a></div><div class="ttdeci">bool IsRouterTypeBGPaaS() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00358">bgp_peer.h:358</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a31b4db80e2366cf1981c3bf3e02b57aa"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a31b4db80e2366cf1981c3bf3e02b57aa">BgpPeer::GetMpNlriNexthop</a></div><div class="ttdeci">BgpAttrPtr GetMpNlriNexthop(BgpMpNlri *nlri, BgpAttrPtr attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02383">bgp_peer.cc:2383</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a32c8021fee01ca20c763462c1ff4ef6a"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a32c8021fee01ca20c763462c1ff4ef6a">BgpPeer::SetSessionSocketAuthKey</a></div><div class="ttdeci">void SetSessionSocketAuthKey(TcpSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00894">bgp_peer.cc:894</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a34de40ee21a6231704e4a053dc5839c5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a34de40ee21a6231704e4a053dc5839c5">BgpPeer::StopKeepaliveTimerUnlocked</a></div><div class="ttdeci">void StopKeepaliveTimerUnlocked()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02301">bgp_peer.cc:2301</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a3506e76496faf7d161ac6970c34ce08f"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a3506e76496faf7d161ac6970c34ce08f">BgpPeer::ClearConfig</a></div><div class="ttdeci">void ClearConfig()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01162">bgp_peer.cc:1162</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a357a8d467ed57bc7f11390afd26aa830"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a357a8d467ed57bc7f11390afd26aa830">BgpPeer::Close</a></div><div class="ttdeci">void Close(bool graceful)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01269">bgp_peer.cc:1269</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a392026641ae9d88934f856dc428e1ce5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a392026641ae9d88934f856dc428e1ce5">BgpPeer::configured_families_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; configured_families_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00531">bgp_peer.h:531</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a3925dbab46e9133879f0410ec889341b"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a3925dbab46e9133879f0410ec889341b">BgpPeer::DeleteRTargets</a></div><div class="ttdeci">void DeleteRTargets(as_t as)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00755">bgp_peer.cc:755</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a3a5ea527bdc09aabebe9e1c30b945428"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a3a5ea527bdc09aabebe9e1c30b945428">BgpPeer::router_type_</a></div><div class="ttdeci">std::string router_type_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00470">bgp_peer.h:470</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a3acf24b370055bcfb818a85b1af598b6"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a3acf24b370055bcfb818a85b1af598b6">BgpPeer::local_bgp_id_</a></div><div class="ttdeci">uint32_t local_bgp_id_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00527">bgp_peer.h:527</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a3b2252c68f950ba662ddf8e8c6aca614"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a3b2252c68f950ba662ddf8e8c6aca614">BgpPeer::config_</a></div><div class="ttdeci">const BgpNeighborConfig * config_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00474">bgp_peer.h:474</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a3d1ce042860a05573a019d2915d18c82"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a3d1ce042860a05573a019d2915d18c82">BgpPeer::endpoint</a></div><div class="ttdeci">TcpSession::Endpoint endpoint() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00171">bgp_peer.h:171</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a3d419e3aedd871d1513a715724f6572f"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a3d419e3aedd871d1513a715724f6572f">BgpPeer::hold_time_</a></div><div class="ttdeci">uint16_t hold_time_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00524">bgp_peer.h:524</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a3f4a3080f754feefaa88ff734d756fd5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a3f4a3080f754feefaa88ff734d756fd5">BgpPeer::inc_rx_update</a></div><div class="ttdeci">void inc_rx_update()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02681">bgp_peer.cc:2681</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a43ba0b3ac1a00c95a5670c7f5903c9d7"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a43ba0b3ac1a00c95a5670c7f5903c9d7">BgpPeer::ASNUpdateCallback</a></div><div class="ttdeci">void ASNUpdateCallback(as_t old_asn, as_t old_local_asn)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00768">bgp_peer.cc:768</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a443e18136cc491ca12fc9763a36c1838"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a443e18136cc491ca12fc9763a36c1838">BgpPeer::GetPrimaryPathCount</a></div><div class="ttdeci">virtual int GetPrimaryPathCount() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00322">bgp_peer.h:322</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4443ace9ba66f9c96c4bb37166bfc324"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4443ace9ba66f9c96c4bb37166bfc324">BgpPeer::IsCloseInProgress</a></div><div class="ttdeci">bool IsCloseInProgress() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01322">bgp_peer.cc:1322</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a458ab09125d389ef8c6313de152c2991"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a458ab09125d389ef8c6313de152c2991">BgpPeer::inc_update_error</a></div><div class="ttdeci">void inc_update_error()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02777">bgp_peer.cc:2777</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a459f899b4b4b66ff5254034b51e8f200"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a459f899b4b4b66ff5254034b51e8f200">BgpPeer::GetBufferCapacity</a></div><div class="ttdeci">size_t GetBufferCapacity() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00657">bgp_peer.cc:657</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a46117cb926c354a7ca1633cea5f2dd0c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a46117cb926c354a7ca1633cea5f2dd0c">BgpPeer::ProcessNlriBgpaas</a></div><div class="ttdeci">void ProcessNlriBgpaas(Address::Family family, DBRequest::DBOperation oper, const BgpMpNlri *nlri, BgpAttrPtr attr, uint32_t flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01847">bgp_peer.cc:1847</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a46e607fef94d156b8dcd846435ad59ec"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a46e607fef94d156b8dcd846435ad59ec">BgpPeer::transport_address_string</a></div><div class="ttdeci">std::string transport_address_string() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01231">bgp_peer.cc:1231</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a47297b9f364826787a529982ad025399"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a47297b9f364826787a529982ad025399">BgpPeer::EndOfRibTimerErrorHandler</a></div><div class="ttdeci">void EndOfRibTimerErrorHandler(std::string error_name, std::string error_message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02218">bgp_peer.cc:2218</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a47840550c1b07d09ea4de7462ae489d6"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a47840550c1b07d09ea4de7462ae489d6">BgpPeer::send_ready_</a></div><div class="ttdeci">bool send_ready_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00509">bgp_peer.h:509</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a490365d0594a602f89f331148d7325c8"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a490365d0594a602f89f331148d7325c8">BgpPeer::increment_flap_count</a></div><div class="ttdeci">void increment_flap_count()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02821">bgp_peer.cc:2821</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4a04145f6f6dfbc0bff82cbfb0d1fd67"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4a04145f6f6dfbc0bff82cbfb0d1fd67">BgpPeer::IsReady</a></div><div class="ttdeci">virtual bool IsReady() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01207">bgp_peer.cc:1207</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4bf3425c9560fce04fa57e547ec26752"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4bf3425c9560fce04fa57e547ec26752">BgpPeer::ProcessFamilyAttributesConfig</a></div><div class="ttdeci">bool ProcessFamilyAttributesConfig(const BgpNeighborConfig *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00958">bgp_peer.cc:958</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4c06d4b9741bbbb6df392c0cb12f2818"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4c06d4b9741bbbb6df392c0cb12f2818">BgpPeer::reset_flap_count</a></div><div class="ttdeci">void reset_flap_count()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02841">bgp_peer.cc:2841</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4cb7f0c4ea1d54f1ed05ad2418b974f3"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4cb7f0c4ea1d54f1ed05ad2418b974f3">BgpPeer::IsDeleted</a></div><div class="ttdeci">bool IsDeleted() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01314">bgp_peer.cc:1314</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4d363f73759dc8252d352297d2f6cdf1"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4d363f73759dc8252d352297d2f6cdf1">BgpPeer::peer_port_</a></div><div class="ttdeci">uint16_t peer_port_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00467">bgp_peer.h:467</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4d7be811a224e76c7c259e6df8782985"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4d7be811a224e76c7c259e6df8782985">BgpPeer::get_tx_keepalive</a></div><div class="ttdeci">uint64_t get_tx_keepalive() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02677">bgp_peer.cc:2677</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4e7a52b9a0ea3693ac43721f1cbd12c4"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4e7a52b9a0ea3693ac43721f1cbd12c4">BgpPeer::primary_path_count_</a></div><div class="ttdeci">tbb::atomic&lt; int &gt; primary_path_count_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00541">bgp_peer.h:541</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4ea71af11e9874ecdcc69ac4d10e394c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4ea71af11e9874ecdcc69ac4d10e394c">BgpPeer::GetInuseAuthKeyValue</a></div><div class="ttdeci">std::string GetInuseAuthKeyValue() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00914">bgp_peer.cc:914</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4eb418f66ddf6308f018b5c444000b66"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4eb418f66ddf6308f018b5c444000b66">BgpPeer::membership_req_pending</a></div><div class="ttdeci">int membership_req_pending() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00366">bgp_peer.h:366</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a4ebb0248cac09635118a1bb64b58ace9"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a4ebb0248cac09635118a1bb64b58ace9">BgpPeer::instance_op_</a></div><div class="ttdeci">int instance_op_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00551">bgp_peer.h:551</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5024121f2f13b2b1771a95c2a73020bd"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5024121f2f13b2b1771a95c2a73020bd">BgpPeer::UpdateCloseRouteStats</a></div><div class="ttdeci">virtual void UpdateCloseRouteStats(Address::Family family, const BgpPath *old_path, uint32_t path_flags) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01293">bgp_peer.cc:1293</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a50a671ef57a34aea04f0423aeda22401"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a50a671ef57a34aea04f0423aeda22401">BgpPeer::uve_key_str_</a></div><div class="ttdeci">std::string uve_key_str_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00473">bgp_peer.h:473</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5143a7aa1483d62716c56dc8b5976aa5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5143a7aa1483d62716c56dc8b5976aa5">BgpPeer::ManagedDelete</a></div><div class="ttdeci">void ManagedDelete()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02458">bgp_peer.cc:2458</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5164b853c8f042c1d39d4661c5f53813"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5164b853c8f042c1d39d4661c5f53813">BgpPeer::peer_name_</a></div><div class="ttdeci">std::string peer_name_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00468">bgp_peer.h:468</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5165e3e4de03e8955f887613918ad5a4"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5165e3e4de03e8955f887613918ad5a4">BgpPeer::ProcessPathTunnelEncapsulation</a></div><div class="ttdeci">virtual void ProcessPathTunnelEncapsulation(const BgpPath *path, BgpAttr *attr, ExtCommunityDB *extcomm_db, const BgpTable *table) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02148">bgp_peer.cc:2148</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a525e1f8e0acbf5402c491c122d3269f9"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a525e1f8e0acbf5402c491c122d3269f9">BgpPeer::defer_close_</a></div><div class="ttdeci">bool defer_close_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00519">bgp_peer.h:519</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a530cf05306c8304e4e1729074977f43c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a530cf05306c8304e4e1729074977f43c">BgpPeer::local_bgp_identifier_string</a></div><div class="ttdeci">std::string local_bgp_identifier_string() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01219">bgp_peer.cc:1219</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5456d4dff0a40c3d80a1d28bed4b7e5d"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5456d4dff0a40c3d80a1d28bed4b7e5d">BgpPeer::server</a></div><div class="ttdeci">virtual BgpServer * server()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00157">bgp_peer.h:157</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a55f500957c1100f8f913228785a391d7"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a55f500957c1100f8f913228785a391d7">BgpPeer::peer_name</a></div><div class="ttdeci">const std::string &amp; peer_name() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00168">bgp_peer.h:168</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5614a26c42e85ffa4c3413707fed2edc"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5614a26c42e85ffa4c3413707fed2edc">BgpPeer::FillCloseInfo</a></div><div class="ttdeci">void FillCloseInfo(BgpNeighborResp *resp) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02530">bgp_peer.cc:2530</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a56a48fb3b2d12c99f1d1bd53f13c1e23"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a56a48fb3b2d12c99f1d1bd53f13c1e23">BgpPeer::send_ready</a></div><div class="ttdeci">virtual bool send_ready() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00229">bgp_peer.h:229</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a56b858c2aed105fb0a7ad89ef08b541d"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a56b858c2aed105fb0a7ad89ef08b541d">BgpPeer::SetDataCollectionKey</a></div><div class="ttdeci">virtual void SetDataCollectionKey(BgpPeerInfo *peer_info) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02481">bgp_peer.cc:2481</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a59fd9509d981bd669566a077da53fff8"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a59fd9509d981bd669566a077da53fff8">BgpPeer::inc_connect_timer_expired</a></div><div class="ttdeci">void inc_connect_timer_expired()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02765">bgp_peer.cc:2765</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5b43b5b05fe0fcce645e4d58b6682b81"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5b43b5b05fe0fcce645e4d58b6682b81">BgpPeer::ResetCapabilities</a></div><div class="ttdeci">void ResetCapabilities()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01781">bgp_peer.cc:1781</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5c02ccc7d79dc94f18e2beb0f62a38d8"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5c02ccc7d79dc94f18e2beb0f62a38d8">BgpPeer::ReceiveEndOfRIB</a></div><div class="ttdeci">void ReceiveEndOfRIB(Address::Family family, size_t msgsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00270">bgp_peer.cc:270</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5dfc7692bc2f3d1e68b4130c96984915"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5dfc7692bc2f3d1e68b4130c96984915">BgpPeer::inc_connect_error</a></div><div class="ttdeci">void inc_connect_error()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02761">bgp_peer.cc:2761</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5eee9fef192c088aca582a2435eb0d41"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5eee9fef192c088aca582a2435eb0d41">BgpPeer::EndOfRibReceiveTimerExpired</a></div><div class="ttdeci">bool EndOfRibReceiveTimerExpired(Address::Family family)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02264">bgp_peer.cc:2264</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a5f5f83c2101c9ad27235f146a9899f23"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a5f5f83c2101c9ad27235f146a9899f23">BgpPeer::inc_tx_open</a></div><div class="ttdeci">void inc_tx_open()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02661">bgp_peer.cc:2661</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a601f03d97c8d5a3249d0f9c0787e5324"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a601f03d97c8d5a3249d0f9c0787e5324">BgpPeer::ProcessAuthKeyChainConfig</a></div><div class="ttdeci">bool ProcessAuthKeyChainConfig(const BgpNeighborConfig *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00831">bgp_peer.cc:831</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a62e09087183a4b4bbe3bcfb7df9f9d37"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a62e09087183a4b4bbe3bcfb7df9f9d37">BgpPeer::Clear</a></div><div class="ttdeci">void Clear(int subcode)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01306">bgp_peer.cc:1306</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a64601f208abf0f1bdb212ebb9d92dcdf"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a64601f208abf0f1bdb212ebb9d92dcdf">BgpPeer::BuildRibExportPolicy</a></div><div class="ttdeci">RibExportPolicy BuildRibExportPolicy(Address::Family family) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00243">bgp_peer.cc:243</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a64a70aa9404b4cddb429c880fc30be7b"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a64a70aa9404b4cddb429c880fc30be7b">BgpPeer::ResumeClose</a></div><div class="ttdeci">bool ResumeClose()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00463">bgp_peer.cc:463</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a671ee192c7fcb4c69150870b06f66099"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a671ee192c7fcb4c69150870b06f66099">BgpPeer::peer_close_</a></div><div class="ttdeci">boost::scoped_ptr&lt; BgpPeerClose &gt; peer_close_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00535">bgp_peer.h:535</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a682284c883f43d7ceb440baf558fab89"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a682284c883f43d7ceb440baf558fab89">BgpPeer::get_rx_end_of_rib</a></div><div class="ttdeci">uint64_t get_rx_end_of_rib() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02713">bgp_peer.cc:2713</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a682c20234fec93855a0ebffefc58d2da"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a682c20234fec93855a0ebffefc58d2da">BgpPeer::peer_basename_</a></div><div class="ttdeci">std::string peer_basename_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00469">bgp_peer.h:469</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a68bd7f909a3873fb16e0ff9006435465"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a68bd7f909a3873fb16e0ff9006435465">BgpPeer::peer_bgp_id_</a></div><div class="ttdeci">uint32_t peer_bgp_id_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00528">bgp_peer.h:528</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a6a58c253a2a2fb3477b1d1d85a14101c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a6a58c253a2a2fb3477b1d1d85a14101c">BgpPeer::SendKeepalive</a></div><div class="ttdeci">void SendKeepalive(bool from_timer)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01578">bgp_peer.cc:1578</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a6aad708b27de5a5a03f681aa5708c95f"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a6aad708b27de5a5a03f681aa5708c95f">BgpPeer::capabilities_</a></div><div class="ttdeci">std::vector&lt; BgpProto::OpenMessage::Capability * &gt; capabilities_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00523">bgp_peer.h:523</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a6b0b5ccc28a9110ab2237468fef34527"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a6b0b5ccc28a9110ab2237468fef34527">BgpPeer::PrefixLimitIdleTimerErrorHandler</a></div><div class="ttdeci">void PrefixLimitIdleTimerErrorHandler(std::string error_name, std::string error_message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02212">bgp_peer.cc:2212</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a6c0192118e75aca18d758709197da283"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a6c0192118e75aca18d758709197da283">BgpPeer::SendUpdate</a></div><div class="ttdeci">virtual bool SendUpdate(const uint8_t *msg, size_t msgsize, const std::string *msg_str)</div></div>
<div class="ttc" id="aclassBgpPeer_html_a6c07d5a2b789f44deeba94567012f9f1"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a6c07d5a2b789f44deeba94567012f9f1">BgpPeer::inc_rx_route_reach</a></div><div class="ttdeci">void inc_rx_route_reach(uint64_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02725">bgp_peer.cc:2725</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a6d09a4dddcbd993a4ada71b57ec24d0a"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a6d09a4dddcbd993a4ada71b57ec24d0a">BgpPeer::rtinstance_</a></div><div class="ttdeci">RoutingInstance * rtinstance_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00464">bgp_peer.h:464</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a6eba769ad71a0a49b13ee82e72915f1a"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a6eba769ad71a0a49b13ee82e72915f1a">BgpPeer::StopPrefixLimitIdleTimer</a></div><div class="ttdeci">void StopPrefixLimitIdleTimer()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02200">bgp_peer.cc:2200</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a6f421d4df2ee4395ade1c66ebf919eb3"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a6f421d4df2ee4395ade1c66ebf919eb3">BgpPeer::get_socket_reads</a></div><div class="ttdeci">uint64_t get_socket_reads() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02801">bgp_peer.cc:2801</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a6f630a3bb2239674719bf611b9435757"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a6f630a3bb2239674719bf611b9435757">BgpPeer::FlushUpdateUnlocked</a></div><div class="ttdeci">bool FlushUpdateUnlocked()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01645">bgp_peer.cc:1645</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a7069688838dd408a58c39a41304b3d40"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a7069688838dd408a58c39a41304b3d40">BgpPeer::MembershipPathCallback</a></div><div class="ttdeci">virtual bool MembershipPathCallback(DBTablePartBase *tpart, BgpRoute *route, BgpPath *path)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00458">bgp_peer.cc:458</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a70ce123e15d80f21acd11bdebff9260d"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a70ce123e15d80f21acd11bdebff9260d">BgpPeer::GetState</a></div><div class="ttdeci">StateMachine::State GetState() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01332">bgp_peer.cc:1332</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a711413a89c13b031eb6914731a3f40c0"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a711413a89c13b031eb6914731a3f40c0">BgpPeer::negotiated_families</a></div><div class="ttdeci">const std::vector&lt; std::string &gt; &amp; negotiated_families() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00342">bgp_peer.h:342</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a719219bbe632932b7d61e71ac8f4f126"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a719219bbe632932b7d61e71ac8f4f126">BgpPeer::KeepaliveTimerErrorHandler</a></div><div class="ttdeci">void KeepaliveTimerErrorHandler(std::string error_name, std::string error_message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02258">bgp_peer.cc:2258</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a759df848bedd73ef687c021097d25958"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a759df848bedd73ef687c021097d25958">BgpPeer::peer_key_</a></div><div class="ttdeci">BgpPeerKey peer_key_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00466">bgp_peer.h:466</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a76460e5e0f4a669da7a800417c6217bc"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a76460e5e0f4a669da7a800417c6217bc">BgpPeer::get_tx_route_reach</a></div><div class="ttdeci">uint64_t get_tx_route_reach() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02733">bgp_peer.cc:2733</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a76bcc2d6066f3c610b5b8ee7d6fc3b36"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a76bcc2d6066f3c610b5b8ee7d6fc3b36">BgpPeer::family_primary_path_count_</a></div><div class="ttdeci">std::vector&lt; tbb::atomic&lt; uint32_t &gt; &gt; family_primary_path_count_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00530">bgp_peer.h:530</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a776f37f2ee75907d1dfc806995404184"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a776f37f2ee75907d1dfc806995404184">BgpPeer::trigger_</a></div><div class="ttdeci">TaskTrigger trigger_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00478">bgp_peer.h:478</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a78393c5c6164db48791b727ea3a4bb65"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a78393c5c6164db48791b727ea3a4bb65">BgpPeer::ToString</a></div><div class="ttdeci">virtual const std::string &amp; ToString() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00100">bgp_peer.h:100</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a798072845d07ac98223db93d44ac3387"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a798072845d07ac98223db93d44ac3387">BgpPeer::BGPPeerInfoSend</a></div><div class="ttdeci">void BGPPeerInfoSend(const BgpPeerInfoData &amp;peer_info) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00416">bgp_peer.cc:416</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a799a52aacc8079c338a72a289f395f6b"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a799a52aacc8079c338a72a289f395f6b">BgpPeer::rtargets_</a></div><div class="ttdeci">RouteTargetList rtargets_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00549">bgp_peer.h:549</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a7af00c325d899f484e330033cb81caf2"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a7af00c325d899f484e330033cb81caf2">BgpPeer::FamilyToCapabilityMap</a></div><div class="ttdeci">std::map&lt; Address::Family, const uint8_t * &gt; FamilyToCapabilityMap</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00386">bgp_peer.h:386</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a7bf54e490f41a22eb9eba1628c7711ce"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a7bf54e490f41a22eb9eba1628c7711ce">BgpPeer::GetTotalPathCount</a></div><div class="ttdeci">virtual int GetTotalPathCount() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00313">bgp_peer.h:313</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a7c02ab765b3c423fbfee26c70bcab663"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a7c02ab765b3c423fbfee26c70bcab663">BgpPeer::KeepaliveTimerExpired</a></div><div class="ttdeci">bool KeepaliveTimerExpired()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02273">bgp_peer.cc:2273</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a7d9ab4f623607a3c41488cd3fa03490e"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a7d9ab4f623607a3c41488cd3fa03490e">BgpPeer::total_path_count_</a></div><div class="ttdeci">tbb::atomic&lt; int &gt; total_path_count_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00540">bgp_peer.h:540</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a7dde8892a9cfa640966daa3779158101"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a7dde8892a9cfa640966daa3779158101">BgpPeer::deleter_</a></div><div class="ttdeci">boost::scoped_ptr&lt; DeleteActor &gt; deleter_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00538">bgp_peer.h:538</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a7e37f10864b5aa36408bd911a1627c43"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a7e37f10864b5aa36408bd911a1627c43">BgpPeer::session</a></div><div class="ttdeci">BgpSession * session()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02335">bgp_peer.cc:2335</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a7f7f98cd813eef8642881c62c8e88852"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a7f7f98cd813eef8642881c62c8e88852">BgpPeer::inc_tx_notification</a></div><div class="ttdeci">void inc_tx_notification()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02705">bgp_peer.cc:2705</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a84cf0c63dfef6264acba5626a7dc17cb"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a84cf0c63dfef6264acba5626a7dc17cb">BgpPeer::auth_data_</a></div><div class="ttdeci">AuthenticationData auth_data_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00546">bgp_peer.h:546</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a8526fd7599531dc2dcd11c26751748ac"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a8526fd7599531dc2dcd11c26751748ac">BgpPeer::IsServerStartingUp</a></div><div class="ttdeci">virtual bool IsServerStartingUp() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00319">bgp_peer.cc:319</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a85cf366c70361bed5c48e035274a255b"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a85cf366c70361bed5c48e035274a255b">BgpPeer::kMaxBufferCapacity</a></div><div class="ttdeci">static const size_t kMaxBufferCapacity</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00087">bgp_peer.h:87</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a86cf64efd89f2f9972e13cff27a4d163"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a86cf64efd89f2f9972e13cff27a4d163">BgpPeer::supported_families_</a></div><div class="ttdeci">static const std::vector&lt; Address::Family &gt; supported_families_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00462">bgp_peer.h:462</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a87083f0e72327048e783de2a425547cb"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a87083f0e72327048e783de2a425547cb">BgpPeer::bgp_identifier</a></div><div class="ttdeci">virtual uint32_t bgp_identifier() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01223">bgp_peer.cc:1223</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a8831f701afd0f99921221e25e9c12c9f"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a8831f701afd0f99921221e25e9c12c9f">BgpPeer::BGPaaSAddRTarget</a></div><div class="ttdeci">void BGPaaSAddRTarget(as_t as, BgpTable *table, BgpAttrPtr attr, RouteTargetList::const_iterator it)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00714">bgp_peer.cc:714</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a885046480ba6883c062acb3f7c099e7d"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a885046480ba6883c062acb3f7c099e7d">BgpPeer::SendNotification</a></div><div class="ttdeci">void SendNotification(BgpSession *, int code, int subcode=0, const std::string &amp;data=std::string())</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01700">bgp_peer.cc:1700</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a8b73358fe15d0b6f7695fd3f50157772"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a8b73358fe15d0b6f7695fd3f50157772">BgpPeer::flap_count_</a></div><div class="ttdeci">uint64_t flap_count_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00542">bgp_peer.h:542</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a8c984f1cdc4d39cbef840f48ab92e0c5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a8c984f1cdc4d39cbef840f48ab92e0c5">BgpPeer::set_session</a></div><div class="ttdeci">void set_session(BgpSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02319">bgp_peer.cc:2319</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a8cd1bedb5b622944a0505ea8010350d2"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a8cd1bedb5b622944a0505ea8010350d2">BgpPeer::SendOpen</a></div><div class="ttdeci">void SendOpen(TcpSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01502">bgp_peer.cc:1502</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a8cf3d53268844a13d21cbbc4119b99ef"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a8cf3d53268844a13d21cbbc4119b99ef">BgpPeer::ReceiveMsg</a></div><div class="ttdeci">virtual bool ReceiveMsg(BgpSession *session, const u_int8_t *msg, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02355">bgp_peer.cc:2355</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a8d1b42de6a0f71c58c43a2e6cf828ceb"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a8d1b42de6a0f71c58c43a2e6cf828ceb">BgpPeer::MembershipRequestCallback</a></div><div class="ttdeci">void MembershipRequestCallback(BgpTable *table)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00430">bgp_peer.cc:430</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a8ea7652fb2e28ec7087455cc3e6d2b6a"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a8ea7652fb2e28ec7087455cc3e6d2b6a">BgpPeer::RegisterAllTables</a></div><div class="ttdeci">void RegisterAllTables()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01432">bgp_peer.cc:1432</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a8ebfa8e5669acf2ad1f2caa74c83719e"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a8ebfa8e5669acf2ad1f2caa74c83719e">BgpPeer::ProcessBgpaas</a></div><div class="ttdeci">void ProcessBgpaas(DBRequest::DBOperation oper, IpAddress addr, uint8_t addr_len, BgpAttrPtr attr, uint32_t flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01871">bgp_peer.cc:1871</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a8f0b0d040b35d6ddad0d692969ba551a"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a8f0b0d040b35d6ddad0d692969ba551a">BgpPeer::inc_hold_timer_expired</a></div><div class="ttdeci">void inc_hold_timer_expired()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02769">bgp_peer.cc:2769</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a9125e08327f36c6581f25afefadf4e96"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a9125e08327f36c6581f25afefadf4e96">BgpPeer::get_rx_route_total</a></div><div class="ttdeci">uint64_t get_rx_route_total() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02749">bgp_peer.cc:2749</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a9314eb1207cbd9262434f824aaf3ce3e"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a9314eb1207cbd9262434f824aaf3ce3e">BgpPeer::cluster_id_</a></div><div class="ttdeci">uint32_t cluster_id_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00515">bgp_peer.h:515</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a942524f74b11984363409d85af9e7bb6"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a942524f74b11984363409d85af9e7bb6">BgpPeer::close_manager_</a></div><div class="ttdeci">boost::scoped_ptr&lt; PeerCloseManager &gt; close_manager_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00536">bgp_peer.h:536</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a94547f28bac0a2a9abf0dffd009bae50"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a94547f28bac0a2a9abf0dffd009bae50">BgpPeer::ClearListenSocketAuthKey</a></div><div class="ttdeci">void ClearListenSocketAuthKey()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00888">bgp_peer.cc:888</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a957811f426356f633856d6e2bcfb7304"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a957811f426356f633856d6e2bcfb7304">BgpPeer::UpdatePrimaryPathCount</a></div><div class="ttdeci">virtual void UpdatePrimaryPathCount(int count, Address::Family family) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02182">bgp_peer.cc:2182</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a97b4836b9c5c3cebcd8c77479d774764"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a97b4836b9c5c3cebcd8c77479d774764">BgpPeer::get_open_error</a></div><div class="ttdeci">uint64_t get_open_error() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02793">bgp_peer.cc:2793</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a9817b03635d25635c7f3997e2d3d4014"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a9817b03635d25635c7f3997e2d3d4014">BgpPeer::session_</a></div><div class="ttdeci">BgpSession * session_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00504">bgp_peer.h:504</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a99dfccf12b2cdfc39806527efe31c9e1"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a99dfccf12b2cdfc39806527efe31c9e1">BgpPeer::CheckPrefixLimits</a></div><div class="ttdeci">bool CheckPrefixLimits()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00934">bgp_peer.cc:934</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a9a5f1eaa09888b463888018d97a34657"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a9a5f1eaa09888b463888018d97a34657">BgpPeer::get_socket_writes</a></div><div class="ttdeci">uint64_t get_socket_writes() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02807">bgp_peer.cc:2807</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a9d0dcf4763c498416ddf0ff9fba41209"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a9d0dcf4763c498416ddf0ff9fba41209">BgpPeer::eor_send_timer_start_time_</a></div><div class="ttdeci">time_t eor_send_timer_start_time_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00508">bgp_peer.h:508</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a9ddc3ed1843f7ce153aa36604f01e0a3"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a9ddc3ed1843f7ce153aa36604f01e0a3">BgpPeer::GetDefaultTunnelEncap</a></div><div class="ttdeci">virtual const std::vector&lt; std::string &gt; GetDefaultTunnelEncap(const Address::Family family) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02141">bgp_peer.cc:2141</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a9ee4b134fd38ef29913828a1c004b723"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a9ee4b134fd38ef29913828a1c004b723">BgpPeer::local_bgp_identifier</a></div><div class="ttdeci">virtual uint32_t local_bgp_identifier() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01215">bgp_peer.cc:1215</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_a9efaaabeaec8c777cfc6bfa9e780c9c0"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#a9efaaabeaec8c777cfc6bfa9e780c9c0">BgpPeer::StartPrefixLimitIdleTimer</a></div><div class="ttdeci">void StartPrefixLimitIdleTimer(uint32_t plim_idle_time_msecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02194">bgp_peer.cc:2194</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa01a377c3b7bc0bbe7c1b054918a0231"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa01a377c3b7bc0bbe7c1b054918a0231">BgpPeer::gateway_address_string</a></div><div class="ttdeci">std::string gateway_address_string(Address::Family family) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01240">bgp_peer.cc:1240</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa0e722ed1bae840dc58c274918b7a258"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa0e722ed1bae840dc58c274918b7a258">BgpPeer::get_tx_update</a></div><div class="ttdeci">uint64_t get_tx_update() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02693">bgp_peer.cc:2693</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa1159c7e6920e052779c40281158e537"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa1159c7e6920e052779c40281158e537">BgpPeer::SetCapabilities</a></div><div class="ttdeci">bool SetCapabilities(const BgpProto::OpenMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01708">bgp_peer.cc:1708</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa2431cdc0cc9b792fab3a22249d6b064"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa2431cdc0cc9b792fab3a22249d6b064">BgpPeer::FillNeighborInfo</a></div><div class="ttdeci">void FillNeighborInfo(const BgpSandeshContext *bsc, BgpNeighborResp *bnr, bool summary) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02598">bgp_peer.cc:2598</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa31a0b656d5434dfaf02142688553026"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa31a0b656d5434dfaf02142688553026">BgpPeer::get_rx_route_reach</a></div><div class="ttdeci">uint64_t get_rx_route_reach() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02729">bgp_peer.cc:2729</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa382b771acc37f616317daaf8ffcbd62"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa382b771acc37f616317daaf8ffcbd62">BgpPeer::StartKeepaliveTimer</a></div><div class="ttdeci">void StartKeepaliveTimer()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02295">bgp_peer.cc:2295</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa391017c38eab514935aad72e071be92"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa391017c38eab514935aad72e071be92">BgpPeer::origin_override_</a></div><div class="ttdeci">OriginOverride origin_override_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00516">bgp_peer.h:516</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa5e9594750033181a9252c6cf508a9a2"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa5e9594750033181a9252c6cf508a9a2">BgpPeer::get_hold_timer_expired</a></div><div class="ttdeci">uint64_t get_hold_timer_expired() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02789">bgp_peer.cc:2789</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa770b49926153162eb259868c21d48ce"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa770b49926153162eb259868c21d48ce">BgpPeer::GetPathFlags</a></div><div class="ttdeci">uint32_t GetPathFlags(Address::Family family, const BgpAttr *attr) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01901">bgp_peer.cc:1901</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa84ee716dc8e29ae03f2f956bb3cb23a"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa84ee716dc8e29ae03f2f956bb3cb23a">BgpPeer::inc_rx_notification</a></div><div class="ttdeci">void inc_rx_notification()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02697">bgp_peer.cc:2697</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa89271909f15c2d9734b5cfd85fba4b6"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa89271909f15c2d9734b5cfd85fba4b6">BgpPeer::router_type</a></div><div class="ttdeci">std::string router_type() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00170">bgp_peer.h:170</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa985a28821a253771cab44a28f1928c1"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa985a28821a253771cab44a28f1928c1">BgpPeer::KeepaliveTimerRunning</a></div><div class="ttdeci">bool KeepaliveTimerRunning()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02305">bgp_peer.cc:2305</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aa9ddef04000c7970175c551b4e4d58c5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aa9ddef04000c7970175c551b4e4d58c5">BgpPeer::prefix_limit_trigger_</a></div><div class="ttdeci">TaskTrigger prefix_limit_trigger_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00480">bgp_peer.h:480</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aac75008b7b3f952b6f060680de787c49"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aac75008b7b3f952b6f060680de787c49">BgpPeer::buffer_capacity_</a></div><div class="ttdeci">size_t buffer_capacity_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00502">bgp_peer.h:502</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aad9cc9af8fe415c3fb101e7b441467d1"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aad9cc9af8fe415c3fb101e7b441467d1">BgpPeer::total_flap_count_</a></div><div class="ttdeci">uint64_t total_flap_count_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00543">bgp_peer.h:543</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aadd99bab4ab4e9b569f5220ea44e64a0"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aadd99bab4ab4e9b569f5220ea44e64a0">BgpPeer::FillBgpNeighborFamilyAttributes</a></div><div class="ttdeci">void FillBgpNeighborFamilyAttributes(BgpNeighborResp *nbr) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02575">bgp_peer.cc:2575</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aaed76b2d31bab91f6f78190ec1af02d4"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aaed76b2d31bab91f6f78190ec1af02d4">BgpPeer::flap_count</a></div><div class="ttdeci">uint64_t flap_count() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00249">bgp_peer.h:249</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab02c6f9d1399c2ed4bfed60234135c36"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab02c6f9d1399c2ed4bfed60234135c36">BgpPeer::CreateSession</a></div><div class="ttdeci">BgpSession * CreateSession()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01340">bgp_peer.cc:1340</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab0d579a8bac0b458cfb681ba9266fc49"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab0d579a8bac0b458cfb681ba9266fc49">BgpPeer::RetryDelete</a></div><div class="ttdeci">void RetryDelete()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02471">bgp_peer.cc:2471</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab12bf6825cbdaf0ed363c02d8368df83"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab12bf6825cbdaf0ed363c02d8368df83">BgpPeer::spin_mutex_</a></div><div class="ttdeci">tbb::spin_mutex spin_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00501">bgp_peer.h:501</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab1df6e491ca5de15f3ef85288e61adf8"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab1df6e491ca5de15f3ef85288e61adf8">BgpPeer::last_flap_at</a></div><div class="ttdeci">std::string last_flap_at() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02813">bgp_peer.cc:2813</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab2a4badba19741cd7ae84c33dfd2a0bb"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab2a4badba19741cd7ae84c33dfd2a0bb">BgpPeer::ResetInuseAuthKeyInfo</a></div><div class="ttdeci">void ResetInuseAuthKeyInfo()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00875">bgp_peer.cc:875</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab2e4f5d28e8ebf2d5612a3940d62aa7c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab2e4f5d28e8ebf2d5612a3940d62aa7c">BgpPeer::inc_tx_update</a></div><div class="ttdeci">void inc_tx_update()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02689">bgp_peer.cc:2689</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab34104b39633be52168105bd0933e4e7"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab34104b39633be52168105bd0933e4e7">BgpPeer::asn_listener_id_</a></div><div class="ttdeci">int asn_listener_id_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00550">bgp_peer.h:550</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab4fe51bc07c5954c149293b2409d0218"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab4fe51bc07c5954c149293b2409d0218">BgpPeer::SendEndOfRIB</a></div><div class="ttdeci">virtual void SendEndOfRIB(Address::Family family)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00404">bgp_peer.cc:404</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab600afcbe2f1898e69f8f8755a2697b4"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab600afcbe2f1898e69f8f8755a2697b4">BgpPeer::negotiated_families_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; negotiated_families_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00532">bgp_peer.h:532</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab617a4c6c335eea3e786fd082881b62f"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab617a4c6c335eea3e786fd082881b62f">BgpPeer::inc_rx_end_of_rib</a></div><div class="ttdeci">void inc_rx_end_of_rib()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02709">bgp_peer.cc:2709</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab80dcfd759efc758123ddafd36ef6b12"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab80dcfd759efc758123ddafd36ef6b12">BgpPeer::local_as_</a></div><div class="ttdeci">as_t local_as_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00525">bgp_peer.h:525</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ab91fda1d0c5f49a112397cff8d4d2481"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ab91fda1d0c5f49a112397cff8d4d2481">BgpPeer::family_attributes_list_</a></div><div class="ttdeci">FamilyAttributesList family_attributes_list_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00529">bgp_peer.h:529</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aba20078a2bbe187ca93119cf3eb65dda"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aba20078a2bbe187ca93119cf3eb65dda">BgpPeer::SetInuseAuthKeyInfo</a></div><div class="ttdeci">void SetInuseAuthKeyInfo(const AuthenticationKey &amp;key, KeyType type)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00870">bgp_peer.cc:870</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aba7ea24955c73d1ba18b400a133b8187"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aba7ea24955c73d1ba18b400a133b8187">BgpPeer::ProcessUpdate</a></div><div class="ttdeci">void ProcessUpdate(const BgpProto::Update *msg, size_t msgsize=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01951">bgp_peer.cc:1951</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_abaf66eb5863b6912c2217f18e53f89bd"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#abaf66eb5863b6912c2217f18e53f89bd">BgpPeer::GetRTargetTable</a></div><div class="ttdeci">BgpTable * GetRTargetTable()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00694">bgp_peer.cc:694</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_abbb1c65b1cd8845d15bac0658f8d7a41"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#abbb1c65b1cd8845d15bac0658f8d7a41">BgpPeer::inc_rx_keepalive</a></div><div class="ttdeci">void inc_rx_keepalive()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02665">bgp_peer.cc:2665</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_abbce940762ab39fe2f0f860a9f50b888"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#abbce940762ab39fe2f0f860a9f50b888">BgpPeer::GetRouteTargetRouteAttr</a></div><div class="ttdeci">BgpAttrPtr GetRouteTargetRouteAttr() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00704">bgp_peer.cc:704</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_abef16f63669bfc9f436c0d9b60b3dde4"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#abef16f63669bfc9f436c0d9b60b3dde4">BgpPeer::get_rx_route_unreach</a></div><div class="ttdeci">uint64_t get_rx_route_unreach() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02741">bgp_peer.cc:2741</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_abf3b22af254044c4d894f13d5b827eeb"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#abf3b22af254044c4d894f13d5b827eeb">BgpPeer::notification</a></div><div class="ttdeci">virtual bool notification() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01680">bgp_peer.cc:1680</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac0ca6e9cdce613708d3c89b021d13119"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac0ca6e9cdce613708d3c89b021d13119">BgpPeer::GetRTargetTableLastUpdatedTimeStamp</a></div><div class="ttdeci">virtual time_t GetRTargetTableLastUpdatedTimeStamp() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00327">bgp_peer.cc:327</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac0e3b53cc8013a0c67097bb8f5daf919"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac0e3b53cc8013a0c67097bb8f5daf919">BgpPeer::inuse_auth_key_</a></div><div class="ttdeci">AuthenticationKey inuse_auth_key_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00547">bgp_peer.h:547</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac1b7d4e0e631ff9d860c894cdd311c8e"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac1b7d4e0e631ff9d860c894cdd311c8e">BgpPeer::~BgpPeer</a></div><div class="ttdeci">virtual ~BgpPeer()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00625">bgp_peer.cc:625</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac2c2d0452c0048c316767db3054883a4"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac2c2d0452c0048c316767db3054883a4">BgpPeer::BGPaaSDeleteRTarget</a></div><div class="ttdeci">void BGPaaSDeleteRTarget(as_t as, BgpTable *table, RouteTargetList::const_iterator it)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00742">bgp_peer.cc:742</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac2dc047bb6d7480e8447744cf0e74bc1"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac2dc047bb6d7480e8447744cf0e74bc1">BgpPeer::graceful_close_</a></div><div class="ttdeci">bool graceful_close_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00520">bgp_peer.h:520</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac4d5017c934f975a17aab76601dcdb60"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac4d5017c934f975a17aab76601dcdb60">BgpPeer::EndOfRibSendTimerExpired</a></div><div class="ttdeci">bool EndOfRibSendTimerExpired(Address::Family family)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00331">bgp_peer.cc:331</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac5edd00a203d9baefc09ca036affe7b5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac5edd00a203d9baefc09ca036affe7b5">BgpPeer::PrefixLimitIdleTimerExpired</a></div><div class="ttdeci">bool PrefixLimitIdleTimerExpired()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02208">bgp_peer.cc:2208</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac653c49c4d028ca2621a1634017d2126"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac653c49c4d028ca2621a1634017d2126">BgpPeer::BindLocalEndpoint</a></div><div class="ttdeci">virtual void BindLocalEndpoint(BgpSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00815">bgp_peer.cc:815</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac65f54083de971ab834dcdcabdc38f97"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac65f54083de971ab834dcdcabdc38f97">BgpPeer::inc_rx_open</a></div><div class="ttdeci">void inc_rx_open()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02657">bgp_peer.cc:2657</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac8320bc1f3241cb3d004a64dba25257a"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac8320bc1f3241cb3d004a64dba25257a">BgpPeer::get_rx_update</a></div><div class="ttdeci">uint64_t get_rx_update() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02685">bgp_peer.cc:2685</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac9a26ddbf41063fefe2d4645329ac417"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac9a26ddbf41063fefe2d4645329ac417">BgpPeer::passive_</a></div><div class="ttdeci">bool passive_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00511">bgp_peer.h:511</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ac9adcca6ea8747c860217cd11a629e3e"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ac9adcca6ea8747c860217cd11a629e3e">BgpPeer::peer_stats</a></div><div class="ttdeci">virtual IPeerDebugStats * peer_stats()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01298">bgp_peer.cc:1298</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aca40f9fa6ac0e1d9e91bd1968289bad3"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aca40f9fa6ac0e1d9e91bd1968289bad3">BgpPeer::eor_receive_timer_</a></div><div class="ttdeci">Timer * eor_receive_timer_[Address::NUM_FAMILIES]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00506">bgp_peer.h:506</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_acaf6ae0bb55950a55e25a92dc4074222"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#acaf6ae0bb55950a55e25a92dc4074222">BgpPeer::buffer_</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buffer_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00503">bgp_peer.h:503</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_acc346122f8681b018974e711a1531927"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#acc346122f8681b018974e711a1531927">BgpPeer::GetOutputQueueDepth</a></div><div class="ttdeci">virtual uint32_t GetOutputQueueDepth(Address::Family family) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00305">bgp_peer.cc:305</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_acccfc20f34ff15ce55698825409bea7a"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#acccfc20f34ff15ce55698825409bea7a">BgpPeer::SetListenSocketAuthKey</a></div><div class="ttdeci">void SetListenSocketAuthKey(const AuthenticationKey &amp;auth_key, KeyType key_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00880">bgp_peer.cc:880</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_acd6ad6020f378182ca6072765fa73dc6"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#acd6ad6020f378182ca6072765fa73dc6">BgpPeer::ProcessNlri</a></div><div class="ttdeci">void ProcessNlri(Address::Family family, DBRequest::DBOperation oper, const BgpMpNlri *nlri, BgpAttrPtr attr, uint32_t flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01813">bgp_peer.cc:1813</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_acf0d9c0c8e7b74fea895be0956a590ba"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#acf0d9c0c8e7b74fea895be0956a590ba">BgpPeer::inc_open_error</a></div><div class="ttdeci">void inc_open_error()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02773">bgp_peer.cc:2773</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_acf3e34c62d8b0127ec7304969565ad30"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#acf3e34c62d8b0127ec7304969565ad30">BgpPeer::Initialize</a></div><div class="ttdeci">void Initialize()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00652">bgp_peer.cc:652</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ad097ad83c3dc7e706052d06a8430b582"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ad097ad83c3dc7e706052d06a8430b582">BgpPeer::DSCPUpdateCallback</a></div><div class="ttdeci">void DSCPUpdateCallback(uint8_t dscp_value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02865">bgp_peer.cc:2865</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ad22f6021787f7c70c392ede07539806d"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ad22f6021787f7c70c392ede07539806d">BgpPeer::peer_as</a></div><div class="ttdeci">as_t peer_as() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00184">bgp_peer.h:184</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ad2a293f4a60dfffc66cd158b68d4bbb3"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ad2a293f4a60dfffc66cd158b68d4bbb3">BgpPeer::PostCloseRelease</a></div><div class="ttdeci">void PostCloseRelease()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01187">bgp_peer.cc:1187</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ad2a86222e3132e08e6bbbe96a6c2a4f6"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ad2a86222e3132e08e6bbbe96a6c2a4f6">BgpPeer::AcceptSession</a></div><div class="ttdeci">bool AcceptSession(BgpSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01369">bgp_peer.cc:1369</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ad3530c164973dc9b32ef7340a162f2aa"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ad3530c164973dc9b32ef7340a162f2aa">BgpPeer::config</a></div><div class="ttdeci">const BgpNeighborConfig * config() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00213">bgp_peer.h:213</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ad7f6f6e008f83e20a234675c6410ddff"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ad7f6f6e008f83e20a234675c6410ddff">BgpPeer::SetSendReady</a></div><div class="ttdeci">void SetSendReady()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02310">bgp_peer.cc:2310</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ad877733cd463cb95c8ef5946b9429aa4"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ad877733cd463cb95c8ef5946b9429aa4">BgpPeer::get_tx_route_total</a></div><div class="ttdeci">uint64_t get_tx_route_total() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02755">bgp_peer.cc:2755</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ad9de19d5cf1b3e011ebc014f85f48b5e"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ad9de19d5cf1b3e011ebc014f85f48b5e">BgpPeer::endpoint_</a></div><div class="ttdeci">TcpSession::Endpoint endpoint_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00465">bgp_peer.h:465</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ada118d66290b0e2ac1ce92aa1743c095"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ada118d66290b0e2ac1ce92aa1743c095">BgpPeer::SendEndOfRIBActual</a></div><div class="ttdeci">virtual void SendEndOfRIBActual(Address::Family family)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00279">bgp_peer.cc:279</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ada4f1ca4d3dd5e0565d5a1ccdd3ba8dd"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ada4f1ca4d3dd5e0565d5a1ccdd3ba8dd">BgpPeer::ConfigUpdate</a></div><div class="ttdeci">void ConfigUpdate(const BgpNeighborConfig *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00992">bgp_peer.cc:992</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_adadb114ef688befa0bc28ab7623ee880"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#adadb114ef688befa0bc28ab7623ee880">BgpPeer::get_tx_end_of_rib</a></div><div class="ttdeci">uint64_t get_tx_end_of_rib() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02721">bgp_peer.cc:2721</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_adae7bc0e2cb426238926d3512e636e07"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#adae7bc0e2cb426238926d3512e636e07">BgpPeer::keepalive_timer_</a></div><div class="ttdeci">Timer * keepalive_timer_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00505">bgp_peer.h:505</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_adb14c1e02ee5ade74dbb2d1fed40f200"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#adb14c1e02ee5ade74dbb2d1fed40f200">BgpPeer::FamilyAttributesList</a></div><div class="ttdeci">std::vector&lt; BgpPeerFamilyAttributes * &gt; FamilyAttributesList</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00387">bgp_peer.h:387</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_adc279e2cf7262d19cf3cd3d3c8c1a2a5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#adc279e2cf7262d19cf3cd3d3c8c1a2a5">BgpPeer::GetTaskInstance</a></div><div class="ttdeci">int GetTaskInstance() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02477">bgp_peer.cc:2477</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_adc2d06691ea5a8f5cf131a8376ea61d1"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#adc2d06691ea5a8f5cf131a8376ea61d1">BgpPeer::IsCloseGraceful</a></div><div class="ttdeci">bool IsCloseGraceful() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00323">bgp_peer.cc:323</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_adce95c79428ec1f1cec2bed3be5e0921"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#adce95c79428ec1f1cec2bed3be5e0921">BgpPeer::IsFamilyNegotiated</a></div><div class="ttdeci">bool IsFamilyNegotiated(Address::Family family)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01174">bgp_peer.cc:1174</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_addeee4e254b6236de084a1f5b3bffdf0"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#addeee4e254b6236de084a1f5b3bffdf0">BgpPeer::Is4ByteAsSupported</a></div><div class="ttdeci">virtual bool Is4ByteAsSupported() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01808">bgp_peer.cc:1808</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ade10aa628ccfa131835072c2e1c3c2c0"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ade10aa628ccfa131835072c2e1c3c2c0">BgpPeer::NotifyEstablished</a></div><div class="ttdeci">void NotifyEstablished(bool established)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00798">bgp_peer.cc:798</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_adebcecad0be99c2e8d0e8e10bcbed3ec"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#adebcecad0be99c2e8d0e8e10bcbed3ec">BgpPeer::get_update_error</a></div><div class="ttdeci">uint64_t get_update_error() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02797">bgp_peer.cc:2797</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_adef0aa0aed24fcdf0e121315384bced1"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#adef0aa0aed24fcdf0e121315384bced1">BgpPeer::ProcessEndpointConfig</a></div><div class="ttdeci">void ProcessEndpointConfig(const BgpNeighborConfig *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00980">bgp_peer.cc:980</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_adfb5dbce264b528f83d70452e539c591"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#adfb5dbce264b528f83d70452e539c591">BgpPeer::GetBestAuthKey</a></div><div class="ttdeci">bool GetBestAuthKey(AuthenticationKey *auth_key, KeyType *key_type) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00819">bgp_peer.cc:819</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ae00713836759229368ad53eb1c5ca416"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ae00713836759229368ad53eb1c5ca416">BgpPeer::close_manager</a></div><div class="ttdeci">PeerCloseManager * close_manager()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00355">bgp_peer.h:355</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ae07859cc963d3bb4504ebccf16b0ae47"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ae07859cc963d3bb4504ebccf16b0ae47">BgpPeer::get_connect_timer_expired</a></div><div class="ttdeci">uint64_t get_connect_timer_expired() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02785">bgp_peer.cc:2785</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ae2f3e2ea66d940a3a1fa5c348e9977be"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ae2f3e2ea66d940a3a1fa5c348e9977be">BgpPeer::peer_as_</a></div><div class="ttdeci">as_t peer_as_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00526">bgp_peer.h:526</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ae482ba7c1c0f2f40555ae1e7379508b7"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ae482ba7c1c0f2f40555ae1e7379508b7">BgpPeer::StartEndOfRibReceiveTimer</a></div><div class="ttdeci">void StartEndOfRibReceiveTimer(Address::Family family)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02245">bgp_peer.cc:2245</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ae4d0fb403cf4fae0c67ba6ab07981e17"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ae4d0fb403cf4fae0c67ba6ab07981e17">BgpPeer::dscp_listener_id_</a></div><div class="ttdeci">int dscp_listener_id_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00545">bgp_peer.h:545</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ae56b523bffe4e0369618906925db1df5"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ae56b523bffe4e0369618906925db1df5">BgpPeer::peer_close</a></div><div class="ttdeci">virtual IPeerClose * peer_close()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01285">bgp_peer.cc:1285</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ae838666794c0a9d51f24c8d329c9b262"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ae838666794c0a9d51f24c8d329c9b262">BgpPeer::CheckSplitHorizon</a></div><div class="ttdeci">virtual bool CheckSplitHorizon(uint32_t cluster_id=0, uint32_t ribout_cid=0) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00677">bgp_peer.cc:677</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ae8e003de765c518ea9b54da3fb222f42"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ae8e003de765c518ea9b54da3fb222f42">BgpPeer::StartKeepaliveTimerUnlocked</a></div><div class="ttdeci">virtual void StartKeepaliveTimerUnlocked()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02285">bgp_peer.cc:2285</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_ae90027428ee465500a28c240e4acaa8c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#ae90027428ee465500a28c240e4acaa8c">BgpPeer::bgp_identifier_string</a></div><div class="ttdeci">std::string bgp_identifier_string() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01227">bgp_peer.cc:1227</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aeb5a4c9605d577ee35485d283f89a21f"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aeb5a4c9605d577ee35485d283f89a21f">BgpPeer::membership_req_pending_</a></div><div class="ttdeci">tbb::atomic&lt; int &gt; membership_req_pending_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00518">bgp_peer.h:518</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aeba705d7a3c468fc8f98494b99d3dfe4"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aeba705d7a3c468fc8f98494b99d3dfe4">BgpPeer::AttemptGRHelperMode</a></div><div class="ttdeci">bool AttemptGRHelperMode(int code, int subcode) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01685">bgp_peer.cc:1685</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aefda4110ad1fed88ad32ccd49d930106"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aefda4110ad1fed88ad32ccd49d930106">BgpPeer::private_as_action_</a></div><div class="ttdeci">string private_as_action_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00514">bgp_peer.h:514</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af0c212e652cc792b8b0424adeb3cf9a9"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af0c212e652cc792b8b0424adeb3cf9a9">BgpPeer::peer_port</a></div><div class="ttdeci">uint16_t peer_port() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00165">bgp_peer.h:165</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af1f1b0f23b0f9f1b1587d72bf1635089"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af1f1b0f23b0f9f1b1587d72bf1635089">BgpPeer::resolve_paths_</a></div><div class="ttdeci">bool resolve_paths_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00512">bgp_peer.h:512</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af2d4c482bf49352ef5460162f7017d96"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af2d4c482bf49352ef5460162f7017d96">BgpPeer::vpn_tables_registered_</a></div><div class="ttdeci">bool vpn_tables_registered_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00522">bgp_peer.h:522</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af3f5ecd5fb352e7354d236973b6001aa"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af3f5ecd5fb352e7354d236973b6001aa">BgpPeer::SetSessionSocketOptionDscp</a></div><div class="ttdeci">void SetSessionSocketOptionDscp(TcpSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00903">bgp_peer.cc:903</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af46253ddf5ca5a05a44727d48c08f468"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af46253ddf5ca5a05a44727d48c08f468">BgpPeer::to_str_</a></div><div class="ttdeci">std::string to_str_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00472">bgp_peer.h:472</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af5c38ac16b6ccedf8bff763258bc3a2b"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af5c38ac16b6ccedf8bff763258bc3a2b">BgpPeer::index_</a></div><div class="ttdeci">int index_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00477">bgp_peer.h:477</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af7006c98dad8eb5e1221440d60d41f2c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af7006c98dad8eb5e1221440d60d41f2c">BgpPeer::Register</a></div><div class="ttdeci">void Register(BgpTable *table, const RibExportPolicy &amp;policy)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01381">bgp_peer.cc:1381</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af80c1c1596c6a3f809ebf15f4f5e58aa"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af80c1c1596c6a3f809ebf15f4f5e58aa">BgpPeer::SetAdminState</a></div><div class="ttdeci">virtual void SetAdminState(bool down, int subcode=BgpProto::Notification::AdminShutdown)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01357">bgp_peer.cc:1357</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af88b4529b26a77bfabfc9c057bf01ddc"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af88b4529b26a77bfabfc9c057bf01ddc">BgpPeer::local_as</a></div><div class="ttdeci">as_t local_as() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00183">bgp_peer.h:183</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af8eb2a2278be678e35e74bab505be298"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af8eb2a2278be678e35e74bab505be298">BgpPeer::LookupFamily</a></div><div class="ttdeci">bool LookupFamily(Address::Family family)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00197">bgp_peer.h:197</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af8fec1c26625ae12122c7f195b20c92c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af8fec1c26625ae12122c7f195b20c92c">BgpPeer::peer_is_control_node_</a></div><div class="ttdeci">bool peer_is_control_node_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00471">bgp_peer.h:471</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_af962e80ca07c7f7b327cd8c0dec1384c"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#af962e80ca07c7f7b327cd8c0dec1384c">BgpPeer::FillBgpNeighborDebugState</a></div><div class="ttdeci">static void FillBgpNeighborDebugState(BgpNeighborResp *bnr, const IPeerDebugStats *peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02534">bgp_peer.cc:2534</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_afb2f1db35adabcf17bb623fc247ed3a7"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#afb2f1db35adabcf17bb623fc247ed3a7">BgpPeer::TriggerPrefixLimitCheck</a></div><div class="ttdeci">virtual void TriggerPrefixLimitCheck() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00988">bgp_peer.cc:988</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_afbaea4830890a359cfd3075fbfd789cf"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#afbaea4830890a359cfd3075fbfd789cf">BgpPeer::inc_tx_keepalive</a></div><div class="ttdeci">void inc_tx_keepalive()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l02673">bgp_peer.cc:2673</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_afc0707e587e735c12107b5bf72b36193"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#afc0707e587e735c12107b5bf72b36193">BgpPeer::GetLocalPrefFromMed</a></div><div class="ttdeci">uint32_t GetLocalPrefFromMed(uint32_t med) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01937">bgp_peer.cc:1937</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_afc35f98d3e155dc2d16eb98067196696"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#afc35f98d3e155dc2d16eb98067196696">BgpPeer::AddRTargets</a></div><div class="ttdeci">void AddRTargets(as_t as)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00727">bgp_peer.cc:727</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_afc5dcd5327183690ee022abea6c56bfa"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#afc5dcd5327183690ee022abea6c56bfa">BgpPeer::deleter</a></div><div class="ttdeci">LifetimeActor * deleter()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01167">bgp_peer.cc:1167</a></div></div>
<div class="ttc" id="aclassBgpPeer_html_aff027af7beba693f1b7f21edbbd860f6"><div class="ttname"><a href="../../d3/d2d/classBgpPeer.html#aff027af7beba693f1b7f21edbbd860f6">BgpPeer::BgpPeer</a></div><div class="ttdeci">BgpPeer(BgpServer *server, RoutingInstance *instance, const BgpNeighborConfig *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00469">bgp_peer.cc:469</a></div></div>
<div class="ttc" id="aclassBgpProto_html"><div class="ttname"><a href="../../d2/d4b/classBgpProto.html">BgpProto</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00019">bgp_proto.h:19</a></div></div>
<div class="ttc" id="aclassBgpProto_html_a16302059889af8b0aadfc5ad6f56a2b8adbf1d8a70b77bfee301d50630beba7cf"><div class="ttname"><a href="../../d2/d4b/classBgpProto.html#a16302059889af8b0aadfc5ad6f56a2b8adbf1d8a70b77bfee301d50630beba7cf">BgpProto::KEEPALIVE</a></div><div class="ttdeci">@ KEEPALIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00026">bgp_proto.h:25</a></div></div>
<div class="ttc" id="aclassBgpProto_html_a35267d69369befe457dfffa9dfcbec74"><div class="ttname"><a href="../../d2/d4b/classBgpProto.html#a35267d69369befe457dfffa9dfcbec74">BgpProto::kMinMessageSize</a></div><div class="ttdeci">static const int kMinMessageSize</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00440">bgp_proto.h:440</a></div></div>
<div class="ttc" id="aclassBgpProto_html_a60a52c6a94a32c8bf834352a3d57dc6d"><div class="ttname"><a href="../../d2/d4b/classBgpProto.html#a60a52c6a94a32c8bf834352a3d57dc6d">BgpProto::Decode</a></div><div class="ttdeci">static BgpMessage * Decode(const uint8_t *data, size_t size, ParseErrorContext *ec=NULL, bool as4=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6c/bgp__proto_8cc_source.html#l02115">bgp_proto.cc:2115</a></div></div>
<div class="ttc" id="aclassBgpProto_html_ac54a32f9e4be97b52d782e43ecd5e698"><div class="ttname"><a href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698">BgpProto::BgpPeerType</a></div><div class="ttdeci">BgpPeerType</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00028">bgp_proto.h:28</a></div></div>
<div class="ttc" id="aclassBgpProto_html_ac54a32f9e4be97b52d782e43ecd5e698a0cae037af860ebb2c9546ca55adf5ad7"><div class="ttname"><a href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a0cae037af860ebb2c9546ca55adf5ad7">BgpProto::IBGP</a></div><div class="ttdeci">@ IBGP</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00029">bgp_proto.h:29</a></div></div>
<div class="ttc" id="aclassBgpProto_html_ac54a32f9e4be97b52d782e43ecd5e698a4f08aded12df5e7e04ba6af46fa2bf8f"><div class="ttname"><a href="../../d2/d4b/classBgpProto.html#ac54a32f9e4be97b52d782e43ecd5e698a4f08aded12df5e7e04ba6af46fa2bf8f">BgpProto::EBGP</a></div><div class="ttdeci">@ EBGP</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00030">bgp_proto.h:30</a></div></div>
<div class="ttc" id="aclassBgpProto_html_ac8662f1bc2628e1297105bbabcf4e94c"><div class="ttname"><a href="../../d2/d4b/classBgpProto.html#ac8662f1bc2628e1297105bbabcf4e94c">BgpProto::Encode</a></div><div class="ttdeci">static int Encode(const BgpMessage *msg, uint8_t *data, size_t size, EncodeOffsets *offsets=NULL, bool as4=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6c/bgp__proto_8cc_source.html#l02135">bgp_proto.cc:2135</a></div></div>
<div class="ttc" id="aclassBgpRoute_html"><div class="ttname"><a href="../../d6/dbd/classBgpRoute.html">BgpRoute</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/bgp__route_8h_source.html#l00023">bgp_route.h:23</a></div></div>
<div class="ttc" id="aclassBgpServer_html"><div class="ttname"><a href="../../db/d26/classBgpServer.html">BgpServer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00059">bgp_server.h:59</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a020ae22723a6c93e381f2135a6e53256"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a020ae22723a6c93e381f2135a6e53256">BgpServer::decrement_deleting_count</a></div><div class="ttdeci">void decrement_deleting_count()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00229">bgp_server.h:229</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a0cd117a168a3ae68d452897e2a6fdbf9"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a0cd117a168a3ae68d452897e2a6fdbf9">BgpServer::cluster_id</a></div><div class="ttdeci">uint32_t cluster_id() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00207">bgp_server.h:207</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a14aa2a7a0dcf0db482a2c14a292bd390"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a14aa2a7a0dcf0db482a2c14a292bd390">BgpServer::ioservice</a></div><div class="ttdeci">boost::asio::io_context * ioservice()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00690">bgp_server.cc:690</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a25823685d85a4ba486aa69412427cc27"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a25823685d85a4ba486aa69412427cc27">BgpServer::enable_4byte_as</a></div><div class="ttdeci">bool enable_4byte_as() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00734">bgp_server.cc:734</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a2682da2ea2d21bf3d8f425d5fea5bb82"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a2682da2ea2d21bf3d8f425d5fea5bb82">BgpServer::GetEndOfRibSendTime</a></div><div class="ttdeci">uint32_t GetEndOfRibSendTime() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00726">bgp_server.cc:726</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a360fc5f484f5f394ca27ea542a75485b"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a360fc5f484f5f394ca27ea542a75485b">BgpServer::IncrementUpBgpaasPeerCount</a></div><div class="ttdeci">void IncrementUpBgpaasPeerCount()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00259">bgp_server.h:259</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a38073568ca06acebcba187cdad366944"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a38073568ca06acebcba187cdad366944">BgpServer::DecrementUpPeerCount</a></div><div class="ttdeci">void DecrementUpPeerCount()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00252">bgp_server.h:252</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a3ee7eec1ab55e08858fabf8eb658eaa6"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a3ee7eec1ab55e08858fabf8eb658eaa6">BgpServer::UnregisterPeer</a></div><div class="ttdeci">void UnregisterPeer(BgpPeer *peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00610">bgp_server.cc:610</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a43eb0f3a32d47b86eb7df4713bbb89a9"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a43eb0f3a32d47b86eb7df4713bbb89a9">BgpServer::routing_instance_mgr</a></div><div class="ttdeci">RoutingInstanceMgr * routing_instance_mgr()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00103">bgp_server.h:103</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a47b9c6475976fae82d1c55444a401242"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a47b9c6475976fae82d1c55444a401242">BgpServer::IncrementUpPeerCount</a></div><div class="ttdeci">void IncrementUpPeerCount()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00249">bgp_server.h:249</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a5452a99665e1301ec4842f7bf3ab895d"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a5452a99665e1301ec4842f7bf3ab895d">BgpServer::bgp_identifier</a></div><div class="ttdeci">uint32_t bgp_identifier() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00212">bgp_server.h:212</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a54cb8e78f9517a5960ddf3d0256008d8"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a54cb8e78f9517a5960ddf3d0256008d8">BgpServer::GetEndOfRibReceiveTime</a></div><div class="ttdeci">uint32_t GetEndOfRibReceiveTime() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00722">bgp_server.cc:722</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a5d5696b7eb64ffb0d68e171ac48daf82"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a5d5696b7eb64ffb0d68e171ac48daf82">BgpServer::DecrementUpBgpaasPeerCount</a></div><div class="ttdeci">void DecrementUpBgpaasPeerCount()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00262">bgp_server.h:262</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a60c8cc22d42634df1d6c04b21dce10de"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a60c8cc22d42634df1d6c04b21dce10de">BgpServer::decrement_deleting_bgpaas_count</a></div><div class="ttdeci">void decrement_deleting_bgpaas_count()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00237">bgp_server.h:237</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a702dbbeec9f748c4fb259013b67f4538"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a702dbbeec9f748c4fb259013b67f4538">BgpServer::global_qos</a></div><div class="ttdeci">BgpGlobalQosConfig * global_qos()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00298">bgp_server.h:298</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a746c85fe658cccdc727a310911cc5c49"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a746c85fe658cccdc727a310911cc5c49">BgpServer::UnregisterASNUpdateCallback</a></div><div class="ttdeci">void UnregisterASNUpdateCallback(int listener)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00881">bgp_server.cc:881</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a9183a30ae0fa57c309ee4fd8aa2e7709"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a9183a30ae0fa57c309ee4fd8aa2e7709">BgpServer::UnregisterDSCPUpdateCallback</a></div><div class="ttdeci">void UnregisterDSCPUpdateCallback(int listener)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00926">bgp_server.cc:926</a></div></div>
<div class="ttc" id="aclassBgpServer_html_a965a787f1dd30af68bf8c371a4004217"><div class="ttname"><a href="../../db/d26/classBgpServer.html#a965a787f1dd30af68bf8c371a4004217">BgpServer::ToString</a></div><div class="ttdeci">virtual std::string ToString() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00564">bgp_server.cc:564</a></div></div>
<div class="ttc" id="aclassBgpServer_html_ab941a0ccb2d5812c6a4aae87aef72efd"><div class="ttname"><a href="../../db/d26/classBgpServer.html#ab941a0ccb2d5812c6a4aae87aef72efd">BgpServer::RegisterDSCPUpdateCallback</a></div><div class="ttdeci">int RegisterDSCPUpdateCallback(DSCPUpdateCb cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00910">bgp_server.cc:910</a></div></div>
<div class="ttc" id="aclassBgpServer_html_abed7c44cd2587b18214811e9cfffada0"><div class="ttname"><a href="../../db/d26/classBgpServer.html#abed7c44cd2587b18214811e9cfffada0">BgpServer::IsServerStartingUp</a></div><div class="ttdeci">bool IsServerStartingUp() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00730">bgp_server.cc:730</a></div></div>
<div class="ttc" id="aclassBgpServer_html_ac7583398387bd7e3a853607a932158e1"><div class="ttname"><a href="../../db/d26/classBgpServer.html#ac7583398387bd7e3a853607a932158e1">BgpServer::local_autonomous_system</a></div><div class="ttdeci">as_t local_autonomous_system() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00211">bgp_server.h:211</a></div></div>
<div class="ttc" id="aclassBgpServer_html_ad1c0d588bba7e1d3430187f5b3d2ce0b"><div class="ttname"><a href="../../db/d26/classBgpServer.html#ad1c0d588bba7e1d3430187f5b3d2ce0b">BgpServer::attr_db</a></div><div class="ttdeci">BgpAttrDB * attr_db()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00184">bgp_server.h:184</a></div></div>
<div class="ttc" id="aclassBgpServer_html_ad54f5b0be875a76940384140ab6a40c3"><div class="ttname"><a href="../../db/d26/classBgpServer.html#ad54f5b0be875a76940384140ab6a40c3">BgpServer::localname</a></div><div class="ttdeci">const std::string &amp; localname() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00686">bgp_server.cc:686</a></div></div>
<div class="ttc" id="aclassBgpServer_html_adae21688a383eaededb3319f4d465683"><div class="ttname"><a href="../../db/d26/classBgpServer.html#adae21688a383eaededb3319f4d465683">BgpServer::GetRTargetTableLastUpdatedTimeStamp</a></div><div class="ttdeci">time_t GetRTargetTableLastUpdatedTimeStamp() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l01214">bgp_server.cc:1214</a></div></div>
<div class="ttc" id="aclassBgpServer_html_adec0acb47c2c37fc42da6896ac752061"><div class="ttname"><a href="../../db/d26/classBgpServer.html#adec0acb47c2c37fc42da6896ac752061">BgpServer::session_manager</a></div><div class="ttdeci">BgpSessionManager * session_manager()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00098">bgp_server.h:98</a></div></div>
<div class="ttc" id="aclassBgpServer_html_ae00c165286238c3cb64eef4895350fc7"><div class="ttname"><a href="../../db/d26/classBgpServer.html#ae00c165286238c3cb64eef4895350fc7">BgpServer::RegisterASNUpdateCallback</a></div><div class="ttdeci">int RegisterASNUpdateCallback(ASNUpdateCb callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d87/bgp__server_8cc_source.html#l00865">bgp_server.cc:865</a></div></div>
<div class="ttc" id="aclassBgpServer_html_ae1b50989fe8347f00f3acb93e86198cb"><div class="ttname"><a href="../../db/d26/classBgpServer.html#ae1b50989fe8347f00f3acb93e86198cb">BgpServer::membership_mgr</a></div><div class="ttdeci">BgpMembershipManager * membership_mgr()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00176">bgp_server.h:176</a></div></div>
<div class="ttc" id="aclassBgpServer_html_aeeae8183d39c14782b7e58e696cd7047"><div class="ttname"><a href="../../db/d26/classBgpServer.html#aeeae8183d39c14782b7e58e696cd7047">BgpServer::increment_deleting_count</a></div><div class="ttdeci">void increment_deleting_count()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00228">bgp_server.h:228</a></div></div>
<div class="ttc" id="aclassBgpServer_html_af5bab3bc2a3774d9f7f80bff11e52187"><div class="ttname"><a href="../../db/d26/classBgpServer.html#af5bab3bc2a3774d9f7f80bff11e52187">BgpServer::increment_deleting_bgpaas_count</a></div><div class="ttdeci">void increment_deleting_bgpaas_count()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d53/bgp__server_8h_source.html#l00236">bgp_server.h:236</a></div></div>
<div class="ttc" id="aclassBgpSessionManager_html_a54bb4751fb4ba70bec0b7812af6e5280"><div class="ttname"><a href="../../d1/df7/classBgpSessionManager.html#a54bb4751fb4ba70bec0b7812af6e5280">BgpSessionManager::CreateSession</a></div><div class="ttdeci">virtual TcpSession * CreateSession()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc4/bgp__session__manager_8cc_source.html#l00160">bgp_session_manager.cc:160</a></div></div>
<div class="ttc" id="aclassBgpSession_html"><div class="ttname"><a href="../../d5/de5/classBgpSession.html">BgpSession</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/bgp__session_8h_source.html#l00041">bgp_session.h:41</a></div></div>
<div class="ttc" id="aclassBgpSession_html_a5447543863ba268c9416f9145e8d20ec"><div class="ttname"><a href="../../d5/de5/classBgpSession.html#a5447543863ba268c9416f9145e8d20ec">BgpSession::SendNotification</a></div><div class="ttdeci">void SendNotification(int code, int subcode, const std::string &amp;data=std::string())</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/bgp__session_8cc_source.html#l00112">bgp_session.cc:112</a></div></div>
<div class="ttc" id="aclassBgpSession_html_ac21906397b0404d2a08f619531ef77eb"><div class="ttname"><a href="../../d5/de5/classBgpSession.html#ac21906397b0404d2a08f619531ef77eb">BgpSession::clear_peer</a></div><div class="ttdeci">void clear_peer()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/bgp__session_8cc_source.html#l00138">bgp_session.cc:138</a></div></div>
<div class="ttc" id="aclassBgpSession_html_afa411750e22ce2e1caf7ae80d85743b1"><div class="ttname"><a href="../../d5/de5/classBgpSession.html#afa411750e22ce2e1caf7ae80d85743b1">BgpSession::set_peer</a></div><div class="ttdeci">void set_peer(BgpPeer *peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/bgp__session_8cc_source.html#l00128">bgp_session.cc:128</a></div></div>
<div class="ttc" id="aclassBgpTable_html"><div class="ttname"><a href="../../d0/def/classBgpTable.html">BgpTable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d36/bgp__table_8h_source.html#l00035">bgp_table.h:35</a></div></div>
<div class="ttc" id="aclassBgpTable_html_a2511a870274f94ba58c6ee12909233cd"><div class="ttname"><a href="../../d0/def/classBgpTable.html#a2511a870274f94ba58c6ee12909233cd">BgpTable::LocatePathResolver</a></div><div class="ttdeci">void LocatePathResolver()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc1/bgp__table_8cc_source.html#l01080">bgp_table.cc:1080</a></div></div>
<div class="ttc" id="aclassBgpTable_html_ae03997dea3dbab64d82a5403715eaa1c"><div class="ttname"><a href="../../d0/def/classBgpTable.html#ae03997dea3dbab64d82a5403715eaa1c">BgpTable::family</a></div><div class="ttdeci">virtual Address::Family family() const =0</div></div>
<div class="ttc" id="aclassClusterList_html_a7a6bb0c5ac18a0a3b616db78ce445844"><div class="ttname"><a href="../../db/d43/classClusterList.html#a7a6bb0c5ac18a0a3b616db78ce445844">ClusterList::cluster_list</a></div><div class="ttdeci">const ClusterListSpec &amp; cluster_list() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00229">bgp_attr.h:229</a></div></div>
<div class="ttc" id="aclassConfigClientManager_html_acfb0de48a2240988ffe6e033a769021d"><div class="ttname"><a href="../../de/d27/classConfigClientManager.html#acfb0de48a2240988ffe6e033a769021d">ConfigClientManager::end_of_rib_computed</a></div><div class="ttdeci">static bool end_of_rib_computed()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/config__client__manager_8h_source.html#l00103">config_client_manager.h:103</a></div></div>
<div class="ttc" id="aclassDBTableBase_html_a1b8bb5fe5c7b5e8a65dbca701d5f1c94"><div class="ttname"><a href="../../d7/df2/classDBTableBase.html#a1b8bb5fe5c7b5e8a65dbca701d5f1c94">DBTableBase::Enqueue</a></div><div class="ttdeci">bool Enqueue(DBRequest *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/db__table_8cc_source.html#l00194">db_table.cc:194</a></div></div>
<div class="ttc" id="aclassDBTablePartBase_html"><div class="ttname"><a href="../../d3/da7/classDBTablePartBase.html">DBTablePartBase</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d21/db__table__partition_8h_source.html#l00018">db_table_partition.h:18</a></div></div>
<div class="ttc" id="aclassEvpnPrefix_html"><div class="ttname"><a href="../../d0/db1/classEvpnPrefix.html">EvpnPrefix</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2a/bgp_2evpn_2evpn__route_8h_source.html#l00024">bgp/evpn/evpn_route.h:24</a></div></div>
<div class="ttc" id="aclassEvpnTable_html"><div class="ttname"><a href="../../da/da4/classEvpnTable.html">EvpnTable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7d/evpn__table_8h_source.html#l00017">evpn_table.h:17</a></div></div>
<div class="ttc" id="aclassExtCommunityDB_html"><div class="ttname"><a href="../../d2/ddb/classExtCommunityDB.html">ExtCommunityDB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da6/community_8h_source.html#l00457">community.h:460</a></div></div>
<div class="ttc" id="aclassExtCommunityDB_html_ad4ca3985039195a5d3293a02c5e68d86"><div class="ttname"><a href="../../d2/ddb/classExtCommunityDB.html#ad4ca3985039195a5d3293a02c5e68d86">ExtCommunityDB::ReplaceTunnelEncapsulationAndLocate</a></div><div class="ttdeci">ExtCommunityPtr ReplaceTunnelEncapsulationAndLocate(const ExtCommunity *src, const ExtCommunity::ExtCommunityList &amp;tunnel_encaps)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/community_8cc_source.html#l00899">community.cc:899</a></div></div>
<div class="ttc" id="aclassExtCommunity_html_a02cdb9d746b06a359d2ddaa1b8362c82"><div class="ttname"><a href="../../da/d36/classExtCommunity.html#a02cdb9d746b06a359d2ddaa1b8362c82">ExtCommunity::is_tunnel_encap</a></div><div class="ttdeci">static bool is_tunnel_encap(const ExtCommunityValue &amp;val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da6/community_8h_source.html#l00367">community.h:367</a></div></div>
<div class="ttc" id="aclassExtCommunity_html_a4fcc6e4052f4d113fce6afee7c0aef48"><div class="ttname"><a href="../../da/d36/classExtCommunity.html#a4fcc6e4052f4d113fce6afee7c0aef48">ExtCommunity::ExtCommunityList</a></div><div class="ttdeci">std::vector&lt; ExtCommunityValue &gt; ExtCommunityList</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da6/community_8h_source.html#l00154">community.h:154</a></div></div>
<div class="ttc" id="aclassExtCommunity_html_a968a0558c4724383c5ac0edf9f91a3d2"><div class="ttname"><a href="../../da/d36/classExtCommunity.html#a968a0558c4724383c5ac0edf9f91a3d2">ExtCommunity::communities</a></div><div class="ttdeci">const ExtCommunityList &amp; communities() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da6/community_8h_source.html#l00181">community.h:181</a></div></div>
<div class="ttc" id="aclassIPeerClose_html"><div class="ttname"><a href="../../da/d00/classIPeerClose.html">IPeerClose</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00157">ipeer.h:157</a></div></div>
<div class="ttc" id="aclassIPeerClose_html_ade0b5761ba130a6ade69f2b9237d69cf"><div class="ttname"><a href="../../da/d00/classIPeerClose.html#ade0b5761ba130a6ade69f2b9237d69cf">IPeerClose::UpdateRouteStats</a></div><div class="ttdeci">virtual void UpdateRouteStats(Address::Family family, const BgpPath *old_path, uint32_t path_flags) const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html">IPeerDebugStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00041">ipeer.h:41</a></div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_a058a179cf06052a2299fe08dc0e6ff6f"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#a058a179cf06052a2299fe08dc0e6ff6f">IPeerDebugStats::last_error</a></div><div class="ttdeci">virtual std::string last_error() const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_a0c4d3179ccf5a3d02fd411d45f1e9350"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#a0c4d3179ccf5a3d02fd411d45f1e9350">IPeerDebugStats::num_flaps</a></div><div class="ttdeci">virtual uint64_t num_flaps() const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_a1465dcdc2ff47b7abb2265c37b3c4173"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#a1465dcdc2ff47b7abb2265c37b3c4173">IPeerDebugStats::GetRxRouteUpdateStats</a></div><div class="ttdeci">virtual void GetRxRouteUpdateStats(UpdateStats *stats) const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_a16054294a20b025fafbe6f4177a87e26"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#a16054294a20b025fafbe6f4177a87e26">IPeerDebugStats::last_state</a></div><div class="ttdeci">virtual std::string last_state() const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_a1b759c41007bd9cf5e99a1ac84fd71b4"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#a1b759c41007bd9cf5e99a1ac84fd71b4">IPeerDebugStats::last_state_change_at</a></div><div class="ttdeci">virtual std::string last_state_change_at() const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_a1bc58ad5a7f56d3d6f0bb2018e41ddc4"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#a1bc58ad5a7f56d3d6f0bb2018e41ddc4">IPeerDebugStats::GetRxProtoStats</a></div><div class="ttdeci">virtual void GetRxProtoStats(ProtoStats *stats) const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_a38f5a61b0abbceeaae7e248888dbeab8"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#a38f5a61b0abbceeaae7e248888dbeab8">IPeerDebugStats::last_flap</a></div><div class="ttdeci">virtual std::string last_flap() const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_a8e04316f6a8af8d4f66046ad74c060b1"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#a8e04316f6a8af8d4f66046ad74c060b1">IPeerDebugStats::GetTxSocketStats</a></div><div class="ttdeci">virtual void GetTxSocketStats(SocketStats *stats) const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_a9f9588227a8d7182062934ccfa4f70d3"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#a9f9588227a8d7182062934ccfa4f70d3">IPeerDebugStats::GetTxRouteUpdateStats</a></div><div class="ttdeci">virtual void GetTxRouteUpdateStats(UpdateStats *stats) const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_aa7a05e414eccbb9c6b8cc5f77bc84643"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#aa7a05e414eccbb9c6b8cc5f77bc84643">IPeerDebugStats::last_event</a></div><div class="ttdeci">virtual std::string last_event() const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_ab4aa64b64432f998aee6f407b7f8d4d7"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#ab4aa64b64432f998aee6f407b7f8d4d7">IPeerDebugStats::GetTxProtoStats</a></div><div class="ttdeci">virtual void GetTxProtoStats(ProtoStats *stats) const =0</div></div>
<div class="ttc" id="aclassIPeerDebugStats_html_ad6d643c909f0d4e074bf99078f47803a"><div class="ttname"><a href="../../d0/d3f/classIPeerDebugStats.html#ad6d643c909f0d4e074bf99078f47803a">IPeerDebugStats::GetRxSocketStats</a></div><div class="ttdeci">virtual void GetRxSocketStats(SocketStats *stats) const =0</div></div>
<div class="ttc" id="aclassInetTable_html"><div class="ttname"><a href="../../d1/dc4/classInetTable.html">InetTable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6f/inet__table_8h_source.html#l00019">inet_table.h:19</a></div></div>
<div class="ttc" id="aclassIp4Prefix_html"><div class="ttname"><a href="../../d3/d22/classIp4Prefix.html">Ip4Prefix</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dda/inet__route_8h_source.html#l00016">inet_route.h:16</a></div></div>
<div class="ttc" id="aclassIp4Prefix_html_a0216429eefdd5b2bdbbe376154cb96d5"><div class="ttname"><a href="../../d3/d22/classIp4Prefix.html#a0216429eefdd5b2bdbbe376154cb96d5">Ip4Prefix::prefixlen</a></div><div class="ttdeci">int prefixlen() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dda/inet__route_8h_source.html#l00027">inet_route.h:27</a></div></div>
<div class="ttc" id="aclassIp4Prefix_html_a6ba2931ee0d2753e8d039f4cf47bb1e0"><div class="ttname"><a href="../../d3/d22/classIp4Prefix.html#a6ba2931ee0d2753e8d039f4cf47bb1e0">Ip4Prefix::FromProtoPrefix</a></div><div class="ttdeci">static int FromProtoPrefix(const BgpProtoPrefix &amp;proto_prefix, Ip4Prefix *prefix)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d29/inet__route_8cc_source.html#l00015">inet_route.cc:15</a></div></div>
<div class="ttc" id="aclassIp4Prefix_html_a996a5b45fc99f07ca15885b624ced4a6"><div class="ttname"><a href="../../d3/d22/classIp4Prefix.html#a996a5b45fc99f07ca15885b624ced4a6">Ip4Prefix::addr</a></div><div class="ttdeci">Ip4Address addr() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dda/inet__route_8h_source.html#l00024">inet_route.h:24</a></div></div>
<div class="ttc" id="aclassLifetimeActor_html"><div class="ttname"><a href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d11/lifetime_8h_source.html#l00116">lifetime.h:116</a></div></div>
<div class="ttc" id="aclassMatchProtocol_html_ae995dbabc66a0bd5e1d48dbd8f7b090fa7cfd287f3d9c0da62ce27304f73fab2a"><div class="ttname"><a href="../../d7/df5/classMatchProtocol.html#ae995dbabc66a0bd5e1d48dbd8f7b090fa7cfd287f3d9c0da62ce27304f73fab2a">MatchProtocol::BGPaaS</a></div><div class="ttdeci">@ BGPaaS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de5/routing__policy__match_8h_source.html#l00124">routing_policy_match.h:123</a></div></div>
<div class="ttc" id="aclassMessage_html"><div class="ttname"><a href="../../d6/d28/classMessage.html">Message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/message__builder_8h_source.html#l00020">message_builder.h:20</a></div></div>
<div class="ttc" id="aclassPeerManager_html_a567efc92a3e1ac2c1eacc56fbeada341"><div class="ttname"><a href="../../d2/dc6/classPeerManager.html#a567efc92a3e1ac2c1eacc56fbeada341">PeerManager::DestroyIPeer</a></div><div class="ttdeci">virtual void DestroyIPeer(IPeer *ipeer)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/peer__manager_8cc_source.html#l00114">peer_manager.cc:114</a></div></div>
<div class="ttc" id="aclassRTargetPrefix_html"><div class="ttname"><a href="../../de/d40/classRTargetPrefix.html">RTargetPrefix</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbd/rtarget__prefix_8h_source.html#l00016">rtarget_prefix.h:16</a></div></div>
<div class="ttc" id="aclassRouteDistinguisher_html_aa1314b320f91ff0ea1a8682da3fbdaa9"><div class="ttname"><a href="../../dc/d73/classRouteDistinguisher.html#aa1314b320f91ff0ea1a8682da3fbdaa9">RouteDistinguisher::kSize</a></div><div class="ttdeci">static const size_t kSize</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2e/rd_8h_source.html#l00013">rd.h:13</a></div></div>
<div class="ttc" id="aclassRouteDistinguisher_html_ade18bfe5e6765e02befeed1030941f04"><div class="ttname"><a href="../../dc/d73/classRouteDistinguisher.html#ade18bfe5e6765e02befeed1030941f04">RouteDistinguisher::kZeroRd</a></div><div class="ttdeci">static RouteDistinguisher kZeroRd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2e/rd_8h_source.html#l00014">rd.h:14</a></div></div>
<div class="ttc" id="aclassRouteTarget_html"><div class="ttname"><a href="../../dd/d0f/classRouteTarget.html">RouteTarget</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d25/rtarget__address_8h_source.html#l00016">rtarget_address.h:16</a></div></div>
<div class="ttc" id="aclassRoutingInstanceMgr_html"><div class="ttname"><a href="../../d2/d72/classRoutingInstanceMgr.html">RoutingInstanceMgr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/routing__instance_8h_source.html#l00288">routing_instance.h:288</a></div></div>
<div class="ttc" id="aclassRoutingInstanceMgr_html_a46ebac8012bd3458e862b6cb5b7f88a5"><div class="ttname"><a href="../../d2/d72/classRoutingInstanceMgr.html#a46ebac8012bd3458e862b6cb5b7f88a5">RoutingInstanceMgr::GetRoutingInstance</a></div><div class="ttdeci">RoutingInstance * GetRoutingInstance(const std::string &amp;name)</div></div>
<div class="ttc" id="aclassRoutingInstanceMgr_html_a6ebf31404a14e516e9d4a38cc8bd53b4"><div class="ttname"><a href="../../d2/d72/classRoutingInstanceMgr.html#a6ebf31404a14e516e9d4a38cc8bd53b4">RoutingInstanceMgr::GetDefaultRoutingInstance</a></div><div class="ttdeci">RoutingInstance * GetDefaultRoutingInstance()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/routing__instance_8cc_source.html#l00359">routing_instance.cc:359</a></div></div>
<div class="ttc" id="aclassRoutingInstanceMgr_html_aaba823b33b8dd20428d1c25362782458a20b9cdbe89e76ac0c17d4f2b89680d94"><div class="ttname"><a href="../../d2/d72/classRoutingInstanceMgr.html#aaba823b33b8dd20428d1c25362782458a20b9cdbe89e76ac0c17d4f2b89680d94">RoutingInstanceMgr::INSTANCE_UPDATE</a></div><div class="ttdeci">@ INSTANCE_UPDATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/routing__instance_8h_source.html#l00309">routing_instance.h:309</a></div></div>
<div class="ttc" id="aclassRoutingInstanceMgr_html_ad615001baabfb243775068d2953e0271"><div class="ttname"><a href="../../d2/d72/classRoutingInstanceMgr.html#ad615001baabfb243775068d2953e0271">RoutingInstanceMgr::RegisterInstanceOpCallback</a></div><div class="ttdeci">int RegisterInstanceOpCallback(RoutingInstanceCb cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/routing__instance_8cc_source.html#l00297">routing_instance.cc:297</a></div></div>
<div class="ttc" id="aclassRoutingInstance_html"><div class="ttname"><a href="../../de/ddf/classRoutingInstance.html">RoutingInstance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/routing__instance_8h_source.html#l00054">routing_instance.h:54</a></div></div>
<div class="ttc" id="aclassRoutingInstance_html_a04603321cf74e128aee933a6d0e8cd52"><div class="ttname"><a href="../../de/ddf/classRoutingInstance.html#a04603321cf74e128aee933a6d0e8cd52">RoutingInstance::name</a></div><div class="ttdeci">const std::string &amp; name() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/routing__instance_8h_source.html#l00120">routing_instance.h:120</a></div></div>
<div class="ttc" id="aclassRoutingInstance_html_a48f5f305d63c857cf5b774043c3355f5"><div class="ttname"><a href="../../de/ddf/classRoutingInstance.html#a48f5f305d63c857cf5b774043c3355f5">RoutingInstance::routing_instance_vxlan</a></div><div class="ttdeci">const std::string &amp; routing_instance_vxlan() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/routing__instance_8h_source.html#l00199">routing_instance.h:199</a></div></div>
<div class="ttc" id="aclassRoutingInstance_html_a681ad0a18a6afd9daf99a4644fd4115c"><div class="ttname"><a href="../../de/ddf/classRoutingInstance.html#a681ad0a18a6afd9daf99a4644fd4115c">RoutingInstance::peer_manager</a></div><div class="ttdeci">PeerManager * peer_manager()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/routing__instance_8h_source.html#l00166">routing_instance.h:166</a></div></div>
<div class="ttc" id="aclassRoutingInstance_html_a8948697ed04175cdad2205625ca6bbb4"><div class="ttname"><a href="../../de/ddf/classRoutingInstance.html#a8948697ed04175cdad2205625ca6bbb4">RoutingInstance::GetImportList</a></div><div class="ttdeci">const RouteTargetList &amp; GetImportList() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/routing__instance_8h_source.html#l00095">routing_instance.h:95</a></div></div>
<div class="ttc" id="aclassRoutingInstance_html_adff46853277535019d5d828bc1f74628"><div class="ttname"><a href="../../de/ddf/classRoutingInstance.html#adff46853277535019d5d828bc1f74628">RoutingInstance::GetTable</a></div><div class="ttdeci">BgpTable * GetTable(Address::Family fmly)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/routing__instance_8cc_source.html#l01772">routing_instance.cc:1772</a></div></div>
<div class="ttc" id="aclassSandesh_html_a25d84f22abcc2534d85b608945260bb7"><div class="ttname"><a href="../../de/d75/classSandesh.html#a25d84f22abcc2534d85b608945260bb7">Sandesh::LoggingLevel</a></div><div class="ttdeci">static SandeshLevel::type LoggingLevel()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2c/cpp_2sandesh_8h_source.html#l00221">cpp/sandesh.h:221</a></div></div>
<div class="ttc" id="aclassSandesh_html_a43a495eada28d343bab14c2eb021b327"><div class="ttname"><a href="../../de/d75/classSandesh.html#a43a495eada28d343bab14c2eb021b327">Sandesh::LoggingUtLevel</a></div><div class="ttdeci">static SandeshLevel::type LoggingUtLevel()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2c/cpp_2sandesh_8h_source.html#l00222">cpp/sandesh.h:222</a></div></div>
<div class="ttc" id="aclassStateMachine_html"><div class="ttname"><a href="../../d0/dc5/classStateMachine.html">StateMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7f/state__machine_8h_source.html#l00075">state_machine.h:75</a></div></div>
<div class="ttc" id="aclassStateMachine_html_a132b8118abdbf2e2c93d0e6ac7390499"><div class="ttname"><a href="../../d0/dc5/classStateMachine.html#a132b8118abdbf2e2c93d0e6ac7390499">StateMachine::last_notification_in_error</a></div><div class="ttdeci">const std::string last_notification_in_error() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dcb/state__machine_8cc_source.html#l01675">state_machine.cc:1675</a></div></div>
<div class="ttc" id="aclassStateMachine_html_a343b95b5bde2464a973ddde183d1ed5f"><div class="ttname"><a href="../../d0/dc5/classStateMachine.html#a343b95b5bde2464a973ddde183d1ed5f">StateMachine::last_event</a></div><div class="ttdeci">const std::string &amp; last_event() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7f/state__machine_8h_source.html#l00172">state_machine.h:172</a></div></div>
<div class="ttc" id="aclassStateMachine_html_a46d4861c5ecbeb1a0ac7534a3d0a6779"><div class="ttname"><a href="../../d0/dc5/classStateMachine.html#a46d4861c5ecbeb1a0ac7534a3d0a6779">StateMachine::last_state_change_at</a></div><div class="ttdeci">const std::string last_state_change_at() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dcb/state__machine_8cc_source.html#l01586">state_machine.cc:1586</a></div></div>
<div class="ttc" id="aclassStateMachine_html_a8ec52ec2ac33298c4ee7fafc13a4bc70"><div class="ttname"><a href="../../d0/dc5/classStateMachine.html#a8ec52ec2ac33298c4ee7fafc13a4bc70">StateMachine::State</a></div><div class="ttdeci">State</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7f/state__machine_8h_source.html#l00087">state_machine.h:87</a></div></div>
<div class="ttc" id="aclassStateMachine_html_a8ec52ec2ac33298c4ee7fafc13a4bc70a18fd9a8aca1252c7c0be04f0aa464c14"><div class="ttname"><a href="../../d0/dc5/classStateMachine.html#a8ec52ec2ac33298c4ee7fafc13a4bc70a18fd9a8aca1252c7c0be04f0aa464c14">StateMachine::ESTABLISHED</a></div><div class="ttdeci">@ ESTABLISHED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7f/state__machine_8h_source.html#l00094">state_machine.h:93</a></div></div>
<div class="ttc" id="aclassStateMachine_html_ad5d6177f0ee43443091ced7b0a37ed6a"><div class="ttname"><a href="../../d0/dc5/classStateMachine.html#ad5d6177f0ee43443091ced7b0a37ed6a">StateMachine::LastStateName</a></div><div class="ttdeci">const std::string &amp; LastStateName() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dcb/state__machine_8cc_source.html#l01582">state_machine.cc:1582</a></div></div>
<div class="ttc" id="aclassTaskScheduler_html"><div class="ttname"><a href="../../df/ddc/classTaskScheduler.html">TaskScheduler</a></div><div class="ttdoc">The TaskScheduler keeps track of what tasks are currently schedulable. When a task is enqueued it is ...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da4/task_8h_source.html#l00178">task.h:178</a></div></div>
<div class="ttc" id="aclassTaskScheduler_html_a2b2c4c05c286d6c22fdfdaee461e1489"><div class="ttname"><a href="../../df/ddc/classTaskScheduler.html#a2b2c4c05c286d6c22fdfdaee461e1489">TaskScheduler::GetTaskId</a></div><div class="ttdeci">int GetTaskId(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbd/task_8cc_source.html#l00856">task.cc:856</a></div></div>
<div class="ttc" id="aclassTaskScheduler_html_a951ae2a1d1b7700618defdcc1ea53a70"><div class="ttname"><a href="../../df/ddc/classTaskScheduler.html#a951ae2a1d1b7700618defdcc1ea53a70">TaskScheduler::GetInstance</a></div><div class="ttdeci">static TaskScheduler * GetInstance()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbd/task_8cc_source.html#l00547">task.cc:547</a></div></div>
<div class="ttc" id="aclassTaskScheduler_html_aa50cf620d67afe0938bc4f8da4856217"><div class="ttname"><a href="../../df/ddc/classTaskScheduler.html#aa50cf620d67afe0938bc4f8da4856217">TaskScheduler::HardwareThreadCount</a></div><div class="ttdeci">int HardwareThreadCount()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da4/task_8h_source.html#l00276">task.h:276</a></div></div>
<div class="ttc" id="aclassTaskTrigger_html_a3210a7b35d6a63583e2fb305f26b91ba"><div class="ttname"><a href="../../d3/d5f/classTaskTrigger.html#a3210a7b35d6a63583e2fb305f26b91ba">TaskTrigger::IsSet</a></div><div class="ttdeci">bool IsSet() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/task__trigger_8h_source.html#l00042">task_trigger.h:42</a></div></div>
<div class="ttc" id="aclassTaskTrigger_html_ada3590b85844a485e0f663adaf697d4e"><div class="ttname"><a href="../../d3/d5f/classTaskTrigger.html#ada3590b85844a485e0f663adaf697d4e">TaskTrigger::Set</a></div><div class="ttdeci">void Set()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df5/task__trigger_8cc_source.html#l00045">task_trigger.cc:45</a></div></div>
<div class="ttc" id="aclassTcpServer_html_a56d2d38051e1233ef46fcdcc378b2aad"><div class="ttname"><a href="../../de/df9/classTcpServer.html#a56d2d38051e1233ef46fcdcc378b2aad">TcpServer::SetListenSocketMd5Option</a></div><div class="ttdeci">int SetListenSocketMd5Option(uint32_t peer_ip, const std::string &amp;md5_password)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d86/tcp__server_8cc_source.html#l00517">tcp_server.cc:517</a></div></div>
<div class="ttc" id="aclassTcpSession_html"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html">TcpSession</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00042">tcp_session.h:42</a></div></div>
<div class="ttc" id="aclassTcpSession_html_a0e221bb1f018a66cb630c675aa00c577"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a0e221bb1f018a66cb630c675aa00c577">TcpSession::GetSocketStats</a></div><div class="ttdeci">const io::SocketStats &amp; GetSocketStats() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00162">tcp_session.h:162</a></div></div>
<div class="ttc" id="aclassTcpSession_html_a57ef8832dcd60314f1d8b562bbcc656c"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a57ef8832dcd60314f1d8b562bbcc656c">TcpSession::socket</a></div><div class="ttdeci">virtual Socket * socket() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00086">tcp_session.h:86</a></div></div>
<div class="ttc" id="aclassTcpSession_html_a653bcca1fc3065f242cf9176a038ad6f"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a653bcca1fc3065f242cf9176a038ad6f">TcpSession::SetMd5SocketOption</a></div><div class="ttdeci">int SetMd5SocketOption(uint32_t peer_ip, const std::string &amp;md5_password)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00559">tcp_session.cc:559</a></div></div>
<div class="ttc" id="aclassTcpSession_html_a88c5dd490387ef487cae83effa4a38a9"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a88c5dd490387ef487cae83effa4a38a9">TcpSession::set_observer</a></div><div class="ttdeci">void set_observer(EventObserver observer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00218">tcp_session.cc:218</a></div></div>
<div class="ttc" id="aclassTcpSession_html_aa06f428b75d73fc1868c5dc2eec8550e"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">TcpSession::Endpoint</a></div><div class="ttdeci">boost::asio::ip::tcp::endpoint Endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00062">tcp_session.h:62</a></div></div>
<div class="ttc" id="aclassTcpSession_html_aad9581939723edb82291a3ef635f4ae7"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aad9581939723edb82291a3ef635f4ae7">TcpSession::remote_endpoint</a></div><div class="ttdeci">Endpoint remote_endpoint() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00135">tcp_session.h:135</a></div></div>
<div class="ttc" id="aclassTcpSession_html_af181c9d6048155cb94ab3a605b56a574"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">TcpSession::Send</a></div><div class="ttdeci">virtual bool Send(const uint8_t *data, size_t size, size_t *sent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00428">tcp_session.cc:428</a></div></div>
<div class="ttc" id="aclassTcpSession_html_af24e37114e7cc1f364810c741cb708ec"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#af24e37114e7cc1f364810c741cb708ec">TcpSession::SetDscpSocketOption</a></div><div class="ttdeci">int SetDscpSocketOption(uint8_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00569">tcp_session.cc:569</a></div></div>
<div class="ttc" id="aclassTcpSession_html_afc8622774097c84a226687c406c65c89"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#afc8622774097c84a226687c406c65c89">TcpSession::Close</a></div><div class="ttdeci">void Close()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00354">tcp_session.cc:354</a></div></div>
<div class="ttc" id="aclassTimerManager_html"><div class="ttname"><a href="../../d9/d81/classTimerManager.html">TimerManager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd0/timer_8h_source.html#l00200">timer.h:200</a></div></div>
<div class="ttc" id="aclassTimerManager_html_ab91db5e3454ac9f7941a67a3335e3743"><div class="ttname"><a href="../../d9/d81/classTimerManager.html#ab91db5e3454ac9f7941a67a3335e3743">TimerManager::DeleteTimer</a></div><div class="ttdeci">static bool DeleteTimer(Timer *Timer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d24/timer_8cc_source.html#l00222">timer.cc:222</a></div></div>
<div class="ttc" id="aclassTimerManager_html_af55b055e89bf6fc46607894d27a61341"><div class="ttname"><a href="../../d9/d81/classTimerManager.html#af55b055e89bf6fc46607894d27a61341">TimerManager::CreateTimer</a></div><div class="ttdeci">static Timer * CreateTimer(boost::asio::io_context &amp;service, const std::string &amp;name, int task_id=Timer::GetTimerTaskId(), int task_instance=Timer::GetTimerInstanceId(), bool delete_on_completion=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d24/timer_8cc_source.html#l00201">timer.cc:201</a></div></div>
<div class="ttc" id="aclassTimer_html"><div class="ttname"><a href="../../dc/dea/classTimer.html">Timer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd0/timer_8h_source.html#l00054">timer.h:54</a></div></div>
<div class="ttc" id="aclassTimer_html_a18a9ec123397a973c72243c8372c237f"><div class="ttname"><a href="../../dc/dea/classTimer.html#a18a9ec123397a973c72243c8372c237f">Timer::Cancel</a></div><div class="ttdeci">bool Cancel()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d24/timer_8cc_source.html#l00150">timer.cc:150</a></div></div>
<div class="ttc" id="aclassTimer_html_a3894c1a4d1a83029cce2a64970d03d6e"><div class="ttname"><a href="../../dc/dea/classTimer.html#a3894c1a4d1a83029cce2a64970d03d6e">Timer::running</a></div><div class="ttdeci">bool running() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd0/timer_8h_source.html#l00086">timer.h:86</a></div></div>
<div class="ttc" id="aclassTimer_html_a884738fb312e353e7d89fce007f02485"><div class="ttname"><a href="../../dc/dea/classTimer.html#a884738fb312e353e7d89fce007f02485">Timer::Start</a></div><div class="ttdeci">bool Start(int time, Handler handler, ErrorHandler error_handler=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d24/timer_8cc_source.html#l00108">timer.cc:108</a></div></div>
<div class="ttc" id="aclassTimer_html_ad93f44a498d55194c695da6a977f6dab"><div class="ttname"><a href="../../dc/dea/classTimer.html#ad93f44a498d55194c695da6a977f6dab">Timer::Reschedule</a></div><div class="ttdeci">bool Reschedule(int time)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d24/timer_8cc_source.html#l00137">timer.cc:137</a></div></div>
<div class="ttc" id="aclassTunnelEncap_html"><div class="ttname"><a href="../../d7/dad/classTunnelEncap.html">TunnelEncap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6d/tunnel__encap_8h_source.html#l00017">tunnel_encap.h:17</a></div></div>
<div class="ttc" id="aclassTunnelEncap_html_a2f2e1db350ef738d6a68fe0a2ff13b1e"><div class="ttname"><a href="../../d7/dad/classTunnelEncap.html#a2f2e1db350ef738d6a68fe0a2ff13b1e">TunnelEncap::GetExtCommunity</a></div><div class="ttdeci">const bytes_type &amp; GetExtCommunity() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6d/tunnel__encap_8h_source.html#l00028">tunnel_encap.h:28</a></div></div>
<div class="ttc" id="acommunity_8h_html"><div class="ttname"><a href="../../d1/da6/community_8h.html">community.h</a></div></div>
<div class="ttc" id="acommunity_8h_html_ac0dffce10e7cbdd4ef9e5a689991344e"><div class="ttname"><a href="../../d1/da6/community_8h.html#ac0dffce10e7cbdd4ef9e5a689991344e">ExtCommunityPtr</a></div><div class="ttdeci">boost::intrusive_ptr&lt; const ExtCommunity &gt; ExtCommunityPtr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da6/community_8h_source.html#l00449">community.h:449</a></div></div>
<div class="ttc" id="aconfig__client__manager_8h_html"><div class="ttname"><a href="../../dd/d13/config__client__manager_8h.html">config_client_manager.h</a></div></div>
<div class="ttc" id="acontrol__node_8h_html"><div class="ttname"><a href="../../d7/d10/control__node_8h.html">control_node.h</a></div></div>
<div class="ttc" id="aermvpn__table_8h_html"><div class="ttname"><a href="../../d3/d47/ermvpn__table_8h.html">ermvpn_table.h</a></div></div>
<div class="ttc" id="aevpn__table_8h_html"><div class="ttname"><a href="../../d7/d7d/evpn__table_8h.html">evpn_table.h</a></div></div>
<div class="ttc" id="aflow__proto_8cc_html_a96f5793fe73fd4773a0d39e926099e28"><div class="ttname"><a href="../../d5/d26/flow__proto_8cc.html#a96f5793fe73fd4773a0d39e926099e28">UpdateStats</a></div><div class="ttdeci">static void UpdateStats(FlowEvent *event, FlowStats *stats)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d26/flow__proto_8cc_source.html#l00785">flow_proto.cc:785</a></div></div>
<div class="ttc" id="ahttp__client_8h_html_a5667b805d857c6d28f83f6038a0272d3"><div class="ttname"><a href="../../d9/df2/http__client_8h.html#a5667b805d857c6d28f83f6038a0272d3">Event</a></div><div class="ttdeci">Event</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df2/http__client_8h_source.html#l00027">http_client.h:27</a></div></div>
<div class="ttc" id="ainet6__table_8h_html"><div class="ttname"><a href="../../d2/d69/inet6__table_8h.html">inet6_table.h</a></div></div>
<div class="ttc" id="ainet6vpn__table_8h_html"><div class="ttname"><a href="../../d5/d95/inet6vpn__table_8h.html">inet6vpn_table.h</a></div></div>
<div class="ttc" id="ainet__table_8h_html"><div class="ttname"><a href="../../db/d6f/inet__table_8h.html">inet_table.h</a></div></div>
<div class="ttc" id="ainetvpn__table_8h_html"><div class="ttname"><a href="../../dc/da0/inetvpn__table_8h.html">inetvpn_table.h</a></div></div>
<div class="ttc" id="aload__balance_8h_html_a1d127017fb298b889f4ba24752d08b8e"><div class="ttname"><a href="../../de/dcb/load__balance_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/load__balance_8h_source.html#l00002">load_balance.h:2</a></div></div>
<div class="ttc" id="amvpn__table_8h_html"><div class="ttname"><a href="../../df/d66/mvpn__table_8h.html">mvpn_table.h</a></div></div>
<div class="ttc" id="anamespaceboost_html"><div class="ttname"><a href="../../d4/da9/namespaceboost.html">boost</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/db__graph__base_8h_source.html#l00023">db_graph_base.h:23</a></div></div>
<div class="ttc" id="aparse__object_8h_html_a7523283d5d39b27b9f1409e28887d1f0"><div class="ttname"><a href="../../d1/d66/parse__object_8h.html#a7523283d5d39b27b9f1409e28887d1f0">get_value</a></div><div class="ttdeci">static uint64_t get_value(const uint8_t *data, int size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d66/parse__object_8h_source.html#l00039">parse_object.h:39</a></div></div>
<div class="ttc" id="apeer__close__manager_8h_html"><div class="ttname"><a href="../../de/d17/peer__close__manager_8h.html">peer_close_manager.h</a></div></div>
<div class="ttc" id="apeer__manager_8h_html"><div class="ttname"><a href="../../d9/db3/peer__manager_8h.html">peer_manager.h</a></div></div>
<div class="ttc" id="arouting__instance_8h_html"><div class="ttname"><a href="../../d0/df1/routing__instance_8h.html">routing_instance.h</a></div></div>
<div class="ttc" id="arouting__policy__match_8cc_html_aeb341824691080cbdfd773e3492823ec"><div class="ttname"><a href="../../d8/d06/routing__policy__match_8cc.html#aeb341824691080cbdfd773e3492823ec">MatchProtocolToString</a></div><div class="ttdeci">const string MatchProtocolToString(MatchProtocol::MatchProtocolType protocol)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d06/routing__policy__match_8cc_source.html#l00485">routing_policy_match.cc:485</a></div></div>
<div class="ttc" id="arouting__policy__match_8h_html"><div class="ttname"><a href="../../df/de5/routing__policy__match_8h.html">routing_policy_match.h</a></div></div>
<div class="ttc" id="artarget__table_8h_html"><div class="ttname"><a href="../../d2/d37/rtarget__table_8h.html">rtarget_table.h</a></div></div>
<div class="ttc" id="aset__util_8h_html"><div class="ttname"><a href="../../db/ddd/set__util_8h.html">set_util.h</a></div></div>
<div class="ttc" id="aset__util_8h_html_a067b995af9dcfdbcbc405204332c0549"><div class="ttname"><a href="../../db/ddd/set__util_8h.html#a067b995af9dcfdbcbc405204332c0549">set_synchronize</a></div><div class="ttdeci">bool set_synchronize(const SetType *set1, const SetType *set2, AddFunctor add_fn, DelFunctor del_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/ddd/set__util_8h_source.html#l00021">set_util.h:21</a></div></div>
<div class="ttc" id="astring__util_8h_html_abf0bb328a638b537a16cc43e3014ab72"><div class="ttname"><a href="../../dd/d70/string__util_8h.html#abf0bb328a638b537a16cc43e3014ab72">integerToString</a></div><div class="ttdeci">static const std::string integerToString(const NumberType &amp;num)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d70/string__util_8h_source.html#l00019">string_util.h:19</a></div></div>
<div class="ttc" id="astructAsPath4ByteSpec_html_abaf94d3cac095176964c5d11cb2ad45d"><div class="ttname"><a href="../../dd/d24/structAsPath4ByteSpec.html#abaf94d3cac095176964c5d11cb2ad45d">AsPath4ByteSpec::AsLeftMostMatch</a></div><div class="ttdeci">bool AsLeftMostMatch(as_t as) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/ddb/bgp__aspath_8cc_source.html#l00296">bgp_aspath.cc:296</a></div></div>
<div class="ttc" id="astructAsPathSpec_html_a666692cc6f20f264124e81d90f34f575"><div class="ttname"><a href="../../d6/dbf/structAsPathSpec.html#a666692cc6f20f264124e81d90f34f575">AsPathSpec::AsLeftMostMatch</a></div><div class="ttdeci">bool AsLeftMostMatch(as2_t as) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/ddb/bgp__aspath_8cc_source.html#l00034">bgp_aspath.cc:34</a></div></div>
<div class="ttc" id="astructAuthenticationKey_html"><div class="ttname"><a href="../../d8/dbc/structAuthenticationKey.html">AuthenticationKey</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00023">bgp_config.h:23</a></div></div>
<div class="ttc" id="astructAuthenticationKey_html_a32e2e0153c41966a7eb5a952eac4e580"><div class="ttname"><a href="../../d8/dbc/structAuthenticationKey.html#a32e2e0153c41966a7eb5a952eac4e580">AuthenticationKey::Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00029">bgp_config.h:29</a></div></div>
<div class="ttc" id="astructAuthenticationKey_html_a51055836a1be63de9b5f51b887eb22dc"><div class="ttname"><a href="../../d8/dbc/structAuthenticationKey.html#a51055836a1be63de9b5f51b887eb22dc">AuthenticationKey::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00034">bgp_config.h:34</a></div></div>
<div class="ttc" id="astructAuthenticationKey_html_af1c47da1f48da7eb051431ae6b8391e5"><div class="ttname"><a href="../../d8/dbc/structAuthenticationKey.html#af1c47da1f48da7eb051431ae6b8391e5">AuthenticationKey::value</a></div><div class="ttdeci">std::string value</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00035">bgp_config.h:35</a></div></div>
<div class="ttc" id="astructBgpAttrNextHop_html"><div class="ttname"><a href="../../dc/d8a/structBgpAttrNextHop.html">BgpAttrNextHop</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00061">bgp_attr.h:61</a></div></div>
<div class="ttc" id="astructBgpAttrOrigin_html"><div class="ttname"><a href="../../d2/d67/structBgpAttrOrigin.html">BgpAttrOrigin</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00040">bgp_attr.h:40</a></div></div>
<div class="ttc" id="astructBgpAttrOrigin_html_a1f0335457b6dfe5cff7205c3fa362257a727baecbd99c40e5d89a1fa45e75dd8b"><div class="ttname"><a href="../../d2/d67/structBgpAttrOrigin.html#a1f0335457b6dfe5cff7205c3fa362257a727baecbd99c40e5d89a1fa45e75dd8b">BgpAttrOrigin::IGP</a></div><div class="ttdeci">@ IGP</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00050">bgp_attr.h:50</a></div></div>
<div class="ttc" id="astructBgpFamilyAttributesConfig_html"><div class="ttname"><a href="../../d7/d24/structBgpFamilyAttributesConfig.html">BgpFamilyAttributesConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00089">bgp_config.h:89</a></div></div>
<div class="ttc" id="astructBgpFamilyAttributesConfig_html_a23e5468b0a6a49de5a387cc0356f5bc1"><div class="ttname"><a href="../../d7/d24/structBgpFamilyAttributesConfig.html#a23e5468b0a6a49de5a387cc0356f5bc1">BgpFamilyAttributesConfig::default_tunnel_encap_list</a></div><div class="ttdeci">std::vector&lt; std::string &gt; default_tunnel_encap_list</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00099">bgp_config.h:99</a></div></div>
<div class="ttc" id="astructBgpFamilyAttributesConfig_html_a3c8d64e3033ea5503497c73b675b578e"><div class="ttname"><a href="../../d7/d24/structBgpFamilyAttributesConfig.html#a3c8d64e3033ea5503497c73b675b578e">BgpFamilyAttributesConfig::prefix_limit</a></div><div class="ttdeci">uint32_t prefix_limit</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00097">bgp_config.h:97</a></div></div>
<div class="ttc" id="astructBgpFamilyAttributesConfig_html_a5ae3e90ae58f995c3511ff2e62fd4f27"><div class="ttname"><a href="../../d7/d24/structBgpFamilyAttributesConfig.html#a5ae3e90ae58f995c3511ff2e62fd4f27">BgpFamilyAttributesConfig::idle_timeout</a></div><div class="ttdeci">uint32_t idle_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00098">bgp_config.h:98</a></div></div>
<div class="ttc" id="astructBgpFamilyAttributesConfig_html_abfe6024444b1ccf5db596e50d5265021"><div class="ttname"><a href="../../d7/d24/structBgpFamilyAttributesConfig.html#abfe6024444b1ccf5db596e50d5265021">BgpFamilyAttributesConfig::loop_count</a></div><div class="ttdeci">uint8_t loop_count</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00096">bgp_config.h:96</a></div></div>
<div class="ttc" id="astructBgpFamilyAttributesConfig_html_aca096236b122189b98e05ebd89e28c06"><div class="ttname"><a href="../../d7/d24/structBgpFamilyAttributesConfig.html#aca096236b122189b98e05ebd89e28c06">BgpFamilyAttributesConfig::family</a></div><div class="ttdeci">std::string family</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00095">bgp_config.h:95</a></div></div>
<div class="ttc" id="astructBgpMpNlri_html"><div class="ttname"><a href="../../db/d34/structBgpMpNlri.html">BgpMpNlri</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00282">bgp_attr.h:282</a></div></div>
<div class="ttc" id="astructBgpMpNlri_html_a208a4ba30812c2fc36a597e4f1afa8c5"><div class="ttname"><a href="../../db/d34/structBgpMpNlri.html#a208a4ba30812c2fc36a597e4f1afa8c5">BgpMpNlri::safi</a></div><div class="ttdeci">uint8_t safi</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00308">bgp_attr.h:308</a></div></div>
<div class="ttc" id="astructBgpMpNlri_html_a3dbe76693e10b5d0859c4b7a756a6ad6"><div class="ttname"><a href="../../db/d34/structBgpMpNlri.html#a3dbe76693e10b5d0859c4b7a756a6ad6">BgpMpNlri::afi</a></div><div class="ttdeci">uint16_t afi</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00307">bgp_attr.h:307</a></div></div>
<div class="ttc" id="astructBgpMpNlri_html_a98a9fe99a10123171fae1faf27f328aa"><div class="ttname"><a href="../../db/d34/structBgpMpNlri.html#a98a9fe99a10123171fae1faf27f328aa">BgpMpNlri::nlri</a></div><div class="ttdeci">std::vector&lt; BgpProtoPrefix * &gt; nlri</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00311">bgp_attr.h:311</a></div></div>
<div class="ttc" id="astructBgpMpNlri_html_a9ce54abcf0df81ad50fb3d329d479c04"><div class="ttname"><a href="../../db/d34/structBgpMpNlri.html#a9ce54abcf0df81ad50fb3d329d479c04">BgpMpNlri::nexthop</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; nexthop</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4d/bgp__attr_8h_source.html#l00309">bgp_attr.h:309</a></div></div>
<div class="ttc" id="astructBgpNeighborConfig_1_1OriginOverrideConfig_html"><div class="ttname"><a href="../../db/df6/structBgpNeighborConfig_1_1OriginOverrideConfig.html">BgpNeighborConfig::OriginOverrideConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00150">bgp_config.h:150</a></div></div>
<div class="ttc" id="astructBgpNeighborConfig_1_1OriginOverrideConfig_html_a87a99ee838689529ecd4534217c83416"><div class="ttname"><a href="../../db/df6/structBgpNeighborConfig_1_1OriginOverrideConfig.html#a87a99ee838689529ecd4534217c83416">BgpNeighborConfig::OriginOverrideConfig::origin</a></div><div class="ttdeci">std::string origin</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8a/bgp__config_8h_source.html#l00155">bgp_config.h:155</a></div></div>
<div class="ttc" id="astructBgpPeerFamilyAttributesCompare_html"><div class="ttname"><a href="../../d6/d9e/structBgpPeerFamilyAttributesCompare.html">BgpPeerFamilyAttributesCompare</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00064">bgp_peer.h:64</a></div></div>
<div class="ttc" id="astructBgpPeerFamilyAttributes_html"><div class="ttname"><a href="../../d0/dfd/structBgpPeerFamilyAttributes.html">BgpPeerFamilyAttributes</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00051">bgp_peer.h:51</a></div></div>
<div class="ttc" id="astructBgpPeerFamilyAttributes_html_a1859f71355fd0c6e1769d1c8094b7af9"><div class="ttname"><a href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a1859f71355fd0c6e1769d1c8094b7af9">BgpPeerFamilyAttributes::gateway_address</a></div><div class="ttdeci">IpAddress gateway_address</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00057">bgp_peer.h:57</a></div></div>
<div class="ttc" id="astructBgpPeerFamilyAttributes_html_a5025bb43309e209010c4422eede95711"><div class="ttname"><a href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a5025bb43309e209010c4422eede95711">BgpPeerFamilyAttributes::loop_count</a></div><div class="ttdeci">uint8_t loop_count</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00054">bgp_peer.h:54</a></div></div>
<div class="ttc" id="astructBgpPeerFamilyAttributes_html_a626750d5c853963c1267bad272fbc7c8"><div class="ttname"><a href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a626750d5c853963c1267bad272fbc7c8">BgpPeerFamilyAttributes::BgpPeerFamilyAttributes</a></div><div class="ttdeci">BgpPeerFamilyAttributes(const BgpNeighborConfig *config, const BgpFamilyAttributesConfig &amp;family_config)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l00222">bgp_peer.cc:222</a></div></div>
<div class="ttc" id="astructBgpPeerFamilyAttributes_html_a70b942e9210fcf61378748d01c2ecd5b"><div class="ttname"><a href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a70b942e9210fcf61378748d01c2ecd5b">BgpPeerFamilyAttributes::default_tunnel_encap_list</a></div><div class="ttdeci">std::vector&lt; std::string &gt; default_tunnel_encap_list</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00058">bgp_peer.h:58</a></div></div>
<div class="ttc" id="astructBgpPeerFamilyAttributes_html_a734896ec0aa40b85f212fb82e7710fa8"><div class="ttname"><a href="../../d0/dfd/structBgpPeerFamilyAttributes.html#a734896ec0aa40b85f212fb82e7710fa8">BgpPeerFamilyAttributes::idle_timeout</a></div><div class="ttdeci">uint32_t idle_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00056">bgp_peer.h:56</a></div></div>
<div class="ttc" id="astructBgpPeerFamilyAttributes_html_ab008a35741579ad0a3734bcda2420e89"><div class="ttname"><a href="../../d0/dfd/structBgpPeerFamilyAttributes.html#ab008a35741579ad0a3734bcda2420e89">BgpPeerFamilyAttributes::prefix_limit</a></div><div class="ttdeci">uint32_t prefix_limit</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00055">bgp_peer.h:55</a></div></div>
<div class="ttc" id="astructBgpPeerKey_html"><div class="ttname"><a href="../../dd/dde/structBgpPeerKey.html">BgpPeerKey</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de6/bgp__peer__key_8h_source.html#l00013">bgp_peer_key.h:13</a></div></div>
<div class="ttc" id="astructBgpPeerKey_html_a8c28ff869e728f1b25ad457733965c8c"><div class="ttname"><a href="../../dd/dde/structBgpPeerKey.html#a8c28ff869e728f1b25ad457733965c8c">BgpPeerKey::endpoint</a></div><div class="ttdeci">boost::asio::ip::tcp::endpoint endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de6/bgp__peer__key_8h_source.html#l00024">bgp_peer_key.h:24</a></div></div>
<div class="ttc" id="astructBgpPeer_1_1OriginOverride_html"><div class="ttname"><a href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html">BgpPeer::OriginOverride</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00378">bgp_peer.h:378</a></div></div>
<div class="ttc" id="astructBgpPeer_1_1OriginOverride_html_a076ffe7c7bc3c79a858b7028e25507ea"><div class="ttname"><a href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a076ffe7c7bc3c79a858b7028e25507ea">BgpPeer::OriginOverride::OriginOverride</a></div><div class="ttdeci">OriginOverride(const BgpNeighborConfig::OriginOverrideConfig &amp;config)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01609">bgp_peer.cc:1609</a></div></div>
<div class="ttc" id="astructBgpPeer_1_1OriginOverride_html_a0e5e95b968e4912c458047a1386d192f"><div class="ttname"><a href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a0e5e95b968e4912c458047a1386d192f">BgpPeer::OriginOverride::operator!=</a></div><div class="ttdeci">bool operator!=(const OriginOverride &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/bgp__peer_8cc_source.html#l01615">bgp_peer.cc:1615</a></div></div>
<div class="ttc" id="astructBgpPeer_1_1OriginOverride_html_a6b6be16eb780109f8b5f504ebe53cb34"><div class="ttname"><a href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a6b6be16eb780109f8b5f504ebe53cb34">BgpPeer::OriginOverride::origin_override</a></div><div class="ttdeci">bool origin_override</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00382">bgp_peer.h:382</a></div></div>
<div class="ttc" id="astructBgpPeer_1_1OriginOverride_html_a9c56683360b67adbbe41750aa3c34b3e"><div class="ttname"><a href="../../d0/dbf/structBgpPeer_1_1OriginOverride.html#a9c56683360b67adbbe41750aa3c34b3e">BgpPeer::OriginOverride::origin</a></div><div class="ttdeci">BgpAttrOrigin::OriginType origin</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/bgp__peer_8h_source.html#l00383">bgp_peer.h:383</a></div></div>
<div class="ttc" id="astructBgpProto_1_1BgpMessage_html"><div class="ttname"><a href="../../d3/d88/structBgpProto_1_1BgpMessage.html">BgpProto::BgpMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00050">bgp_proto.h:50</a></div></div>
<div class="ttc" id="astructBgpProto_1_1BgpMessage_html_a5984d22fab979d845f9670a6105db662"><div class="ttname"><a href="../../d3/d88/structBgpProto_1_1BgpMessage.html#a5984d22fab979d845f9670a6105db662">BgpProto::BgpMessage::type</a></div><div class="ttdeci">MessageType type</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00053">bgp_proto.h:53</a></div></div>
<div class="ttc" id="astructBgpProto_1_1Keepalive_html"><div class="ttname"><a href="../../da/d15/structBgpProto_1_1Keepalive.html">BgpProto::Keepalive</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00422">bgp_proto.h:422</a></div></div>
<div class="ttc" id="astructBgpProto_1_1Notification_html_a76086aadc422e3c1293a96dbff2f4242a0fc2ac3d3bf4781aae57fe2350735b01"><div class="ttname"><a href="../../de/d90/structBgpProto_1_1Notification.html#a76086aadc422e3c1293a96dbff2f4242a0fc2ac3d3bf4781aae57fe2350735b01">BgpProto::Notification::OtherConfigChange</a></div><div class="ttdeci">@ OtherConfigChange</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00377">bgp_proto.h:377</a></div></div>
<div class="ttc" id="astructBgpProto_1_1Notification_html_a76086aadc422e3c1293a96dbff2f4242a23323e5de4a8bb5bf68c68a2ef8ba06f"><div class="ttname"><a href="../../de/d90/structBgpProto_1_1Notification.html#a76086aadc422e3c1293a96dbff2f4242a23323e5de4a8bb5bf68c68a2ef8ba06f">BgpProto::Notification::HardReset</a></div><div class="ttdeci">@ HardReset</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00380">bgp_proto.h:380</a></div></div>
<div class="ttc" id="astructBgpProto_1_1Notification_html_a76086aadc422e3c1293a96dbff2f4242a89abcc9b212ac5e435dfe669f47e8d3f"><div class="ttname"><a href="../../de/d90/structBgpProto_1_1Notification.html#a76086aadc422e3c1293a96dbff2f4242a89abcc9b212ac5e435dfe669f47e8d3f">BgpProto::Notification::MaxPrefixes</a></div><div class="ttdeci">@ MaxPrefixes</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00372">bgp_proto.h:372</a></div></div>
<div class="ttc" id="astructBgpProto_1_1Notification_html_a76086aadc422e3c1293a96dbff2f4242a9b799b265bd6c9e4de6f8ec92a5f7079"><div class="ttname"><a href="../../de/d90/structBgpProto_1_1Notification.html#a76086aadc422e3c1293a96dbff2f4242a9b799b265bd6c9e4de6f8ec92a5f7079">BgpProto::Notification::PeerDeconfigured</a></div><div class="ttdeci">@ PeerDeconfigured</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00374">bgp_proto.h:374</a></div></div>
<div class="ttc" id="astructBgpProto_1_1Notification_html_a8f2d267fef6858fcc3d2b2cc877b002eab8c32e2eb993a67eb9145b20e33081f5"><div class="ttname"><a href="../../de/d90/structBgpProto_1_1Notification.html#a8f2d267fef6858fcc3d2b2cc877b002eab8c32e2eb993a67eb9145b20e33081f5">BgpProto::Notification::Cease</a></div><div class="ttdeci">@ Cease</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00237">bgp_proto.h:236</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_1_1Capability_html"><div class="ttname"><a href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html">BgpProto::OpenMessage::Capability</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00069">bgp_proto.h:69</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_1_1Capability_html_a46605c45103217eea00915e432cf1eaaaaf7b4a7d7bc307e710decb6842e58daf"><div class="ttname"><a href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html#a46605c45103217eea00915e432cf1eaaaaf7b4a7d7bc307e710decb6842e58daf">BgpProto::OpenMessage::Capability::AS4Support</a></div><div class="ttdeci">@ AS4Support</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00078">bgp_proto.h:78</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_1_1Capability_html_a46605c45103217eea00915e432cf1eaaab17a95991b0c5d91b1df2990d0f700b5"><div class="ttname"><a href="../../da/d65/structBgpProto_1_1OpenMessage_1_1Capability.html#a46605c45103217eea00915e432cf1eaaab17a95991b0c5d91b1df2990d0f700b5">BgpProto::OpenMessage::Capability::MpExtension</a></div><div class="ttdeci">@ MpExtension</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00072">bgp_proto.h:72</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_1_1OptParam_html"><div class="ttname"><a href="../../d1/dcc/structBgpProto_1_1OpenMessage_1_1OptParam.html">BgpProto::OpenMessage::OptParam</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00213">bgp_proto.h:213</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_1_1OptParam_html_adfceab5b96ee15533d925c4ff5077af4"><div class="ttname"><a href="../../d1/dcc/structBgpProto_1_1OpenMessage_1_1OptParam.html#adfceab5b96ee15533d925c4ff5077af4">BgpProto::OpenMessage::OptParam::capabilities</a></div><div class="ttdeci">std::vector&lt; Capability * &gt; capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00217">bgp_proto.h:217</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_html"><div class="ttname"><a href="../../d1/d38/structBgpProto_1_1OpenMessage.html">BgpProto::OpenMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00057">bgp_proto.h:57</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_html_a26c203d47737e778882fb75d50ecb40e"><div class="ttname"><a href="../../d1/d38/structBgpProto_1_1OpenMessage.html#a26c203d47737e778882fb75d50ecb40e">BgpProto::OpenMessage::as_num</a></div><div class="ttdeci">uint32_t as_num</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00065">bgp_proto.h:65</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_html_a609025987601cbb52aac6276866fe92f"><div class="ttname"><a href="../../d1/d38/structBgpProto_1_1OpenMessage.html#a609025987601cbb52aac6276866fe92f">BgpProto::OpenMessage::holdtime</a></div><div class="ttdeci">int32_t holdtime</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00066">bgp_proto.h:66</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_html_abdcb80e6d44362e4540fcd53e509c352"><div class="ttname"><a href="../../d1/d38/structBgpProto_1_1OpenMessage.html#abdcb80e6d44362e4540fcd53e509c352">BgpProto::OpenMessage::identifier</a></div><div class="ttdeci">uint32_t identifier</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00067">bgp_proto.h:67</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_html_af47646925381a271aad9237c58333937"><div class="ttname"><a href="../../d1/d38/structBgpProto_1_1OpenMessage.html#af47646925381a271aad9237c58333937">BgpProto::OpenMessage::ToString</a></div><div class="ttdeci">virtual const std::string ToString() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6c/bgp__proto_8cc_source.html#l00280">bgp_proto.cc:280</a></div></div>
<div class="ttc" id="astructBgpProto_1_1OpenMessage_html_af5aba5010e43452ba2fcfcf0911fede9"><div class="ttname"><a href="../../d1/d38/structBgpProto_1_1OpenMessage.html#af5aba5010e43452ba2fcfcf0911fede9">BgpProto::OpenMessage::opt_params</a></div><div class="ttdeci">std::vector&lt; OptParam * &gt; opt_params</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00219">bgp_proto.h:219</a></div></div>
<div class="ttc" id="astructBgpProto_1_1Update_html"><div class="ttname"><a href="../../d2/db2/structBgpProto_1_1Update.html">BgpProto::Update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00427">bgp_proto.h:427</a></div></div>
<div class="ttc" id="astructBgpProto_1_1Update_html_a05ee4842131545a933e64f27bd4492c6"><div class="ttname"><a href="../../d2/db2/structBgpProto_1_1Update.html#a05ee4842131545a933e64f27bd4492c6">BgpProto::Update::path_attributes</a></div><div class="ttdeci">std::vector&lt; BgpAttribute * &gt; path_attributes</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00435">bgp_proto.h:435</a></div></div>
<div class="ttc" id="astructBgpProto_1_1Update_html_a6a19e09cacd8f5abb908c4bf89f621dd"><div class="ttname"><a href="../../d2/db2/structBgpProto_1_1Update.html#a6a19e09cacd8f5abb908c4bf89f621dd">BgpProto::Update::withdrawn_routes</a></div><div class="ttdeci">std::vector&lt; BgpProtoPrefix * &gt; withdrawn_routes</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00434">bgp_proto.h:434</a></div></div>
<div class="ttc" id="astructBgpProto_1_1Update_html_a9f4f81ec7c6b110d7033d95318777028"><div class="ttname"><a href="../../d2/db2/structBgpProto_1_1Update.html#a9f4f81ec7c6b110d7033d95318777028">BgpProto::Update::nlri</a></div><div class="ttdeci">std::vector&lt; BgpProtoPrefix * &gt; nlri</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/bgp__proto_8h_source.html#l00436">bgp_proto.h:436</a></div></div>
<div class="ttc" id="astructBgpSandeshContext_html"><div class="ttname"><a href="../../d2/da6/structBgpSandeshContext.html">BgpSandeshContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df1/bgp__sandesh_8h_source.html#l00023">bgp_sandesh.h:23</a></div></div>
<div class="ttc" id="astructBgpSandeshContext_html_a4023cc8e5a2f89b1d5b788fc05444f8c"><div class="ttname"><a href="../../d2/da6/structBgpSandeshContext.html#a4023cc8e5a2f89b1d5b788fc05444f8c">BgpSandeshContext::test_mode</a></div><div class="ttdeci">bool test_mode() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df1/bgp__sandesh_8h_source.html#l00061">bgp_sandesh.h:61</a></div></div>
<div class="ttc" id="astructBgpStaticObjectFactory_html"><div class="ttname"><a href="../../d2/d7c/structBgpStaticObjectFactory.html">BgpStaticObjectFactory</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de2/bgp__factory_8h_source.html#l00055">bgp_factory.h:55</a></div></div>
<div class="ttc" id="astructBgpTable_1_1RequestData_html"><div class="ttname"><a href="../../dc/d08/structBgpTable_1_1RequestData.html">BgpTable::RequestData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d36/bgp__table_8h_source.html#l00044">bgp_table.h:44</a></div></div>
<div class="ttc" id="astructClusterListSpec_html_a2097c75b28919710e79286c5d4b5d662"><div class="ttname"><a href="../../df/d8b/structClusterListSpec.html#a2097c75b28919710e79286c5d4b5d662">ClusterListSpec::ClusterListLoop</a></div><div class="ttdeci">bool ClusterListLoop(uint32_t cluster_id) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3e/bgp__attr_8cc_source.html#l00223">bgp_attr.cc:223</a></div></div>
<div class="ttc" id="astructDBRequest_html"><div class="ttname"><a href="../../d7/df9/structDBRequest.html">DBRequest</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d67/db__table_8h_source.html#l00035">db_table.h:35</a></div></div>
<div class="ttc" id="astructDBRequest_html_a54b713cdde96ab6887520e208872ac25"><div class="ttname"><a href="../../d7/df9/structDBRequest.html#a54b713cdde96ab6887520e208872ac25">DBRequest::oper</a></div><div class="ttdeci">DBOperation oper</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d67/db__table_8h_source.html#l00042">db_table.h:42</a></div></div>
<div class="ttc" id="astructDBRequest_html_a8dfecbdd1f2e52e634022012511c0b2c"><div class="ttname"><a href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2c">DBRequest::DBOperation</a></div><div class="ttdeci">DBOperation</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d67/db__table_8h_source.html#l00036">db_table.h:36</a></div></div>
<div class="ttc" id="astructDBRequest_html_a8dfecbdd1f2e52e634022012511c0b2ca9cc4d4d54d396a1fe3ec4eeb38defb9f"><div class="ttname"><a href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2ca9cc4d4d54d396a1fe3ec4eeb38defb9f">DBRequest::DB_ENTRY_DELETE</a></div><div class="ttdeci">@ DB_ENTRY_DELETE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d67/db__table_8h_source.html#l00039">db_table.h:39</a></div></div>
<div class="ttc" id="astructDBRequest_html_a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45"><div class="ttname"><a href="../../d7/df9/structDBRequest.html#a8dfecbdd1f2e52e634022012511c0b2caf1607c1d188471817f7a1ba4e3528f45">DBRequest::DB_ENTRY_ADD_CHANGE</a></div><div class="ttdeci">@ DB_ENTRY_ADD_CHANGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d67/db__table_8h_source.html#l00038">db_table.h:38</a></div></div>
<div class="ttc" id="astructDBRequest_html_a94c88f5224b1f8cb6adad61400c970d4"><div class="ttname"><a href="../../d7/df9/structDBRequest.html#a94c88f5224b1f8cb6adad61400c970d4">DBRequest::key</a></div><div class="ttdeci">std::unique_ptr&lt; DBRequestKey &gt; key</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d67/db__table_8h_source.html#l00048">db_table.h:48</a></div></div>
<div class="ttc" id="astructDBRequest_html_ad287a746780e9771d3073c392045d64e"><div class="ttname"><a href="../../d7/df9/structDBRequest.html#ad287a746780e9771d3073c392045d64e">DBRequest::data</a></div><div class="ttdeci">std::unique_ptr&lt; DBRequestData &gt; data</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d67/db__table_8h_source.html#l00049">db_table.h:49</a></div></div>
<div class="ttc" id="astructEvpnTable_1_1RequestKey_html"><div class="ttname"><a href="../../d1/ded/structEvpnTable_1_1RequestKey.html">EvpnTable::RequestKey</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7d/evpn__table_8h_source.html#l00019">evpn_table.h:19</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1ErrorStats_html"><div class="ttname"><a href="../../d3/d30/structIPeerDebugStats_1_1ErrorStats.html">IPeerDebugStats::ErrorStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00060">ipeer.h:60</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1ProtoStats_html"><div class="ttname"><a href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html">IPeerDebugStats::ProtoStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00043">ipeer.h:43</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1ProtoStats_html_a4c22df200b7b5f74759d314b0dfd15ea"><div class="ttname"><a href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#a4c22df200b7b5f74759d314b0dfd15ea">IPeerDebugStats::ProtoStats::notification</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; notification</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00055">ipeer.h:55</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1ProtoStats_html_a856e37e36fbfa5559fabb63812281d2b"><div class="ttname"><a href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#a856e37e36fbfa5559fabb63812281d2b">IPeerDebugStats::ProtoStats::open</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; open</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00053">ipeer.h:53</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1ProtoStats_html_a9057a1e097bb93e4165404cbdf7b14cb"><div class="ttname"><a href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#a9057a1e097bb93e4165404cbdf7b14cb">IPeerDebugStats::ProtoStats::update</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; update</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00056">ipeer.h:56</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1ProtoStats_html_aa08d3a6a4b8d9b0e65cbc562420cd320"><div class="ttname"><a href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#aa08d3a6a4b8d9b0e65cbc562420cd320">IPeerDebugStats::ProtoStats::keepalive</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; keepalive</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00054">ipeer.h:54</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1ProtoStats_html_aaafa70273b9e7312246e0da1e3d57cbc"><div class="ttname"><a href="../../d2/da6/structIPeerDebugStats_1_1ProtoStats.html#aaafa70273b9e7312246e0da1e3d57cbc">IPeerDebugStats::ProtoStats::close</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; close</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00057">ipeer.h:57</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1RxErrorStats_html"><div class="ttname"><a href="../../dd/dcb/structIPeerDebugStats_1_1RxErrorStats.html">IPeerDebugStats::RxErrorStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00075">ipeer.h:75</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1RxRouteStats_html"><div class="ttname"><a href="../../d1/d64/structIPeerDebugStats_1_1RxRouteStats.html">IPeerDebugStats::RxRouteStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00088">ipeer.h:88</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1RxRouteStats_html_a81386e072d40e5c7b7b25bd9c66e5f7d"><div class="ttname"><a href="../../d1/d64/structIPeerDebugStats_1_1RxRouteStats.html#a81386e072d40e5c7b7b25bd9c66e5f7d">IPeerDebugStats::RxRouteStats::total_path_count</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; total_path_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00093">ipeer.h:93</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1RxRouteStats_html_a9b31d90cff18b8416315e702a9ef7e75"><div class="ttname"><a href="../../d1/d64/structIPeerDebugStats_1_1RxRouteStats.html#a9b31d90cff18b8416315e702a9ef7e75">IPeerDebugStats::RxRouteStats::primary_path_count</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; primary_path_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00094">ipeer.h:94</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1SocketStats_html"><div class="ttname"><a href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html">IPeerDebugStats::SocketStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00110">ipeer.h:110</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1SocketStats_html_a45b6655a5f057a42021896c2a384d191"><div class="ttname"><a href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a45b6655a5f057a42021896c2a384d191">IPeerDebugStats::SocketStats::calls</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00117">ipeer.h:117</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1SocketStats_html_a6c996ba2076f750029dcd4a3a0a4c137"><div class="ttname"><a href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a6c996ba2076f750029dcd4a3a0a4c137">IPeerDebugStats::SocketStats::blocked_duration_usecs</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; blocked_duration_usecs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00120">ipeer.h:120</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1SocketStats_html_a80ecc028d33d85872ae91d9233ad54ba"><div class="ttname"><a href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a80ecc028d33d85872ae91d9233ad54ba">IPeerDebugStats::SocketStats::blocked_count</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; blocked_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00119">ipeer.h:119</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1SocketStats_html_a9d77995204760aa176a9b5d7ebeec0b5"><div class="ttname"><a href="../../de/dad/structIPeerDebugStats_1_1SocketStats.html#a9d77995204760aa176a9b5d7ebeec0b5">IPeerDebugStats::SocketStats::bytes</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; bytes</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00118">ipeer.h:118</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1UpdateStats_html"><div class="ttname"><a href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html">IPeerDebugStats::UpdateStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00097">ipeer.h:97</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1UpdateStats_html_a4cab34b80ef186948646d3d8c4de4c40"><div class="ttname"><a href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#a4cab34b80ef186948646d3d8c4de4c40">IPeerDebugStats::UpdateStats::reach</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; reach</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00106">ipeer.h:106</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1UpdateStats_html_ab6e54e85b2ffb0e46a0c7027b79591f4"><div class="ttname"><a href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#ab6e54e85b2ffb0e46a0c7027b79591f4">IPeerDebugStats::UpdateStats::unreach</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; unreach</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00107">ipeer.h:107</a></div></div>
<div class="ttc" id="astructIPeerDebugStats_1_1UpdateStats_html_ac58a864f74a80d1ff1dde97e1566cb9d"><div class="ttname"><a href="../../d5/d85/structIPeerDebugStats_1_1UpdateStats.html#ac58a864f74a80d1ff1dde97e1566cb9d">IPeerDebugStats::UpdateStats::end_of_rib</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; end_of_rib</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d86/ipeer_8h_source.html#l00104">ipeer.h:104</a></div></div>
<div class="ttc" id="astructInetTable_1_1RequestKey_html"><div class="ttname"><a href="../../d0/daa/structInetTable_1_1RequestKey.html">InetTable::RequestKey</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6f/inet__table_8h_source.html#l00021">inet_table.h:21</a></div></div>
<div class="ttc" id="astructParseErrorContext_html"><div class="ttname"><a href="../../d9/dc2/structParseErrorContext.html">ParseErrorContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d66/parse__object_8h_source.html#l00083">parse_object.h:83</a></div></div>
<div class="ttc" id="astructParseErrorContext_html_a396ef7622822679ce6ff8ae942e8caae"><div class="ttname"><a href="../../d9/dc2/structParseErrorContext.html#a396ef7622822679ce6ff8ae942e8caae">ParseErrorContext::type_name</a></div><div class="ttdeci">std::string type_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d66/parse__object_8h_source.html#l00088">parse_object.h:88</a></div></div>
<div class="ttc" id="astructRTargetTable_1_1RequestKey_html"><div class="ttname"><a href="../../df/dc8/structRTargetTable_1_1RequestKey.html">RTargetTable::RequestKey</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d37/rtarget__table_8h_source.html#l00020">rtarget_table.h:20</a></div></div>
<div class="ttc" id="astructRibExportPolicy_html"><div class="ttname"><a href="../../d2/d43/structRibExportPolicy.html">RibExportPolicy</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d0d/bgp__rib__policy_8h_source.html#l00043">bgp_rib_policy.h:43</a></div></div>
<div class="ttc" id="astructRibExportPolicy_html_a30d3782906c7a6ef6d0f1ba0c27689a6"><div class="ttname"><a href="../../d2/d43/structRibExportPolicy.html#a30d3782906c7a6ef6d0f1ba0c27689a6">RibExportPolicy::SetRemovePrivatePolicy</a></div><div class="ttdeci">void SetRemovePrivatePolicy(bool all, bool replace, bool peer_loop_check)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/da5/bgp__rib__policy_8cc_source.html#l00096">bgp_rib_policy.cc:96</a></div></div>
<div class="ttc" id="astructRibExportPolicy_html_a59a5d47be78560b3c60112864e9c2743af98a513e68e63910ee5c010c4e666ce8"><div class="ttname"><a href="../../d2/d43/structRibExportPolicy.html#a59a5d47be78560b3c60112864e9c2743af98a513e68e63910ee5c010c4e666ce8">RibExportPolicy::BGP</a></div><div class="ttdeci">@ BGP</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d0d/bgp__rib__policy_8h_source.html#l00045">bgp_rib_policy.h:45</a></div></div>
<div class="ttc" id="astructdeleter_html"><div class="ttname"><a href="../../db/d83/structdeleter.html">deleter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/src_2contrail-common_2base_2proto_8cc_source.html#l00029">src/contrail-common/base/proto.cc:29</a></div></div>
<div class="ttc" id="astructio_1_1SocketStats_html"><div class="ttname"><a href="../../d2/dfc/structio_1_1SocketStats.html">io::SocketStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de1/io__utils_8h_source.html#l00014">io_utils.h:14</a></div></div>
<div class="ttc" id="astructio_1_1SocketStats_html_a5a1373ed348f7d8eae1a759c86070493"><div class="ttname"><a href="../../d2/dfc/structio_1_1SocketStats.html#a5a1373ed348f7d8eae1a759c86070493">io::SocketStats::read_calls</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; read_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de1/io__utils_8h_source.html#l00020">io_utils.h:20</a></div></div>
<div class="ttc" id="astructio_1_1SocketStats_html_a7fa274205b8d1033d231dffdc4eb39f3"><div class="ttname"><a href="../../d2/dfc/structio_1_1SocketStats.html#a7fa274205b8d1033d231dffdc4eb39f3">io::SocketStats::write_calls</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; write_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de1/io__utils_8h_source.html#l00023">io_utils.h:23</a></div></div>
<div class="ttc" id="astructio_1_1SocketStats_html_aa82f6d9359b55c6a30476eae8e3c3f9c"><div class="ttname"><a href="../../d2/dfc/structio_1_1SocketStats.html#aa82f6d9359b55c6a30476eae8e3c3f9c">io::SocketStats::write_blocked</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; write_blocked</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de1/io__utils_8h_source.html#l00027">io_utils.h:27</a></div></div>
<div class="ttc" id="astructio_1_1SocketStats_html_ab56ae6e859a5175b1d6dc65e0ae986cd"><div class="ttname"><a href="../../d2/dfc/structio_1_1SocketStats.html#ab56ae6e859a5175b1d6dc65e0ae986cd">io::SocketStats::write_blocked_duration_usecs</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; write_blocked_duration_usecs</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de1/io__utils_8h_source.html#l00028">io_utils.h:28</a></div></div>
<div class="ttc" id="astructio_1_1SocketStats_html_abd7da46197bf9484dd9427c36438f190"><div class="ttname"><a href="../../d2/dfc/structio_1_1SocketStats.html#abd7da46197bf9484dd9427c36438f190">io::SocketStats::write_bytes</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; write_bytes</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de1/io__utils_8h_source.html#l00024">io_utils.h:24</a></div></div>
<div class="ttc" id="astructio_1_1SocketStats_html_ad2d7b2f797805cb49bdd2ccb3f36269d"><div class="ttname"><a href="../../d2/dfc/structio_1_1SocketStats.html#ad2d7b2f797805cb49bdd2ccb3f36269d">io::SocketStats::read_bytes</a></div><div class="ttdeci">tbb::atomic&lt; uint64_t &gt; read_bytes</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de1/io__utils_8h_source.html#l00021">io_utils.h:21</a></div></div>
<div class="ttc" id="atask__annotations_8h_html"><div class="ttname"><a href="../../d6/de9/task__annotations_8h.html">task_annotations.h</a></div></div>
<div class="ttc" id="atask__annotations_8h_html_ad8b4494991b88809b724529f4a43bb8b"><div class="ttname"><a href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a></div><div class="ttdeci">#define CHECK_CONCURRENCY(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de9/task__annotations_8h_source.html#l00039">task_annotations.h:39</a></div></div>
<div class="ttc" id="atime__util_8h_html_a044dc682f4fdf00e702b369cbf195d83"><div class="ttname"><a href="../../d0/d91/time__util_8h.html#a044dc682f4fdf00e702b369cbf195d83">UTCUsecToString</a></div><div class="ttdeci">static std::string UTCUsecToString(uint64_t tstamp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d91/time__util_8h_source.html#l00054">time_util.h:54</a></div></div>
<div class="ttc" id="atime__util_8h_html_a0554f180759dcae72e6bf12be4ab4fd2"><div class="ttname"><a href="../../d0/d91/time__util_8h.html#a0554f180759dcae72e6bf12be4ab4fd2">UTCTimestamp</a></div><div class="ttdeci">static time_t UTCTimestamp()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d91/time__util_8h_source.html#l00023">time_util.h:23</a></div></div>
<div class="ttc" id="atime__util_8h_html_a31337b6b9e97c9c772ea8fe38dcf92c8"><div class="ttname"><a href="../../d0/d91/time__util_8h.html#a31337b6b9e97c9c772ea8fe38dcf92c8">UTCUsecToPTime</a></div><div class="ttdeci">static boost::posix_time::ptime UTCUsecToPTime(uint64_t tusec)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d91/time__util_8h_source.html#l00038">time_util.h:38</a></div></div>
<div class="ttc" id="atime__util_8h_html_afd0d4d28c676a532b89ce6cfd1fc7e95"><div class="ttname"><a href="../../d0/d91/time__util_8h.html#afd0d4d28c676a532b89ce6cfd1fc7e95">UTCTimestampUsec</a></div><div class="ttdeci">static uint64_t UTCTimestampUsec()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d91/time__util_8h_source.html#l00013">time_util.h:13</a></div></div>
<div class="ttc" id="atunnel__encap_8h_html"><div class="ttname"><a href="../../d3/d6d/tunnel__encap_8h.html">tunnel_encap.h</a></div></div>
<div class="ttc" id="autil_8h_html_a5672c8488456562edbaac01dbb7a5dec"><div class="ttname"><a href="../../d8/d3c/util_8h.html#a5672c8488456562edbaac01dbb7a5dec">STLSortedCompare</a></div><div class="ttdeci">int STLSortedCompare(InputIterator first1, InputIterator last1, InputIterator first2, InputIterator last2, CompareOp op)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3c/util_8h_source.html#l00078">util.h:78</a></div></div>
<div class="ttc" id="autil_8h_html_a6a5e9319fe8e7bf71605737943de589e"><div class="ttname"><a href="../../d8/d3c/util_8h.html#a6a5e9319fe8e7bf71605737943de589e">STLDeleteValues</a></div><div class="ttdeci">void STLDeleteValues(Container *container)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3c/util_8h_source.html#l00101">util.h:101</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_0a7d39584c34dc4772b798c7b583750f.html">contrail</a></li><li class="navelem"><a class="el" href="../../dir_2a1a0f5bd3fae8c3e47f1701b5222318.html">controller</a></li><li class="navelem"><a class="el" href="../../dir_c5f44869b24dae5488ef95224fa0de41.html">src</a></li><li class="navelem"><a class="el" href="../../dir_5ec91433f7a345fb76510642ab518f16.html">bgp</a></li><li class="navelem"><a class="el" href="../../db/d6b/bgp__peer_8cc.html">bgp_peer.cc</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
