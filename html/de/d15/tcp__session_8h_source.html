<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>OpenSDN source code: tcp_session.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenSDN source code
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/d15/tcp__session_8h_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">tcp_session.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../de/d15/tcp__session_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2013 Juniper Networks, Inc. All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#ifndef SRC_IO_TCP_SESSION_H_</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define SRC_IO_TCP_SESSION_H_</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;tbb/mutex.h&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;tbb/task.h&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;deque&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;boost/asio/buffer.hpp&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;boost/asio/io_service.hpp&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;boost/asio/ip/tcp.hpp&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;boost/asio/strand.hpp&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;boost/intrusive_ptr.hpp&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;boost/function.hpp&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;boost/scoped_ptr.hpp&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#ifndef _LIBCPP_VERSION</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &lt;tbb/compat/condition_variable&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="../../d8/d3c/util_8h.html">base/util.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/da4/task_8h.html">base/task.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d00/tcp__server_8h.html">io/tcp_server.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="../../de/d15/tcp__session_8h.html#a6172ea42836d4418fbddcc234d5d3514">   30</a></span>&#160;<span class="preprocessor">#define SSL_SHORT_READ_ERROR 335544539</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">class </span><a class="code" href="../../d2/dd9/classEventManager.html">EventManager</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">class </span><a class="code" href="../../de/df9/classTcpServer.html">TcpServer</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">class </span><a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">class </span><a class="code" href="../../dd/d55/classTcpMessageWriter.html">TcpMessageWriter</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// TcpSession</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// Concurrency: the session is created by the event manager thread, which</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// also invokes the AsyncHandlers. ReleaseBuffer and Send will typically be</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// invoked by a different thread.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html">   42</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ae51e3285b2918f4471ac8069307a8693">   44</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ae51e3285b2918f4471ac8069307a8693">kDefaultBufferSize</a> = 16 * 1024;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a4b0f7031b736d9f0e43ffd3d7abdb312">   45</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a4b0f7031b736d9f0e43ffd3d7abdb312">kDefaultWriteBufferSize</a> = 32 * 1024;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33b">   47</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33b">Event</a> {</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33ba064d9cf06dfe19f2439f3f78afffb193">   48</a></span>&#160;        <a class="code" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33ba064d9cf06dfe19f2439f3f78afffb193">EVENT_NONE</a>,</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33ba50b67ba4e80cfc68d1b2d91e59030368">   49</a></span>&#160;        <a class="code" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33ba50b67ba4e80cfc68d1b2d91e59030368">ACCEPT</a>,</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33ba75f995ca1a56ed5995d5d720760cf47f">   50</a></span>&#160;        <a class="code" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33ba75f995ca1a56ed5995d5d720760cf47f">CONNECT_COMPLETE</a>,</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33bae3929cfe4d493c040316a1a82498c168">   51</a></span>&#160;        <a class="code" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33bae3929cfe4d493c040316a1a82498c168">CONNECT_FAILED</a>,</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33baa10d420c6c38868a8fe7981dea9d5fd4">   52</a></span>&#160;        <a class="code" href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33baa10d420c6c38868a8fe7981dea9d5fd4">CLOSE</a></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    };</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58">   55</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58">Direction</a> {</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58a9daeb196040201e80098368182c2b007">   56</a></span>&#160;        <a class="code" href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58a9daeb196040201e80098368182c2b007">ACTIVE</a>,</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58abbcb6c7f43cc5d2504c52a5bbd26f551">   57</a></span>&#160;        <a class="code" href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58abbcb6c7f43cc5d2504c52a5bbd26f551">PASSIVE</a></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    };</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ae9c78e31479f62d40499c4d8595cacc5">   60</a></span>&#160;    <span class="keyword">typedef</span> boost::asio::ip::tcp::socket <a class="code" href="../../d2/d0e/classTcpSession.html#ae9c78e31479f62d40499c4d8595cacc5">Socket</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a1b92dc416038888640c9a74d70a2c419">   61</a></span>&#160;    <span class="keyword">typedef</span> boost::asio::ip::tcp::socket::native_handle_type <a class="code" href="../../d2/d0e/classTcpSession.html#a1b92dc416038888640c9a74d70a2c419">NativeSocketType</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">   62</a></span>&#160;    <span class="keyword">typedef</span> boost::asio::ip::tcp::endpoint <a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">Endpoint</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a90f5af97068082f27c36f0d1e6941dfe">   63</a></span>&#160;    <span class="keyword">typedef</span> boost::function&lt;void(TcpSession *, Event)&gt; <a class="code" href="../../d2/d0e/classTcpSession.html#a90f5af97068082f27c36f0d1e6941dfe">EventObserver</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#aadd0345915edabc2824f3118a62d891f">   64</a></span>&#160;    <span class="keyword">typedef</span> boost::asio::const_buffer <a class="code" href="../../d2/d0e/classTcpSession.html#aadd0345915edabc2824f3118a62d891f">Buffer</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// TcpSession constructor takes ownership of socket.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#aca1f247483e96daf16e9b507153fbf07">TcpSession</a>(<a class="code" href="../../de/df9/classTcpServer.html">TcpServer</a> *<a class="code" href="../../d2/d0e/classTcpSession.html#a0c6cc6e638dd8be9522e21170a840459">server</a>, <a class="code" href="../../d2/d0e/classTcpSession.html#ae9c78e31479f62d40499c4d8595cacc5">Socket</a> *<a class="code" href="../../d2/d0e/classTcpSession.html#a8d270fecb7e74047bce4ca1aad801a4c">socket</a>,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;               <span class="keywordtype">bool</span> async_read_ready = <span class="keyword">true</span>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;               <span class="keywordtype">size_t</span> buffer_send_size = <a class="code" href="../../d2/d0e/classTcpSession.html#a4b0f7031b736d9f0e43ffd3d7abdb312">TcpSession::kDefaultWriteBufferSize</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// Performs a non-blocking send operation.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(<span class="keyword">const</span> uint8_t *data, <span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> *sent);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// Called by TcpServer to trigger async read.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ae7afb1d44f993f9b742a3cc9a8dcee33">Connected</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">Endpoint</a> remote);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// Called by TcpServer to trigger async read.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ae4bce0daf05cd7bd893acca074a8f405">Accepted</a>();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a5e684ad053a993b249d91380d8c2cd8f">ConnectFailed</a>();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#afc8622774097c84a226687c406c65c89">Close</a>();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a6a0c0d17c2f2c080eaee48310718fcc8">   83</a></span>&#160;    <span class="keyword">virtual</span> std::string <a class="code" href="../../d2/d0e/classTcpSession.html#a6a0c0d17c2f2c080eaee48310718fcc8">ToString</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ae4b127891af2f904e5f9972d07a0ef98">name_</a>; }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// Getters and setters</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a8d270fecb7e74047bce4ca1aad801a4c">   86</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ae9c78e31479f62d40499c4d8595cacc5">Socket</a> *<a class="code" href="../../d2/d0e/classTcpSession.html#a8d270fecb7e74047bce4ca1aad801a4c">socket</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a389321bf6bef023a0460b677bead9162">socket_</a>.get(); }</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a5da29cd61a556062b135b5a2077f2204">   87</a></span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#a1b92dc416038888640c9a74d70a2c419">NativeSocketType</a> <a class="code" href="../../d2/d0e/classTcpSession.html#a5da29cd61a556062b135b5a2077f2204">sock_descriptor</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a389321bf6bef023a0460b677bead9162">socket_</a>-&gt;native_handle(); }</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a0c6cc6e638dd8be9522e21170a840459">   88</a></span>&#160;    <a class="code" href="../../de/df9/classTcpServer.html">TcpServer</a> *<a class="code" href="../../d2/d0e/classTcpSession.html#a0c6cc6e638dd8be9522e21170a840459">server</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ab7a264d4fb720c8e9d46c0737f701b41">server_</a>.get(); }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    int32_t <a class="code" href="../../d2/d0e/classTcpSession.html#adfccba8353407162a30f9fc9ed23d2d8">local_port</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    int32_t <a class="code" href="../../d2/d0e/classTcpSession.html#ab84dbe26ae10ee16d9ecb812f07ac768">remote_port</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// Concurrency: changing the observer guarantees mutual exclusion with</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// the observer invocation. e.g. if the caller sets the observer to NULL</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// it is guaranteed that the observer will not get invoked after this</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// method returns.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a88c5dd490387ef487cae83effa4a38a9">set_observer</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#a90f5af97068082f27c36f0d1e6941dfe">EventObserver</a> <a class="code" href="../../d2/d0e/classTcpSession.html#adf33e39f41b52baeebf35a7ddb7825eb">observer</a>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// Buffers must be freed in arrival order.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a839ed6302fe50e80d1748068e727e102">ReleaseBuffer</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#aadd0345915edabc2824f3118a62d891f">Buffer</a> buffer);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// This function returns the instance to run SessionTask.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// Returning Task::kTaskInstanceAny would allow multiple session tasks to</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// run in parallel.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// Derived class may override implementation if it expects the all the</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// Tasks of the session to run in specific instance</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// Note: Two tasks of same task ID and task instance can&#39;t run</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">//       at in parallel</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// E.g. BgpSession is created per BgpPeer and to ensure that</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">//      there is one SessionTask per peer, PeerIndex is returned</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">//      from this function</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a2fb6790503df22304320bd95652d89f6">GetSessionInstance</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a5d54ca8bb8677944597b8f7e71d9c2f8">  113</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint8_t *<a class="code" href="../../d2/d0e/classTcpSession.html#a5d54ca8bb8677944597b8f7e71d9c2f8">BufferData</a>(<span class="keyword">const</span> <a class="code" href="../../d2/d0e/classTcpSession.html#aadd0345915edabc2824f3118a62d891f">Buffer</a> &amp;buffer) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">return</span> boost::asio::buffer_cast&lt;<span class="keyword">const</span> uint8_t *&gt;(buffer);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a72dca78676dd42e1b23b7959d50caf92">  116</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a72dca78676dd42e1b23b7959d50caf92">BufferSize</a>(<span class="keyword">const</span> <a class="code" href="../../d2/d0e/classTcpSession.html#aadd0345915edabc2824f3118a62d891f">Buffer</a> &amp;buffer) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">return</span> boost::asio::buffer_size(buffer);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a0fc08984976b14d1c7336f2949c3fcc8">  120</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a0fc08984976b14d1c7336f2949c3fcc8">IsEstablished</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        tbb::mutex::scoped_lock lock(<a class="code" href="../../d2/d0e/classTcpSession.html#afc93b7e2b70963012c769b863f813bd0">mutex_</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ae142673b56f122ee743503e81eddd37b">established_</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a37a972d720285215ebe82f157689ed60">  125</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a37a972d720285215ebe82f157689ed60">IsClosed</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        tbb::mutex::scoped_lock lock(<a class="code" href="../../d2/d0e/classTcpSession.html#afc93b7e2b70963012c769b863f813bd0">mutex_</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ad200a50b0f547e02d8c8d1c3d1dce831">closed_</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a0d819aae6267f1ad854fa4009159ccf8">  130</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a0d819aae6267f1ad854fa4009159ccf8">IsServerSession</a>() {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0e/classTcpSession.html#ad1832df4f7cf2b9f6c915b3ddd96e10e">direction_</a> == <a class="code" href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58abbcb6c7f43cc5d2504c52a5bbd26f551">PASSIVE</a>) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a4c6e9471b6036e008b9a862e827b1c95">  135</a></span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">Endpoint</a> <a class="code" href="../../d2/d0e/classTcpSession.html#a4c6e9471b6036e008b9a862e827b1c95">remote_endpoint</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ae509b361a86c96f48cc151f14da23110">remote_</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#aaaf9a967a0e34524e763fc831734e79b">  139</a></span>&#160;    <span class="keyword">const</span> std::string &amp;<a class="code" href="../../d2/d0e/classTcpSession.html#aaaf9a967a0e34524e763fc831734e79b">remote_addr_string</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ae6973943f23c2475b50470f080e8bbdd">remote_addr_str_</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">Endpoint</a> <a class="code" href="../../d2/d0e/classTcpSession.html#adeadb74d89ea5c2e08528e39514d7264">local_endpoint</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a0fd8e4ad14336e6b73dd6b9491cde000">  145</a></span>&#160;    <span class="keyword">const</span> boost::system::error_code &amp;<a class="code" href="../../d2/d0e/classTcpSession.html#a0fd8e4ad14336e6b73dd6b9491cde000">close_reason</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ab5e32feb600154231b0d389ef7edf1a0">close_reason_</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keyword">virtual</span> boost::system::error_code <a class="code" href="../../d2/d0e/classTcpSession.html#ad8740e4f810aa650f174fe6fb31c3e47">SetSocketOptions</a>();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a1b86295e9dc19c139a1c44b4fa015dd8">IsSocketErrorHard</a>(<span class="keyword">const</span> boost::system::error_code &amp;ec);</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a65e243fe654e1d917e31d3a0e413086e">  151</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a65e243fe654e1d917e31d3a0e413086e">set_read_on_connect</a>(<span class="keywordtype">bool</span> read) { <a class="code" href="../../d2/d0e/classTcpSession.html#afded6a644def7df021be686303f9fc0a">read_on_connect_</a> = read; }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a7bf98edc566d832377c84b6dd619bf44">SessionEstablished</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">Endpoint</a> remote, <a class="code" href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58">Direction</a> direction);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#aed8b6427244bcca00da0ae482f2c79de">AsyncReadStart</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a939b5ca0ed5c7ba9ad544b4e9303b28d">SetDeferReader</a>(<span class="keywordtype">bool</span> defer_reader);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Is the reader deferred ? If reader is deferred, SetDeferReader needs</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// to be called to undefer/restart reading.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a92397ec2257cca99faa0d8b1f7092125">  158</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a92397ec2257cca99faa0d8b1f7092125">IsReaderDeferred</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#aecd2d333dff1d1de19f59b3aca2dcd92">defer_reader_</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a8f5cb916b49a746f01bb312ab54820ab">  162</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d2/dfc/structio_1_1SocketStats.html">io::SocketStats</a> &amp;<a class="code" href="../../d2/d0e/classTcpSession.html#a8f5cb916b49a746f01bb312ab54820ab">GetSocketStats</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#aeebc904eae3e7a610b6a583ecde826cb">stats_</a>; }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a0e6f222b628b784bcf96984ff6224e7f">GetRxSocketStats</a>(SocketIOStats *socket_stats) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a35990edea777457904f49b163223932b">GetTxSocketStats</a>(SocketIOStats *socket_stats) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a68d08063c10e5c057210a7f0a716c9c3">  166</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a68d08063c10e5c057210a7f0a716c9c3">GetRxSocketStats</a>(SocketIOStats &amp;socket_stats)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <a class="code" href="../../d2/d0e/classTcpSession.html#a0e6f222b628b784bcf96984ff6224e7f">GetRxSocketStats</a>(&amp;socket_stats);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ac57627ecaaf6214606f6f37714075e61">  170</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ac57627ecaaf6214606f6f37714075e61">GetTxSocketStats</a>(SocketIOStats &amp;socket_stats)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="../../d2/d0e/classTcpSession.html#a35990edea777457904f49b163223932b">GetTxSocketStats</a>(&amp;socket_stats);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a653bcca1fc3065f242cf9176a038ad6f">SetMd5SocketOption</a>(uint32_t peer_ip, <span class="keyword">const</span> std::string &amp;md5_password);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a193736a83d8e6355992ca7addf5c71b3">ClearMd5SocketOption</a>(uint32_t peer_ip);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/d0e/classTcpSession.html#af24e37114e7cc1f364810c741cb708ec">SetDscpSocketOption</a>(uint8_t value);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    uint8_t <a class="code" href="../../d2/d0e/classTcpSession.html#ade7e91eb4d5204c732f67c83af57dfaf">GetDscpValue</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a99ff7dcfd321f2299dccf6649fc3c3fe">  178</a></span>&#160;    <span class="keyword">const</span> std::string &amp;<a class="code" href="../../d2/d0e/classTcpSession.html#a99ff7dcfd321f2299dccf6649fc3c3fe">ToUVEKey</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#aefd4961d2ee232ba17199fa36b3dfc25">uve_key_str_</a>; }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    boost::system::error_code <a class="code" href="../../d2/d0e/classTcpSession.html#a6ae0b8e8795f7b7c626878034dc0c091">SetTcpNoDelay</a>();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    boost::system::error_code <a class="code" href="../../d2/d0e/classTcpSession.html#a3c41b4c1a1255678267b8d4206a51d92">SetTcpSendBufSize</a>(uint32_t size);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    boost::system::error_code <a class="code" href="../../d2/d0e/classTcpSession.html#a6258d40930fb093c510fce12973a0bf7">SetTcpRecvBufSize</a>(uint32_t size);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ad69eaca543ea5480127c63a4f864456d">  184</a></span>&#160;    <span class="keyword">typedef</span> boost::intrusive_ptr&lt;TcpSession&gt; <a class="code" href="../../d2/d0e/classTcpSession.html#ad69eaca543ea5480127c63a4f864456d">TcpSessionPtr</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a0d53793b1e02e3c542738392fd738800">AsyncReadHandler</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#ad69eaca543ea5480127c63a4f864456d">TcpSessionPtr</a> session);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a6b8d71a0bc156011b800779f91cd25e9">AsyncWriteHandler</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#ad69eaca543ea5480127c63a4f864456d">TcpSessionPtr</a> session,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                  <span class="keyword">const</span> boost::system::error_code &amp;error,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                  std::size_t bytes_transferred);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a3792ab15cc30d2dfae39a0e9b986c8e4">AsyncReadStartInternal</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#ad69eaca543ea5480127c63a4f864456d">TcpSessionPtr</a> session);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="../../d6/d9c/classTask.html">Task</a>* <a class="code" href="../../d2/d0e/classTcpSession.html#a39c1b36210e34391f5ac3f2d41c01420">CreateReaderTask</a>(boost::asio::mutable_buffer, <span class="keywordtype">size_t</span>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a8fba9039db696754df8353909c209c0d">~TcpSession</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// Read handler. Called from a TBB task.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a52df0c792a6b49cb3e54c50add4e1992">OnRead</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#aadd0345915edabc2824f3118a62d891f">Buffer</a> buffer) = 0;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">// Callback after socket is ready for write.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a2949ae7979c0f5525eee9efebc087ae3">WriteReady</a>(<span class="keyword">const</span> boost::system::error_code &amp;error);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a4afe597edc7cbbb8eb6c188ac96042ec">AsyncWriteInternal</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#ad69eaca543ea5480127c63a4f864456d">TcpSessionPtr</a> session);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a40682c5f37ecdbca6d0446e03e4f79b0">AsyncReadSome</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a41d5fc4cd7a0b6bf9b870a88274f0139">GetReadBufferSize</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d2/d0e/classTcpSession.html#af225b31ca4112c6e10cbb2d84c9a0852">ReadSome</a>(boost::asio::mutable_buffer buffer,</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                            boost::system::error_code *error);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a1aefc4c662fa839bd51d1aa0858376b4">AsyncWrite</a>(<span class="keyword">const</span> uint8_t *data, std::size_t size);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a3ba44abf2071feb5e206327bd8b25565">  208</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a3ba44abf2071feb5e206327bd8b25565">reader_task_id</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a573978d5b28ed9f41bcb8e156d2b1694">reader_task_id_</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#adfc0091f149321fde62fb5fd8a681940">  212</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#adfc0091f149321fde62fb5fd8a681940">established</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ae142673b56f122ee743503e81eddd37b">established_</a>; }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#adf33e39f41b52baeebf35a7ddb7825eb">  214</a></span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#a90f5af97068082f27c36f0d1e6941dfe">EventObserver</a> <a class="code" href="../../d2/d0e/classTcpSession.html#adf33e39f41b52baeebf35a7ddb7825eb">observer</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#abf3f617b4aec55ccfdd112b76c701dd9">observer_</a>; }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    boost::system::error_code <a class="code" href="../../d2/d0e/classTcpSession.html#ae003ac5c35229455c64624c6b5c272f5">SetSocketKeepaliveOptions</a>(<span class="keywordtype">int</span> keepalive_time,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordtype">int</span> keepalive_intvl, <span class="keywordtype">int</span> keepalive_probes,</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordtype">int</span> tcp_user_timeout_val = 0);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ac0f5bea55bb1db346c791c6700afa8f5">CloseInternal</a>(<span class="keyword">const</span> boost::system::error_code &amp;ec,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                       <span class="keywordtype">bool</span> call_observer, <span class="keywordtype">bool</span> notify_server = <span class="keyword">true</span>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a1d0cda2ed0a288e343103395134f0033">TriggerAsyncReadHandler</a>();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">// Protects session state and buffer queue.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#afc93b7e2b70963012c769b863f813bd0">  225</a></span>&#160;    <span class="keyword">mutable</span> tbb::mutex <a class="code" href="../../d2/d0e/classTcpSession.html#afc93b7e2b70963012c769b863f813bd0">mutex_</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#aeebc904eae3e7a610b6a583ecde826cb">  226</a></span>&#160;    <a class="code" href="../../d2/dfc/structio_1_1SocketStats.html">io::SocketStats</a> <a class="code" href="../../d2/d0e/classTcpSession.html#aeebc904eae3e7a610b6a583ecde826cb">stats_</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#aec2a0c1db919fba43785db4bd6154db3">  229</a></span>&#160;    <span class="keyword">typedef</span> boost::asio::strand <a class="code" href="../../d2/d0e/classTcpSession.html#aec2a0c1db919fba43785db4bd6154db3">Strand</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a1ead9e96a9b8cceec1e929ca1a3551e6">  230</a></span>&#160;    boost::scoped_ptr&lt;Strand&gt; <a class="code" href="../../d2/d0e/classTcpSession.html#a1ead9e96a9b8cceec1e929ca1a3551e6">io_strand_</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a3ecf3132e8c4bf890c07853cfab7619c">  233</a></span>&#160;    <span class="keyword">class </span><a class="code" href="../../d1/d00/classTcpSession_1_1Reader.html">Reader</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="../../de/df9/classTcpServer.html">TcpServer</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ad03910575ca2ccf86445f15b3ec9d7a5">  235</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="../../dd/d55/classTcpMessageWriter.html">TcpMessageWriter</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ad31aa68286b9152116dc9dbef99f7350">intrusive_ptr_add_ref</a>(<a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *session);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#af56bb4f007576a96018bfd4053139fd9">intrusive_ptr_release</a>(<a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *session);</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a8b38f1d2ccda74099ea75ad75f3e28b7">  238</a></span>&#160;    <span class="keyword">typedef</span> std::list&lt;boost::asio::mutable_buffer&gt; <a class="code" href="../../d2/d0e/classTcpSession.html#a8b38f1d2ccda74099ea75ad75f3e28b7">BufferQueue</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a60a50ba74e5de08d75f117634f16553b">WriteReadyInternal</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#ad69eaca543ea5480127c63a4f864456d">TcpSessionPtr</a> session,</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                   <span class="keyword">const</span> boost::system::error_code &amp;error,</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                   uint64_t block_start_time);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a507546e5864b4ff9ca5cc053997295a5">ReleaseBufferLocked</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#aadd0345915edabc2824f3118a62d891f">Buffer</a> buffer);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#aaf4c6ba6d4929ea919db972921582f09">SetEstablished</a>(<a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">Endpoint</a> remote, <a class="code" href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58">Direction</a> dir);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a6678a0092d1b2360923f25f9d7f0760f">  246</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a6678a0092d1b2360923f25f9d7f0760f">IsClosedLocked</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ad200a50b0f547e02d8c8d1c3d1dce831">closed_</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a81778da4c436a2011c4c024be308c383">  250</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a81778da4c436a2011c4c024be308c383">IsEstablishedLocked</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="../../d2/d0e/classTcpSession.html#ae142673b56f122ee743503e81eddd37b">established_</a> &amp;&amp; !<a class="code" href="../../d2/d0e/classTcpSession.html#af433dc2a0dd3d7261ea8825c59f94fd2">tcp_close_in_progress_</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a098a653d4d9e40a597e1b9f0a3b18771">SetName</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    boost::asio::mutable_buffer <a class="code" href="../../d2/d0e/classTcpSession.html#a870b084e01270a64bc7ae61e60646eee">AllocateBuffer</a>(<span class="keywordtype">size_t</span> buffer_size);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a7ae76d965d35ff041583329d94f1f5c5">DeleteBuffer</a>(boost::asio::mutable_buffer buffer);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a573978d5b28ed9f41bcb8e156d2b1694">  259</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/d0e/classTcpSession.html#a573978d5b28ed9f41bcb8e156d2b1694">reader_task_id_</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ab7a264d4fb720c8e9d46c0737f701b41">  261</a></span>&#160;    <a class="code" href="../../d2/d00/tcp__server_8h.html#a9d6f8e4843f00408f3c29f6cdba6e165">TcpServerPtr</a> <a class="code" href="../../d2/d0e/classTcpSession.html#ab7a264d4fb720c8e9d46c0737f701b41">server_</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a389321bf6bef023a0460b677bead9162">  262</a></span>&#160;    boost::scoped_ptr&lt;Socket&gt; <a class="code" href="../../d2/d0e/classTcpSession.html#a389321bf6bef023a0460b677bead9162">socket_</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#afded6a644def7df021be686303f9fc0a">  263</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#afded6a644def7df021be686303f9fc0a">read_on_connect_</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">/**************** protected by mutex_ ****************/</span></div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ae142673b56f122ee743503e81eddd37b">  266</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ae142673b56f122ee743503e81eddd37b">established_</a>;             <span class="comment">// In TCP ESTABLISHED state.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ad200a50b0f547e02d8c8d1c3d1dce831">  267</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d2/d0e/classTcpSession.html#ad200a50b0f547e02d8c8d1c3d1dce831">closed_</a>;                  <span class="comment">// Close has been called.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ae509b361a86c96f48cc151f14da23110">  268</a></span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">Endpoint</a> <a class="code" href="../../d2/d0e/classTcpSession.html#ae509b361a86c96f48cc151f14da23110">remote_</a>;              <span class="comment">// Remote end-point</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ae6973943f23c2475b50470f080e8bbdd">  269</a></span>&#160;    std::string <a class="code" href="../../d2/d0e/classTcpSession.html#ae6973943f23c2475b50470f080e8bbdd">remote_addr_str_</a>;  <span class="comment">// Remote end-point address string</span></div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ad1832df4f7cf2b9f6c915b3ddd96e10e">  270</a></span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58">Direction</a> <a class="code" href="../../d2/d0e/classTcpSession.html#ad1832df4f7cf2b9f6c915b3ddd96e10e">direction_</a>;          <span class="comment">// direction (active, passive)</span></div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a6a2704057175c613ce3e59f92bee5c71">  271</a></span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#a8b38f1d2ccda74099ea75ad75f3e28b7">BufferQueue</a> <a class="code" href="../../d2/d0e/classTcpSession.html#a6a2704057175c613ce3e59f92bee5c71">buffer_queue_</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ab5e32feb600154231b0d389ef7edf1a0">  272</a></span>&#160;    boost::system::error_code <a class="code" href="../../d2/d0e/classTcpSession.html#ab5e32feb600154231b0d389ef7edf1a0">close_reason_</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">/**************** end protected by mutex_ ****************/</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// Protects observer manipulation and invocation. When this lock is</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// held the session mutex should not be held and vice-versa.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a5828a3161e508d53c55e322c1e0d2771">  277</a></span>&#160;    tbb::mutex <a class="code" href="../../d2/d0e/classTcpSession.html#a5828a3161e508d53c55e322c1e0d2771">obs_mutex_</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#abf3f617b4aec55ccfdd112b76c701dd9">  278</a></span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#a90f5af97068082f27c36f0d1e6941dfe">EventObserver</a> <a class="code" href="../../d2/d0e/classTcpSession.html#abf3f617b4aec55ccfdd112b76c701dd9">observer_</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ab64abd02c740c092d72452b640df5bdc">  280</a></span>&#160;    boost::scoped_ptr&lt;TcpMessageWriter&gt; <a class="code" href="../../d2/d0e/classTcpSession.html#ab64abd02c740c092d72452b640df5bdc">writer_</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#a44cf0d4e28db863061979dd6b64e47d5">  282</a></span>&#160;    tbb::atomic&lt;int&gt; <a class="code" href="../../d2/d0e/classTcpSession.html#a44cf0d4e28db863061979dd6b64e47d5">refcount_</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#ae4b127891af2f904e5f9972d07a0ef98">  283</a></span>&#160;    std::string <a class="code" href="../../d2/d0e/classTcpSession.html#ae4b127891af2f904e5f9972d07a0ef98">name_</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#aecd2d333dff1d1de19f59b3aca2dcd92">  284</a></span>&#160;    tbb::atomic&lt;bool&gt; <a class="code" href="../../d2/d0e/classTcpSession.html#aecd2d333dff1d1de19f59b3aca2dcd92">defer_reader_</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#aefd4961d2ee232ba17199fa36b3dfc25">  285</a></span>&#160;    std::string <a class="code" href="../../d2/d0e/classTcpSession.html#aefd4961d2ee232ba17199fa36b3dfc25">uve_key_str_</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#af69b4e5081b64ac410504afc5b64619f">  286</a></span>&#160;    tbb::atomic&lt;bool&gt; <a class="code" href="../../d2/d0e/classTcpSession.html#af69b4e5081b64ac410504afc5b64619f">write_blocked_</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="../../d2/d0e/classTcpSession.html#af433dc2a0dd3d7261ea8825c59f94fd2">  287</a></span>&#160;    tbb::atomic&lt;bool&gt; <a class="code" href="../../d2/d0e/classTcpSession.html#af433dc2a0dd3d7261ea8825c59f94fd2">tcp_close_in_progress_</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#a177479e5fe7a248e03881ca59ce657b7">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;};</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="../../de/d15/tcp__session_8h.html#ad31aa68286b9152116dc9dbef99f7350">  292</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d9d/bgp__aspath_8h.html#a7ab999cacc9fc62433ed891254db087e">intrusive_ptr_add_ref</a>(<a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *session) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    session-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a44cf0d4e28db863061979dd6b64e47d5">refcount_</a>.fetch_and_increment();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="../../de/d15/tcp__session_8h.html#af56bb4f007576a96018bfd4053139fd9">  296</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d9d/bgp__aspath_8h.html#a0ee38ffc269b9ff050119096acd440db">intrusive_ptr_release</a>(<a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *session) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">int</span> prev = session-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a44cf0d4e28db863061979dd6b64e47d5">refcount_</a>.fetch_and_decrement();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> (prev == 1) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keyword">delete</span> session;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">// TcpMessageReader</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">// Provides base implementation of OnRead() for TcpSession assuming</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">// fixed message header length</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="../../d2/dc4/classTcpMessageReader.html">  308</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d2/dc4/classTcpMessageReader.html">TcpMessageReader</a> {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="../../d2/dc4/classTcpMessageReader.html#ad9c6fc9ba4ed5c36d265d23009de2f7f">  310</a></span>&#160;    <span class="keyword">typedef</span> boost::asio::const_buffer <a class="code" href="../../d2/dc4/classTcpMessageReader.html#ad9c6fc9ba4ed5c36d265d23009de2f7f">Buffer</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="../../d2/dc4/classTcpMessageReader.html#a8a72844f3da388dd51c08dc558e621d5">  311</a></span>&#160;    <span class="keyword">typedef</span> boost::function&lt;bool(const uint8_t *, size_t)&gt; <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a8a72844f3da388dd51c08dc558e621d5">ReceiveCallback</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a0b6ae581bb7df3b90d8733d62ea6806f">TcpMessageReader</a>(<a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *session, <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a8a72844f3da388dd51c08dc558e621d5">ReceiveCallback</a> callback);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a73bcab65c16a2221c8b9ee6112c28f16">~TcpMessageReader</a>();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a505f819cd37d5b523f9f813e85e6ad0c">OnRead</a>(<a class="code" href="../../d2/dc4/classTcpMessageReader.html#ad9c6fc9ba4ed5c36d265d23009de2f7f">Buffer</a> buffer);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#ac3a40fe4c19522041f1529a771bc6cf0">MsgLength</a>(<a class="code" href="../../d2/dc4/classTcpMessageReader.html#ad9c6fc9ba4ed5c36d265d23009de2f7f">Buffer</a> buffer, <span class="keywordtype">int</span> offset) = 0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#aeeb49df378198b4218f28f526d36207e">GetHeaderLenSize</a>() = 0;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a8f4b27f8bf46227606ee5e61e24a15ca">GetMaxMessageSize</a>() = 0;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="../../d2/dc4/classTcpMessageReader.html#abb7f9ed85b743ccf84235e5d1e908eaf">  323</a></span>&#160;    <span class="keyword">typedef</span> std::deque&lt;Buffer&gt; <a class="code" href="../../d2/dc4/classTcpMessageReader.html#abb7f9ed85b743ccf84235e5d1e908eaf">BufferQueue</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">// Copy the queue into one contiguous buffer.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    uint8_t *<a class="code" href="../../d2/dc4/classTcpMessageReader.html#acdba605d6ec97163508c77f67bd07390">BufferConcat</a>(uint8_t *data, <a class="code" href="../../d2/dc4/classTcpMessageReader.html#ad9c6fc9ba4ed5c36d265d23009de2f7f">Buffer</a> buffer, <span class="keywordtype">int</span> msglength);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a00023e573a56f1a3f5903ca70ef3b947">QueueByteLength</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="../../d2/dc4/classTcpMessageReader.html#ad9c6fc9ba4ed5c36d265d23009de2f7f">Buffer</a> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a91c8f5af6c9b99cafb6ac7164b76d36b">PullUp</a>(uint8_t *data, <a class="code" href="../../d2/dc4/classTcpMessageReader.html#ad9c6fc9ba4ed5c36d265d23009de2f7f">Buffer</a> buffer, <span class="keywordtype">size_t</span> size) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a2c4d99ac300ed2b168588e55605993a8">AllocBufferSize</a>(<span class="keywordtype">int</span> length);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="../../d2/dc4/classTcpMessageReader.html#aafa6613e20aed302923f34b3bdb93147">  334</a></span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *<a class="code" href="../../d2/dc4/classTcpMessageReader.html#aafa6613e20aed302923f34b3bdb93147">session_</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="../../d2/dc4/classTcpMessageReader.html#a61e24437f7f79d126699a987a2055d3a">  335</a></span>&#160;    <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a8a72844f3da388dd51c08dc558e621d5">ReceiveCallback</a> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a61e24437f7f79d126699a987a2055d3a">callback_</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="../../d2/dc4/classTcpMessageReader.html#a9f7cbca879f6430139e28eae03ef48b4">  336</a></span>&#160;    <a class="code" href="../../d2/dc4/classTcpMessageReader.html#abb7f9ed85b743ccf84235e5d1e908eaf">BufferQueue</a> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a9f7cbca879f6430139e28eae03ef48b4">queue_</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="../../d2/dc4/classTcpMessageReader.html#a9f94061c3a326cfd7ed77c3fcdbfb4cd">  337</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a9f94061c3a326cfd7ed77c3fcdbfb4cd">offset_</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="../../d2/dc4/classTcpMessageReader.html#a408adac3db422ca4604b9ac80ccbc910">  338</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/dc4/classTcpMessageReader.html#a408adac3db422ca4604b9ac80ccbc910">remain_</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="../../d2/dc4/classTcpMessageReader.html#adc6eadf0ed9619268b5716a23420acef">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="../../d2/dc4/classTcpMessageReader.html">TcpMessageReader</a>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;};</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor">#endif  // SRC_IO_TCP_SESSION_H_</span></div>
<div class="ttc" id="classTcpSession_html_a4b0f7031b736d9f0e43ffd3d7abdb312"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a4b0f7031b736d9f0e43ffd3d7abdb312">TcpSession::kDefaultWriteBufferSize</a></div><div class="ttdeci">static const int kDefaultWriteBufferSize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00045">tcp_session.h:45</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_aeeb49df378198b4218f28f526d36207e"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#aeeb49df378198b4218f28f526d36207e">TcpMessageReader::GetHeaderLenSize</a></div><div class="ttdeci">virtual const int GetHeaderLenSize()=0</div></div>
<div class="ttc" id="classTcpSession_html_afc8622774097c84a226687c406c65c89"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#afc8622774097c84a226687c406c65c89">TcpSession::Close</a></div><div class="ttdeci">void Close()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00351">tcp_session.cc:351</a></div></div>
<div class="ttc" id="bgp__aspath_8h_html_a7ab999cacc9fc62433ed891254db087e"><div class="ttname"><a href="../../d0/d9d/bgp__aspath_8h.html#a7ab999cacc9fc62433ed891254db087e">intrusive_ptr_add_ref</a></div><div class="ttdeci">int intrusive_ptr_add_ref(const AsPath *cpath)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9d/bgp__aspath_8h_source.html#l00147">bgp_aspath.h:147</a></div></div>
<div class="ttc" id="classTcpSession_html_a65e243fe654e1d917e31d3a0e413086e"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a65e243fe654e1d917e31d3a0e413086e">TcpSession::set_read_on_connect</a></div><div class="ttdeci">void set_read_on_connect(bool read)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00151">tcp_session.h:151</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_ac3a40fe4c19522041f1529a771bc6cf0"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#ac3a40fe4c19522041f1529a771bc6cf0">TcpMessageReader::MsgLength</a></div><div class="ttdeci">virtual int MsgLength(Buffer buffer, int offset)=0</div></div>
<div class="ttc" id="classTcpSession_html_aa06f428b75d73fc1868c5dc2eec8550e"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">TcpSession::Endpoint</a></div><div class="ttdeci">boost::asio::ip::tcp::endpoint Endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00062">tcp_session.h:62</a></div></div>
<div class="ttc" id="classTcpSession_html_abf3f617b4aec55ccfdd112b76c701dd9"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#abf3f617b4aec55ccfdd112b76c701dd9">TcpSession::observer_</a></div><div class="ttdeci">EventObserver observer_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00278">tcp_session.h:278</a></div></div>
<div class="ttc" id="classTcpSession_html_aadd0345915edabc2824f3118a62d891f"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aadd0345915edabc2824f3118a62d891f">TcpSession::Buffer</a></div><div class="ttdeci">boost::asio::const_buffer Buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00064">tcp_session.h:64</a></div></div>
<div class="ttc" id="classTcpSession_html_ad69eaca543ea5480127c63a4f864456d"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ad69eaca543ea5480127c63a4f864456d">TcpSession::TcpSessionPtr</a></div><div class="ttdeci">boost::intrusive_ptr&lt; TcpSession &gt; TcpSessionPtr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00184">tcp_session.h:184</a></div></div>
<div class="ttc" id="classTcpSession_html_adeadb74d89ea5c2e08528e39514d7264"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#adeadb74d89ea5c2e08528e39514d7264">TcpSession::local_endpoint</a></div><div class="ttdeci">Endpoint local_endpoint() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00203">tcp_session.cc:203</a></div></div>
<div class="ttc" id="classTcpSession_html_a7ae76d965d35ff041583329d94f1f5c5"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a7ae76d965d35ff041583329d94f1f5c5">TcpSession::DeleteBuffer</a></div><div class="ttdeci">void DeleteBuffer(boost::asio::mutable_buffer buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00125">tcp_session.cc:125</a></div></div>
<div class="ttc" id="classTcpSession_html_ac0f5bea55bb1db346c791c6700afa8f5"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ac0f5bea55bb1db346c791c6700afa8f5">TcpSession::CloseInternal</a></div><div class="ttdeci">void CloseInternal(const boost::system::error_code &amp;ec, bool call_observer, bool notify_server=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00303">tcp_session.cc:303</a></div></div>
<div class="ttc" id="classTcpSession_html_a3792ab15cc30d2dfae39a0e9b986c8e4"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a3792ab15cc30d2dfae39a0e9b986c8e4">TcpSession::AsyncReadStartInternal</a></div><div class="ttdeci">void AsyncReadStartInternal(TcpSessionPtr session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00159">tcp_session.cc:159</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_aafa6613e20aed302923f34b3bdb93147"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#aafa6613e20aed302923f34b3bdb93147">TcpMessageReader::session_</a></div><div class="ttdeci">TcpSession * session_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00334">tcp_session.h:334</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a8a72844f3da388dd51c08dc558e621d5"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a8a72844f3da388dd51c08dc558e621d5">TcpMessageReader::ReceiveCallback</a></div><div class="ttdeci">boost::function&lt; bool(const uint8_t *, size_t)&gt; ReceiveCallback</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00311">tcp_session.h:311</a></div></div>
<div class="ttc" id="tcp__server_8h_html"><div class="ttname"><a href="../../d2/d00/tcp__server_8h.html">tcp_server.h</a></div></div>
<div class="ttc" id="classTcpSession_html_ae51e3285b2918f4471ac8069307a8693"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ae51e3285b2918f4471ac8069307a8693">TcpSession::kDefaultBufferSize</a></div><div class="ttdeci">static const int kDefaultBufferSize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00044">tcp_session.h:44</a></div></div>
<div class="ttc" id="classTcpSession_html_a92397ec2257cca99faa0d8b1f7092125"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a92397ec2257cca99faa0d8b1f7092125">TcpSession::IsReaderDeferred</a></div><div class="ttdeci">virtual bool IsReaderDeferred() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00158">tcp_session.h:158</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a9f7cbca879f6430139e28eae03ef48b4"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a9f7cbca879f6430139e28eae03ef48b4">TcpMessageReader::queue_</a></div><div class="ttdeci">BufferQueue queue_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00336">tcp_session.h:336</a></div></div>
<div class="ttc" id="classTcpSession_html_ab70fedc77295e6f7ab5b4d2e73f38a58a9daeb196040201e80098368182c2b007"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58a9daeb196040201e80098368182c2b007">TcpSession::ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00056">tcp_session.h:56</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a408adac3db422ca4604b9ac80ccbc910"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a408adac3db422ca4604b9ac80ccbc910">TcpMessageReader::remain_</a></div><div class="ttdeci">int remain_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00338">tcp_session.h:338</a></div></div>
<div class="ttc" id="classTcpSession_html_a4afe597edc7cbbb8eb6c188ac96042ec"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a4afe597edc7cbbb8eb6c188ac96042ec">TcpSession::AsyncWriteInternal</a></div><div class="ttdeci">void AsyncWriteInternal(TcpSessionPtr session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00414">tcp_session.cc:414</a></div></div>
<div class="ttc" id="classTcpSession_html_a6b8d71a0bc156011b800779f91cd25e9"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a6b8d71a0bc156011b800779f91cd25e9">TcpSession::AsyncWriteHandler</a></div><div class="ttdeci">static void AsyncWriteHandler(TcpSessionPtr session, const boost::system::error_code &amp;error, std::size_t bytes_transferred)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00375">tcp_session.cc:375</a></div></div>
<div class="ttc" id="classTcpSession_html_afded6a644def7df021be686303f9fc0a"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#afded6a644def7df021be686303f9fc0a">TcpSession::read_on_connect_</a></div><div class="ttdeci">bool read_on_connect_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00263">tcp_session.h:263</a></div></div>
<div class="ttc" id="classTcpSession_html_a573978d5b28ed9f41bcb8e156d2b1694"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a573978d5b28ed9f41bcb8e156d2b1694">TcpSession::reader_task_id_</a></div><div class="ttdeci">static int reader_task_id_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00259">tcp_session.h:259</a></div></div>
<div class="ttc" id="classTcpSession_html_a6a0c0d17c2f2c080eaee48310718fcc8"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a6a0c0d17c2f2c080eaee48310718fcc8">TcpSession::ToString</a></div><div class="ttdeci">virtual std::string ToString() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00083">tcp_session.h:83</a></div></div>
<div class="ttc" id="classTcpSession_html_af225b31ca4112c6e10cbb2d84c9a0852"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#af225b31ca4112c6e10cbb2d84c9a0852">TcpSession::ReadSome</a></div><div class="ttdeci">virtual size_t ReadSome(boost::asio::mutable_buffer buffer, boost::system::error_code *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00465">tcp_session.cc:465</a></div></div>
<div class="ttc" id="classTcpSession_html_a72dca78676dd42e1b23b7959d50caf92"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a72dca78676dd42e1b23b7959d50caf92">TcpSession::BufferSize</a></div><div class="ttdeci">static size_t BufferSize(const Buffer &amp;buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00116">tcp_session.h:116</a></div></div>
<div class="ttc" id="classTcpSession_html_a39c1b36210e34391f5ac3f2d41c01420"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a39c1b36210e34391f5ac3f2d41c01420">TcpSession::CreateReaderTask</a></div><div class="ttdeci">virtual Task * CreateReaderTask(boost::asio::mutable_buffer, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00457">tcp_session.cc:457</a></div></div>
<div class="ttc" id="classTcpSession_html_ab84dbe26ae10ee16d9ecb812f07ac768"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ab84dbe26ae10ee16d9ecb812f07ac768">TcpSession::remote_port</a></div><div class="ttdeci">int32_t remote_port() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00544">tcp_session.cc:544</a></div></div>
<div class="ttc" id="classTcpSession_html_a2949ae7979c0f5525eee9efebc087ae3"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a2949ae7979c0f5525eee9efebc087ae3">TcpSession::WriteReady</a></div><div class="ttdeci">virtual void WriteReady(const boost::system::error_code &amp;error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00372">tcp_session.cc:372</a></div></div>
<div class="ttc" id="classTcpSession_html_a60a50ba74e5de08d75f117634f16553b"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a60a50ba74e5de08d75f117634f16553b">TcpSession::WriteReadyInternal</a></div><div class="ttdeci">static void WriteReadyInternal(TcpSessionPtr session, const boost::system::error_code &amp;error, uint64_t block_start_time)</div></div>
<div class="ttc" id="classTcpSession_html_ab7a264d4fb720c8e9d46c0737f701b41"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ab7a264d4fb720c8e9d46c0737f701b41">TcpSession::server_</a></div><div class="ttdeci">TcpServerPtr server_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00261">tcp_session.h:261</a></div></div>
<div class="ttc" id="classTcpSession_html_ad200a50b0f547e02d8c8d1c3d1dce831"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ad200a50b0f547e02d8c8d1c3d1dce831">TcpSession::closed_</a></div><div class="ttdeci">bool closed_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00267">tcp_session.h:267</a></div></div>
<div class="ttc" id="classTcpSession_html_ae4bce0daf05cd7bd893acca074a8f405"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ae4bce0daf05cd7bd893acca074a8f405">TcpSession::Accepted</a></div><div class="ttdeci">virtual void Accepted()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00252">tcp_session.cc:252</a></div></div>
<div class="ttc" id="classTcpSession_html_ae003ac5c35229455c64624c6b5c272f5"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ae003ac5c35229455c64624c6b5c272f5">TcpSession::SetSocketKeepaliveOptions</a></div><div class="ttdeci">boost::system::error_code SetSocketKeepaliveOptions(int keepalive_time, int keepalive_intvl, int keepalive_probes, int tcp_user_timeout_val=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00799">tcp_session.cc:799</a></div></div>
<div class="ttc" id="classTcpSession_html_ae4b127891af2f904e5f9972d07a0ef98"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ae4b127891af2f904e5f9972d07a0ef98">TcpSession::name_</a></div><div class="ttdeci">std::string name_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00283">tcp_session.h:283</a></div></div>
<div class="ttc" id="classTcpSession_html_a0d819aae6267f1ad854fa4009159ccf8"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a0d819aae6267f1ad854fa4009159ccf8">TcpSession::IsServerSession</a></div><div class="ttdeci">bool IsServerSession()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00130">tcp_session.h:130</a></div></div>
<div class="ttc" id="classTcpSession_html_a0fd8e4ad14336e6b73dd6b9491cde000"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a0fd8e4ad14336e6b73dd6b9491cde000">TcpSession::close_reason</a></div><div class="ttdeci">const boost::system::error_code &amp; close_reason() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00145">tcp_session.h:145</a></div></div>
<div class="ttc" id="classTcpSession_html_a939b5ca0ed5c7ba9ad544b4e9303b28d"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a939b5ca0ed5c7ba9ad544b4e9303b28d">TcpSession::SetDeferReader</a></div><div class="ttdeci">virtual void SetDeferReader(bool defer_reader)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00180">tcp_session.cc:180</a></div></div>
<div class="ttc" id="classTcpSession_html_a1ead9e96a9b8cceec1e929ca1a3551e6"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a1ead9e96a9b8cceec1e929ca1a3551e6">TcpSession::io_strand_</a></div><div class="ttdeci">boost::scoped_ptr&lt; Strand &gt; io_strand_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00230">tcp_session.h:230</a></div></div>
<div class="ttc" id="classTcpSession_html_a0d53793b1e02e3c542738392fd738800"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a0d53793b1e02e3c542738392fd738800">TcpSession::AsyncReadHandler</a></div><div class="ttdeci">static void AsyncReadHandler(TcpSessionPtr session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00480">tcp_session.cc:480</a></div></div>
<div class="ttc" id="classTcpSession_html_a00ea3012f13ed9be96a66e9e0ea5d33ba75f995ca1a56ed5995d5d720760cf47f"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33ba75f995ca1a56ed5995d5d720760cf47f">TcpSession::CONNECT_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00050">tcp_session.h:50</a></div></div>
<div class="ttc" id="classTcpSession_html"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html">TcpSession</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00042">tcp_session.h:42</a></div></div>
<div class="ttc" id="classTcpSession_html_a1d0cda2ed0a288e343103395134f0033"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a1d0cda2ed0a288e343103395134f0033">TcpSession::TriggerAsyncReadHandler</a></div><div class="ttdeci">void TriggerAsyncReadHandler()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00344">tcp_session.cc:344</a></div></div>
<div class="ttc" id="classTcpSession_html_ab70fedc77295e6f7ab5b4d2e73f38a58"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58">TcpSession::Direction</a></div><div class="ttdeci">Direction</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00055">tcp_session.h:55</a></div></div>
<div class="ttc" id="classTcpSession_html_a193736a83d8e6355992ca7addf5c71b3"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a193736a83d8e6355992ca7addf5c71b3">TcpSession::ClearMd5SocketOption</a></div><div class="ttdeci">int ClearMd5SocketOption(uint32_t peer_ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00562">tcp_session.cc:562</a></div></div>
<div class="ttc" id="classTcpSession_html_af181c9d6048155cb94ab3a605b56a574"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">TcpSession::Send</a></div><div class="ttdeci">virtual bool Send(const uint8_t *data, size_t size, size_t *sent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00425">tcp_session.cc:425</a></div></div>
<div class="ttc" id="classTcpSession_html_a6a2704057175c613ce3e59f92bee5c71"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a6a2704057175c613ce3e59f92bee5c71">TcpSession::buffer_queue_</a></div><div class="ttdeci">BufferQueue buffer_queue_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00271">tcp_session.h:271</a></div></div>
<div class="ttc" id="classTcpSession_html_aca1f247483e96daf16e9b507153fbf07"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aca1f247483e96daf16e9b507153fbf07">TcpSession::TcpSession</a></div><div class="ttdeci">TcpSession(TcpServer *server, Socket *socket, bool async_read_ready=true, size_t buffer_send_size=TcpSession::kDefaultWriteBufferSize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00085">tcp_session.cc:85</a></div></div>
<div class="ttc" id="classTcpSession_html_a44cf0d4e28db863061979dd6b64e47d5"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a44cf0d4e28db863061979dd6b64e47d5">TcpSession::refcount_</a></div><div class="ttdeci">tbb::atomic&lt; int &gt; refcount_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00282">tcp_session.h:282</a></div></div>
<div class="ttc" id="classTcpSession_html_a098a653d4d9e40a597e1b9f0a3b18771"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a098a653d4d9e40a597e1b9f0a3b18771">TcpSession::SetName</a></div><div class="ttdeci">void SetName()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00221">tcp_session.cc:221</a></div></div>
<div class="ttc" id="classTcpSession_html_a00ea3012f13ed9be96a66e9e0ea5d33ba064d9cf06dfe19f2439f3f78afffb193"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33ba064d9cf06dfe19f2439f3f78afffb193">TcpSession::EVENT_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00048">tcp_session.h:48</a></div></div>
<div class="ttc" id="classTcpSession_html_adfccba8353407162a30f9fc9ed23d2d8"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#adfccba8353407162a30f9fc9ed23d2d8">TcpSession::local_port</a></div><div class="ttdeci">int32_t local_port() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00532">tcp_session.cc:532</a></div></div>
<div class="ttc" id="classTcpSession_html_ae9c78e31479f62d40499c4d8595cacc5"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ae9c78e31479f62d40499c4d8595cacc5">TcpSession::Socket</a></div><div class="ttdeci">boost::asio::ip::tcp::socket Socket</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00060">tcp_session.h:60</a></div></div>
<div class="ttc" id="classTcpSession_html_aeebc904eae3e7a610b6a583ecde826cb"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aeebc904eae3e7a610b6a583ecde826cb">TcpSession::stats_</a></div><div class="ttdeci">io::SocketStats stats_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00226">tcp_session.h:226</a></div></div>
<div class="ttc" id="classTcpSession_html_a88c5dd490387ef487cae83effa4a38a9"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a88c5dd490387ef487cae83effa4a38a9">TcpSession::set_observer</a></div><div class="ttdeci">void set_observer(EventObserver observer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00216">tcp_session.cc:216</a></div></div>
<div class="ttc" id="classTcpSession_html_ae7afb1d44f993f9b742a3cc9a8dcee33"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ae7afb1d44f993f9b742a3cc9a8dcee33">TcpSession::Connected</a></div><div class="ttdeci">virtual bool Connected(Endpoint remote)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00267">tcp_session.cc:267</a></div></div>
<div class="ttc" id="classTcpSession_html_a0e6f222b628b784bcf96984ff6224e7f"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a0e6f222b628b784bcf96984ff6224e7f">TcpSession::GetRxSocketStats</a></div><div class="ttdeci">void GetRxSocketStats(SocketIOStats *socket_stats) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00909">tcp_session.cc:909</a></div></div>
<div class="ttc" id="classTcpSession_html_a00ea3012f13ed9be96a66e9e0ea5d33b"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33b">TcpSession::Event</a></div><div class="ttdeci">Event</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00047">tcp_session.h:47</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_adc6eadf0ed9619268b5716a23420acef"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#adc6eadf0ed9619268b5716a23420acef">TcpMessageReader::DISALLOW_COPY_AND_ASSIGN</a></div><div class="ttdeci">DISALLOW_COPY_AND_ASSIGN(TcpMessageReader)</div></div>
<div class="ttc" id="classTcpSession_html_ad31aa68286b9152116dc9dbef99f7350"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ad31aa68286b9152116dc9dbef99f7350">TcpSession::intrusive_ptr_add_ref</a></div><div class="ttdeci">friend void intrusive_ptr_add_ref(TcpSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00292">tcp_session.h:292</a></div></div>
<div class="ttc" id="classTcpSession_html_a8b38f1d2ccda74099ea75ad75f3e28b7"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a8b38f1d2ccda74099ea75ad75f3e28b7">TcpSession::BufferQueue</a></div><div class="ttdeci">std::list&lt; boost::asio::mutable_buffer &gt; BufferQueue</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00238">tcp_session.h:238</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a505f819cd37d5b523f9f813e85e6ad0c"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a505f819cd37d5b523f9f813e85e6ad0c">TcpMessageReader::OnRead</a></div><div class="ttdeci">virtual void OnRead(Buffer buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00668">tcp_session.cc:668</a></div></div>
<div class="ttc" id="classTcpSession_html_ab5e32feb600154231b0d389ef7edf1a0"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ab5e32feb600154231b0d389ef7edf1a0">TcpSession::close_reason_</a></div><div class="ttdeci">boost::system::error_code close_reason_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00272">tcp_session.h:272</a></div></div>
<div class="ttc" id="classTcpSession_html_a52df0c792a6b49cb3e54c50add4e1992"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a52df0c792a6b49cb3e54c50add4e1992">TcpSession::OnRead</a></div><div class="ttdeci">virtual void OnRead(Buffer buffer)=0</div></div>
<div class="ttc" id="classTcpSession_html_afc93b7e2b70963012c769b863f813bd0"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#afc93b7e2b70963012c769b863f813bd0">TcpSession::mutex_</a></div><div class="ttdeci">tbb::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00225">tcp_session.h:225</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_ad9c6fc9ba4ed5c36d265d23009de2f7f"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#ad9c6fc9ba4ed5c36d265d23009de2f7f">TcpMessageReader::Buffer</a></div><div class="ttdeci">boost::asio::const_buffer Buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00310">tcp_session.h:310</a></div></div>
<div class="ttc" id="structio_1_1SocketStats_html"><div class="ttname"><a href="../../d2/dfc/structio_1_1SocketStats.html">io::SocketStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de1/io__utils_8h_source.html#l00014">io_utils.h:14</a></div></div>
<div class="ttc" id="classTcpSession_html_aaaf9a967a0e34524e763fc831734e79b"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aaaf9a967a0e34524e763fc831734e79b">TcpSession::remote_addr_string</a></div><div class="ttdeci">const std::string &amp; remote_addr_string() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a61e24437f7f79d126699a987a2055d3a"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a61e24437f7f79d126699a987a2055d3a">TcpMessageReader::callback_</a></div><div class="ttdeci">ReceiveCallback callback_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00335">tcp_session.h:335</a></div></div>
<div class="ttc" id="classTcpSession_html_a1b86295e9dc19c139a1c44b4fa015dd8"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a1b86295e9dc19c139a1c44b4fa015dd8">TcpSession::IsSocketErrorHard</a></div><div class="ttdeci">static bool IsSocketErrorHard(const boost::system::error_code &amp;ec)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00739">tcp_session.cc:739</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_acdba605d6ec97163508c77f67bd07390"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#acdba605d6ec97163508c77f67bd07390">TcpMessageReader::BufferConcat</a></div><div class="ttdeci">uint8_t * BufferConcat(uint8_t *data, Buffer buffer, int msglength)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00594">tcp_session.cc:594</a></div></div>
<div class="ttc" id="classTcpSession_html_a1aefc4c662fa839bd51d1aa0858376b4"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a1aefc4c662fa839bd51d1aa0858376b4">TcpSession::AsyncWrite</a></div><div class="ttdeci">virtual void AsyncWrite(const uint8_t *data, std::size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00197">tcp_session.cc:197</a></div></div>
<div class="ttc" id="classTcpSession_html_a3ba44abf2071feb5e206327bd8b25565"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a3ba44abf2071feb5e206327bd8b25565">TcpSession::reader_task_id</a></div><div class="ttdeci">virtual int reader_task_id() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00208">tcp_session.h:208</a></div></div>
<div class="ttc" id="classTcpMessageReader_html"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html">TcpMessageReader</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00308">tcp_session.h:308</a></div></div>
<div class="ttc" id="classTcpSession_html_a7bf98edc566d832377c84b6dd619bf44"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a7bf98edc566d832377c84b6dd619bf44">TcpSession::SessionEstablished</a></div><div class="ttdeci">void SessionEstablished(Endpoint remote, Direction direction)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00243">tcp_session.cc:243</a></div></div>
<div class="ttc" id="classTcpSession_html_a6678a0092d1b2360923f25f9d7f0760f"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a6678a0092d1b2360923f25f9d7f0760f">TcpSession::IsClosedLocked</a></div><div class="ttdeci">bool IsClosedLocked() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00246">tcp_session.h:246</a></div></div>
<div class="ttc" id="classTcpSession_html_a40682c5f37ecdbca6d0446e03e4f79b0"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a40682c5f37ecdbca6d0446e03e4f79b0">TcpSession::AsyncReadSome</a></div><div class="ttdeci">virtual void AsyncReadSome()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00190">tcp_session.cc:190</a></div></div>
<div class="ttc" id="classTcpServer_html"><div class="ttname"><a href="../../de/df9/classTcpServer.html">TcpServer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d00/tcp__server_8h_source.html#l00028">tcp_server.h:28</a></div></div>
<div class="ttc" id="util_8h_html"><div class="ttname"><a href="../../d8/d3c/util_8h.html">util.h</a></div></div>
<div class="ttc" id="classTcpSession_html_a5e684ad053a993b249d91380d8c2cd8f"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a5e684ad053a993b249d91380d8c2cd8f">TcpSession::ConnectFailed</a></div><div class="ttdeci">void ConnectFailed()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00295">tcp_session.cc:295</a></div></div>
<div class="ttc" id="classTcpSession_html_a68d08063c10e5c057210a7f0a716c9c3"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a68d08063c10e5c057210a7f0a716c9c3">TcpSession::GetRxSocketStats</a></div><div class="ttdeci">void GetRxSocketStats(SocketIOStats &amp;socket_stats) const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00166">tcp_session.h:166</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a8f4b27f8bf46227606ee5e61e24a15ca"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a8f4b27f8bf46227606ee5e61e24a15ca">TcpMessageReader::GetMaxMessageSize</a></div><div class="ttdeci">virtual const int GetMaxMessageSize()=0</div></div>
<div class="ttc" id="classTcpSession_html_a35990edea777457904f49b163223932b"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a35990edea777457904f49b163223932b">TcpSession::GetTxSocketStats</a></div><div class="ttdeci">void GetTxSocketStats(SocketIOStats *socket_stats) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00913">tcp_session.cc:913</a></div></div>
<div class="ttc" id="classTcpSession_html_ab64abd02c740c092d72452b640df5bdc"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ab64abd02c740c092d72452b640df5bdc">TcpSession::writer_</a></div><div class="ttdeci">boost::scoped_ptr&lt; TcpMessageWriter &gt; writer_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00280">tcp_session.h:280</a></div></div>
<div class="ttc" id="tcp__server_8h_html_a9d6f8e4843f00408f3c29f6cdba6e165"><div class="ttname"><a href="../../d2/d00/tcp__server_8h.html#a9d6f8e4843f00408f3c29f6cdba6e165">TcpServerPtr</a></div><div class="ttdeci">boost::intrusive_ptr&lt; TcpServer &gt; TcpServerPtr</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d00/tcp__server_8h_source.html#l00191">tcp_server.h:191</a></div></div>
<div class="ttc" id="classTcpSession_html_a177479e5fe7a248e03881ca59ce657b7"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a177479e5fe7a248e03881ca59ce657b7">TcpSession::DISALLOW_COPY_AND_ASSIGN</a></div><div class="ttdeci">DISALLOW_COPY_AND_ASSIGN(TcpSession)</div></div>
<div class="ttc" id="classTcpSession_html_ad1832df4f7cf2b9f6c915b3ddd96e10e"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ad1832df4f7cf2b9f6c915b3ddd96e10e">TcpSession::direction_</a></div><div class="ttdeci">Direction direction_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00270">tcp_session.h:270</a></div></div>
<div class="ttc" id="classTcpSession_html_aecd2d333dff1d1de19f59b3aca2dcd92"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aecd2d333dff1d1de19f59b3aca2dcd92">TcpSession::defer_reader_</a></div><div class="ttdeci">tbb::atomic&lt; bool &gt; defer_reader_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00284">tcp_session.h:284</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a2c4d99ac300ed2b168588e55605993a8"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a2c4d99ac300ed2b168588e55605993a8">TcpMessageReader::AllocBufferSize</a></div><div class="ttdeci">int AllocBufferSize(int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00583">tcp_session.cc:583</a></div></div>
<div class="ttc" id="classTcpSession_html_a5828a3161e508d53c55e322c1e0d2771"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a5828a3161e508d53c55e322c1e0d2771">TcpSession::obs_mutex_</a></div><div class="ttdeci">tbb::mutex obs_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00277">tcp_session.h:277</a></div></div>
<div class="ttc" id="classTcpSession_html_aaf4c6ba6d4929ea919db972921582f09"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aaf4c6ba6d4929ea919db972921582f09">TcpSession::SetEstablished</a></div><div class="ttdeci">void SetEstablished(Endpoint remote, Direction dir)</div></div>
<div class="ttc" id="classTcpSession_html_a00ea3012f13ed9be96a66e9e0ea5d33baa10d420c6c38868a8fe7981dea9d5fd4"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33baa10d420c6c38868a8fe7981dea9d5fd4">TcpSession::CLOSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00052">tcp_session.h:52</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a00023e573a56f1a3f5903ca70ef3b947"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a00023e573a56f1a3f5903ca70ef3b947">TcpMessageReader::QueueByteLength</a></div><div class="ttdeci">int QueueByteLength() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00619">tcp_session.cc:619</a></div></div>
<div class="ttc" id="classTcpSession_html_a00ea3012f13ed9be96a66e9e0ea5d33bae3929cfe4d493c040316a1a82498c168"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33bae3929cfe4d493c040316a1a82498c168">TcpSession::CONNECT_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00051">tcp_session.h:51</a></div></div>
<div class="ttc" id="classTcpSession_html_a37a972d720285215ebe82f157689ed60"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a37a972d720285215ebe82f157689ed60">TcpSession::IsClosed</a></div><div class="ttdeci">bool IsClosed() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00125">tcp_session.h:125</a></div></div>
<div class="ttc" id="classTcpSession_html_af56bb4f007576a96018bfd4053139fd9"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#af56bb4f007576a96018bfd4053139fd9">TcpSession::intrusive_ptr_release</a></div><div class="ttdeci">friend void intrusive_ptr_release(TcpSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00296">tcp_session.h:296</a></div></div>
<div class="ttc" id="classTcpSession_html_adfc0091f149321fde62fb5fd8a681940"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#adfc0091f149321fde62fb5fd8a681940">TcpSession::established</a></div><div class="ttdeci">bool established() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00212">tcp_session.h:212</a></div></div>
<div class="ttc" id="classTcpSession_html_ae142673b56f122ee743503e81eddd37b"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ae142673b56f122ee743503e81eddd37b">TcpSession::established_</a></div><div class="ttdeci">bool established_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00266">tcp_session.h:266</a></div></div>
<div class="ttc" id="classTcpSession_html_a8f5cb916b49a746f01bb312ab54820ab"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a8f5cb916b49a746f01bb312ab54820ab">TcpSession::GetSocketStats</a></div><div class="ttdeci">const io::SocketStats &amp; GetSocketStats() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00162">tcp_session.h:162</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a9f94061c3a326cfd7ed77c3fcdbfb4cd"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a9f94061c3a326cfd7ed77c3fcdbfb4cd">TcpMessageReader::offset_</a></div><div class="ttdeci">int offset_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00337">tcp_session.h:337</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a0b6ae581bb7df3b90d8733d62ea6806f"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a0b6ae581bb7df3b90d8733d62ea6806f">TcpMessageReader::TcpMessageReader</a></div><div class="ttdeci">TcpMessageReader(TcpSession *session, ReceiveCallback callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00574">tcp_session.cc:574</a></div></div>
<div class="ttc" id="classTcpSession_html_aefd4961d2ee232ba17199fa36b3dfc25"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aefd4961d2ee232ba17199fa36b3dfc25">TcpSession::uve_key_str_</a></div><div class="ttdeci">std::string uve_key_str_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00285">tcp_session.h:285</a></div></div>
<div class="ttc" id="classTcpSession_html_ab70fedc77295e6f7ab5b4d2e73f38a58abbcb6c7f43cc5d2504c52a5bbd26f551"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ab70fedc77295e6f7ab5b4d2e73f38a58abbcb6c7f43cc5d2504c52a5bbd26f551">TcpSession::PASSIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00057">tcp_session.h:57</a></div></div>
<div class="ttc" id="task_8h_html"><div class="ttname"><a href="../../db/da4/task_8h.html">task.h</a></div></div>
<div class="ttc" id="classTcpSession_html_a99ff7dcfd321f2299dccf6649fc3c3fe"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a99ff7dcfd321f2299dccf6649fc3c3fe">TcpSession::ToUVEKey</a></div><div class="ttdeci">const std::string &amp; ToUVEKey() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00178">tcp_session.h:178</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_abb7f9ed85b743ccf84235e5d1e908eaf"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#abb7f9ed85b743ccf84235e5d1e908eaf">TcpMessageReader::BufferQueue</a></div><div class="ttdeci">std::deque&lt; Buffer &gt; BufferQueue</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00323">tcp_session.h:323</a></div></div>
<div class="ttc" id="classTcpSession_html_a6258d40930fb093c510fce12973a0bf7"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a6258d40930fb093c510fce12973a0bf7">TcpSession::SetTcpRecvBufSize</a></div><div class="ttdeci">boost::system::error_code SetTcpRecvBufSize(uint32_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00786">tcp_session.cc:786</a></div></div>
<div class="ttc" id="classTcpSession_html_af24e37114e7cc1f364810c741cb708ec"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#af24e37114e7cc1f364810c741cb708ec">TcpSession::SetDscpSocketOption</a></div><div class="ttdeci">int SetDscpSocketOption(uint8_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00566">tcp_session.cc:566</a></div></div>
<div class="ttc" id="classTcpSession_html_a81778da4c436a2011c4c024be308c383"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a81778da4c436a2011c4c024be308c383">TcpSession::IsEstablishedLocked</a></div><div class="ttdeci">bool IsEstablishedLocked() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00250">tcp_session.h:250</a></div></div>
<div class="ttc" id="classTcpSession_html_a0c6cc6e638dd8be9522e21170a840459"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a0c6cc6e638dd8be9522e21170a840459">TcpSession::server</a></div><div class="ttdeci">TcpServer * server()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00088">tcp_session.h:88</a></div></div>
<div class="ttc" id="classTcpSession_html_a4c6e9471b6036e008b9a862e827b1c95"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a4c6e9471b6036e008b9a862e827b1c95">TcpSession::remote_endpoint</a></div><div class="ttdeci">Endpoint remote_endpoint() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00135">tcp_session.h:135</a></div></div>
<div class="ttc" id="classTcpSession_html_a839ed6302fe50e80d1748068e727e102"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a839ed6302fe50e80d1748068e727e102">TcpSession::ReleaseBuffer</a></div><div class="ttdeci">virtual void ReleaseBuffer(Buffer buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00142">tcp_session.cc:142</a></div></div>
<div class="ttc" id="classTcpSession_html_a2fb6790503df22304320bd95652d89f6"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a2fb6790503df22304320bd95652d89f6">TcpSession::GetSessionInstance</a></div><div class="ttdeci">virtual int GetSessionInstance() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00527">tcp_session.cc:527</a></div></div>
<div class="ttc" id="classTcpSession_1_1Reader_html"><div class="ttname"><a href="../../d1/d00/classTcpSession_1_1Reader.html">TcpSession::Reader</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00055">tcp_session.cc:55</a></div></div>
<div class="ttc" id="classTcpSession_html_a5da29cd61a556062b135b5a2077f2204"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a5da29cd61a556062b135b5a2077f2204">TcpSession::sock_descriptor</a></div><div class="ttdeci">NativeSocketType sock_descriptor()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00087">tcp_session.h:87</a></div></div>
<div class="ttc" id="bgp__aspath_8h_html_a0ee38ffc269b9ff050119096acd440db"><div class="ttname"><a href="../../d0/d9d/bgp__aspath_8h.html#a0ee38ffc269b9ff050119096acd440db">intrusive_ptr_release</a></div><div class="ttdeci">void intrusive_ptr_release(const AsPath *cpath)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9d/bgp__aspath_8h_source.html#l00155">bgp_aspath.h:155</a></div></div>
<div class="ttc" id="classTcpSession_html_a41d5fc4cd7a0b6bf9b870a88274f0139"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a41d5fc4cd7a0b6bf9b870a88274f0139">TcpSession::GetReadBufferSize</a></div><div class="ttdeci">virtual size_t GetReadBufferSize() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00472">tcp_session.cc:472</a></div></div>
<div class="ttc" id="classTcpSession_html_ac57627ecaaf6214606f6f37714075e61"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ac57627ecaaf6214606f6f37714075e61">TcpSession::GetTxSocketStats</a></div><div class="ttdeci">void GetTxSocketStats(SocketIOStats &amp;socket_stats) const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00170">tcp_session.h:170</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a91c8f5af6c9b99cafb6ac7164b76d36b"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a91c8f5af6c9b99cafb6ac7164b76d36b">TcpMessageReader::PullUp</a></div><div class="ttdeci">Buffer PullUp(uint8_t *data, Buffer buffer, size_t size) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00632">tcp_session.cc:632</a></div></div>
<div class="ttc" id="classTcpMessageReader_html_a73bcab65c16a2221c8b9ee6112c28f16"><div class="ttname"><a href="../../d2/dc4/classTcpMessageReader.html#a73bcab65c16a2221c8b9ee6112c28f16">TcpMessageReader::~TcpMessageReader</a></div><div class="ttdeci">virtual ~TcpMessageReader()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00579">tcp_session.cc:579</a></div></div>
<div class="ttc" id="classTcpSession_html_a00ea3012f13ed9be96a66e9e0ea5d33ba50b67ba4e80cfc68d1b2d91e59030368"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a00ea3012f13ed9be96a66e9e0ea5d33ba50b67ba4e80cfc68d1b2d91e59030368">TcpSession::ACCEPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00049">tcp_session.h:49</a></div></div>
<div class="ttc" id="classTcpSession_html_a3c41b4c1a1255678267b8d4206a51d92"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a3c41b4c1a1255678267b8d4206a51d92">TcpSession::SetTcpSendBufSize</a></div><div class="ttdeci">boost::system::error_code SetTcpSendBufSize(uint32_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00773">tcp_session.cc:773</a></div></div>
<div class="ttc" id="classTcpSession_html_ae509b361a86c96f48cc151f14da23110"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ae509b361a86c96f48cc151f14da23110">TcpSession::remote_</a></div><div class="ttdeci">Endpoint remote_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00268">tcp_session.h:268</a></div></div>
<div class="ttc" id="classTcpSession_html_aec2a0c1db919fba43785db4bd6154db3"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aec2a0c1db919fba43785db4bd6154db3">TcpSession::Strand</a></div><div class="ttdeci">boost::asio::strand Strand</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00229">tcp_session.h:229</a></div></div>
<div class="ttc" id="classTcpSession_html_a870b084e01270a64bc7ae61e60646eee"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a870b084e01270a64bc7ae61e60646eee">TcpSession::AllocateBuffer</a></div><div class="ttdeci">boost::asio::mutable_buffer AllocateBuffer(size_t buffer_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00118">tcp_session.cc:118</a></div></div>
<div class="ttc" id="classTcpSession_html_aed8b6427244bcca00da0ae482f2c79de"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aed8b6427244bcca00da0ae482f2c79de">TcpSession::AsyncReadStart</a></div><div class="ttdeci">virtual void AsyncReadStart()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00173">tcp_session.cc:173</a></div></div>
<div class="ttc" id="classTcpSession_html_a8d270fecb7e74047bce4ca1aad801a4c"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a8d270fecb7e74047bce4ca1aad801a4c">TcpSession::socket</a></div><div class="ttdeci">virtual Socket * socket() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00086">tcp_session.h:86</a></div></div>
<div class="ttc" id="classTcpSession_html_af69b4e5081b64ac410504afc5b64619f"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#af69b4e5081b64ac410504afc5b64619f">TcpSession::write_blocked_</a></div><div class="ttdeci">tbb::atomic&lt; bool &gt; write_blocked_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00286">tcp_session.h:286</a></div></div>
<div class="ttc" id="classTcpSession_html_a8fba9039db696754df8353909c209c0d"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a8fba9039db696754df8353909c209c0d">TcpSession::~TcpSession</a></div><div class="ttdeci">virtual ~TcpSession()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00109">tcp_session.cc:109</a></div></div>
<div class="ttc" id="classTcpSession_html_a507546e5864b4ff9ca5cc053997295a5"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a507546e5864b4ff9ca5cc053997295a5">TcpSession::ReleaseBufferLocked</a></div><div class="ttdeci">void ReleaseBufferLocked(Buffer buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00147">tcp_session.cc:147</a></div></div>
<div class="ttc" id="classTcpSession_html_a1b92dc416038888640c9a74d70a2c419"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a1b92dc416038888640c9a74d70a2c419">TcpSession::NativeSocketType</a></div><div class="ttdeci">boost::asio::ip::tcp::socket::native_handle_type NativeSocketType</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00061">tcp_session.h:61</a></div></div>
<div class="ttc" id="classTcpSession_html_a5d54ca8bb8677944597b8f7e71d9c2f8"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a5d54ca8bb8677944597b8f7e71d9c2f8">TcpSession::BufferData</a></div><div class="ttdeci">static const uint8_t * BufferData(const Buffer &amp;buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00113">tcp_session.h:113</a></div></div>
<div class="ttc" id="classTcpSession_html_a653bcca1fc3065f242cf9176a038ad6f"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a653bcca1fc3065f242cf9176a038ad6f">TcpSession::SetMd5SocketOption</a></div><div class="ttdeci">int SetMd5SocketOption(uint32_t peer_ip, const std::string &amp;md5_password)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00556">tcp_session.cc:556</a></div></div>
<div class="ttc" id="classTcpSession_html_a90f5af97068082f27c36f0d1e6941dfe"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a90f5af97068082f27c36f0d1e6941dfe">TcpSession::EventObserver</a></div><div class="ttdeci">boost::function&lt; void(TcpSession *, Event)&gt; EventObserver</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00063">tcp_session.h:63</a></div></div>
<div class="ttc" id="classTask_html"><div class="ttname"><a href="../../d6/d9c/classTask.html">Task</a></div><div class="ttdoc">Task is a wrapper over tbb::task to support policies. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/da4/task_8h_source.html#l00086">task.h:86</a></div></div>
<div class="ttc" id="classEventManager_html"><div class="ttname"><a href="../../d2/dd9/classEventManager.html">EventManager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d69/event__manager_8h_source.html#l00024">event_manager.h:24</a></div></div>
<div class="ttc" id="classTcpSession_html_af433dc2a0dd3d7261ea8825c59f94fd2"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#af433dc2a0dd3d7261ea8825c59f94fd2">TcpSession::tcp_close_in_progress_</a></div><div class="ttdeci">tbb::atomic&lt; bool &gt; tcp_close_in_progress_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00287">tcp_session.h:287</a></div></div>
<div class="ttc" id="classTcpSession_html_adf33e39f41b52baeebf35a7ddb7825eb"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#adf33e39f41b52baeebf35a7ddb7825eb">TcpSession::observer</a></div><div class="ttdeci">EventObserver observer()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00214">tcp_session.h:214</a></div></div>
<div class="ttc" id="classTcpSession_html_ade7e91eb4d5204c732f67c83af57dfaf"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ade7e91eb4d5204c732f67c83af57dfaf">TcpSession::GetDscpValue</a></div><div class="ttdeci">uint8_t GetDscpValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00570">tcp_session.cc:570</a></div></div>
<div class="ttc" id="classTcpSession_html_a389321bf6bef023a0460b677bead9162"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a389321bf6bef023a0460b677bead9162">TcpSession::socket_</a></div><div class="ttdeci">boost::scoped_ptr&lt; Socket &gt; socket_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00262">tcp_session.h:262</a></div></div>
<div class="ttc" id="classTcpSession_html_ad8740e4f810aa650f174fe6fb31c3e47"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ad8740e4f810aa650f174fe6fb31c3e47">TcpSession::SetSocketOptions</a></div><div class="ttdeci">virtual boost::system::error_code SetSocketOptions()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00865">tcp_session.cc:865</a></div></div>
<div class="ttc" id="classTcpSession_html_a6ae0b8e8795f7b7c626878034dc0c091"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a6ae0b8e8795f7b7c626878034dc0c091">TcpSession::SetTcpNoDelay</a></div><div class="ttdeci">boost::system::error_code SetTcpNoDelay()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00762">tcp_session.cc:762</a></div></div>
<div class="ttc" id="classTcpSession_html_ae6973943f23c2475b50470f080e8bbdd"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#ae6973943f23c2475b50470f080e8bbdd">TcpSession::remote_addr_str_</a></div><div class="ttdeci">std::string remote_addr_str_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00269">tcp_session.h:269</a></div></div>
<div class="ttc" id="classTcpMessageWriter_html"><div class="ttname"><a href="../../dd/d55/classTcpMessageWriter.html">TcpMessageWriter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d48/tcp__message__write_8h_source.html#l00020">tcp_message_write.h:20</a></div></div>
<div class="ttc" id="classTcpSession_html_a0fc08984976b14d1c7336f2949c3fcc8"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a0fc08984976b14d1c7336f2949c3fcc8">TcpSession::IsEstablished</a></div><div class="ttdeci">bool IsEstablished() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00120">tcp_session.h:120</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_0a7d39584c34dc4772b798c7b583750f.html">contrail</a></li><li class="navelem"><a class="el" href="../../dir_b6c736c67dca1dde75140b15fe40c91d.html">src</a></li><li class="navelem"><a class="el" href="../../dir_07b628283610f72b3c66cdc29ecc5cf0.html">contrail-common</a></li><li class="navelem"><a class="el" href="../../dir_aad334d1b455bf36ff69f725b550b2df.html">io</a></li><li class="navelem"><a class="el" href="../../de/d15/tcp__session_8h.html">tcp_session.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
