<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>OpenSDN source code: xmpp_connection.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenSDN source code
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/df9/xmpp__connection_8cc_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">xmpp_connection.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/df9/xmpp__connection_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2013 Juniper Networks, Inc. All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d09/xmpp__connection_8h.html">xmpp/xmpp_connection.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d11/lifetime_8h.html">base/lifetime.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/de9/task__annotations_8h.html">base/task_annotations.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d69/event__manager_8h.html">io/event_manager.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d85/xml__base_8h.html">xml/xml_base.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d2f/xmpp__client_8h.html">xmpp/xmpp_client.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d07/xmpp__config_8h.html">xmpp/xmpp_config.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d3c/xmpp__factory_8h.html">xmpp/xmpp_factory.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d9f/xmpp__log_8h.html">xmpp/xmpp_log.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d2e/xmpp__server_8h.html">xmpp/xmpp_server.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d86/xmpp__session_8h.html">xmpp/xmpp_session.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;sandesh/common/vns_types.h&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;sandesh/common/vns_constants.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;sandesh/xmpp_client_server_sandesh_types.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;sandesh/xmpp_message_sandesh_types.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;sandesh/xmpp_server_types.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;sandesh/xmpp_state_machine_sandesh_types.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;sandesh/xmpp_trace_sandesh_types.h&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;sandesh/xmpp_peer_info_types.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">using</span> boost::system::error_code;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d64/classXmppConnection.html#a45ea9024cb954cc29fc131e4b784701a">XmppConnection::kAuthTypeNil</a> = <span class="stringliteral">&quot;NIL&quot;</span>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d64/classXmppConnection.html#ab8a044cff1ee23164946b4635552f421">XmppConnection::kAuthTypeTls</a> = <span class="stringliteral">&quot;TLS&quot;</span>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// Maximum XMPP control message size. Typically this is less then 256 bytes. But</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// in scenarios where host names are quite long, we need a larger buffer size.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="../../d5/df9/xmpp__connection_8cc.html#abea9942d9433bfc93ac6d34189406c8e">   38</a></span>&#160;<span class="preprocessor">#define XMPP_CONTROL_MESSAGE_MAX_SIZE 1024</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a76864a47e34203946049e8fcb05edf93">   40</a></span>&#160;<a class="code" href="../../d0/d64/classXmppConnection.html#a76864a47e34203946049e8fcb05edf93">XmppConnection::XmppConnection</a>(<a class="code" href="../../de/df9/classTcpServer.html">TcpServer</a> *server,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                               <span class="keyword">const</span> <a class="code" href="../../d0/d8b/classXmppChannelConfig.html">XmppChannelConfig</a> *config)</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    : server_(server),</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      session_(NULL),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      endpoint_(config-&gt;endpoint),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      local_endpoint_(config-&gt;local_endpoint),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      config_(NULL),</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      keepalive_timer_(<a class="code" href="../../d9/d81/classTimerManager.html">TimerManager</a>::CreateTimer(</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                  *server-&gt;event_manager()-&gt;io_service(),</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                  <span class="stringliteral">&quot;Xmpp keepalive timer&quot;</span>,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                  <a class="code" href="../../df/ddc/classTaskScheduler.html">TaskScheduler</a>::GetInstance()-&gt;GetTaskId(<span class="stringliteral">&quot;xmpp::StateMachine&quot;</span>),</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                  GetTaskInstance(config-&gt;ClientOnly()))),</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      is_client_(config-&gt;ClientOnly()),</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      log_uve_(config-&gt;logUVE),</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      admin_down_(false),</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      disable_read_(false),</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      from_(config-&gt;FromAddr),</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      to_(config-&gt;ToAddr),</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      auth_enabled_(config-&gt;auth_enabled),</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      dscp_value_(config-&gt;dscp_value), xmlns_(config-&gt;xmlns),</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      state_machine_(<a class="code" href="../../d2/d0e/structXmppStaticObjectFactory.html">XmppStaticObjectFactory</a>::Create&lt;<a class="code" href="../../d2/db3/classXmppStateMachine.html">XmppStateMachine</a>&gt;(</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;          this, config-&gt;ClientOnly(), config-&gt;auth_enabled, config-&gt;xmpp_hold_time)),</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      mux_(<a class="code" href="../../d2/d0e/structXmppStaticObjectFactory.html">XmppStaticObjectFactory</a>::Create&lt;<a class="code" href="../../d2/dc0/classXmppChannelMux.html">XmppChannelMux</a>&gt;(this)) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    ostringstream oss;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    oss &lt;&lt; <a class="code" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">FromString</a>() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="../../d0/d64/classXmppConnection.html#a91a31f2086051b21b814d75b802c3c64">endpoint</a>().address().to_string();</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a5389a1a4cb416de925232ae1b1236a07">uve_key_str_</a> = oss.str();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a5c61736e7ac785376da8ef8358a433ea">   68</a></span>&#160;<a class="code" href="../../d0/d64/classXmppConnection.html#a5c61736e7ac785376da8ef8358a433ea">XmppConnection::~XmppConnection</a>() {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a23558db06521b840c31bcd2484582ac1">StopKeepAliveTimer</a>();</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="../../d9/d81/classTimerManager.html#ab91db5e3454ac9f7941a67a3335e3743">TimerManager::DeleteTimer</a>(<a class="code" href="../../d0/d64/classXmppConnection.html#a296b30c3678e2996b23b0dc8c2ff591e">keepalive_timer_</a>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a>(XmppConnectionDelete, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a0c468141e136315bc3b4204f2efd927f">XMPP_PEER_DIR_NA</a>,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                 <span class="stringliteral">&quot;XmppConnection destructor&quot;</span>, <a class="code" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">FromString</a>(), <a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>());</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#aed4769d3a2e4dec61df171d3268249ad">   75</a></span>&#160;std::string <a class="code" href="../../d0/d64/classXmppConnection.html#aed4769d3a2e4dec61df171d3268249ad">XmppConnection::GetXmppAuthenticationType</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d64/classXmppConnection.html#a57c1e4a91a0ff0fa283862e2723b9317">auth_enabled_</a>) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="../../d0/d64/classXmppConnection.html#ab8a044cff1ee23164946b4635552f421">XmppConnection::kAuthTypeTls</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="../../d0/d64/classXmppConnection.html#a45ea9024cb954cc29fc131e4b784701a">XmppConnection::kAuthTypeNil</a>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a7de5854dd03390d0bee380194a3ecebd">   83</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a7de5854dd03390d0bee380194a3ecebd">XmppConnection::SetConfig</a>(<span class="keyword">const</span> <a class="code" href="../../d0/d8b/classXmppChannelConfig.html">XmppChannelConfig</a> *config) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a9b7f712ad2a6065922418560f0471c04">config_</a> = config;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#adec3ade39649132471eb3537da904d54">   87</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#adec3ade39649132471eb3537da904d54">XmppConnection::set_session</a>(<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *session) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    assert(session);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a> = <a class="code" href="../../d0/d64/classXmppConnection.html#ac909e1659d9b3909aeb00ef132afd30f">session</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a> &amp;&amp; <a class="code" href="../../d0/d64/classXmppConnection.html#a36bd7bc049016e397d8a9d99124841eb">dscp_value_</a>) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af24e37114e7cc1f364810c741cb708ec">SetDscpSocketOption</a>(<a class="code" href="../../d0/d64/classXmppConnection.html#a36bd7bc049016e397d8a9d99124841eb">dscp_value_</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a0193d0f7737159ccec3e8257696f22cc">   96</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a0193d0f7737159ccec3e8257696f22cc">XmppConnection::clear_session</a>() {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d5/d13/classXmppSession.html#a8557946a9346d92fdde9f2ed6b543305">ClearConnection</a>();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a> = NULL;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#ac909e1659d9b3909aeb00ef132afd30f">  104</a></span>&#160;<span class="keyword">const</span> <a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#ac909e1659d9b3909aeb00ef132afd30f">XmppConnection::session</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a446db788b16f103a3f01689de36acd85">  108</a></span>&#160;<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#ac909e1659d9b3909aeb00ef132afd30f">XmppConnection::session</a>() {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#ab39306525305353260bcba962c52183d">  112</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ab39306525305353260bcba962c52183d">XmppConnection::WriteReady</a>() {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    boost::system::error_code ec;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">mux_</a>-&gt;WriteReady(ec);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#ad69716f1a60d068527132393b085de9c">  117</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ad69716f1a60d068527132393b085de9c">XmppConnection::Shutdown</a>() {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a60153ffc07259fe304dc614a324d8b62">ManagedDelete</a>();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#abfd07e475de5ed01d8ca851ba1752f9b">  121</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d64/classXmppConnection.html#abfd07e475de5ed01d8ca851ba1752f9b">XmppConnection::IsDeleted</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a0bc9de10e900e7c871667501a5a5e18c">deleter</a>()-&gt;<a class="code" href="../../dd/d9e/classLifetimeActor.html#a7913677e6ba03c5a721270cceddcf701">IsDeleted</a>();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#abdcae6555f436e83432196df0b016cd8">  125</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d64/classXmppConnection.html#abdcae6555f436e83432196df0b016cd8">XmppConnection::MayDelete</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">mux_</a>-&gt;ReceiverCount() &amp;&amp; !<a class="code" href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">mux_</a>-&gt;RefererCount();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a4c78412d53e6f116b555757c8ddee973">  129</a></span>&#160;<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#a4c78412d53e6f116b555757c8ddee973">XmppConnection::CreateSession</a>() {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html">TcpSession</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#ac909e1659d9b3909aeb00ef132afd30f">session</a> = <a class="code" href="../../d0/d64/classXmppConnection.html#abc96724c0337ac039858e29cff9ec423">server_</a>-&gt;<a class="code" href="../../de/df9/classTcpServer.html#a8a756a7ea5037e05e7c8840ff4cfa06f">CreateSession</a>();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *xmpp_session = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *<span class="keyword">&gt;</span>(<a class="code" href="../../d0/d64/classXmppConnection.html#ac909e1659d9b3909aeb00ef132afd30f">session</a>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    xmpp_session-&gt;<a class="code" href="../../d5/d13/classXmppSession.html#a77e700009b817a8d97f4656422165adf">SetConnection</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> xmpp_session;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// Return the task instance for this XmppConnection.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">// Calculate from the remote IpAddress so that a restarting session uses the</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// same value as before.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// Do not make this method virtual since it gets called from the constructor.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a0e02a09899eb5a6b8d85be14d119e182">  143</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a8691a8b0403256840cf541a3705e6855">XmppConnection::GetTaskInstance</a>(<span class="keywordtype">bool</span> is_client)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (is_client)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../d9/d9b/address_8h.html#a7055b8d880410aad1e3ba8c041397b6c">IpAddress</a> address = <a class="code" href="../../d0/d64/classXmppConnection.html#a91a31f2086051b21b814d75b802c3c64">endpoint</a>().address();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">int</span> thread_count = <a class="code" href="../../df/ddc/classTaskScheduler.html#a951ae2a1d1b7700618defdcc1ea53a70">TaskScheduler::GetInstance</a>()-&gt;<a class="code" href="../../df/ddc/classTaskScheduler.html#aa50cf620d67afe0938bc4f8da4856217">HardwareThreadCount</a>();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (address.is_v4()) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">return</span> address.to_v4().to_ulong() % thread_count;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a7a2496437fe4657759afe4d8bb10998b">  155</a></span>&#160;<a class="code" href="../../d8/d9a/namespacexmsm.html#a4355b927914ed3b2c84bc5d366431d6d">xmsm::XmState</a> <a class="code" href="../../d0/d64/classXmppConnection.html#a7a2496437fe4657759afe4d8bb10998b">XmppConnection::GetStateMcState</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d2/db3/classXmppStateMachine.html">XmppStateMachine</a> *sm = <a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>();</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    assert(sm);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> sm-&gt;<a class="code" href="../../d2/db3/classXmppStateMachine.html#af3faaa257e90809591f6175c9e495994">StateType</a>();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a50d94812a843a0d4c5edb1c59d257a48">  161</a></span>&#160;<a class="code" href="../../d8/d9a/namespacexmsm.html#aff2ff949508f095b9bff51189aefc307">xmsm::XmOpenConfirmState</a> <a class="code" href="../../d0/d64/classXmppConnection.html#a50d94812a843a0d4c5edb1c59d257a48">XmppConnection::GetStateMcOpenConfirmState</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d2/db3/classXmppStateMachine.html">XmppStateMachine</a> *sm = <a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    assert(sm);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">return</span> sm-&gt;<a class="code" href="../../d2/db3/classXmppStateMachine.html#a290e0274fd9a58afdc366af136358829">OpenConfirmStateType</a>();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a91a31f2086051b21b814d75b802c3c64">  168</a></span>&#160;boost::asio::ip::tcp::endpoint <a class="code" href="../../d0/d64/classXmppConnection.html#a91a31f2086051b21b814d75b802c3c64">XmppConnection::endpoint</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ae4aab76bde939f73814ee902282211e1">endpoint_</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#ab7387f2469c424bd90b98b58ab3623a7">  172</a></span>&#160;boost::asio::ip::tcp::endpoint <a class="code" href="../../d0/d64/classXmppConnection.html#ab7387f2469c424bd90b98b58ab3623a7">XmppConnection::local_endpoint</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a0121b0b782cec4a5c2cb1f4a05ae7e22">local_endpoint_</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#ab74495cdc804565fb9978af3c68b614d">  176</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ab74495cdc804565fb9978af3c68b614d">XmppConnection::endpoint_string</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    ostringstream oss;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    oss &lt;&lt; <a class="code" href="../../d0/d64/classXmppConnection.html#ae4aab76bde939f73814ee902282211e1">endpoint_</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> oss.str();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a900bce2de9d2c5da1bb868a4eedf4266">  182</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a900bce2de9d2c5da1bb868a4eedf4266">XmppConnection::local_endpoint_string</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    ostringstream oss;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    oss &lt;&lt; <a class="code" href="../../d0/d64/classXmppConnection.html#a0121b0b782cec4a5c2cb1f4a05ae7e22">local_endpoint_</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">return</span> oss.str();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">  188</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;<a class="code" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">XmppConnection::FromString</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">  192</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;<a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">XmppConnection::ToString</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">  196</a></span>&#160;<span class="keyword">const</span> std::string &amp;<a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">XmppConnection::ToUVEKey</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a5389a1a4cb416de925232ae1b1236a07">uve_key_str_</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="../../d5/df9/xmpp__connection_8cc.html#ac0fa610ba4da90e0962a9f28a4ba8faa">  200</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/df9/xmpp__connection_8cc.html#ac0fa610ba4da90e0962a9f28a4ba8faa">XMPPPeerInfoSend</a>(XmppPeerInfoData &amp;peer_info) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    assert(!peer_info.get_name().empty());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    XMPPPeerInfo::Send(peer_info);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a901ea563b63b641f51fb8585a5fc29b0">  205</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a901ea563b63b641f51fb8585a5fc29b0">XmppConnection::SetTo</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;to) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>.size() == 0) &amp;&amp; (to.size() != 0)) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a> = to;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a5fddcca3abb84411a2d2e7815d6904bb">logUVE</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        XmppPeerInfoData peer_info;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        peer_info.set_name(<a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>());</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        peer_info.set_identifier(<a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="../../d5/df9/xmpp__connection_8cc.html#ac0fa610ba4da90e0962a9f28a4ba8faa">XMPPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a746b6925c5895c09b7f1d36108a181b8">  216</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a746b6925c5895c09b7f1d36108a181b8">XmppConnection::SetAdminDown</a>(<span class="keywordtype">bool</span> toggle) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// TODO: generate state machine event.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a1f8b52940bf001808132c0f925e68bbd">admin_down_</a> = toggle;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a8bddb4a473da1bc436f02e841e2858ed">  221</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a8bddb4a473da1bc436f02e841e2858ed">XmppConnection::AcceptSession</a>(<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *session) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    session-&gt;<a class="code" href="../../d5/d13/classXmppSession.html#a77e700009b817a8d97f4656422165adf">SetConnection</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a895831d1375802101d98b5c94c2982d3">state_machine_</a>-&gt;PassiveOpen(session);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a1756a2a0e4f35ccc9bf3ae6f87964079">  226</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a1756a2a0e4f35ccc9bf3ae6f87964079">XmppConnection::Send</a>(<span class="keyword">const</span> uint8_t *data, <span class="keywordtype">size_t</span> size,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span> *msg_str) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a> == NULL) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">TcpSession::Endpoint</a> <a class="code" href="../../d0/d64/classXmppConnection.html#a91a31f2086051b21b814d75b802c3c64">endpoint</a> = <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a4c6e9471b6036e008b9a862e827b1c95">remote_endpoint</a>();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;endpoint_addr_str = <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#aaaf9a967a0e34524e763fc831734e79b">remote_addr_string</a>();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordtype">string</span> str;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (!msg_str) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        str.append(reinterpret_cast&lt;const char *&gt;(data), size);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        msg_str = &amp;str;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">mux_</a> &amp;&amp;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         (<a class="code" href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">mux_</a>-&gt;TxMessageTrace(endpoint_addr_str, endpoint.port(),</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                               size, *msg_str, NULL)))) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a811ca185f374ba3a3c225d8eafea4239">XMPP_MESSAGE_TRACE</a>(XmppTxStream,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                           endpoint_addr_str, endpoint.port(), size, *msg_str);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>[1].<a class="code" href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#abc0f05e7aed3cceea3097ca501abae4e">update</a>++;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordtype">size_t</span> sent;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, size, &amp;sent);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a9a41ec1045539130e0f99716e2ee50fd">  253</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a9a41ec1045539130e0f99716e2ee50fd">XmppConnection::SetDscpValue</a>(uint8_t value) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a36bd7bc049016e397d8a9d99124841eb">dscp_value_</a> = value;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af24e37114e7cc1f364810c741cb708ec">SetDscpSocketOption</a>(value);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a5e62fc5e141f3c47eb86b0b6d0fa47d4">  262</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a5e62fc5e141f3c47eb86b0b6d0fa47d4">XmppConnection::SendOpen</a>(<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *session) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (!session) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    XmppProto::XmppStanza::XmppStreamMessage openstream;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    openstream.strmtype = <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a4589b18d0fe6af4763e2b1225adb356caa5d1efa39250bb30ed7fa4ca25961664">XmppStanza::XmppStreamMessage::INIT_STREAM_HEADER</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    uint8_t data[<a class="code" href="../../d5/df9/xmpp__connection_8cc.html#abea9942d9433bfc93ac6d34189406c8e">XMPP_CONTROL_MESSAGE_MAX_SIZE</a>];</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordtype">int</span> len = <a class="code" href="../../d9/d4b/classXmppProto.html#ab8022027c8d07b32da5ec6d330103b52">XmppProto::EncodeStream</a>(openstream, <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a44354a2190bbbf60a495a8272031c378">xmlns_</a>, data,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                      <span class="keyword">sizeof</span>(data));</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> (len &lt;= 0) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a2ae8250762a5581bc4efac608d962288">inc_open_fail</a>();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a>(XmppOpen, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2b4e7f11545b2b7b034f13d5ba8861ea">XMPP_PEER_DIR_OUT</a>, len, <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>,</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                     <a class="code" href="../../d0/d64/classXmppConnection.html#a44354a2190bbbf60a495a8272031c378">xmlns_</a>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        session-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, len, NULL);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>[1].<a class="code" href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#a7cd435c6d9b416e28934295d7fc36037">open</a>++;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#abbb3ae66abcfc46625209abce0f3909f">  281</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d64/classXmppConnection.html#abbb3ae66abcfc46625209abce0f3909f">XmppConnection::SendOpenConfirm</a>(<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *session) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html">XmppStanza::XmppStreamMessage</a> openstream;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    openstream.<a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#abb1d9dc99e610d3671b4306b289fadda">strmtype</a> = <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a4589b18d0fe6af4763e2b1225adb356cae255d7b172302cabc4547892627ba153">XmppStanza::XmppStreamMessage::INIT_STREAM_HEADER_RESP</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    uint8_t data[<a class="code" href="../../d5/df9/xmpp__connection_8cc.html#abea9942d9433bfc93ac6d34189406c8e">XMPP_CONTROL_MESSAGE_MAX_SIZE</a>];</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordtype">int</span> len = <a class="code" href="../../d9/d4b/classXmppProto.html#ab8022027c8d07b32da5ec6d330103b52">XmppProto::EncodeStream</a>(openstream, <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a44354a2190bbbf60a495a8272031c378">xmlns_</a>, data,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                      <span class="keyword">sizeof</span>(data));</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (len &lt;= 0) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a2ae8250762a5581bc4efac608d962288">inc_open_fail</a>();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a>(XmppOpenConfirm, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2b4e7f11545b2b7b034f13d5ba8861ea">XMPP_PEER_DIR_OUT</a>, len,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                     <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, len, NULL);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>[1].<a class="code" href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#a7cd435c6d9b416e28934295d7fc36037">open</a>++;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a4181627b609821172d4d234e70f08437">  301</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a4181627b609821172d4d234e70f08437">XmppConnection::SendStreamFeatureRequest</a>(<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *session) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html">XmppStanza::XmppStreamMessage</a> featurestream;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    featurestream.<a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#abb1d9dc99e610d3671b4306b289fadda">strmtype</a> = <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a4589b18d0fe6af4763e2b1225adb356ca4fde9f012d6ca67b2e445ddd05022bb0">XmppStanza::XmppStreamMessage::FEATURE_TLS</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    featurestream.<a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a73ecf35ee8a85fc9c1f11bc0862ac6f3">strmtlstype</a> = <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a603da3c791f1b25072b9f78048bff5ecafb6addb0339906dfe398a2ae03027cc6">XmppStanza::XmppStreamMessage::TLS_FEATURE_REQUEST</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    uint8_t data[<a class="code" href="../../d5/df9/xmpp__connection_8cc.html#abea9942d9433bfc93ac6d34189406c8e">XMPP_CONTROL_MESSAGE_MAX_SIZE</a>];</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordtype">int</span> len = <a class="code" href="../../d9/d4b/classXmppProto.html#ab8022027c8d07b32da5ec6d330103b52">XmppProto::EncodeStream</a>(featurestream, <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a44354a2190bbbf60a495a8272031c378">xmlns_</a>, data,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                      <span class="keyword">sizeof</span>(data));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (len &lt;= 0) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#aaaa422cab22b8b64023f21b0b0a956a8">inc_stream_feature_fail</a>();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a>(XmppControlMessage, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2b4e7f11545b2b7b034f13d5ba8861ea">XMPP_PEER_DIR_OUT</a>,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                     <span class="stringliteral">&quot;Send Stream Feature Request&quot;</span>, len, <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, len, NULL);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="comment">//stats_[1].open++;</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a61077c30aea5d27fec8f8c08c8fc1295">  322</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a61077c30aea5d27fec8f8c08c8fc1295">XmppConnection::SendStartTls</a>(<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *session) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html">XmppStanza::XmppStreamMessage</a> stream;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    stream.<a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#abb1d9dc99e610d3671b4306b289fadda">strmtype</a> = <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a4589b18d0fe6af4763e2b1225adb356ca4fde9f012d6ca67b2e445ddd05022bb0">XmppStanza::XmppStreamMessage::FEATURE_TLS</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    stream.<a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a73ecf35ee8a85fc9c1f11bc0862ac6f3">strmtlstype</a> = <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a603da3c791f1b25072b9f78048bff5eca50937ce877344cf3e58bb148253bbcae">XmppStanza::XmppStreamMessage::TLS_START</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    uint8_t data[<a class="code" href="../../d5/df9/xmpp__connection_8cc.html#abea9942d9433bfc93ac6d34189406c8e">XMPP_CONTROL_MESSAGE_MAX_SIZE</a>];</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordtype">int</span> len = <a class="code" href="../../d9/d4b/classXmppProto.html#ab8022027c8d07b32da5ec6d330103b52">XmppProto::EncodeStream</a>(stream, <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a44354a2190bbbf60a495a8272031c378">xmlns_</a>, data,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                      <span class="keyword">sizeof</span>(data));</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (len &lt;= 0) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#aaaa422cab22b8b64023f21b0b0a956a8">inc_stream_feature_fail</a>();</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a>(XmppControlMessage, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2b4e7f11545b2b7b034f13d5ba8861ea">XMPP_PEER_DIR_OUT</a>,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                     <span class="stringliteral">&quot;Send Start Tls&quot;</span>, len, <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, len, NULL);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="comment">//stats_[1].open++;</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a7113663fcc3afbb269c7de0a04d192cb">  343</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a7113663fcc3afbb269c7de0a04d192cb">XmppConnection::SendProceedTls</a>(<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *session) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html">XmppStanza::XmppStreamMessage</a> stream;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    stream.<a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#abb1d9dc99e610d3671b4306b289fadda">strmtype</a> = <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a4589b18d0fe6af4763e2b1225adb356ca4fde9f012d6ca67b2e445ddd05022bb0">XmppStanza::XmppStreamMessage::FEATURE_TLS</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    stream.<a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a73ecf35ee8a85fc9c1f11bc0862ac6f3">strmtlstype</a> = <a class="code" href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a603da3c791f1b25072b9f78048bff5eca28640a0a2134316d2548d088536eabcd">XmppStanza::XmppStreamMessage::TLS_PROCEED</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    uint8_t data[<a class="code" href="../../d5/df9/xmpp__connection_8cc.html#abea9942d9433bfc93ac6d34189406c8e">XMPP_CONTROL_MESSAGE_MAX_SIZE</a>];</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordtype">int</span> len = <a class="code" href="../../d9/d4b/classXmppProto.html#ab8022027c8d07b32da5ec6d330103b52">XmppProto::EncodeStream</a>(stream, <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a44354a2190bbbf60a495a8272031c378">xmlns_</a>, data,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                                      <span class="keyword">sizeof</span>(data));</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (len &lt;= 0) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#aaaa422cab22b8b64023f21b0b0a956a8">inc_stream_feature_fail</a>();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a>(XmppControlMessage, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2b4e7f11545b2b7b034f13d5ba8861ea">XMPP_PEER_DIR_OUT</a>,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                     <span class="stringliteral">&quot;Send Proceed Tls&quot;</span>, len, <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, len, NULL);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="comment">//stats_[1].open++;</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#ab0e364172e4a20ce835a75004e6934ef">  364</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ab0e364172e4a20ce835a75004e6934ef">XmppConnection::SendClose</a>(<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *session) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordtype">string</span> str(<span class="stringliteral">&quot;&lt;/stream:stream&gt;&quot;</span>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    uint8_t data[64];</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    memcpy(data, str.data(), str.size());</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a>(XmppClose, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2b4e7f11545b2b7b034f13d5ba8861ea">XMPP_PEER_DIR_OUT</a>, str.size(), <a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                 <a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, str.size(), NULL);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>[1].<a class="code" href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#a7e44c45cc9bf96a57af420f27e43bb77">close</a>++;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#ad13fa71faaa6a3230fa7b48f510d853f">  376</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ad13fa71faaa6a3230fa7b48f510d853f">XmppConnection::ProcessSslHandShakeResponse</a>(<a class="code" href="../../d7/d8c/ssl__session_8h.html#a81dc2f91d3597fbbb94755d925f348f5">SslSessionPtr</a> session,</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keyword">const</span> boost::system::error_code&amp; error) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>())</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (error) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a4e41efc97785d44dc7429da9c024b15e">inc_handshake_failure</a>();</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">if</span> (error.category() == boost::asio::error::get_ssl_category()) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordtype">string</span> err = error.message();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            err = string(<span class="stringliteral">&quot; (&quot;</span>)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                         +boost::lexical_cast&lt;<span class="keywordtype">string</span>&gt;(ERR_GET_LIB(error.value()))+<span class="stringliteral">&quot;,&quot;</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                         +boost::lexical_cast&lt;<span class="keywordtype">string</span>&gt;(ERR_GET_FUNC(error.value()))+<span class="stringliteral">&quot;,&quot;</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                         +boost::lexical_cast&lt;<span class="keywordtype">string</span>&gt;(ERR_GET_REASON(error.value()))+<span class="stringliteral">&quot;) &quot;</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;             <span class="keywordtype">char</span> buf[128];</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;             ::ERR_error_string_n(error.value(), buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;             err += buf;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;             <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a1060679c007790e2b21b9746ce57500d">XMPP_ALERT</a>(XmppSslHandShakeFailure, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#acd5de5da711fce3da27618a2408610f8">XMPP_PEER_DIR_IN</a>,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                        <span class="stringliteral">&quot;failure&quot;</span>, err);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>()-&gt;<a class="code" href="../../d2/db3/classXmppStateMachine.html#a9a4047eaa7fb2f13f7247bd64f3d6108">OnEvent</a>(session.get(), <a class="code" href="../../d8/d9a/namespacexmsm.html#a13e4110c24303450a8754927d5c280bfae2fd8f260c7b11626279cd8cfa709bbc">xmsm::EvTLSHANDSHAKE_FAILURE</a>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a61e03d4499866f05b9dbb2a19218f7c3">XMPP_DEBUG</a>(XmppSslHandShakeMessage, session-&gt;ToUVEKey(),</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                   <a class="code" href="../../d5/d9f/xmpp__log_8h.html#acd5de5da711fce3da27618a2408610f8">XMPP_PEER_DIR_IN</a>, <span class="stringliteral">&quot;success&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>()-&gt;<a class="code" href="../../d2/db3/classXmppStateMachine.html#a9a4047eaa7fb2f13f7247bd64f3d6108">OnEvent</a>(session.get(), <a class="code" href="../../d8/d9a/namespacexmsm.html#a13e4110c24303450a8754927d5c280bfa8603ba16e03c76fdb74d20a0b78aeb39">xmsm::EvTLSHANDSHAKE_SUCCESS</a>);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#ac73e778cb1e0fbdb38b5db7aaf92e77e">  407</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ac73e778cb1e0fbdb38b5db7aaf92e77e">XmppConnection::LogMsg</a>(std::string msg) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    log4cplus::Logger logger = log4cplus::Logger::getRoot();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    LOG4CPLUS_DEBUG(logger, msg &lt;&lt; <a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;         <a class="code" href="../../d0/d64/classXmppConnection.html#a0121b0b782cec4a5c2cb1f4a05ae7e22">local_endpoint_</a>.address() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="../../d0/d64/classXmppConnection.html#a0121b0b782cec4a5c2cb1f4a05ae7e22">local_endpoint_</a>.port() &lt;&lt; <span class="stringliteral">&quot;::&quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;         <a class="code" href="../../d0/d64/classXmppConnection.html#ae4aab76bde939f73814ee902282211e1">endpoint_</a>.address() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="../../d0/d64/classXmppConnection.html#ae4aab76bde939f73814ee902282211e1">endpoint_</a>.port());</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a9fc59d5f4b000ff46cb555fb6eff59d8">  414</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a9fc59d5f4b000ff46cb555fb6eff59d8">XmppConnection::LogKeepAliveSend</a>() {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> init_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> log_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (!init_) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordtype">char</span> *str = getenv(<span class="stringliteral">&quot;XMPP_ASSERT_ON_HOLD_TIMEOUT&quot;</span>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordflow">if</span> (str &amp;&amp; strtoul(str, NULL, 0) != 0) log_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        init_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (log_) <a class="code" href="../../d0/d64/classXmppConnection.html#ac73e778cb1e0fbdb38b5db7aaf92e77e">LogMsg</a>(<span class="stringliteral">&quot;SEND KEEPALIVE: &quot;</span>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#afaf566aaa1d6712efc9c9eace5998357">  427</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#afaf566aaa1d6712efc9c9eace5998357">XmppConnection::SendKeepAlive</a>() {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html">XmppStanza::XmppMessage</a> msg(<a class="code" href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaa06d32ac2b9484036daf7fab5c1cb9687">XmppStanza::WHITESPACE_MESSAGE_STANZA</a>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    uint8_t data[<a class="code" href="../../d5/df9/xmpp__connection_8cc.html#abea9942d9433bfc93ac6d34189406c8e">XMPP_CONTROL_MESSAGE_MAX_SIZE</a>];</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordtype">int</span> len = <a class="code" href="../../d9/d4b/classXmppProto.html#ab8022027c8d07b32da5ec6d330103b52">XmppProto::EncodeStream</a>(msg, data, <span class="keyword">sizeof</span>(data));</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    assert(len &gt; 0);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">Send</a>(data, len, NULL);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>[1].<a class="code" href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#a168a92cf4aeb7347999a0f54ad34eac6">keepalive</a>++;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a9fc59d5f4b000ff46cb555fb6eff59d8">LogKeepAliveSend</a>();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a103e99a7c914f284452486c9ca0f14eb">  439</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a103e99a7c914f284452486c9ca0f14eb">XmppConnection::KeepAliveTimerExpired</a>() {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d64/classXmppConnection.html#a895831d1375802101d98b5c94c2982d3">state_machine_</a>-&gt;get_state() != <a class="code" href="../../d8/d9a/namespacexmsm.html#a4355b927914ed3b2c84bc5d366431d6da4c881ce28a13af89cee828f19cb90a0a">xmsm::ESTABLISHED</a>)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// TODO: check timestamp of last received packet.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#afaf566aaa1d6712efc9c9eace5998357">SendKeepAlive</a>();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// Start the timer again, by returning true</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a70433a057970c935645676c5e911d7d9">  452</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a70433a057970c935645676c5e911d7d9">XmppConnection::KeepaliveTimerErrorHanlder</a>(<span class="keywordtype">string</span> error_name,</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                                                <span class="keywordtype">string</span> error_message) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a53a03754223ac0ef89b223bbb0b2e543">XMPP_WARNING</a>(XmppKeepaliveTimeError, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a0c468141e136315bc3b4204f2efd927f">XMPP_PEER_DIR_NA</a>,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                 error_name, error_message);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a984d2a28f3876d7a8166064f3b6a6ebc">  458</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a984d2a28f3876d7a8166064f3b6a6ebc">XmppConnection::StartKeepAliveTimer</a>() {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">session_</a>)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordtype">int</span> holdtime_msecs = <a class="code" href="../../d0/d64/classXmppConnection.html#a895831d1375802101d98b5c94c2982d3">state_machine_</a>-&gt;hold_time_msecs();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span> (holdtime_msecs &lt;= 0)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a296b30c3678e2996b23b0dc8c2ff591e">keepalive_timer_</a>-&gt;<a class="code" href="../../dc/dea/classTimer.html#a884738fb312e353e7d89fce007f02485">Start</a>(holdtime_msecs / 3,</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        boost::bind(&amp;<a class="code" href="../../d0/d64/classXmppConnection.html#a103e99a7c914f284452486c9ca0f14eb">XmppConnection::KeepAliveTimerExpired</a>, <span class="keyword">this</span>),</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        boost::bind(&amp;<a class="code" href="../../d0/d64/classXmppConnection.html#a70433a057970c935645676c5e911d7d9">XmppConnection::KeepaliveTimerErrorHanlder</a>, <span class="keyword">this</span>, _1, _2));</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a23558db06521b840c31bcd2484582ac1">  472</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a23558db06521b840c31bcd2484582ac1">XmppConnection::StopKeepAliveTimer</a>() {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    tbb::spin_mutex::scoped_lock lock(<a class="code" href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">spin_mutex_</a>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a296b30c3678e2996b23b0dc8c2ff591e">keepalive_timer_</a>-&gt;<a class="code" href="../../dc/dea/classTimer.html#a18a9ec123397a973c72243c8372c237f">Cancel</a>();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a6868fbdc35620e86a34149e8f4b80a15">  477</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a6868fbdc35620e86a34149e8f4b80a15">XmppConnection::UpdateKeepAliveTimer</a>(uint8_t time_out) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a895831d1375802101d98b5c94c2982d3">state_machine_</a>-&gt;set_hold_time(time_out);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a23558db06521b840c31bcd2484582ac1">StopKeepAliveTimer</a>();</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#a984d2a28f3876d7a8166064f3b6a6ebc">StartKeepAliveTimer</a>();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">  483</a></span>&#160;<a class="code" href="../../d2/db3/classXmppStateMachine.html">XmppStateMachine</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">XmppConnection::state_machine</a>() {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a895831d1375802101d98b5c94c2982d3">state_machine_</a>.get();</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#adc145bbee9becb11a46359d073dddd5f">  487</a></span>&#160;<span class="keyword">const</span> <a class="code" href="../../d2/db3/classXmppStateMachine.html">XmppStateMachine</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">XmppConnection::state_machine</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a895831d1375802101d98b5c94c2982d3">state_machine_</a>.get();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#ae007d93020d1671d2c34a0871f5c1b4b">  491</a></span>&#160;<span class="keyword">const</span> <a class="code" href="../../d2/dc0/classXmppChannelMux.html">XmppChannelMux</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#ae007d93020d1671d2c34a0871f5c1b4b">XmppConnection::channel_mux</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">mux_</a>.get();</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#aaf3a4ab95d507621ba7e75f7e39fe275">  495</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#aaf3a4ab95d507621ba7e75f7e39fe275">XmppConnection::IncProtoStats</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../de/dcb/load__balance_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a>) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaa1c46281f625db717e28352463c58aa4f">XmppStanza::STREAM_HEADER</a>:</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>[0].<a class="code" href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#a7cd435c6d9b416e28934295d7fc36037">open</a>++;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaa06d32ac2b9484036daf7fab5c1cb9687">XmppStanza::WHITESPACE_MESSAGE_STANZA</a>:</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>[0].<a class="code" href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#a168a92cf4aeb7347999a0f54ad34eac6">keepalive</a>++;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaaf9e045ea03e45e7bdfad7574e12d14a6">XmppStanza::IQ_STANZA</a>:</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>[0].<a class="code" href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#abc0f05e7aed3cceea3097ca501abae4e">update</a>++;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaa17f45e3d79a81c7aa46193c9e30a404f">XmppStanza::MESSAGE_STANZA</a>:</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>[0].<a class="code" href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#abc0f05e7aed3cceea3097ca501abae4e">update</a>++;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a2d1a0157671d5fe813f122a7fcf41c36">  512</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a2d1a0157671d5fe813f122a7fcf41c36">XmppConnection::inc_connect_error</a>() {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>.<a class="code" href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#a5e614da29d2df54fa581dc7c6757761e">connect_error</a>++;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;}</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#accb70ab006de6de4e9ffdd5f93eb5797">  516</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#accb70ab006de6de4e9ffdd5f93eb5797">XmppConnection::inc_session_close</a>() {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>.<a class="code" href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#abaebbaeee1751bb8923f77cd2429d5f3">session_close</a>++;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a2ae8250762a5581bc4efac608d962288">  520</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a2ae8250762a5581bc4efac608d962288">XmppConnection::inc_open_fail</a>() {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>.<a class="code" href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#af7ab5b1786f87e0a39a660b7c3e0f48f">open_fail</a>++;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#aaaa422cab22b8b64023f21b0b0a956a8">  524</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#aaaa422cab22b8b64023f21b0b0a956a8">XmppConnection::inc_stream_feature_fail</a>() {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>.<a class="code" href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#aed9e43d33b44a1a42bc278a36e51ebee">stream_feature_fail</a>++;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a4e41efc97785d44dc7429da9c024b15e">  528</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a4e41efc97785d44dc7429da9c024b15e">XmppConnection::inc_handshake_failure</a>() {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>.<a class="code" href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#a5d8fd73134f6f880499adf48f63e20c6">handshake_fail</a>++;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a4bb4147a46af44775e92e85ac748e64c">  532</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a4bb4147a46af44775e92e85ac748e64c">XmppConnection::get_connect_error</a>() {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>.<a class="code" href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#a5e614da29d2df54fa581dc7c6757761e">connect_error</a>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#aae958c19f6b7b077c33eb2e03b943058">  536</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../d0/d64/classXmppConnection.html#aae958c19f6b7b077c33eb2e03b943058">XmppConnection::get_session_close</a>() {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>.<a class="code" href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#abaebbaeee1751bb8923f77cd2429d5f3">session_close</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a91edeab413d9f573b08b0f200bf556d1">  540</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a91edeab413d9f573b08b0f200bf556d1">XmppConnection::get_open_fail</a>() {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>.<a class="code" href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#af7ab5b1786f87e0a39a660b7c3e0f48f">open_fail</a>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#aa2932687551c8614c2c78adcf7aa84d7">  544</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../d0/d64/classXmppConnection.html#aa2932687551c8614c2c78adcf7aa84d7">XmppConnection::get_stream_feature_fail</a>() {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>.<a class="code" href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#aed9e43d33b44a1a42bc278a36e51ebee">stream_feature_fail</a>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#aaf1e09316446d795dbc10e97f7dba18a">  548</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../d0/d64/classXmppConnection.html#aaf1e09316446d795dbc10e97f7dba18a">XmppConnection::get_handshake_failure</a>() {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>.<a class="code" href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#a5d8fd73134f6f880499adf48f63e20c6">handshake_fail</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;}</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a5673841c6027b92f728fb2d55980eaf5">  552</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a5673841c6027b92f728fb2d55980eaf5">XmppConnection::get_sm_connect_attempts</a>() {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a895831d1375802101d98b5c94c2982d3">state_machine_</a>-&gt;get_connect_attempts();</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#afd6df334232d4f183369756059c1f778">  556</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../d0/d64/classXmppConnection.html#afd6df334232d4f183369756059c1f778">XmppConnection::get_sm_keepalive_count</a>() {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a895831d1375802101d98b5c94c2982d3">state_machine_</a>-&gt;get_keepalive_count();</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;}</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a5881f6e689a7474b2c7c301efb30e60f">  560</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a5881f6e689a7474b2c7c301efb30e60f">XmppConnection::ReceiveMsg</a>(<a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *session, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;msg) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html">XmppStanza::XmppMessage</a> *minfo = <a class="code" href="../../d0/d64/classXmppConnection.html#a80a0965225ac7bc1911eae024b121b03">XmppDecode</a>(msg);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> (minfo) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        session-&gt;<a class="code" href="../../d5/d13/classXmppSession.html#a325cc9d8b4ee70e455cf6f48b186f27e">IncStats</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)minfo-&gt;<a class="code" href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html#a008fe2b37ed43a5ef60d5d056cce1969">type</a>, msg.size());</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span> (minfo-&gt;<a class="code" href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html#a008fe2b37ed43a5ef60d5d056cce1969">type</a> != <a class="code" href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaa06d32ac2b9484036daf7fab5c1cb9687">XmppStanza::WHITESPACE_MESSAGE_STANZA</a>) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">mux_</a> &amp;&amp;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                  (<a class="code" href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">mux_</a>-&gt;RxMessageTrace(session-&gt;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                                        remote_endpoint().address().to_string(),</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                        session-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a4c6e9471b6036e008b9a862e827b1c95">remote_endpoint</a>().port(),</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                                        msg.size(), msg, minfo)))) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a811ca185f374ba3a3c225d8eafea4239">XMPP_MESSAGE_TRACE</a>(XmppRxStream,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                                   session-&gt;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                                   remote_endpoint().address().to_string(),</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                   session-&gt;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                   remote_endpoint().port(), msg.size(), msg);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#aaf3a4ab95d507621ba7e75f7e39fe275">IncProtoStats</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)minfo-&gt;<a class="code" href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html#a008fe2b37ed43a5ef60d5d056cce1969">type</a>);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#a895831d1375802101d98b5c94c2982d3">state_machine_</a>-&gt;OnMessage(session, minfo);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((minfo = <a class="code" href="../../d0/d64/classXmppConnection.html#aa4421116f53058dd444b13ab2ace9ba8">last_msg_</a>.get()) != NULL) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        session-&gt;<a class="code" href="../../d5/d13/classXmppSession.html#a325cc9d8b4ee70e455cf6f48b186f27e">IncStats</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)minfo-&gt;<a class="code" href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html#a008fe2b37ed43a5ef60d5d056cce1969">type</a>, msg.size());</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#aaf3a4ab95d507621ba7e75f7e39fe275">IncProtoStats</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)minfo-&gt;<a class="code" href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html#a008fe2b37ed43a5ef60d5d056cce1969">type</a>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        session-&gt;<a class="code" href="../../d5/d13/classXmppSession.html#a325cc9d8b4ee70e455cf6f48b186f27e">IncStats</a>(<a class="code" href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaa2f4d00b451e8e6ff143ff6cd28091f61">XmppStanza::INVALID</a>, msg.size());</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a811ca185f374ba3a3c225d8eafea4239">XMPP_MESSAGE_TRACE</a>(XmppRxStreamInvalid,</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;             session-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a4c6e9471b6036e008b9a862e827b1c95">remote_endpoint</a>().address().to_string(),</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;             session-&gt;<a class="code" href="../../d2/d0e/classTcpSession.html#a4c6e9471b6036e008b9a862e827b1c95">remote_endpoint</a>().port(), msg.size(), msg);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a80a0965225ac7bc1911eae024b121b03">  592</a></span>&#160;<a class="code" href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html">XmppStanza::XmppMessage</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#a80a0965225ac7bc1911eae024b121b03">XmppConnection::XmppDecode</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;msg) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    unique_ptr&lt;XmppStanza::XmppMessage&gt; minfo(<a class="code" href="../../d9/d4b/classXmppProto.html#a6a03ccb5f9f27a7bfd8de1fc1fbca774">XmppProto::Decode</a>(<span class="keyword">this</span>, msg));</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (minfo.get() == NULL) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a715b96e4c50770b8fb1059b1ae82f072">XMPP_INFO</a>(XmppSessionDelete, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#acd5de5da711fce3da27618a2408610f8">XMPP_PEER_DIR_IN</a>, <span class="stringliteral">&quot;Server&quot;</span>,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                  <a class="code" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">FromString</a>(), <a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>());</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <a class="code" href="../../d0/d64/classXmppConnection.html#ac127fa7ebba9aef84953d764778e6607">Clear</a>();</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">if</span> (minfo-&gt;type == <a class="code" href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaaf9e045ea03e45e7bdfad7574e12d14a6">XmppStanza::IQ_STANZA</a>) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html">XmppStanza::XmppMessageIq</a> *iq =</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html">XmppStanza::XmppMessageIq</a> *<span class="keyword">&gt;</span>(minfo.get());</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">if</span> (iq-&gt;<a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a015e5b3e0314caac552015c01684dad6">action</a>.compare(<span class="stringliteral">&quot;publish&quot;</span>) == 0) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <a class="code" href="../../d0/d64/classXmppConnection.html#aa4421116f53058dd444b13ab2ace9ba8">last_msg_</a>.reset(minfo.release());</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">if</span> (iq-&gt;<a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a015e5b3e0314caac552015c01684dad6">action</a>.compare(<span class="stringliteral">&quot;collection&quot;</span>) == 0) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d0/d64/classXmppConnection.html#aa4421116f53058dd444b13ab2ace9ba8">last_msg_</a>.get() != NULL) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html">XmppStanza::XmppMessageIq</a> *last_iq =</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                    <span class="keyword">static_cast&lt;</span><a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html">XmppStanza::XmppMessageIq</a> *<span class="keyword">&gt;</span>(<a class="code" href="../../d0/d64/classXmppConnection.html#aa4421116f53058dd444b13ab2ace9ba8">last_msg_</a>.get());</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <span class="keywordflow">if</span> (last_iq-&gt;<a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a21e1bdbf2eef38c6ee3231fb9141791a">node</a>.compare(iq-&gt;<a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a7c97fb5f6067172c90511ac5034e713c">as_node</a>) == 0) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    <a class="code" href="../../d2/d78/classXmlBase.html">XmlBase</a> *impl = last_iq-&gt;<a class="code" href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html#ab724425411c2fde8c1eacfbc6bd8ad39">dom</a>.get();</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                    impl-&gt;<a class="code" href="../../d2/d78/classXmlBase.html#aa3bebedc9fa0039f736a788935345d53">ReadNode</a>(<span class="stringliteral">&quot;publish&quot;</span>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                    impl-&gt;<a class="code" href="../../d2/d78/classXmlBase.html#a38b7739c8faffc644224cc1a1345478d">ModifyAttribute</a>(<span class="stringliteral">&quot;node&quot;</span>, iq-&gt;<a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a21e1bdbf2eef38c6ee3231fb9141791a">node</a>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                    last_iq-&gt;<a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a21e1bdbf2eef38c6ee3231fb9141791a">node</a> = impl-&gt;<a class="code" href="../../d2/d78/classXmlBase.html#a9628696d6b514a616d84b02311f6141b">ReadAttrib</a>(<span class="stringliteral">&quot;node&quot;</span>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                    last_iq-&gt;<a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a7d7a6061b8408e381d5c4d1517fae67f">is_as_node</a> = iq-&gt;<a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a7d7a6061b8408e381d5c4d1517fae67f">is_as_node</a>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                    <span class="comment">//Save the complete ass/dissociate node</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    last_iq-&gt;<a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a7c97fb5f6067172c90511ac5034e713c">as_node</a> = iq-&gt;<a class="code" href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a7c97fb5f6067172c90511ac5034e713c">as_node</a>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a53a03754223ac0ef89b223bbb0b2e543">XMPP_WARNING</a>(XmppIqMessageInvalid, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(),</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                 <a class="code" href="../../d5/d9f/xmpp__log_8h.html#acd5de5da711fce3da27618a2408610f8">XMPP_PEER_DIR_IN</a>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    <span class="keywordflow">goto</span> error;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                <a class="code" href="../../d5/d9f/xmpp__log_8h.html#ac3a7300affb777f66d244c3c88a21a4d">XMPP_ERROR</a>(XmppIqCollectionError, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#acd5de5da711fce3da27618a2408610f8">XMPP_PEER_DIR_IN</a>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <span class="keywordflow">goto</span> error;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <span class="comment">// iq message merged with collection info</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d0/d64/classXmppConnection.html#aa4421116f53058dd444b13ab2ace9ba8">last_msg_</a>.release();</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> minfo.release();</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;error:</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#aa4421116f53058dd444b13ab2ace9ba8">last_msg_</a>.reset();</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;}</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a79569cc806dc76091244b14a4af1ac39">  644</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a79569cc806dc76091244b14a4af1ac39">XmppConnection::ProcessXmppChatMessage</a>(</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d7/d96/structXmppStanza_1_1XmppChatMessage.html">XmppStanza::XmppChatMessage</a> *msg) {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">mux_</a>-&gt;ProcessXmppMessage(msg);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;}</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a4385f0a3df9a5749342b9d72b08fc5e8">  650</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a4385f0a3df9a5749342b9d72b08fc5e8">XmppConnection::ProcessXmppIqMessage</a>(<span class="keyword">const</span> <a class="code" href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html">XmppStanza::XmppMessage</a> *msg) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">mux_</a>-&gt;ProcessXmppMessage(msg);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html">  655</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html">XmppServerConnection::DeleteActor</a> : <span class="keyword">public</span> <a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a> {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00657"></a><span class="lineno"><a class="line" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a08126e125a12f23675f77cd659278ee9">  657</a></span>&#160;    <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a08126e125a12f23675f77cd659278ee9">DeleteActor</a>(<a class="code" href="../../dd/d43/classXmppServer.html">XmppServer</a> *<a class="code" href="../../df/df7/classXmppServerConnection.html#a3eed068878dc90d3b8ae05ffabbdce22">server</a>, <a class="code" href="../../df/df7/classXmppServerConnection.html">XmppServerConnection</a> *parent)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        : <a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a>(server-&gt;<a class="code" href="../../df/df7/classXmppServerConnection.html#a5f62fe22841db20cb370e8945af84fa1">lifetime_manager</a>()),</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;          <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a3a741682068b773eff440509b8fdb24d">server_</a>(server), <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>(parent) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aafa0e202b9cc44e316fc19b68a206974">  662</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aafa0e202b9cc44e316fc19b68a206974">MayDelete</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">return</span> (!<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>-&gt;<a class="code" href="../../df/df7/classXmppServerConnection.html#a0eb2c91a6dfa4b4e494ea132978534f0">on_work_queue</a>() &amp;&amp; <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#abdcae6555f436e83432196df0b016cd8">MayDelete</a>());</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div>
<div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#acfd6b1484d3fd61647a1bf9fd23d7fbc">  666</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#acfd6b1484d3fd61647a1bf9fd23d7fbc">Shutdown</a>() {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="comment">// If the connection is still on the WorkQueue, simply add it to the</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="comment">// ConnectionSet.  It won&#39;t be on the ConnectionMap.</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>-&gt;<a class="code" href="../../df/df7/classXmppServerConnection.html#a0eb2c91a6dfa4b4e494ea132978534f0">on_work_queue</a>()) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a3a741682068b773eff440509b8fdb24d">server_</a>-&gt;<a class="code" href="../../dd/d43/classXmppServer.html#aed52236e7264834394bdb0f6fe619a62">InsertDeletedConnection</a>(<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="comment">// If the connection was rejected as duplicate, it will already be in</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="comment">// the ConnectionSet. Non-duplicate connections need to be moved from</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="comment">// from the ConnectionMap into the ConnectionSet.  We add it to the</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <span class="comment">// ConnectionSet and then remove it from ConnectionMap to ensure that</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="comment">// the XmppServer connection count doesn&#39;t temporarily become 0. This</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="comment">// is friendly to tests that wait for the XmppServer connection count</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="comment">// to become 0.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="comment">// Breaking association with the XmppConnectionEndpoint here allows</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="comment">// a new XmppServerConnection with the same Endpoint to come up. We</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="comment">// may end up leaking memory if current XmppServerConnection doesn&#39;t</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="comment">// get cleaned up completely, but we at least prevent the other end</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="comment">// from getting stuck forever.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>-&gt;<a class="code" href="../../df/df7/classXmppServerConnection.html#ab46068ce9e39fbebe479e4c81acd3092">duplicate</a>()) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a3a741682068b773eff440509b8fdb24d">server_</a>-&gt;<a class="code" href="../../dd/d43/classXmppServer.html#aed52236e7264834394bdb0f6fe619a62">InsertDeletedConnection</a>(<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a3a741682068b773eff440509b8fdb24d">server_</a>-&gt;<a class="code" href="../../dd/d43/classXmppServer.html#a75a9cd0850788d3f0f68aad0b7cb768a">RemoveConnection</a>(<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a3a741682068b773eff440509b8fdb24d">server_</a>-&gt;<a class="code" href="../../dd/d43/classXmppServer.html#ac11f0f8fcdb45e2da767dc96da6d2eac">ReleaseConnectionEndpoint</a>(<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>()) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>()-&gt;<a class="code" href="../../d2/db3/classXmppStateMachine.html#adda19a1981ee8f7fb42aa7a0e3db83eb">Clear</a>();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#ac909e1659d9b3909aeb00ef132afd30f">session</a> = NULL;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>()) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            session = <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>()-&gt;<a class="code" href="../../d2/db3/classXmppStateMachine.html#ab8fce539a786bc792ce19a155c51e57d">session</a>();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>()-&gt;<a class="code" href="../../d2/db3/classXmppStateMachine.html#a1b3d77109b2418f01b555f179a1543a5">clear_session</a>();</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">if</span> (session) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a3a741682068b773eff440509b8fdb24d">server_</a>-&gt;<a class="code" href="../../de/df9/classTcpServer.html#ac3ac2031ae976926c8a3626d784b43aa">DeleteSession</a>(session);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div>
<div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a4833830290443f7b08c4ac7b2beae4f4">  708</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a4833830290443f7b08c4ac7b2beae4f4">Destroy</a>() {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keyword">delete</span> <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a3a741682068b773eff440509b8fdb24d">  713</a></span>&#160;    <a class="code" href="../../dd/d43/classXmppServer.html">XmppServer</a> *<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a3a741682068b773eff440509b8fdb24d">server_</a>;</div>
<div class="line"><a name="l00714"></a><span class="lineno"><a class="line" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">  714</a></span>&#160;    <a class="code" href="../../df/df7/classXmppServerConnection.html">XmppServerConnection</a> *<a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">parent_</a>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;};</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#a2c0402afc18ec342a22d6e9ab250c938">  717</a></span>&#160;<a class="code" href="../../df/df7/classXmppServerConnection.html#a2c0402afc18ec342a22d6e9ab250c938">XmppServerConnection::XmppServerConnection</a>(<a class="code" href="../../dd/d43/classXmppServer.html">XmppServer</a> *server,</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d0/d8b/classXmppChannelConfig.html">XmppChannelConfig</a> *config)</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    : <a class="code" href="../../d0/d64/classXmppConnection.html">XmppConnection</a>(server, config),</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      duplicate_(false),</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      on_work_queue_(false),</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      conn_endpoint_(NULL),</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      deleter_(new <a class="code" href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html">DeleteActor</a>(server, this)),</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      server_delete_ref_(this, server-&gt;<a class="code" href="../../db/d83/structdeleter.html">deleter</a>()) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    assert(!config-&gt;<a class="code" href="../../d0/d8b/classXmppChannelConfig.html#a6aa13b7faedb2a685b9a41d4a02387ee">ClientOnly</a>());</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a715b96e4c50770b8fb1059b1ae82f072">XMPP_INFO</a>(XmppConnectionCreate, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#acd5de5da711fce3da27618a2408610f8">XMPP_PEER_DIR_IN</a>,</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;              <span class="stringliteral">&quot;Server&quot;</span>, <a class="code" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">FromString</a>(), <a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>());</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;}</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#af16a9cbc1ea49fdc8dd21c67fc9359e5">  730</a></span>&#160;<a class="code" href="../../df/df7/classXmppServerConnection.html#af16a9cbc1ea49fdc8dd21c67fc9359e5">XmppServerConnection::~XmppServerConnection</a>() {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a715b96e4c50770b8fb1059b1ae82f072">XMPP_INFO</a>(XmppConnectionDelete, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a0c468141e136315bc3b4204f2efd927f">XMPP_PEER_DIR_NA</a>, <span class="stringliteral">&quot;Server&quot;</span>,</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;              <a class="code" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">FromString</a>(), <a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>());</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="../../df/df7/classXmppServerConnection.html#a3eed068878dc90d3b8ae05ffabbdce22">server</a>()-&gt;<a class="code" href="../../dd/d43/classXmppServer.html#a4523fcf287df9a97a6ed4187b60ef711">RemoveDeletedConnection</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;}</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#a0e0d78cfa0a417ef900360b84eb2ad75">  738</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../df/df7/classXmppServerConnection.html#a0e0d78cfa0a417ef900360b84eb2ad75">XmppServerConnection::ManagedDelete</a>() {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a>(XmppConnectionDelete, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a0c468141e136315bc3b4204f2efd927f">XMPP_PEER_DIR_NA</a>,</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                 <span class="stringliteral">&quot;Managed server connection delete&quot;</span>, <a class="code" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">FromString</a>(), <a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>());</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="../../df/df7/classXmppServerConnection.html#a9081f9aaa50ca337b3675f5fe9fa9a06">deleter_</a>-&gt;Delete();</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;}</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#ab88ede78eb01fb874af05400071b71e8">  744</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../df/df7/classXmppServerConnection.html#ab88ede78eb01fb874af05400071b71e8">XmppServerConnection::RetryDelete</a>() {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../df/df7/classXmppServerConnection.html#a9af8f124661f529de7b87bf66dd19338">deleter</a>()-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#abfd07e475de5ed01d8ca851ba1752f9b">IsDeleted</a>())</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="../../df/df7/classXmppServerConnection.html#a9af8f124661f529de7b87bf66dd19338">deleter</a>()-&gt;<a class="code" href="../../dd/d9e/classLifetimeActor.html#a6fd805b59fb8bc1119ee7778f623596c">RetryDelete</a>();</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#a5f62fe22841db20cb370e8945af84fa1">  750</a></span>&#160;<a class="code" href="../../dd/d0e/classLifetimeManager.html">LifetimeManager</a> *<a class="code" href="../../df/df7/classXmppServerConnection.html#a5f62fe22841db20cb370e8945af84fa1">XmppServerConnection::lifetime_manager</a>() {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/df7/classXmppServerConnection.html#a3eed068878dc90d3b8ae05ffabbdce22">server</a>()-&gt;<a class="code" href="../../dd/d43/classXmppServer.html#a1d70e8dc35aaacfc9eaf2e244b31e293">lifetime_manager</a>();</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;}</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#a3eed068878dc90d3b8ae05ffabbdce22">  754</a></span>&#160;<a class="code" href="../../dd/d43/classXmppServer.html">XmppServer</a> *<a class="code" href="../../df/df7/classXmppServerConnection.html#a3eed068878dc90d3b8ae05ffabbdce22">XmppServerConnection::server</a>() {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="../../dd/d43/classXmppServer.html">XmppServer</a> *<span class="keyword">&gt;</span>(<a class="code" href="../../d0/d64/classXmppConnection.html#abc96724c0337ac039858e29cff9ec423">server_</a>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;}</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div>
<div class="line"><a name="l00758"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#a9af8f124661f529de7b87bf66dd19338">  758</a></span>&#160;<a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a> *<a class="code" href="../../df/df7/classXmppServerConnection.html#a9af8f124661f529de7b87bf66dd19338">XmppServerConnection::deleter</a>() {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/df7/classXmppServerConnection.html#a9081f9aaa50ca337b3675f5fe9fa9a06">deleter_</a>.get();</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;}</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#a7a74d4003f9f05f0380e9d5482950b0b">  762</a></span>&#160;<span class="keyword">const</span> <a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a> *<a class="code" href="../../df/df7/classXmppServerConnection.html#a9af8f124661f529de7b87bf66dd19338">XmppServerConnection::deleter</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/df7/classXmppServerConnection.html#a9081f9aaa50ca337b3675f5fe9fa9a06">deleter_</a>.get();</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;}</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#ad43c4337df49bc12db1c17085401579c">  766</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../df/df7/classXmppServerConnection.html#ad43c4337df49bc12db1c17085401579c">XmppServerConnection::set_close_reason</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;close_reason) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/df7/classXmppServerConnection.html#a9ff0ab5f882d07ff38de42e7766c9fdb">conn_endpoint_</a>)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="../../df/df7/classXmppServerConnection.html#a9ff0ab5f882d07ff38de42e7766c9fdb">conn_endpoint_</a>-&gt;<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a8646f2cc004ce0835520d936ca6c90c4">set_close_reason</a>(close_reason);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a5fddcca3abb84411a2d2e7815d6904bb">logUVE</a>())</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    XmppPeerInfoData peer_info;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    peer_info.set_name(<a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>());</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    peer_info.set_close_reason(close_reason);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="../../d5/df9/xmpp__connection_8cc.html#ac0fa610ba4da90e0962a9f28a4ba8faa">XMPPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;}</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#a013f81b189d942ae79e018f96603c4ce">  779</a></span>&#160;uint32_t <a class="code" href="../../df/df7/classXmppServerConnection.html#a013f81b189d942ae79e018f96603c4ce">XmppServerConnection::flap_count</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/df7/classXmppServerConnection.html#a9ff0ab5f882d07ff38de42e7766c9fdb">conn_endpoint_</a> ? <a class="code" href="../../df/df7/classXmppServerConnection.html#a9ff0ab5f882d07ff38de42e7766c9fdb">conn_endpoint_</a>-&gt;<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a6a8a2d3f4878a64f5d9ee30f5497c813">flap_count</a>() : 0;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;}</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#a4c690f7eedf8a53460b8618cb3c8a4f2">  783</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../df/df7/classXmppServerConnection.html#a4c690f7eedf8a53460b8618cb3c8a4f2">XmppServerConnection::increment_flap_count</a>() {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html">XmppConnectionEndpoint</a> *<a class="code" href="../../df/df7/classXmppServerConnection.html#a1ab4280f96a6714aa248dea3ec5f8830">conn_endpoint</a> = <a class="code" href="../../df/df7/classXmppServerConnection.html#a9ff0ab5f882d07ff38de42e7766c9fdb">conn_endpoint_</a>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span> (!conn_endpoint)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        conn_endpoint = <a class="code" href="../../df/df7/classXmppServerConnection.html#a3eed068878dc90d3b8ae05ffabbdce22">server</a>()-&gt;<a class="code" href="../../dd/d43/classXmppServer.html#a2c57f24dddfea0d13a6fe99f6c7ca6a8">FindConnectionEndpoint</a>(<a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>());</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">if</span> (!conn_endpoint)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    conn_endpoint-&gt;<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a27a0dbbe7556beaabbcd2debf5704839">increment_flap_count</a>();</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a5fddcca3abb84411a2d2e7815d6904bb">logUVE</a>())</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    XmppPeerInfoData peer_info;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    peer_info.set_name(<a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>());</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    PeerFlapInfo flap_info;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    flap_info.set_flap_count(conn_endpoint-&gt;<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a6a8a2d3f4878a64f5d9ee30f5497c813">flap_count</a>());</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    flap_info.set_flap_time(conn_endpoint-&gt;<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#ac318b70e4e55680a32fce978c63e8162">last_flap</a>());</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    peer_info.set_flap_info(flap_info);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <a class="code" href="../../d5/df9/xmpp__connection_8cc.html#ac0fa610ba4da90e0962a9f28a4ba8faa">XMPPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;}</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div>
<div class="line"><a name="l00803"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#a34e1a259f5ae2af506f4fcc4ef82540c">  803</a></span>&#160;<span class="keyword">const</span> std::string <a class="code" href="../../df/df7/classXmppServerConnection.html#a34e1a259f5ae2af506f4fcc4ef82540c">XmppServerConnection::last_flap_at</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/df7/classXmppServerConnection.html#a9ff0ab5f882d07ff38de42e7766c9fdb">conn_endpoint_</a> ? <a class="code" href="../../df/df7/classXmppServerConnection.html#a9ff0ab5f882d07ff38de42e7766c9fdb">conn_endpoint_</a>-&gt;<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a77cece9acc4c031d9fc59706bf0b2d9d">last_flap_at</a>() : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;}</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno"><a class="line" href="../../df/df7/classXmppServerConnection.html#aa279920d9d87feab9a555394ac66fbd7">  807</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../df/df7/classXmppServerConnection.html#aa279920d9d87feab9a555394ac66fbd7">XmppServerConnection::FillShowInfo</a>(</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    ShowXmppConnection *show_connection)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    show_connection-&gt;set_name(<a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>());</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    show_connection-&gt;set_deleted(<a class="code" href="../../d0/d64/classXmppConnection.html#abfd07e475de5ed01d8ca851ba1752f9b">IsDeleted</a>());</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    show_connection-&gt;set_remote_endpoint(<a class="code" href="../../d0/d64/classXmppConnection.html#ab74495cdc804565fb9978af3c68b614d">endpoint_string</a>());</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    show_connection-&gt;set_local_endpoint(<a class="code" href="../../d0/d64/classXmppConnection.html#a900bce2de9d2c5da1bb868a4eedf4266">local_endpoint_string</a>());</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    show_connection-&gt;set_state(<a class="code" href="../../d0/d64/classXmppConnection.html#a39168dbf07a4ca2084085ffd097325fc">StateName</a>());</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    show_connection-&gt;set_last_event(<a class="code" href="../../d0/d64/classXmppConnection.html#a55f1899ebc1f91b0113f5652d0f44414">LastEvent</a>());</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    show_connection-&gt;set_last_state(<a class="code" href="../../d0/d64/classXmppConnection.html#a703323ddba06cfa13d02c796d52a6737">LastStateName</a>());</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    show_connection-&gt;set_last_state_at(<a class="code" href="../../d0/d64/classXmppConnection.html#abdb7827ae477e7006aa3020102b40567">LastStateChangeAt</a>());</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    show_connection-&gt;set_receivers(<a class="code" href="../../d0/d64/classXmppConnection.html#ae007d93020d1671d2c34a0871f5c1b4b">channel_mux</a>()-&gt;GetReceiverList());</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    show_connection-&gt;set_server_auth_type(<a class="code" href="../../d0/d64/classXmppConnection.html#aed4769d3a2e4dec61df171d3268249ad">GetXmppAuthenticationType</a>());</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    show_connection-&gt;set_dscp_value(<a class="code" href="../../d0/d64/classXmppConnection.html#a5e177c4cb37312ddc15fa5436d206e9e">dscp_value</a>());</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;}</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div>
<div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html">  822</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html">XmppClientConnection::DeleteActor</a> : <span class="keyword">public</span> <a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a> {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00824"></a><span class="lineno"><a class="line" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#a9426457d80d08b9f962edc89291447eb">  824</a></span>&#160;    <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#a9426457d80d08b9f962edc89291447eb">DeleteActor</a>(<a class="code" href="../../db/de5/classXmppClient.html">XmppClient</a> *client, <a class="code" href="../../d0/dc0/classXmppClientConnection.html">XmppClientConnection</a> *parent)</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        : <a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a>(client-&gt;<a class="code" href="../../d0/dc0/classXmppClientConnection.html#a7f67ec79dc40faf7af307794d98d1e7e">lifetime_manager</a>()),</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;          <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aecc36c0be9823a230205a411f6a75491">client_</a>(client), <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">parent_</a>(parent) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#a9c0cb0e93d292953f6cbeea31c26b2dc">  829</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#a9c0cb0e93d292953f6cbeea31c26b2dc">MayDelete</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#abdcae6555f436e83432196df0b016cd8">MayDelete</a>();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div>
<div class="line"><a name="l00833"></a><span class="lineno"><a class="line" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#abe22ab9716d1ea50aecf5bff65328381">  833</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#abe22ab9716d1ea50aecf5bff65328381">Shutdown</a>() {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ac909e1659d9b3909aeb00ef132afd30f">session</a>()) {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aecc36c0be9823a230205a411f6a75491">client_</a>-&gt;<a class="code" href="../../db/de5/classXmppClient.html#a288f7b05d27d45d070ab687277f5aaa1">NotifyConnectionEvent</a>(<a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#a3dde5e2d475d1c7fc85a5ee3018226f7">ChannelMux</a>(),</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                <a class="code" href="../../d8/de0/namespacexmps.html#a60e760317f84c6315a626c91042b17dfaf1bb317e39d8e5cedf19ee0634aa6dde">xmps::NOT_READY</a>);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <a class="code" href="../../d5/d13/classXmppSession.html">XmppSession</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#ac909e1659d9b3909aeb00ef132afd30f">session</a> = NULL;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>()) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            session = <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>()-&gt;<a class="code" href="../../d2/db3/classXmppStateMachine.html#ab8fce539a786bc792ce19a155c51e57d">session</a>();</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">parent_</a>-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">state_machine</a>()-&gt;<a class="code" href="../../d2/db3/classXmppStateMachine.html#a1b3d77109b2418f01b555f179a1543a5">clear_session</a>();</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="keywordflow">if</span> (session) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aecc36c0be9823a230205a411f6a75491">client_</a>-&gt;<a class="code" href="../../de/df9/classTcpServer.html#ac3ac2031ae976926c8a3626d784b43aa">DeleteSession</a>(session);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div>
<div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#a9a27851b387c4751f125ef0cb5aaf043">  849</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#a9a27851b387c4751f125ef0cb5aaf043">Destroy</a>() {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keyword">delete</span> <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">parent_</a>;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00854"></a><span class="lineno"><a class="line" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aecc36c0be9823a230205a411f6a75491">  854</a></span>&#160;    <a class="code" href="../../db/de5/classXmppClient.html">XmppClient</a> *<a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aecc36c0be9823a230205a411f6a75491">client_</a>;</div>
<div class="line"><a name="l00855"></a><span class="lineno"><a class="line" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">  855</a></span>&#160;    <a class="code" href="../../d0/dc0/classXmppClientConnection.html">XmppClientConnection</a> *<a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">parent_</a>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;};</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div>
<div class="line"><a name="l00858"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#ac49f9dddab53354e292677142ecaca5b">  858</a></span>&#160;<a class="code" href="../../d0/dc0/classXmppClientConnection.html#ac49f9dddab53354e292677142ecaca5b">XmppClientConnection::XmppClientConnection</a>(<a class="code" href="../../db/de5/classXmppClient.html">XmppClient</a> *server,</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d0/d8b/classXmppChannelConfig.html">XmppChannelConfig</a> *config)</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    : <a class="code" href="../../d0/d64/classXmppConnection.html">XmppConnection</a>(server, config),</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      flap_count_(0),</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      deleter_(new <a class="code" href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html">DeleteActor</a>(server, this)),</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      server_delete_ref_(this, server-&gt;<a class="code" href="../../db/d83/structdeleter.html">deleter</a>()) {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    assert(config-&gt;<a class="code" href="../../d0/d8b/classXmppChannelConfig.html#a6aa13b7faedb2a685b9a41d4a02387ee">ClientOnly</a>());</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a>(XmppConnectionCreate, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a0c468141e136315bc3b4204f2efd927f">XMPP_PEER_DIR_NA</a>, <span class="stringliteral">&quot;Client&quot;</span>,</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                 <a class="code" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">FromString</a>(), <a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>());</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;}</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div>
<div class="line"><a name="l00869"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#a0376576687cbd768a6d62f97f88cd969">  869</a></span>&#160;<a class="code" href="../../d0/dc0/classXmppClientConnection.html#a0376576687cbd768a6d62f97f88cd969">XmppClientConnection::~XmppClientConnection</a>() {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a>(<span class="stringliteral">&quot;bgp::Config&quot;</span>);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a715b96e4c50770b8fb1059b1ae82f072">XMPP_INFO</a>(XmppConnectionDelete, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a0c468141e136315bc3b4204f2efd927f">XMPP_PEER_DIR_NA</a>,</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;              <span class="stringliteral">&quot;Client&quot;</span>, <a class="code" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">FromString</a>(), <a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>());</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="../../d0/dc0/classXmppClientConnection.html#ac2ffd451fa3b62ee7fa826aab64ff0f4">server</a>()-&gt;<a class="code" href="../../db/de5/classXmppClient.html#a49ace7122bb159458d7e4bf84c867976">RemoveConnection</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;}</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div>
<div class="line"><a name="l00877"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#a3cbcdc19a147d150eb580683819e8e59">  877</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dc0/classXmppClientConnection.html#a3cbcdc19a147d150eb580683819e8e59">XmppClientConnection::ManagedDelete</a>() {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a>(XmppConnectionDelete, <a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>(), <a class="code" href="../../d5/d9f/xmpp__log_8h.html#a0c468141e136315bc3b4204f2efd927f">XMPP_PEER_DIR_NA</a>,</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                 <span class="stringliteral">&quot;Managed Client Delete&quot;</span>, <a class="code" href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">FromString</a>(), <a class="code" href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">ToString</a>());</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="../../d0/dc0/classXmppClientConnection.html#a603f347daca48a6d5beea5e46daf4128">deleter_</a>-&gt;Delete();</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;}</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#adc5636cfecdce9263c6cb105e0198cb4">  883</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dc0/classXmppClientConnection.html#adc5636cfecdce9263c6cb105e0198cb4">XmppClientConnection::RetryDelete</a>() {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dc0/classXmppClientConnection.html#a820b9b063d762445eeea6ac4719cdd15">deleter</a>()-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#abfd07e475de5ed01d8ca851ba1752f9b">IsDeleted</a>())</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="../../d0/dc0/classXmppClientConnection.html#a820b9b063d762445eeea6ac4719cdd15">deleter</a>()-&gt;<a class="code" href="../../dd/d9e/classLifetimeActor.html#a6fd805b59fb8bc1119ee7778f623596c">RetryDelete</a>();</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div>
<div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#a7f67ec79dc40faf7af307794d98d1e7e">  889</a></span>&#160;<a class="code" href="../../dd/d0e/classLifetimeManager.html">LifetimeManager</a> *<a class="code" href="../../d0/dc0/classXmppClientConnection.html#a7f67ec79dc40faf7af307794d98d1e7e">XmppClientConnection::lifetime_manager</a>() {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/dc0/classXmppClientConnection.html#ac2ffd451fa3b62ee7fa826aab64ff0f4">server</a>()-&gt;<a class="code" href="../../db/de5/classXmppClient.html#af63c38ac28aa9b69524f99a12983d62d">lifetime_manager</a>();</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;}</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div>
<div class="line"><a name="l00893"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#ac2ffd451fa3b62ee7fa826aab64ff0f4">  893</a></span>&#160;<a class="code" href="../../db/de5/classXmppClient.html">XmppClient</a> *<a class="code" href="../../d0/dc0/classXmppClientConnection.html#ac2ffd451fa3b62ee7fa826aab64ff0f4">XmppClientConnection::server</a>() {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/de5/classXmppClient.html">XmppClient</a> *<span class="keyword">&gt;</span>(<a class="code" href="../../d0/d64/classXmppConnection.html#abc96724c0337ac039858e29cff9ec423">server_</a>);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;}</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div>
<div class="line"><a name="l00897"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#a820b9b063d762445eeea6ac4719cdd15">  897</a></span>&#160;<a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a> *<a class="code" href="../../d0/dc0/classXmppClientConnection.html#a820b9b063d762445eeea6ac4719cdd15">XmppClientConnection::deleter</a>() {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/dc0/classXmppClientConnection.html#a603f347daca48a6d5beea5e46daf4128">deleter_</a>.get();</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;}</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div>
<div class="line"><a name="l00901"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#a7b2ac401f5a17090bc12e6e229c67d1c">  901</a></span>&#160;<span class="keyword">const</span> <a class="code" href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a> *<a class="code" href="../../d0/dc0/classXmppClientConnection.html#a820b9b063d762445eeea6ac4719cdd15">XmppClientConnection::deleter</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/dc0/classXmppClientConnection.html#a603f347daca48a6d5beea5e46daf4128">deleter_</a>.get();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00905"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#a3634df95a5592689c812726d3d804558">  905</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dc0/classXmppClientConnection.html#a3634df95a5592689c812726d3d804558">XmppClientConnection::set_close_reason</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;close_reason) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="../../d0/dc0/classXmppClientConnection.html#ac64bdf526828a08f911fd31a7f01f842">close_reason_</a> = close_reason;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a5fddcca3abb84411a2d2e7815d6904bb">logUVE</a>())</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    XmppPeerInfoData peer_info;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    peer_info.set_name(<a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>());</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    peer_info.set_close_reason(<a class="code" href="../../d0/dc0/classXmppClientConnection.html#ac64bdf526828a08f911fd31a7f01f842">close_reason_</a>);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <a class="code" href="../../d5/df9/xmpp__connection_8cc.html#ac0fa610ba4da90e0962a9f28a4ba8faa">XMPPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;}</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div>
<div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#a9da8d070c775e4847d62eee711f3c7d7">  916</a></span>&#160;uint32_t <a class="code" href="../../d0/dc0/classXmppClientConnection.html#a9da8d070c775e4847d62eee711f3c7d7">XmppClientConnection::flap_count</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/dc0/classXmppClientConnection.html#acf60f6489ceb95e084233e197171cf7c">flap_count_</a>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;}</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#a49fe5ac53783d95498a5e87389e79a62">  920</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dc0/classXmppClientConnection.html#a49fe5ac53783d95498a5e87389e79a62">XmppClientConnection::increment_flap_count</a>() {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <a class="code" href="../../d0/dc0/classXmppClientConnection.html#acf60f6489ceb95e084233e197171cf7c">flap_count_</a>++;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <a class="code" href="../../d0/dc0/classXmppClientConnection.html#aaf9e3bf25dabecd7a29579324741143c">last_flap_</a> = <a class="code" href="../../d0/d91/time__util_8h.html#afd0d4d28c676a532b89ce6cfd1fc7e95">UTCTimestampUsec</a>();</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d64/classXmppConnection.html#a5fddcca3abb84411a2d2e7815d6904bb">logUVE</a>())</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    XmppPeerInfoData peer_info;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    peer_info.set_name(<a class="code" href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">ToUVEKey</a>());</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    PeerFlapInfo flap_info;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    flap_info.set_flap_count(<a class="code" href="../../d0/dc0/classXmppClientConnection.html#acf60f6489ceb95e084233e197171cf7c">flap_count_</a>);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    flap_info.set_flap_time(<a class="code" href="../../d0/dc0/classXmppClientConnection.html#aaf9e3bf25dabecd7a29579324741143c">last_flap_</a>);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    peer_info.set_flap_info(flap_info);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="../../d5/df9/xmpp__connection_8cc.html#ac0fa610ba4da90e0962a9f28a4ba8faa">XMPPPeerInfoSend</a>(peer_info);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;}</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno"><a class="line" href="../../d0/dc0/classXmppClientConnection.html#a99f269e889a50eb90c40cf6dc34df65b">  936</a></span>&#160;<span class="keyword">const</span> std::string <a class="code" href="../../d0/dc0/classXmppClientConnection.html#a99f269e889a50eb90c40cf6dc34df65b">XmppClientConnection::last_flap_at</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/dc0/classXmppClientConnection.html#aaf9e3bf25dabecd7a29579324741143c">last_flap_</a> ? <a class="code" href="../../dd/d70/string__util_8h.html#abf0bb328a638b537a16cc43e3014ab72">integerToString</a>(<a class="code" href="../../d0/d91/time__util_8h.html#a31337b6b9e97c9c772ea8fe38dcf92c8">UTCUsecToPTime</a>(<a class="code" href="../../d0/dc0/classXmppClientConnection.html#aaf9e3bf25dabecd7a29579324741143c">last_flap_</a>)) : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;}</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div>
<div class="line"><a name="l00940"></a><span class="lineno"><a class="line" href="../../d7/dcc/classXmppConnectionEndpoint.html#a1fb9e84d4a4a398a49413dd20680f31f">  940</a></span>&#160;<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a1fb9e84d4a4a398a49413dd20680f31f">XmppConnectionEndpoint::XmppConnectionEndpoint</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;client)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    : client_(client), flap_count_(0), last_flap_(0), connection_(NULL) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;}</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno"><a class="line" href="../../d7/dcc/classXmppConnectionEndpoint.html#a8646f2cc004ce0835520d936ca6c90c4">  944</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a8646f2cc004ce0835520d936ca6c90c4">XmppConnectionEndpoint::set_close_reason</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;close_reason) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#ade8ba7451609ac89e51a9cae7b524207">close_reason_</a> = close_reason;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;}</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div>
<div class="line"><a name="l00948"></a><span class="lineno"><a class="line" href="../../d7/dcc/classXmppConnectionEndpoint.html#a6a8a2d3f4878a64f5d9ee30f5497c813">  948</a></span>&#160;uint32_t <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a6a8a2d3f4878a64f5d9ee30f5497c813">XmppConnectionEndpoint::flap_count</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a2dc8a9291b989ebd4e5471ad95533ae4">flap_count_</a>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div>
<div class="line"><a name="l00952"></a><span class="lineno"><a class="line" href="../../d7/dcc/classXmppConnectionEndpoint.html#a27a0dbbe7556beaabbcd2debf5704839">  952</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a27a0dbbe7556beaabbcd2debf5704839">XmppConnectionEndpoint::increment_flap_count</a>() {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a2dc8a9291b989ebd4e5471ad95533ae4">flap_count_</a>++;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#aeff44d5b8bf6c23b5ef3a76c6b3e65f1">last_flap_</a> = <a class="code" href="../../d0/d91/time__util_8h.html#afd0d4d28c676a532b89ce6cfd1fc7e95">UTCTimestampUsec</a>();</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;}</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div>
<div class="line"><a name="l00957"></a><span class="lineno"><a class="line" href="../../d7/dcc/classXmppConnectionEndpoint.html#ac318b70e4e55680a32fce978c63e8162">  957</a></span>&#160;uint64_t <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#ac318b70e4e55680a32fce978c63e8162">XmppConnectionEndpoint::last_flap</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#aeff44d5b8bf6c23b5ef3a76c6b3e65f1">last_flap_</a>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;}</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno"><a class="line" href="../../d7/dcc/classXmppConnectionEndpoint.html#a77cece9acc4c031d9fc59706bf0b2d9d">  961</a></span>&#160;<span class="keyword">const</span> std::string <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a77cece9acc4c031d9fc59706bf0b2d9d">XmppConnectionEndpoint::last_flap_at</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#aeff44d5b8bf6c23b5ef3a76c6b3e65f1">last_flap_</a> ? <a class="code" href="../../dd/d70/string__util_8h.html#abf0bb328a638b537a16cc43e3014ab72">integerToString</a>(<a class="code" href="../../d0/d91/time__util_8h.html#a31337b6b9e97c9c772ea8fe38dcf92c8">UTCUsecToPTime</a>(<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#aeff44d5b8bf6c23b5ef3a76c6b3e65f1">last_flap_</a>)) : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div>
<div class="line"><a name="l00965"></a><span class="lineno"><a class="line" href="../../d7/dcc/classXmppConnectionEndpoint.html#aa3feddf908a2bb62311371840c5db71b">  965</a></span>&#160;<a class="code" href="../../d0/d64/classXmppConnection.html">XmppConnection</a> *<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#aa3feddf908a2bb62311371840c5db71b">XmppConnectionEndpoint::connection</a>() {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#abc043df6fe89e6ac2b173c315e110f16">connection_</a>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;}</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div>
<div class="line"><a name="l00969"></a><span class="lineno"><a class="line" href="../../d7/dcc/classXmppConnectionEndpoint.html#a0482956ecee1f3134358f830f16a04de">  969</a></span>&#160;<span class="keyword">const</span> <a class="code" href="../../d0/d64/classXmppConnection.html">XmppConnection</a> *<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#aa3feddf908a2bb62311371840c5db71b">XmppConnectionEndpoint::connection</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#abc043df6fe89e6ac2b173c315e110f16">connection_</a>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;}</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div>
<div class="line"><a name="l00973"></a><span class="lineno"><a class="line" href="../../d7/dcc/classXmppConnectionEndpoint.html#a00a30b2a5548bb6de987c3239d50b8a5">  973</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a00a30b2a5548bb6de987c3239d50b8a5">XmppConnectionEndpoint::set_connection</a>(<a class="code" href="../../d0/d64/classXmppConnection.html">XmppConnection</a> *connection) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    assert(!<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#abc043df6fe89e6ac2b173c315e110f16">connection_</a>);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#abc043df6fe89e6ac2b173c315e110f16">connection_</a> = <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#aa3feddf908a2bb62311371840c5db71b">connection</a>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;}</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div>
<div class="line"><a name="l00978"></a><span class="lineno"><a class="line" href="../../d7/dcc/classXmppConnectionEndpoint.html#a06d9c210e11cc6d0a7a0a5b9f4c29d55">  978</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#a06d9c210e11cc6d0a7a0a5b9f4c29d55">XmppConnectionEndpoint::reset_connection</a>() {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    assert(<a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#abc043df6fe89e6ac2b173c315e110f16">connection_</a>);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="../../d7/dcc/classXmppConnectionEndpoint.html#abc043df6fe89e6ac2b173c315e110f16">connection_</a> = NULL;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;}</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">// Swap relavent contents between two XmppConnection objects.</span></div>
<div class="line"><a name="l00984"></a><span class="lineno"><a class="line" href="../../d0/d64/classXmppConnection.html#a4f2471c01d3644cb972d0abab4602015">  984</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d64/classXmppConnection.html#a4f2471c01d3644cb972d0abab4602015">XmppConnection::SwapContents</a>(<a class="code" href="../../d0/d64/classXmppConnection.html">XmppConnection</a> *other) {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    assert(!<a class="code" href="../../d0/d64/classXmppConnection.html#a3ff26874a02bbf1a5ae1159813788c75">IsClient</a>());</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    assert(!other-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#a3ff26874a02bbf1a5ae1159813788c75">IsClient</a>());</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="comment">// Update the ConnectionMap in the server as the endpoints are the keys.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="../../dd/d43/classXmppServer.html">XmppServer</a> *<a class="code" href="../../d0/d64/classXmppConnection.html#a7045789e03b4adfe8bdf3742935bcfd0">server</a> = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../df/df7/classXmppServerConnection.html">XmppServerConnection</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#a7045789e03b4adfe8bdf3742935bcfd0">server</a>();</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    server-&gt;SwapXmppConnectionMapEntries(<span class="keyword">this</span>, other);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="comment">// Swap all other connection related information.</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    swap(<a class="code" href="../../d0/d64/classXmppConnection.html#a0121b0b782cec4a5c2cb1f4a05ae7e22">local_endpoint_</a>, other-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#a0121b0b782cec4a5c2cb1f4a05ae7e22">local_endpoint_</a>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    swap(<a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>, other-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">stats_</a>);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    swap(<a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>, other-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">error_stats_</a>);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    swap(<a class="code" href="../../d0/d64/classXmppConnection.html#aa4421116f53058dd444b13ab2ace9ba8">last_msg_</a>, other-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#aa4421116f53058dd444b13ab2ace9ba8">last_msg_</a>);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    swap(<a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>, other-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">to_</a>);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    swap(<a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>, other-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">from_</a>);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    swap(<a class="code" href="../../d0/d64/classXmppConnection.html#a44354a2190bbbf60a495a8272031c378">xmlns_</a>, other-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#a44354a2190bbbf60a495a8272031c378">xmlns_</a>);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    swap(<a class="code" href="../../d0/d64/classXmppConnection.html#a36bd7bc049016e397d8a9d99124841eb">dscp_value_</a>, other-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#a36bd7bc049016e397d8a9d99124841eb">dscp_value_</a>);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    swap(<a class="code" href="../../d0/d64/classXmppConnection.html#ac56bf7207d3f33cb75e20c040f0015f8">disable_read_</a>, other-&gt;<a class="code" href="../../d0/d64/classXmppConnection.html#ac56bf7207d3f33cb75e20c040f0015f8">disable_read_</a>);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;}</div>
<div class="ttc" id="classXmppConnection_html_aabcc7038e071406e320dddf2e2e24d08"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#aabcc7038e071406e320dddf2e2e24d08">XmppConnection::FromString</a></div><div class="ttdeci">const std::string &amp; FromString() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00188">xmpp_connection.cc:188</a></div></div>
<div class="ttc" id="classXmppConnection_html_a901ea563b63b641f51fb8585a5fc29b0"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a901ea563b63b641f51fb8585a5fc29b0">XmppConnection::SetTo</a></div><div class="ttdeci">void SetTo(const std::string &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00205">xmpp_connection.cc:205</a></div></div>
<div class="ttc" id="classXmppConnection_html_ab39306525305353260bcba962c52183d"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ab39306525305353260bcba962c52183d">XmppConnection::WriteReady</a></div><div class="ttdeci">virtual void WriteReady()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00112">xmpp_connection.cc:112</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_a603f347daca48a6d5beea5e46daf4128"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#a603f347daca48a6d5beea5e46daf4128">XmppClientConnection::deleter_</a></div><div class="ttdeci">boost::scoped_ptr&lt; DeleteActor &gt; deleter_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00346">xmpp_connection.h:346</a></div></div>
<div class="ttc" id="structdeleter_html"><div class="ttname"><a href="../../db/d83/structdeleter.html">deleter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/src_2contrail-common_2base_2proto_8cc_source.html#l00029">src/contrail-common/base/proto.cc:29</a></div></div>
<div class="ttc" id="xmpp__log_8h_html_a811ca185f374ba3a3c225d8eafea4239"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html#a811ca185f374ba3a3c225d8eafea4239">XMPP_MESSAGE_TRACE</a></div><div class="ttdeci">#define XMPP_MESSAGE_TRACE(obj,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/xmpp__log_8h_source.html#l00078">xmpp_log.h:78</a></div></div>
<div class="ttc" id="classXmppClient_html_af63c38ac28aa9b69524f99a12983d62d"><div class="ttname"><a href="../../db/de5/classXmppClient.html#af63c38ac28aa9b69524f99a12983d62d">XmppClient::lifetime_manager</a></div><div class="ttdeci">LifetimeManager * lifetime_manager()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d31/xmpp__client_8cc_source.html#l00131">xmpp_client.cc:131</a></div></div>
<div class="ttc" id="classXmppStanza_html_a759a6c341a7b7760a396d5f7a6f2aacaa17f45e3d79a81c7aa46193c9e30a404f"><div class="ttname"><a href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaa17f45e3d79a81c7aa46193c9e30a404f">XmppStanza::MESSAGE_STANZA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00018">xmpp_proto.h:18</a></div></div>
<div class="ttc" id="classXmppConnection_html_a4c78412d53e6f116b555757c8ddee973"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a4c78412d53e6f116b555757c8ddee973">XmppConnection::CreateSession</a></div><div class="ttdeci">XmppSession * CreateSession()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00129">xmpp_connection.cc:129</a></div></div>
<div class="ttc" id="classTcpSession_html_aa06f428b75d73fc1868c5dc2eec8550e"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aa06f428b75d73fc1868c5dc2eec8550e">TcpSession::Endpoint</a></div><div class="ttdeci">boost::asio::ip::tcp::endpoint Endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00062">tcp_session.h:62</a></div></div>
<div class="ttc" id="classXmppConnection_html_abdcae6555f436e83432196df0b016cd8"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#abdcae6555f436e83432196df0b016cd8">XmppConnection::MayDelete</a></div><div class="ttdeci">bool MayDelete() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00125">xmpp_connection.cc:125</a></div></div>
<div class="ttc" id="lifetime_8h_html"><div class="ttname"><a href="../../dc/d11/lifetime_8h.html">lifetime.h</a></div></div>
<div class="ttc" id="classXmppSession_html_a8557946a9346d92fdde9f2ed6b543305"><div class="ttname"><a href="../../d5/d13/classXmppSession.html#a8557946a9346d92fdde9f2ed6b543305">XmppSession::ClearConnection</a></div><div class="ttdeci">void ClearConnection()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/de6/xmpp__session_8cc_source.html#l00063">xmpp_session.cc:63</a></div></div>
<div class="ttc" id="classXmppConnection_html_ad69716f1a60d068527132393b085de9c"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ad69716f1a60d068527132393b085de9c">XmppConnection::Shutdown</a></div><div class="ttdeci">void Shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00117">xmpp_connection.cc:117</a></div></div>
<div class="ttc" id="classXmppConnection_html_a39168dbf07a4ca2084085ffd097325fc"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a39168dbf07a4ca2084085ffd097325fc">XmppConnection::StateName</a></div><div class="ttdeci">std::string StateName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00162">xmpp_connection.h:162</a></div></div>
<div class="ttc" id="xmpp__log_8h_html_a2f42185f51b4d00f20ffdf2be45193c5"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html#a2f42185f51b4d00f20ffdf2be45193c5">XMPP_UTDEBUG</a></div><div class="ttdeci">#define XMPP_UTDEBUG(obj,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/xmpp__log_8h_source.html#l00067">xmpp_log.h:67</a></div></div>
<div class="ttc" id="classXmppServer_html_a1d70e8dc35aaacfc9eaf2e244b31e293"><div class="ttname"><a href="../../dd/d43/classXmppServer.html#a1d70e8dc35aaacfc9eaf2e244b31e293">XmppServer::lifetime_manager</a></div><div class="ttdeci">LifetimeManager * lifetime_manager()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d3a/xmpp__server_8cc_source.html#l00360">xmpp_server.cc:360</a></div></div>
<div class="ttc" id="classXmppStanza_1_1XmppMessage_html_a008fe2b37ed43a5ef60d5d056cce1969"><div class="ttname"><a href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html#a008fe2b37ed43a5ef60d5d056cce1969">XmppStanza::XmppMessage::type</a></div><div class="ttdeci">XmppMessageType type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00057">xmpp_proto.h:57</a></div></div>
<div class="ttc" id="xmpp__log_8h_html_a715b96e4c50770b8fb1059b1ae82f072"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html#a715b96e4c50770b8fb1059b1ae82f072">XMPP_INFO</a></div><div class="ttdeci">#define XMPP_INFO(obj,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/xmpp__log_8h_source.html#l00051">xmpp_log.h:51</a></div></div>
<div class="ttc" id="classXmppConnection_html_a97fe3f3c111ff08cc337ba4898694f78"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a97fe3f3c111ff08cc337ba4898694f78">XmppConnection::to_</a></div><div class="ttdeci">std::string to_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00266">xmpp_connection.h:266</a></div></div>
<div class="ttc" id="classXmppConnection_html_aa2932687551c8614c2c78adcf7aa84d7"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#aa2932687551c8614c2c78adcf7aa84d7">XmppConnection::get_stream_feature_fail</a></div><div class="ttdeci">size_t get_stream_feature_fail()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00544">xmpp_connection.cc:544</a></div></div>
<div class="ttc" id="classTcpServer_html_ac3ac2031ae976926c8a3626d784b43aa"><div class="ttname"><a href="../../de/df9/classTcpServer.html#ac3ac2031ae976926c8a3626d784b43aa">TcpServer::DeleteSession</a></div><div class="ttdeci">virtual void DeleteSession(TcpSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d86/tcp__server_8cc_source.html#l00197">tcp_server.cc:197</a></div></div>
<div class="ttc" id="classXmppConnection_html_a7de5854dd03390d0bee380194a3ecebd"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a7de5854dd03390d0bee380194a3ecebd">XmppConnection::SetConfig</a></div><div class="ttdeci">void SetConfig(const XmppChannelConfig *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00083">xmpp_connection.cc:83</a></div></div>
<div class="ttc" id="structXmppConnection_1_1ProtoStats_html_abc0f05e7aed3cceea3097ca501abae4e"><div class="ttname"><a href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#abc0f05e7aed3cceea3097ca501abae4e">XmppConnection::ProtoStats::update</a></div><div class="ttdeci">tbb::atomic&lt; uint32_t &gt; update</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00042">xmpp_connection.h:42</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppStreamMessage_html_a4589b18d0fe6af4763e2b1225adb356cae255d7b172302cabc4547892627ba153"><div class="ttname"><a href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a4589b18d0fe6af4763e2b1225adb356cae255d7b172302cabc4547892627ba153">XmppStanza::XmppStreamMessage::INIT_STREAM_HEADER_RESP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00081">xmpp_proto.h:81</a></div></div>
<div class="ttc" id="classTaskScheduler_html"><div class="ttname"><a href="../../df/ddc/classTaskScheduler.html">TaskScheduler</a></div><div class="ttdoc">The TaskScheduler keeps track of what tasks are currently schedulable. When a task is enqueued it is ...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da4/task_8h_source.html#l00178">task.h:178</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_ad43c4337df49bc12db1c17085401579c"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#ad43c4337df49bc12db1c17085401579c">XmppServerConnection::set_close_reason</a></div><div class="ttdeci">virtual void set_close_reason(const std::string &amp;reason)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00766">xmpp_connection.cc:766</a></div></div>
<div class="ttc" id="classXmppConnection_html_a8bddb4a473da1bc436f02e841e2858ed"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a8bddb4a473da1bc436f02e841e2858ed">XmppConnection::AcceptSession</a></div><div class="ttdeci">virtual bool AcceptSession(XmppSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00221">xmpp_connection.cc:221</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a3eed068878dc90d3b8ae05ffabbdce22"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a3eed068878dc90d3b8ae05ffabbdce22">XmppServerConnection::server</a></div><div class="ttdeci">XmppServer * server()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00754">xmpp_connection.cc:754</a></div></div>
<div class="ttc" id="classXmppConnection_html_ac127fa7ebba9aef84953d764778e6607"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ac127fa7ebba9aef84953d764778e6607">XmppConnection::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00132">xmpp_connection.h:132</a></div></div>
<div class="ttc" id="classXmppConnection_html_a0bc9de10e900e7c871667501a5a5e18c"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a0bc9de10e900e7c871667501a5a5e18c">XmppConnection::deleter</a></div><div class="ttdeci">virtual LifetimeActor * deleter()=0</div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_a77cece9acc4c031d9fc59706bf0b2d9d"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#a77cece9acc4c031d9fc59706bf0b2d9d">XmppConnectionEndpoint::last_flap_at</a></div><div class="ttdeci">const std::string last_flap_at() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00961">xmpp_connection.cc:961</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_a99f269e889a50eb90c40cf6dc34df65b"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#a99f269e889a50eb90c40cf6dc34df65b">XmppClientConnection::last_flap_at</a></div><div class="ttdeci">virtual const std::string last_flap_at() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00936">xmpp_connection.cc:936</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_af16a9cbc1ea49fdc8dd21c67fc9359e5"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#af16a9cbc1ea49fdc8dd21c67fc9359e5">XmppServerConnection::~XmppServerConnection</a></div><div class="ttdeci">virtual ~XmppServerConnection()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00730">xmpp_connection.cc:730</a></div></div>
<div class="ttc" id="classXmppServer_html_aed52236e7264834394bdb0f6fe619a62"><div class="ttname"><a href="../../dd/d43/classXmppServer.html#aed52236e7264834394bdb0f6fe619a62">XmppServer::InsertDeletedConnection</a></div><div class="ttdeci">virtual void InsertDeletedConnection(XmppServerConnection *connection)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d3a/xmpp__server_8cc_source.html#l00660">xmpp_server.cc:660</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_a6a8a2d3f4878a64f5d9ee30f5497c813"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#a6a8a2d3f4878a64f5d9ee30f5497c813">XmppConnectionEndpoint::flap_count</a></div><div class="ttdeci">uint32_t flap_count() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00948">xmpp_connection.cc:948</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppStreamMessage_html_a73ecf35ee8a85fc9c1f11bc0862ac6f3"><div class="ttname"><a href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a73ecf35ee8a85fc9c1f11bc0862ac6f3">XmppStanza::XmppStreamMessage::strmtlstype</a></div><div class="ttdeci">XmppStreamTlsType strmtlstype</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00099">xmpp_proto.h:99</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppStreamMessage_html_a4589b18d0fe6af4763e2b1225adb356ca4fde9f012d6ca67b2e445ddd05022bb0"><div class="ttname"><a href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a4589b18d0fe6af4763e2b1225adb356ca4fde9f012d6ca67b2e445ddd05022bb0">XmppStanza::XmppStreamMessage::FEATURE_TLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00083">xmpp_proto.h:83</a></div></div>
<div class="ttc" id="classXmppConnection_html_a70433a057970c935645676c5e911d7d9"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a70433a057970c935645676c5e911d7d9">XmppConnection::KeepaliveTimerErrorHanlder</a></div><div class="ttdeci">void KeepaliveTimerErrorHanlder(std::string error_name, std::string error_message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00452">xmpp_connection.cc:452</a></div></div>
<div class="ttc" id="classXmppConnection_html_aaaa422cab22b8b64023f21b0b0a956a8"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#aaaa422cab22b8b64023f21b0b0a956a8">XmppConnection::inc_stream_feature_fail</a></div><div class="ttdeci">void inc_stream_feature_fail()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00524">xmpp_connection.cc:524</a></div></div>
<div class="ttc" id="xmpp__session_8h_html"><div class="ttname"><a href="../../d4/d86/xmpp__session_8h.html">xmpp_session.h</a></div></div>
<div class="ttc" id="structXmppConnection_1_1ProtoStats_html_a7cd435c6d9b416e28934295d7fc36037"><div class="ttname"><a href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#a7cd435c6d9b416e28934295d7fc36037">XmppConnection::ProtoStats::open</a></div><div class="ttdeci">tbb::atomic&lt; uint32_t &gt; open</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00039">xmpp_connection.h:39</a></div></div>
<div class="ttc" id="structXmppConnection_1_1ProtoStats_html_a7e44c45cc9bf96a57af420f27e43bb77"><div class="ttname"><a href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#a7e44c45cc9bf96a57af420f27e43bb77">XmppConnection::ProtoStats::close</a></div><div class="ttdeci">tbb::atomic&lt; uint32_t &gt; close</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00040">xmpp_connection.h:40</a></div></div>
<div class="ttc" id="xmpp__log_8h_html_a0c468141e136315bc3b4204f2efd927f"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html#a0c468141e136315bc3b4204f2efd927f">XMPP_PEER_DIR_NA</a></div><div class="ttdeci">#define XMPP_PEER_DIR_NA</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/xmpp__log_8h_source.html#l00016">xmpp_log.h:16</a></div></div>
<div class="ttc" id="classXmppConnection_html_a103e99a7c914f284452486c9ca0f14eb"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a103e99a7c914f284452486c9ca0f14eb">XmppConnection::KeepAliveTimerExpired</a></div><div class="ttdeci">bool KeepAliveTimerExpired()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00439">xmpp_connection.cc:439</a></div></div>
<div class="ttc" id="classXmppServerConnection_html"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html">XmppServerConnection</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00283">xmpp_connection.h:283</a></div></div>
<div class="ttc" id="classXmppConnection_html_a9b7f712ad2a6065922418560f0471c04"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a9b7f712ad2a6065922418560f0471c04">XmppConnection::config_</a></div><div class="ttdeci">const XmppChannelConfig * config_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00255">xmpp_connection.h:255</a></div></div>
<div class="ttc" id="classXmppStateMachine_html_adda19a1981ee8f7fb42aa7a0e3db83eb"><div class="ttname"><a href="../../d2/db3/classXmppStateMachine.html#adda19a1981ee8f7fb42aa7a0e3db83eb">XmppStateMachine::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d03/xmpp__state__machine_8cc_source.html#l01507">xmpp_state_machine.cc:1507</a></div></div>
<div class="ttc" id="classXmppClientConnection_1_1DeleteActor_html_aecc36c0be9823a230205a411f6a75491"><div class="ttname"><a href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aecc36c0be9823a230205a411f6a75491">XmppClientConnection::DeleteActor::client_</a></div><div class="ttdeci">XmppClient * client_</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00854">xmpp_connection.cc:854</a></div></div>
<div class="ttc" id="classXmppConnection_html_a91a31f2086051b21b814d75b802c3c64"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a91a31f2086051b21b814d75b802c3c64">XmppConnection::endpoint</a></div><div class="ttdeci">virtual boost::asio::ip::tcp::endpoint endpoint() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00168">xmpp_connection.cc:168</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a2c0402afc18ec342a22d6e9ab250c938"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a2c0402afc18ec342a22d6e9ab250c938">XmppServerConnection::XmppServerConnection</a></div><div class="ttdeci">XmppServerConnection(XmppServer *server, const XmppChannelConfig *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00717">xmpp_connection.cc:717</a></div></div>
<div class="ttc" id="namespacexmsm_html_a13e4110c24303450a8754927d5c280bfae2fd8f260c7b11626279cd8cfa709bbc"><div class="ttname"><a href="../../d8/d9a/namespacexmsm.html#a13e4110c24303450a8754927d5c280bfae2fd8f260c7b11626279cd8cfa709bbc">xmsm::EvTLSHANDSHAKE_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/xmpp__state__machine_8h_source.html#l00049">xmpp_state_machine.h:49</a></div></div>
<div class="ttc" id="classXmppConnection_html_ab74495cdc804565fb9978af3c68b614d"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ab74495cdc804565fb9978af3c68b614d">XmppConnection::endpoint_string</a></div><div class="ttdeci">std::string endpoint_string() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00176">xmpp_connection.cc:176</a></div></div>
<div class="ttc" id="classXmppConnection_html_a6868fbdc35620e86a34149e8f4b80a15"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a6868fbdc35620e86a34149e8f4b80a15">XmppConnection::UpdateKeepAliveTimer</a></div><div class="ttdeci">void UpdateKeepAliveTimer(uint8_t time_out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00477">xmpp_connection.cc:477</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a1ab4280f96a6714aa248dea3ec5f8830"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a1ab4280f96a6714aa248dea3ec5f8830">XmppServerConnection::conn_endpoint</a></div><div class="ttdeci">XmppConnectionEndpoint * conn_endpoint()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00307">xmpp_connection.h:307</a></div></div>
<div class="ttc" id="xmpp__log_8h_html_acd5de5da711fce3da27618a2408610f8"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html#acd5de5da711fce3da27618a2408610f8">XMPP_PEER_DIR_IN</a></div><div class="ttdeci">#define XMPP_PEER_DIR_IN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/xmpp__log_8h_source.html#l00015">xmpp_log.h:15</a></div></div>
<div class="ttc" id="address_8h_html_a7055b8d880410aad1e3ba8c041397b6c"><div class="ttname"><a href="../../d9/d9b/address_8h.html#a7055b8d880410aad1e3ba8c041397b6c">IpAddress</a></div><div class="ttdeci">boost::asio::ip::address IpAddress</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9b/address_8h_source.html#l00013">address.h:13</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_a06d9c210e11cc6d0a7a0a5b9f4c29d55"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#a06d9c210e11cc6d0a7a0a5b9f4c29d55">XmppConnectionEndpoint::reset_connection</a></div><div class="ttdeci">void reset_connection()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00978">xmpp_connection.cc:978</a></div></div>
<div class="ttc" id="classXmppConnection_html_afd6df334232d4f183369756059c1f778"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#afd6df334232d4f183369756059c1f778">XmppConnection::get_sm_keepalive_count</a></div><div class="ttdeci">size_t get_sm_keepalive_count()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00556">xmpp_connection.cc:556</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a0eb2c91a6dfa4b4e494ea132978534f0"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a0eb2c91a6dfa4b4e494ea132978534f0">XmppServerConnection::on_work_queue</a></div><div class="ttdeci">bool on_work_queue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00303">xmpp_connection.h:303</a></div></div>
<div class="ttc" id="classTcpServer_html_a8a756a7ea5037e05e7c8840ff4cfa06f"><div class="ttname"><a href="../../de/df9/classTcpServer.html#a8a756a7ea5037e05e7c8840ff4cfa06f">TcpServer::CreateSession</a></div><div class="ttdeci">virtual TcpSession * CreateSession()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d86/tcp__server_8cc_source.html#l00188">tcp_server.cc:188</a></div></div>
<div class="ttc" id="classXmppClientConnection_1_1DeleteActor_html_abe22ab9716d1ea50aecf5bff65328381"><div class="ttname"><a href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#abe22ab9716d1ea50aecf5bff65328381">XmppClientConnection::DeleteActor::Shutdown</a></div><div class="ttdeci">virtual void Shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00833">xmpp_connection.cc:833</a></div></div>
<div class="ttc" id="classXmppStanza_html_a759a6c341a7b7760a396d5f7a6f2aacaa2f4d00b451e8e6ff143ff6cd28091f61"><div class="ttname"><a href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaa2f4d00b451e8e6ff143ff6cd28091f61">XmppStanza::INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00016">xmpp_proto.h:16</a></div></div>
<div class="ttc" id="classXmppConnection_html_a296b30c3678e2996b23b0dc8c2ff591e"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a296b30c3678e2996b23b0dc8c2ff591e">XmppConnection::keepalive_timer_</a></div><div class="ttdeci">Timer * keepalive_timer_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00259">xmpp_connection.h:259</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a0e0d78cfa0a417ef900360b84eb2ad75"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a0e0d78cfa0a417ef900360b84eb2ad75">XmppServerConnection::ManagedDelete</a></div><div class="ttdeci">virtual void ManagedDelete()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00738">xmpp_connection.cc:738</a></div></div>
<div class="ttc" id="classXmppConnection_html_a4e41efc97785d44dc7429da9c024b15e"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a4e41efc97785d44dc7429da9c024b15e">XmppConnection::inc_handshake_failure</a></div><div class="ttdeci">void inc_handshake_failure()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00528">xmpp_connection.cc:528</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_a8646f2cc004ce0835520d936ca6c90c4"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#a8646f2cc004ce0835520d936ca6c90c4">XmppConnectionEndpoint::set_close_reason</a></div><div class="ttdeci">void set_close_reason(const std::string &amp;close_reason)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00944">xmpp_connection.cc:944</a></div></div>
<div class="ttc" id="classXmlBase_html_aa3bebedc9fa0039f736a788935345d53"><div class="ttname"><a href="../../d2/d78/classXmlBase.html#aa3bebedc9fa0039f736a788935345d53">XmlBase::ReadNode</a></div><div class="ttdeci">virtual const char * ReadNode(const std::string &amp;name)=0</div></div>
<div class="ttc" id="ssl__session_8h_html_a81dc2f91d3597fbbb94755d925f348f5"><div class="ttname"><a href="../../d7/d8c/ssl__session_8h.html#a81dc2f91d3597fbbb94755d925f348f5">SslSessionPtr</a></div><div class="ttdeci">boost::intrusive_ptr&lt; SslSession &gt; SslSessionPtr</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/ssl__session_8h_source.html#l00011">ssl_session.h:11</a></div></div>
<div class="ttc" id="classXmppConnection_html_a3a9cea2043962cf46721449f0bace0a9"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a3a9cea2043962cf46721449f0bace0a9">XmppConnection::from_</a></div><div class="ttdeci">std::string from_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00265">xmpp_connection.h:265</a></div></div>
<div class="ttc" id="xmpp__log_8h_html_a2b4e7f11545b2b7b034f13d5ba8861ea"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html#a2b4e7f11545b2b7b034f13d5ba8861ea">XMPP_PEER_DIR_OUT</a></div><div class="ttdeci">#define XMPP_PEER_DIR_OUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/xmpp__log_8h_source.html#l00014">xmpp_log.h:14</a></div></div>
<div class="ttc" id="structXmppStaticObjectFactory_html"><div class="ttname"><a href="../../d2/d0e/structXmppStaticObjectFactory.html">XmppStaticObjectFactory</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3c/xmpp__factory_8h_source.html#l00021">xmpp_factory.h:21</a></div></div>
<div class="ttc" id="namespacexmsm_html_a13e4110c24303450a8754927d5c280bfa8603ba16e03c76fdb74d20a0b78aeb39"><div class="ttname"><a href="../../d8/d9a/namespacexmsm.html#a13e4110c24303450a8754927d5c280bfa8603ba16e03c76fdb74d20a0b78aeb39">xmsm::EvTLSHANDSHAKE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/xmpp__state__machine_8h_source.html#l00050">xmpp_state_machine.h:50</a></div></div>
<div class="ttc" id="structXmppConnection_1_1ProtoStats_html_a168a92cf4aeb7347999a0f54ad34eac6"><div class="ttname"><a href="../../d2/d27/structXmppConnection_1_1ProtoStats.html#a168a92cf4aeb7347999a0f54ad34eac6">XmppConnection::ProtoStats::keepalive</a></div><div class="ttdeci">tbb::atomic&lt; uint32_t &gt; keepalive</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00041">xmpp_connection.h:41</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html">XmppConnectionEndpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00350">xmpp_connection.h:350</a></div></div>
<div class="ttc" id="classXmppConnection_html_a984d2a28f3876d7a8166064f3b6a6ebc"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a984d2a28f3876d7a8166064f3b6a6ebc">XmppConnection::StartKeepAliveTimer</a></div><div class="ttdeci">void StartKeepAliveTimer()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00458">xmpp_connection.cc:458</a></div></div>
<div class="ttc" id="classXmppConnection_html"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html">XmppConnection</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00030">xmpp_connection.h:30</a></div></div>
<div class="ttc" id="classXmppStanza_html_a759a6c341a7b7760a396d5f7a6f2aacaa1c46281f625db717e28352463c58aa4f"><div class="ttname"><a href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaa1c46281f625db717e28352463c58aa4f">XmppStanza::STREAM_HEADER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00017">xmpp_proto.h:17</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppChatMessage_html"><div class="ttname"><a href="../../d7/d96/structXmppStanza_1_1XmppChatMessage.html">XmppStanza::XmppChatMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00108">xmpp_proto.h:108</a></div></div>
<div class="ttc" id="namespacexmsm_html_aff2ff949508f095b9bff51189aefc307"><div class="ttname"><a href="../../d8/d9a/namespacexmsm.html#aff2ff949508f095b9bff51189aefc307">xmsm::XmOpenConfirmState</a></div><div class="ttdeci">XmOpenConfirmState</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/xmpp__state__machine_8h_source.html#l00041">xmpp_state_machine.h:41</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_a0376576687cbd768a6d62f97f88cd969"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#a0376576687cbd768a6d62f97f88cd969">XmppClientConnection::~XmppClientConnection</a></div><div class="ttdeci">virtual ~XmppClientConnection()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00869">xmpp_connection.cc:869</a></div></div>
<div class="ttc" id="structXmppConnection_1_1ErrorStats_html_af7ab5b1786f87e0a39a660b7c3e0f48f"><div class="ttname"><a href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#af7ab5b1786f87e0a39a660b7c3e0f48f">XmppConnection::ErrorStats::open_fail</a></div><div class="ttdeci">tbb::atomic&lt; uint32_t &gt; open_fail</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00055">xmpp_connection.h:55</a></div></div>
<div class="ttc" id="classTcpSession_html"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html">TcpSession</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00042">tcp_session.h:42</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_a27a0dbbe7556beaabbcd2debf5704839"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#a27a0dbbe7556beaabbcd2debf5704839">XmppConnectionEndpoint::increment_flap_count</a></div><div class="ttdeci">void increment_flap_count()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00952">xmpp_connection.cc:952</a></div></div>
<div class="ttc" id="classXmppServerConnection_1_1DeleteActor_html_a3a741682068b773eff440509b8fdb24d"><div class="ttname"><a href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a3a741682068b773eff440509b8fdb24d">XmppServerConnection::DeleteActor::server_</a></div><div class="ttdeci">XmppServer * server_</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00713">xmpp_connection.cc:713</a></div></div>
<div class="ttc" id="classXmppServerConnection_1_1DeleteActor_html_a4833830290443f7b08c4ac7b2beae4f4"><div class="ttname"><a href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a4833830290443f7b08c4ac7b2beae4f4">XmppServerConnection::DeleteActor::Destroy</a></div><div class="ttdeci">virtual void Destroy()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00708">xmpp_connection.cc:708</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a9081f9aaa50ca337b3675f5fe9fa9a06"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a9081f9aaa50ca337b3675f5fe9fa9a06">XmppServerConnection::deleter_</a></div><div class="ttdeci">boost::scoped_ptr&lt; DeleteActor &gt; deleter_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00319">xmpp_connection.h:319</a></div></div>
<div class="ttc" id="classXmppConnection_html_a76864a47e34203946049e8fcb05edf93"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a76864a47e34203946049e8fcb05edf93">XmppConnection::XmppConnection</a></div><div class="ttdeci">XmppConnection(TcpServer *server, const XmppChannelConfig *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00040">xmpp_connection.cc:40</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a9af8f124661f529de7b87bf66dd19338"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a9af8f124661f529de7b87bf66dd19338">XmppServerConnection::deleter</a></div><div class="ttdeci">virtual LifetimeActor * deleter()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00758">xmpp_connection.cc:758</a></div></div>
<div class="ttc" id="classTcpSession_html_af181c9d6048155cb94ab3a605b56a574"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#af181c9d6048155cb94ab3a605b56a574">TcpSession::Send</a></div><div class="ttdeci">virtual bool Send(const uint8_t *data, size_t size, size_t *sent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00428">tcp_session.cc:428</a></div></div>
<div class="ttc" id="classXmppConnection_html_aa4421116f53058dd444b13ab2ace9ba8"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#aa4421116f53058dd444b13ab2ace9ba8">XmppConnection::last_msg_</a></div><div class="ttdeci">std::unique_ptr&lt; XmppStanza::XmppMessage &gt; last_msg_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00274">xmpp_connection.h:274</a></div></div>
<div class="ttc" id="classXmppConnection_html_a5c61736e7ac785376da8ef8358a433ea"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a5c61736e7ac785376da8ef8358a433ea">XmppConnection::~XmppConnection</a></div><div class="ttdeci">virtual ~XmppConnection()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00068">xmpp_connection.cc:68</a></div></div>
<div class="ttc" id="classXmppConnection_html_a703323ddba06cfa13d02c796d52a6737"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a703323ddba06cfa13d02c796d52a6737">XmppConnection::LastStateName</a></div><div class="ttdeci">std::string LastStateName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00166">xmpp_connection.h:166</a></div></div>
<div class="ttc" id="classXmppServerConnection_1_1DeleteActor_html"><div class="ttname"><a href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html">XmppServerConnection::DeleteActor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00655">xmpp_connection.cc:655</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppStreamMessage_html_abb1d9dc99e610d3671b4306b289fadda"><div class="ttname"><a href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#abb1d9dc99e610d3671b4306b289fadda">XmppStanza::XmppStreamMessage::strmtype</a></div><div class="ttdeci">XmppStreamMsgType strmtype</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00098">xmpp_proto.h:98</a></div></div>
<div class="ttc" id="classXmppConnection_html_ab0e364172e4a20ce835a75004e6934ef"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ab0e364172e4a20ce835a75004e6934ef">XmppConnection::SendClose</a></div><div class="ttdeci">void SendClose(XmppSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00364">xmpp_connection.cc:364</a></div></div>
<div class="ttc" id="classXmppServerConnection_1_1DeleteActor_html_aafa0e202b9cc44e316fc19b68a206974"><div class="ttname"><a href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aafa0e202b9cc44e316fc19b68a206974">XmppServerConnection::DeleteActor::MayDelete</a></div><div class="ttdeci">virtual bool MayDelete() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00662">xmpp_connection.cc:662</a></div></div>
<div class="ttc" id="task__annotations_8h_html"><div class="ttname"><a href="../../d6/de9/task__annotations_8h.html">task_annotations.h</a></div></div>
<div class="ttc" id="classXmppConnection_html_a3ff26874a02bbf1a5ae1159813788c75"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a3ff26874a02bbf1a5ae1159813788c75">XmppConnection::IsClient</a></div><div class="ttdeci">bool IsClient() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00116">xmpp_connection.h:116</a></div></div>
<div class="ttc" id="classTimerManager_html"><div class="ttname"><a href="../../d9/d81/classTimerManager.html">TimerManager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd0/timer_8h_source.html#l00200">timer.h:200</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppStreamMessage_html_a603da3c791f1b25072b9f78048bff5eca28640a0a2134316d2548d088536eabcd"><div class="ttname"><a href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a603da3c791f1b25072b9f78048bff5eca28640a0a2134316d2548d088536eabcd">XmppStanza::XmppStreamMessage::TLS_PROCEED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00095">xmpp_proto.h:95</a></div></div>
<div class="ttc" id="classXmppConnection_html_a2ae8250762a5581bc4efac608d962288"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a2ae8250762a5581bc4efac608d962288">XmppConnection::inc_open_fail</a></div><div class="ttdeci">void inc_open_fail()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00520">xmpp_connection.cc:520</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_a1fb9e84d4a4a398a49413dd20680f31f"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#a1fb9e84d4a4a398a49413dd20680f31f">XmppConnectionEndpoint::XmppConnectionEndpoint</a></div><div class="ttdeci">XmppConnectionEndpoint(const std::string &amp;client)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00940">xmpp_connection.cc:940</a></div></div>
<div class="ttc" id="classLifetimeActor_html_a6fd805b59fb8bc1119ee7778f623596c"><div class="ttname"><a href="../../dd/d9e/classLifetimeActor.html#a6fd805b59fb8bc1119ee7778f623596c">LifetimeActor::RetryDelete</a></div><div class="ttdeci">void RetryDelete()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/lifetime_8cc_source.html#l00071">lifetime.cc:71</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_ab88ede78eb01fb874af05400071b71e8"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#ab88ede78eb01fb874af05400071b71e8">XmppServerConnection::RetryDelete</a></div><div class="ttdeci">virtual void RetryDelete()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00744">xmpp_connection.cc:744</a></div></div>
<div class="ttc" id="classXmlBase_html_a38b7739c8faffc644224cc1a1345478d"><div class="ttname"><a href="../../d2/d78/classXmlBase.html#a38b7739c8faffc644224cc1a1345478d">XmlBase::ModifyAttribute</a></div><div class="ttdeci">virtual int ModifyAttribute(const std::string &amp;key, const std::string &amp;value)=0</div></div>
<div class="ttc" id="classXmppConnection_html_a746b6925c5895c09b7f1d36108a181b8"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a746b6925c5895c09b7f1d36108a181b8">XmppConnection::SetAdminDown</a></div><div class="ttdeci">void SetAdminDown(bool toggle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00216">xmpp_connection.cc:216</a></div></div>
<div class="ttc" id="classXmppConnection_html_a50d94812a843a0d4c5edb1c59d257a48"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a50d94812a843a0d4c5edb1c59d257a48">XmppConnection::GetStateMcOpenConfirmState</a></div><div class="ttdeci">xmsm::XmOpenConfirmState GetStateMcOpenConfirmState() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00161">xmpp_connection.cc:161</a></div></div>
<div class="ttc" id="namespacexmsm_html_a4355b927914ed3b2c84bc5d366431d6d"><div class="ttname"><a href="../../d8/d9a/namespacexmsm.html#a4355b927914ed3b2c84bc5d366431d6d">xmsm::XmState</a></div><div class="ttdeci">XmState</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/xmpp__state__machine_8h_source.html#l00032">xmpp_state_machine.h:32</a></div></div>
<div class="ttc" id="xmpp__connection_8cc_html_ac0fa610ba4da90e0962a9f28a4ba8faa"><div class="ttname"><a href="../../d5/df9/xmpp__connection_8cc.html#ac0fa610ba4da90e0962a9f28a4ba8faa">XMPPPeerInfoSend</a></div><div class="ttdeci">static void XMPPPeerInfoSend(XmppPeerInfoData &amp;peer_info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00200">xmpp_connection.cc:200</a></div></div>
<div class="ttc" id="classXmppConnection_html_ac56bf7207d3f33cb75e20c040f0015f8"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ac56bf7207d3f33cb75e20c040f0015f8">XmppConnection::disable_read_</a></div><div class="ttdeci">bool disable_read_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00264">xmpp_connection.h:264</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_a49fe5ac53783d95498a5e87389e79a62"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#a49fe5ac53783d95498a5e87389e79a62">XmppClientConnection::increment_flap_count</a></div><div class="ttdeci">virtual void increment_flap_count()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00920">xmpp_connection.cc:920</a></div></div>
<div class="ttc" id="classLifetimeManager_html"><div class="ttname"><a href="../../dd/d0e/classLifetimeManager.html">LifetimeManager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d11/lifetime_8h_source.html#l00188">lifetime.h:188</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppStreamMessage_html"><div class="ttname"><a href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html">XmppStanza::XmppStreamMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00074">xmpp_proto.h:74</a></div></div>
<div class="ttc" id="xml__base_8h_html"><div class="ttname"><a href="../../df/d85/xml__base_8h.html">xml_base.h</a></div></div>
<div class="ttc" id="classXmppConnection_html_a7113663fcc3afbb269c7de0a04d192cb"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a7113663fcc3afbb269c7de0a04d192cb">XmppConnection::SendProceedTls</a></div><div class="ttdeci">virtual bool SendProceedTls(XmppSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00343">xmpp_connection.cc:343</a></div></div>
<div class="ttc" id="classXmppStanza_html_a759a6c341a7b7760a396d5f7a6f2aacaa06d32ac2b9484036daf7fab5c1cb9687"><div class="ttname"><a href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaa06d32ac2b9484036daf7fab5c1cb9687">XmppStanza::WHITESPACE_MESSAGE_STANZA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00020">xmpp_proto.h:20</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_aa3feddf908a2bb62311371840c5db71b"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#aa3feddf908a2bb62311371840c5db71b">XmppConnectionEndpoint::connection</a></div><div class="ttdeci">XmppConnection * connection()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00965">xmpp_connection.cc:965</a></div></div>
<div class="ttc" id="classXmppStateMachine_html_a1b3d77109b2418f01b555f179a1543a5"><div class="ttname"><a href="../../d2/db3/classXmppStateMachine.html#a1b3d77109b2418f01b555f179a1543a5">XmppStateMachine::clear_session</a></div><div class="ttdeci">void clear_session()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d03/xmpp__state__machine_8cc_source.html#l01150">xmpp_state_machine.cc:1150</a></div></div>
<div class="ttc" id="classXmppConnection_html_a1756a2a0e4f35ccc9bf3ae6f87964079"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a1756a2a0e4f35ccc9bf3ae6f87964079">XmppConnection::Send</a></div><div class="ttdeci">bool Send(const uint8_t *data, size_t size, const std::string *msg_str=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00226">xmpp_connection.cc:226</a></div></div>
<div class="ttc" id="classXmppStanza_1_1XmppMessage_html_ab724425411c2fde8c1eacfbc6bd8ad39"><div class="ttname"><a href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html#ab724425411c2fde8c1eacfbc6bd8ad39">XmppStanza::XmppMessage::dom</a></div><div class="ttdeci">std::unique_ptr&lt; XmlBase &gt; dom</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00062">xmpp_proto.h:62</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_a3cbcdc19a147d150eb580683819e8e59"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#a3cbcdc19a147d150eb580683819e8e59">XmppClientConnection::ManagedDelete</a></div><div class="ttdeci">virtual void ManagedDelete()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00877">xmpp_connection.cc:877</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_a820b9b063d762445eeea6ac4719cdd15"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#a820b9b063d762445eeea6ac4719cdd15">XmppClientConnection::deleter</a></div><div class="ttdeci">virtual LifetimeActor * deleter()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00897">xmpp_connection.cc:897</a></div></div>
<div class="ttc" id="classXmppConnection_html_abfd07e475de5ed01d8ca851ba1752f9b"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#abfd07e475de5ed01d8ca851ba1752f9b">XmppConnection::IsDeleted</a></div><div class="ttdeci">bool IsDeleted() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00121">xmpp_connection.cc:121</a></div></div>
<div class="ttc" id="load__balance_8h_html_a1d127017fb298b889f4ba24752d08b8e"><div class="ttname"><a href="../../de/dcb/load__balance_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcb/load__balance_8h_source.html#l00109">load_balance.h:109</a></div></div>
<div class="ttc" id="string__util_8h_html_abf0bb328a638b537a16cc43e3014ab72"><div class="ttname"><a href="../../dd/d70/string__util_8h.html#abf0bb328a638b537a16cc43e3014ab72">integerToString</a></div><div class="ttdeci">static const std::string integerToString(const NumberType &amp;num)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d70/string__util_8h_source.html#l00019">string_util.h:19</a></div></div>
<div class="ttc" id="classXmppClientConnection_1_1DeleteActor_html_a9a27851b387c4751f125ef0cb5aaf043"><div class="ttname"><a href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#a9a27851b387c4751f125ef0cb5aaf043">XmppClientConnection::DeleteActor::Destroy</a></div><div class="ttdeci">virtual void Destroy()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00849">xmpp_connection.cc:849</a></div></div>
<div class="ttc" id="classXmppChannelConfig_html"><div class="ttname"><a href="../../d0/d8b/classXmppChannelConfig.html">XmppChannelConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d07/xmpp__config_8h_source.html#l00016">xmpp_config.h:16</a></div></div>
<div class="ttc" id="xmpp__client_8h_html"><div class="ttname"><a href="../../d4/d2f/xmpp__client_8h.html">xmpp_client.h</a></div></div>
<div class="ttc" id="classXmppStateMachine_html_a290e0274fd9a58afdc366af136358829"><div class="ttname"><a href="../../d2/db3/classXmppStateMachine.html#a290e0274fd9a58afdc366af136358829">XmppStateMachine::OpenConfirmStateType</a></div><div class="ttdeci">xmsm::XmOpenConfirmState OpenConfirmStateType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d03/xmpp__state__machine_8cc_source.html#l01582">xmpp_state_machine.cc:1582</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppMessageIq_html_a7c97fb5f6067172c90511ac5034e713c"><div class="ttname"><a href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a7c97fb5f6067172c90511ac5034e713c">XmppStanza::XmppMessageIq::as_node</a></div><div class="ttdeci">std::string as_node</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00161">xmpp_proto.h:161</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_ab46068ce9e39fbebe479e4c81acd3092"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#ab46068ce9e39fbebe479e4c81acd3092">XmppServerConnection::duplicate</a></div><div class="ttdeci">bool duplicate() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00300">xmpp_connection.h:300</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a5f62fe22841db20cb370e8945af84fa1"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a5f62fe22841db20cb370e8945af84fa1">XmppServerConnection::lifetime_manager</a></div><div class="ttdeci">virtual LifetimeManager * lifetime_manager()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00750">xmpp_connection.cc:750</a></div></div>
<div class="ttc" id="classLifetimeActor_html_a7913677e6ba03c5a721270cceddcf701"><div class="ttname"><a href="../../dd/d9e/classLifetimeActor.html#a7913677e6ba03c5a721270cceddcf701">LifetimeActor::IsDeleted</a></div><div class="ttdeci">bool IsDeleted() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d11/lifetime_8h_source.html#l00131">lifetime.h:131</a></div></div>
<div class="ttc" id="classXmppConnection_html_a55f1899ebc1f91b0113f5652d0f44414"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a55f1899ebc1f91b0113f5652d0f44414">XmppConnection::LastEvent</a></div><div class="ttdeci">std::string LastEvent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00174">xmpp_connection.h:174</a></div></div>
<div class="ttc" id="namespacexmsm_html_a4355b927914ed3b2c84bc5d366431d6da4c881ce28a13af89cee828f19cb90a0a"><div class="ttname"><a href="../../d8/d9a/namespacexmsm.html#a4355b927914ed3b2c84bc5d366431d6da4c881ce28a13af89cee828f19cb90a0a">xmsm::ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/xmpp__state__machine_8h_source.html#l00038">xmpp_state_machine.h:38</a></div></div>
<div class="ttc" id="classTaskScheduler_html_a951ae2a1d1b7700618defdcc1ea53a70"><div class="ttname"><a href="../../df/ddc/classTaskScheduler.html#a951ae2a1d1b7700618defdcc1ea53a70">TaskScheduler::GetInstance</a></div><div class="ttdeci">static TaskScheduler * GetInstance()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbd/task_8cc_source.html#l00547">task.cc:547</a></div></div>
<div class="ttc" id="xmpp__server_8h_html"><div class="ttname"><a href="../../d1/d2e/xmpp__server_8h.html">xmpp_server.h</a></div></div>
<div class="ttc" id="xmpp__factory_8h_html"><div class="ttname"><a href="../../db/d3c/xmpp__factory_8h.html">xmpp_factory.h</a></div></div>
<div class="ttc" id="classTcpSession_html_aaaf9a967a0e34524e763fc831734e79b"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#aaaf9a967a0e34524e763fc831734e79b">TcpSession::remote_addr_string</a></div><div class="ttdeci">const std::string &amp; remote_addr_string() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_ac2ffd451fa3b62ee7fa826aab64ff0f4"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#ac2ffd451fa3b62ee7fa826aab64ff0f4">XmppClientConnection::server</a></div><div class="ttdeci">XmppClient * server()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00893">xmpp_connection.cc:893</a></div></div>
<div class="ttc" id="classXmppClient_html_a49ace7122bb159458d7e4bf84c867976"><div class="ttname"><a href="../../db/de5/classXmppClient.html#a49ace7122bb159458d7e4bf84c867976">XmppClient::RemoveConnection</a></div><div class="ttdeci">void RemoveConnection(XmppClientConnection *connection)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d31/xmpp__client_8cc_source.html#l00269">xmpp_client.cc:269</a></div></div>
<div class="ttc" id="classXmppConnection_html_a0121b0b782cec4a5c2cb1f4a05ae7e22"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a0121b0b782cec4a5c2cb1f4a05ae7e22">XmppConnection::local_endpoint_</a></div><div class="ttdeci">boost::asio::ip::tcp::endpoint local_endpoint_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00254">xmpp_connection.h:254</a></div></div>
<div class="ttc" id="classXmppConnection_html_a900bce2de9d2c5da1bb868a4eedf4266"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a900bce2de9d2c5da1bb868a4eedf4266">XmppConnection::local_endpoint_string</a></div><div class="ttdeci">std::string local_endpoint_string() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00182">xmpp_connection.cc:182</a></div></div>
<div class="ttc" id="classXmlBase_html"><div class="ttname"><a href="../../d2/d78/classXmlBase.html">XmlBase</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d85/xml__base_8h_source.html#l00010">xml_base.h:10</a></div></div>
<div class="ttc" id="classXmppClientConnection_1_1DeleteActor_html_aeb7a9aeceab52cdbd7ec275843013b21"><div class="ttname"><a href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#aeb7a9aeceab52cdbd7ec275843013b21">XmppClientConnection::DeleteActor::parent_</a></div><div class="ttdeci">XmppClientConnection * parent_</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00855">xmpp_connection.cc:855</a></div></div>
<div class="ttc" id="classXmppConnection_html_abbb3ae66abcfc46625209abce0f3909f"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#abbb3ae66abcfc46625209abce0f3909f">XmppConnection::SendOpenConfirm</a></div><div class="ttdeci">virtual bool SendOpenConfirm(XmppSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00281">xmpp_connection.cc:281</a></div></div>
<div class="ttc" id="task__annotations_8h_html_ad8b4494991b88809b724529f4a43bb8b"><div class="ttname"><a href="../../d6/de9/task__annotations_8h.html#ad8b4494991b88809b724529f4a43bb8b">CHECK_CONCURRENCY</a></div><div class="ttdeci">#define CHECK_CONCURRENCY(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de9/task__annotations_8h_source.html#l00039">task_annotations.h:39</a></div></div>
<div class="ttc" id="time__util_8h_html_a31337b6b9e97c9c772ea8fe38dcf92c8"><div class="ttname"><a href="../../d0/d91/time__util_8h.html#a31337b6b9e97c9c772ea8fe38dcf92c8">UTCUsecToPTime</a></div><div class="ttdeci">static boost::posix_time::ptime UTCUsecToPTime(uint64_t tusec)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d91/time__util_8h_source.html#l00038">time_util.h:38</a></div></div>
<div class="ttc" id="classXmppSession_html_a325cc9d8b4ee70e455cf6f48b186f27e"><div class="ttname"><a href="../../d5/d13/classXmppSession.html#a325cc9d8b4ee70e455cf6f48b186f27e">XmppSession::IncStats</a></div><div class="ttdeci">void IncStats(unsigned int message_type, uint64_t bytes)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/de6/xmpp__session_8cc_source.html#l00102">xmpp_session.cc:102</a></div></div>
<div class="ttc" id="classXmppSession_html"><div class="ttname"><a href="../../d5/d13/classXmppSession.html">XmppSession</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d86/xmpp__session_8h_source.html#l00018">xmpp_session.h:18</a></div></div>
<div class="ttc" id="classXmppConnection_html_a9a41ec1045539130e0f99716e2ee50fd"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a9a41ec1045539130e0f99716e2ee50fd">XmppConnection::SetDscpValue</a></div><div class="ttdeci">int SetDscpValue(uint8_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00253">xmpp_connection.cc:253</a></div></div>
<div class="ttc" id="classTcpServer_html"><div class="ttname"><a href="../../de/df9/classTcpServer.html">TcpServer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d00/tcp__server_8h_source.html#l00028">tcp_server.h:28</a></div></div>
<div class="ttc" id="classXmppServer_html_a4523fcf287df9a97a6ed4187b60ef711"><div class="ttname"><a href="../../dd/d43/classXmppServer.html#a4523fcf287df9a97a6ed4187b60ef711">XmppServer::RemoveDeletedConnection</a></div><div class="ttdeci">virtual void RemoveDeletedConnection(XmppServerConnection *connection)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d3a/xmpp__server_8cc_source.html#l00673">xmpp_server.cc:673</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_adc5636cfecdce9263c6cb105e0198cb4"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#adc5636cfecdce9263c6cb105e0198cb4">XmppClientConnection::RetryDelete</a></div><div class="ttdeci">virtual void RetryDelete()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00883">xmpp_connection.cc:883</a></div></div>
<div class="ttc" id="classXmppServerConnection_1_1DeleteActor_html_aed02e5a9dd4ed3396de0960bc3619940"><div class="ttname"><a href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#aed02e5a9dd4ed3396de0960bc3619940">XmppServerConnection::DeleteActor::parent_</a></div><div class="ttdeci">XmppServerConnection * parent_</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00714">xmpp_connection.cc:714</a></div></div>
<div class="ttc" id="classXmppConnection_html_a23558db06521b840c31bcd2484582ac1"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a23558db06521b840c31bcd2484582ac1">XmppConnection::StopKeepAliveTimer</a></div><div class="ttdeci">void StopKeepAliveTimer()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00472">xmpp_connection.cc:472</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppMessageIq_html_a015e5b3e0314caac552015c01684dad6"><div class="ttname"><a href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a015e5b3e0314caac552015c01684dad6">XmppStanza::XmppMessageIq::action</a></div><div class="ttdeci">std::string action</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00160">xmpp_proto.h:160</a></div></div>
<div class="ttc" id="classXmppConnection_html_a57c1e4a91a0ff0fa283862e2723b9317"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a57c1e4a91a0ff0fa283862e2723b9317">XmppConnection::auth_enabled_</a></div><div class="ttdeci">bool auth_enabled_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00267">xmpp_connection.h:267</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a34e1a259f5ae2af506f4fcc4ef82540c"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a34e1a259f5ae2af506f4fcc4ef82540c">XmppServerConnection::last_flap_at</a></div><div class="ttdeci">virtual const std::string last_flap_at() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00803">xmpp_connection.cc:803</a></div></div>
<div class="ttc" id="classXmppConnection_html_a4181627b609821172d4d234e70f08437"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a4181627b609821172d4d234e70f08437">XmppConnection::SendStreamFeatureRequest</a></div><div class="ttdeci">virtual bool SendStreamFeatureRequest(XmppSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00301">xmpp_connection.cc:301</a></div></div>
<div class="ttc" id="classXmlBase_html_a9628696d6b514a616d84b02311f6141b"><div class="ttname"><a href="../../d2/d78/classXmlBase.html#a9628696d6b514a616d84b02311f6141b">XmlBase::ReadAttrib</a></div><div class="ttdeci">virtual const char * ReadAttrib(const std::string &amp;str)=0</div></div>
<div class="ttc" id="classXmppChannelMux_html"><div class="ttname"><a href="../../d2/dc0/classXmppChannelMux.html">XmppChannelMux</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d9a/xmpp__channel__mux_8h_source.html#l00017">xmpp_channel_mux.h:17</a></div></div>
<div class="ttc" id="classXmppConnection_html_a9fc59d5f4b000ff46cb555fb6eff59d8"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a9fc59d5f4b000ff46cb555fb6eff59d8">XmppConnection::LogKeepAliveSend</a></div><div class="ttdeci">void LogKeepAliveSend()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00414">xmpp_connection.cc:414</a></div></div>
<div class="ttc" id="classXmppConnection_html_a7a2496437fe4657759afe4d8bb10998b"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a7a2496437fe4657759afe4d8bb10998b">XmppConnection::GetStateMcState</a></div><div class="ttdeci">xmsm::XmState GetStateMcState() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00155">xmpp_connection.cc:155</a></div></div>
<div class="ttc" id="structXmppConnection_1_1ErrorStats_html_abaebbaeee1751bb8923f77cd2429d5f3"><div class="ttname"><a href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#abaebbaeee1751bb8923f77cd2429d5f3">XmppConnection::ErrorStats::session_close</a></div><div class="ttdeci">tbb::atomic&lt; uint32_t &gt; session_close</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00054">xmpp_connection.h:54</a></div></div>
<div class="ttc" id="classXmppStateMachine_html_af3faaa257e90809591f6175c9e495994"><div class="ttname"><a href="../../d2/db3/classXmppStateMachine.html#af3faaa257e90809591f6175c9e495994">XmppStateMachine::StateType</a></div><div class="ttdeci">xmsm::XmState StateType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d03/xmpp__state__machine_8cc_source.html#l01578">xmpp_state_machine.cc:1578</a></div></div>
<div class="ttc" id="classXmppConnection_html_a79569cc806dc76091244b14a4af1ac39"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a79569cc806dc76091244b14a4af1ac39">XmppConnection::ProcessXmppChatMessage</a></div><div class="ttdeci">int ProcessXmppChatMessage(const XmppStanza::XmppChatMessage *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00644">xmpp_connection.cc:644</a></div></div>
<div class="ttc" id="classXmppServer_html_ac11f0f8fcdb45e2da767dc96da6d2eac"><div class="ttname"><a href="../../dd/d43/classXmppServer.html#ac11f0f8fcdb45e2da767dc96da6d2eac">XmppServer::ReleaseConnectionEndpoint</a></div><div class="ttdeci">void ReleaseConnectionEndpoint(XmppServerConnection *connection)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d3a/xmpp__server_8cc_source.html#l00729">xmpp_server.cc:729</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a013f81b189d942ae79e018f96603c4ce"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a013f81b189d942ae79e018f96603c4ce">XmppServerConnection::flap_count</a></div><div class="ttdeci">virtual uint32_t flap_count() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00779">xmpp_connection.cc:779</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a4c690f7eedf8a53460b8618cb3c8a4f2"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a4c690f7eedf8a53460b8618cb3c8a4f2">XmppServerConnection::increment_flap_count</a></div><div class="ttdeci">virtual void increment_flap_count()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00783">xmpp_connection.cc:783</a></div></div>
<div class="ttc" id="classXmppConnection_html_a3dde5e2d475d1c7fc85a5ee3018226f7"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a3dde5e2d475d1c7fc85a5ee3018226f7">XmppConnection::ChannelMux</a></div><div class="ttdeci">XmppChannelMux * ChannelMux()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00128">xmpp_connection.h:128</a></div></div>
<div class="ttc" id="classXmppConnection_html_a45ea9024cb954cc29fc131e4b784701a"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a45ea9024cb954cc29fc131e4b784701a">XmppConnection::kAuthTypeNil</a></div><div class="ttdeci">static const char * kAuthTypeNil</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00233">xmpp_connection.h:233</a></div></div>
<div class="ttc" id="classXmppConnection_html_aed4769d3a2e4dec61df171d3268249ad"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#aed4769d3a2e4dec61df171d3268249ad">XmppConnection::GetXmppAuthenticationType</a></div><div class="ttdeci">std::string GetXmppAuthenticationType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00075">xmpp_connection.cc:75</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_ac318b70e4e55680a32fce978c63e8162"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#ac318b70e4e55680a32fce978c63e8162">XmppConnectionEndpoint::last_flap</a></div><div class="ttdeci">uint64_t last_flap() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00957">xmpp_connection.cc:957</a></div></div>
<div class="ttc" id="classXmppChannelConfig_html_a6aa13b7faedb2a685b9a41d4a02387ee"><div class="ttname"><a href="../../d0/d8b/classXmppChannelConfig.html#a6aa13b7faedb2a685b9a41d4a02387ee">XmppChannelConfig::ClientOnly</a></div><div class="ttdeci">bool ClientOnly() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d07/xmpp__config_8h_source.html#l00042">xmpp_config.h:42</a></div></div>
<div class="ttc" id="classXmppConnection_html_a5881f6e689a7474b2c7c301efb30e60f"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a5881f6e689a7474b2c7c301efb30e60f">XmppConnection::ReceiveMsg</a></div><div class="ttdeci">virtual void ReceiveMsg(XmppSession *session, const std::string &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00560">xmpp_connection.cc:560</a></div></div>
<div class="ttc" id="classXmppConnection_html_a5673841c6027b92f728fb2d55980eaf5"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a5673841c6027b92f728fb2d55980eaf5">XmppConnection::get_sm_connect_attempts</a></div><div class="ttdeci">size_t get_sm_connect_attempts()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00552">xmpp_connection.cc:552</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_ac49f9dddab53354e292677142ecaca5b"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#ac49f9dddab53354e292677142ecaca5b">XmppClientConnection::XmppClientConnection</a></div><div class="ttdeci">XmppClientConnection(XmppClient *server, const XmppChannelConfig *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00858">xmpp_connection.cc:858</a></div></div>
<div class="ttc" id="classXmppServer_html"><div class="ttname"><a href="../../dd/d43/classXmppServer.html">XmppServer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2e/xmpp__server_8h_source.html#l00032">xmpp_server.h:32</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_a00a30b2a5548bb6de987c3239d50b8a5"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#a00a30b2a5548bb6de987c3239d50b8a5">XmppConnectionEndpoint::set_connection</a></div><div class="ttdeci">void set_connection(XmppConnection *connection)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00973">xmpp_connection.cc:973</a></div></div>
<div class="ttc" id="classXmppConnection_html_a1f8b52940bf001808132c0f925e68bbd"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a1f8b52940bf001808132c0f925e68bbd">XmppConnection::admin_down_</a></div><div class="ttdeci">bool admin_down_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00263">xmpp_connection.h:263</a></div></div>
<div class="ttc" id="classXmppClient_html"><div class="ttname"><a href="../../db/de5/classXmppClient.html">XmppClient</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/xmpp__client_8h_source.html#l00022">xmpp_client.h:22</a></div></div>
<div class="ttc" id="classTimer_html_a18a9ec123397a973c72243c8372c237f"><div class="ttname"><a href="../../dc/dea/classTimer.html#a18a9ec123397a973c72243c8372c237f">Timer::Cancel</a></div><div class="ttdeci">bool Cancel()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d24/timer_8cc_source.html#l00150">timer.cc:150</a></div></div>
<div class="ttc" id="classXmppServer_html_a75a9cd0850788d3f0f68aad0b7cb768a"><div class="ttname"><a href="../../dd/d43/classXmppServer.html#a75a9cd0850788d3f0f68aad0b7cb768a">XmppServer::RemoveConnection</a></div><div class="ttdeci">virtual void RemoveConnection(XmppServerConnection *connection)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d3a/xmpp__server_8cc_source.html#l00526">xmpp_server.cc:526</a></div></div>
<div class="ttc" id="classXmppConnection_html_a074ea00a6f3ad5aceaf5d1dd864543aa"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a074ea00a6f3ad5aceaf5d1dd864543aa">XmppConnection::ToString</a></div><div class="ttdeci">const std::string &amp; ToString() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00192">xmpp_connection.cc:192</a></div></div>
<div class="ttc" id="classXmppProto_html_a6a03ccb5f9f27a7bfd8de1fc1fbca774"><div class="ttname"><a href="../../d9/d4b/classXmppProto.html#a6a03ccb5f9f27a7bfd8de1fc1fbca774">XmppProto::Decode</a></div><div class="ttdeci">static XmppStanza::XmppMessage * Decode(const XmppConnection *connection, const std::string &amp;ts)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de2/xmpp__proto_8cc_source.html#l00213">xmpp_proto.cc:213</a></div></div>
<div class="ttc" id="classXmppConnection_html_a7045789e03b4adfe8bdf3742935bcfd0"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a7045789e03b4adfe8bdf3742935bcfd0">XmppConnection::server</a></div><div class="ttdeci">TcpServer * server()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00073">xmpp_connection.h:73</a></div></div>
<div class="ttc" id="classXmppConnection_html_a8691a8b0403256840cf541a3705e6855"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a8691a8b0403256840cf541a3705e6855">XmppConnection::GetTaskInstance</a></div><div class="ttdeci">int GetTaskInstance() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00075">xmpp_connection.h:75</a></div></div>
<div class="ttc" id="classXmppConnection_html_aa80b22de4191d8c83ac789083deaf994"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#aa80b22de4191d8c83ac789083deaf994">XmppConnection::mux_</a></div><div class="ttdeci">boost::scoped_ptr&lt; XmppChannelMux &gt; mux_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00273">xmpp_connection.h:273</a></div></div>
<div class="ttc" id="classXmppConnection_html_a6b9edac1d5fc075a63fd8db82b821738"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a6b9edac1d5fc075a63fd8db82b821738">XmppConnection::session_</a></div><div class="ttdeci">XmppSession * session_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00242">xmpp_connection.h:242</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppStreamMessage_html_a4589b18d0fe6af4763e2b1225adb356caa5d1efa39250bb30ed7fa4ca25961664"><div class="ttname"><a href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a4589b18d0fe6af4763e2b1225adb356caa5d1efa39250bb30ed7fa4ca25961664">XmppStanza::XmppStreamMessage::INIT_STREAM_HEADER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00080">xmpp_proto.h:80</a></div></div>
<div class="ttc" id="classXmppConnection_html_ae007d93020d1671d2c34a0871f5c1b4b"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ae007d93020d1671d2c34a0871f5c1b4b">XmppConnection::channel_mux</a></div><div class="ttdeci">const XmppChannelMux * channel_mux() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00491">xmpp_connection.cc:491</a></div></div>
<div class="ttc" id="classXmppConnection_html_a2d1a0157671d5fe813f122a7fcf41c36"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a2d1a0157671d5fe813f122a7fcf41c36">XmppConnection::inc_connect_error</a></div><div class="ttdeci">void inc_connect_error()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00512">xmpp_connection.cc:512</a></div></div>
<div class="ttc" id="classXmppConnection_html_adec3ade39649132471eb3537da904d54"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#adec3ade39649132471eb3537da904d54">XmppConnection::set_session</a></div><div class="ttdeci">void set_session(XmppSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00087">xmpp_connection.cc:87</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_ade8ba7451609ac89e51a9cae7b524207"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#ade8ba7451609ac89e51a9cae7b524207">XmppConnectionEndpoint::close_reason_</a></div><div class="ttdeci">std::string close_reason_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00366">xmpp_connection.h:366</a></div></div>
<div class="ttc" id="xmpp__connection_8h_html"><div class="ttname"><a href="../../dd/d09/xmpp__connection_8h.html">xmpp_connection.h</a></div></div>
<div class="ttc" id="classXmppConnection_html_ad13fa71faaa6a3230fa7b48f510d853f"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ad13fa71faaa6a3230fa7b48f510d853f">XmppConnection::ProcessSslHandShakeResponse</a></div><div class="ttdeci">void ProcessSslHandShakeResponse(SslSessionPtr session, const boost::system::error_code &amp;error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00376">xmpp_connection.cc:376</a></div></div>
<div class="ttc" id="xmpp__connection_8cc_html_abea9942d9433bfc93ac6d34189406c8e"><div class="ttname"><a href="../../d5/df9/xmpp__connection_8cc.html#abea9942d9433bfc93ac6d34189406c8e">XMPP_CONTROL_MESSAGE_MAX_SIZE</a></div><div class="ttdeci">#define XMPP_CONTROL_MESSAGE_MAX_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00038">xmpp_connection.cc:38</a></div></div>
<div class="ttc" id="classXmppConnection_html_abc96724c0337ac039858e29cff9ec423"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#abc96724c0337ac039858e29cff9ec423">XmppConnection::server_</a></div><div class="ttdeci">TcpServer * server_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00241">xmpp_connection.h:241</a></div></div>
<div class="ttc" id="classXmppStateMachine_html_a9a4047eaa7fb2f13f7247bd64f3d6108"><div class="ttname"><a href="../../d2/db3/classXmppStateMachine.html#a9a4047eaa7fb2f13f7247bd64f3d6108">XmppStateMachine::OnEvent</a></div><div class="ttdeci">void OnEvent(SslSession *session, xmsm::SslHandShakeResponse)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d03/xmpp__state__machine_8cc_source.html#l01520">xmpp_state_machine.cc:1520</a></div></div>
<div class="ttc" id="classXmppConnection_html_aae958c19f6b7b077c33eb2e03b943058"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#aae958c19f6b7b077c33eb2e03b943058">XmppConnection::get_session_close</a></div><div class="ttdeci">size_t get_session_close()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00536">xmpp_connection.cc:536</a></div></div>
<div class="ttc" id="structXmppConnection_1_1ErrorStats_html_aed9e43d33b44a1a42bc278a36e51ebee"><div class="ttname"><a href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#aed9e43d33b44a1a42bc278a36e51ebee">XmppConnection::ErrorStats::stream_feature_fail</a></div><div class="ttdeci">tbb::atomic&lt; uint32_t &gt; stream_feature_fail</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00056">xmpp_connection.h:56</a></div></div>
<div class="ttc" id="classXmppSession_html_a77e700009b817a8d97f4656422165adf"><div class="ttname"><a href="../../d5/d13/classXmppSession.html#a77e700009b817a8d97f4656422165adf">XmppSession::SetConnection</a></div><div class="ttdeci">void SetConnection(XmppConnection *connection)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/de6/xmpp__session_8cc_source.html#l00052">xmpp_session.cc:52</a></div></div>
<div class="ttc" id="classXmppConnection_html_a4385f0a3df9a5749342b9d72b08fc5e8"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a4385f0a3df9a5749342b9d72b08fc5e8">XmppConnection::ProcessXmppIqMessage</a></div><div class="ttdeci">int ProcessXmppIqMessage(const XmppStanza::XmppMessage *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00650">xmpp_connection.cc:650</a></div></div>
<div class="ttc" id="classXmppStanza_html_a759a6c341a7b7760a396d5f7a6f2aacaaf9e045ea03e45e7bdfad7574e12d14a6"><div class="ttname"><a href="../../d4/d18/classXmppStanza.html#a759a6c341a7b7760a396d5f7a6f2aacaaf9e045ea03e45e7bdfad7574e12d14a6">XmppStanza::IQ_STANZA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00019">xmpp_proto.h:19</a></div></div>
<div class="ttc" id="time__util_8h_html_afd0d4d28c676a532b89ce6cfd1fc7e95"><div class="ttname"><a href="../../d0/d91/time__util_8h.html#afd0d4d28c676a532b89ce6cfd1fc7e95">UTCTimestampUsec</a></div><div class="ttdeci">static uint64_t UTCTimestampUsec()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d91/time__util_8h_source.html#l00013">time_util.h:13</a></div></div>
<div class="ttc" id="classXmppConnection_html_ade203800f034d252ca07328b0deabb02"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ade203800f034d252ca07328b0deabb02">XmppConnection::error_stats_</a></div><div class="ttdeci">ErrorStats error_stats_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00278">xmpp_connection.h:278</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_a9da8d070c775e4847d62eee711f3c7d7"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#a9da8d070c775e4847d62eee711f3c7d7">XmppClientConnection::flap_count</a></div><div class="ttdeci">virtual uint32_t flap_count() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00916">xmpp_connection.cc:916</a></div></div>
<div class="ttc" id="classXmppConnection_html_abdb7827ae477e7006aa3020102b40567"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#abdb7827ae477e7006aa3020102b40567">XmppConnection::LastStateChangeAt</a></div><div class="ttdeci">std::string LastStateChangeAt() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00170">xmpp_connection.h:170</a></div></div>
<div class="ttc" id="classXmppConnection_html_aaf3a4ab95d507621ba7e75f7e39fe275"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#aaf3a4ab95d507621ba7e75f7e39fe275">XmppConnection::IncProtoStats</a></div><div class="ttdeci">void IncProtoStats(unsigned int type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00495">xmpp_connection.cc:495</a></div></div>
<div class="ttc" id="classXmppServerConnection_1_1DeleteActor_html_acfd6b1484d3fd61647a1bf9fd23d7fbc"><div class="ttname"><a href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#acfd6b1484d3fd61647a1bf9fd23d7fbc">XmppServerConnection::DeleteActor::Shutdown</a></div><div class="ttdeci">virtual void Shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00666">xmpp_connection.cc:666</a></div></div>
<div class="ttc" id="xmpp__log_8h_html"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html">xmpp_log.h</a></div></div>
<div class="ttc" id="classTimer_html_a884738fb312e353e7d89fce007f02485"><div class="ttname"><a href="../../dc/dea/classTimer.html#a884738fb312e353e7d89fce007f02485">Timer::Start</a></div><div class="ttdeci">bool Start(int time, Handler handler, ErrorHandler error_handler=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d24/timer_8cc_source.html#l00108">timer.cc:108</a></div></div>
<div class="ttc" id="structXmppConnection_1_1ErrorStats_html_a5d8fd73134f6f880499adf48f63e20c6"><div class="ttname"><a href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#a5d8fd73134f6f880499adf48f63e20c6">XmppConnection::ErrorStats::handshake_fail</a></div><div class="ttdeci">tbb::atomic&lt; uint32_t &gt; handshake_fail</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00057">xmpp_connection.h:57</a></div></div>
<div class="ttc" id="classXmppClientConnection_1_1DeleteActor_html"><div class="ttname"><a href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html">XmppClientConnection::DeleteActor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00822">xmpp_connection.cc:822</a></div></div>
<div class="ttc" id="classTcpSession_html_af24e37114e7cc1f364810c741cb708ec"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#af24e37114e7cc1f364810c741cb708ec">TcpSession::SetDscpSocketOption</a></div><div class="ttdeci">int SetDscpSocketOption(uint8_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d26/tcp__session_8cc_source.html#l00569">tcp_session.cc:569</a></div></div>
<div class="ttc" id="xmpp__log_8h_html_a61e03d4499866f05b9dbb2a19218f7c3"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html#a61e03d4499866f05b9dbb2a19218f7c3">XMPP_DEBUG</a></div><div class="ttdeci">#define XMPP_DEBUG(obj,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/xmpp__log_8h_source.html#l00059">xmpp_log.h:59</a></div></div>
<div class="ttc" id="classXmppConnection_html_ab8a044cff1ee23164946b4635552f421"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ab8a044cff1ee23164946b4635552f421">XmppConnection::kAuthTypeTls</a></div><div class="ttdeci">static const char * kAuthTypeTls</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00234">xmpp_connection.h:234</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_a3634df95a5592689c812726d3d804558"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#a3634df95a5592689c812726d3d804558">XmppClientConnection::set_close_reason</a></div><div class="ttdeci">virtual void set_close_reason(const std::string &amp;reason)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00905">xmpp_connection.cc:905</a></div></div>
<div class="ttc" id="namespacexmps_html_a60e760317f84c6315a626c91042b17dfaf1bb317e39d8e5cedf19ee0634aa6dde"><div class="ttname"><a href="../../d8/de0/namespacexmps.html#a60e760317f84c6315a626c91042b17dfaf1bb317e39d8e5cedf19ee0634aa6dde">xmps::NOT_READY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dae/xmpp__channel_8h_source.html#l00018">xmpp_channel.h:18</a></div></div>
<div class="ttc" id="classXmppStateMachine_html"><div class="ttname"><a href="../../d2/db3/classXmppStateMachine.html">XmppStateMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/xmpp__state__machine_8h_source.html#l00060">xmpp_state_machine.h:60</a></div></div>
<div class="ttc" id="classXmppConnection_html_a3a24c4fec9adb60e4ed1456a6f328f3b"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a3a24c4fec9adb60e4ed1456a6f328f3b">XmppConnection::stats_</a></div><div class="ttdeci">ProtoStats stats_[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00276">xmpp_connection.h:276</a></div></div>
<div class="ttc" id="classTcpSession_html_a4c6e9471b6036e008b9a862e827b1c95"><div class="ttname"><a href="../../d2/d0e/classTcpSession.html#a4c6e9471b6036e008b9a862e827b1c95">TcpSession::remote_endpoint</a></div><div class="ttdeci">Endpoint remote_endpoint() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/tcp__session_8h_source.html#l00135">tcp_session.h:135</a></div></div>
<div class="ttc" id="classXmppConnection_html_a1cff130c822ce166f63fbfcca0912c50"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a1cff130c822ce166f63fbfcca0912c50">XmppConnection::spin_mutex_</a></div><div class="ttdeci">tbb::spin_mutex spin_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00258">xmpp_connection.h:258</a></div></div>
<div class="ttc" id="classXmppStanza_1_1XmppMessage_html"><div class="ttname"><a href="../../d0/d5c/classXmppStanza_1_1XmppMessage.html">XmppStanza::XmppMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00051">xmpp_proto.h:51</a></div></div>
<div class="ttc" id="xmpp__config_8h_html"><div class="ttname"><a href="../../dd/d07/xmpp__config_8h.html">xmpp_config.h</a></div></div>
<div class="ttc" id="classXmppConnection_html_a60153ffc07259fe304dc614a324d8b62"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a60153ffc07259fe304dc614a324d8b62">XmppConnection::ManagedDelete</a></div><div class="ttdeci">virtual void ManagedDelete()=0</div></div>
<div class="ttc" id="classXmppConnection_html_a5fddcca3abb84411a2d2e7815d6904bb"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a5fddcca3abb84411a2d2e7815d6904bb">XmppConnection::logUVE</a></div><div class="ttdeci">bool logUVE() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00115">xmpp_connection.h:115</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_a2dc8a9291b989ebd4e5471ad95533ae4"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#a2dc8a9291b989ebd4e5471ad95533ae4">XmppConnectionEndpoint::flap_count_</a></div><div class="ttdeci">uint32_t flap_count_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00367">xmpp_connection.h:367</a></div></div>
<div class="ttc" id="classXmppConnection_html_a91edeab413d9f573b08b0f200bf556d1"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a91edeab413d9f573b08b0f200bf556d1">XmppConnection::get_open_fail</a></div><div class="ttdeci">size_t get_open_fail()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00540">xmpp_connection.cc:540</a></div></div>
<div class="ttc" id="classXmppClient_html_a288f7b05d27d45d070ab687277f5aaa1"><div class="ttname"><a href="../../db/de5/classXmppClient.html#a288f7b05d27d45d070ab687277f5aaa1">XmppClient::NotifyConnectionEvent</a></div><div class="ttdeci">void NotifyConnectionEvent(XmppChannelMux *, xmps::PeerState)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d31/xmpp__client_8cc_source.html#l00216">xmpp_client.cc:216</a></div></div>
<div class="ttc" id="classXmppProto_html_ab8022027c8d07b32da5ec6d330103b52"><div class="ttname"><a href="../../d9/d4b/classXmppProto.html#ab8022027c8d07b32da5ec6d330103b52">XmppProto::EncodeStream</a></div><div class="ttdeci">static int EncodeStream(const XmppStreamMessage &amp;str, std::string &amp;to, std::string &amp;from, const std::string &amp;xmlns, uint8_t *data, size_t size)</div></div>
<div class="ttc" id="classXmppConnection_html_a4bb4147a46af44775e92e85ac748e64c"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a4bb4147a46af44775e92e85ac748e64c">XmppConnection::get_connect_error</a></div><div class="ttdeci">size_t get_connect_error()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00532">xmpp_connection.cc:532</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppMessageIq_html_a21e1bdbf2eef38c6ee3231fb9141791a"><div class="ttname"><a href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a21e1bdbf2eef38c6ee3231fb9141791a">XmppStanza::XmppMessageIq::node</a></div><div class="ttdeci">std::string node</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00157">xmpp_proto.h:157</a></div></div>
<div class="ttc" id="classXmppConnection_html_a895831d1375802101d98b5c94c2982d3"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a895831d1375802101d98b5c94c2982d3">XmppConnection::state_machine_</a></div><div class="ttdeci">boost::scoped_ptr&lt; XmppStateMachine &gt; state_machine_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00272">xmpp_connection.h:272</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_aaf9e3bf25dabecd7a29579324741143c"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#aaf9e3bf25dabecd7a29579324741143c">XmppClientConnection::last_flap_</a></div><div class="ttdeci">uint64_t last_flap_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00345">xmpp_connection.h:345</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppMessageIq_html"><div class="ttname"><a href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html">XmppStanza::XmppMessageIq</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00142">xmpp_proto.h:142</a></div></div>
<div class="ttc" id="classXmppStateMachine_html_ab8fce539a786bc792ce19a155c51e57d"><div class="ttname"><a href="../../d2/db3/classXmppStateMachine.html#ab8fce539a786bc792ce19a155c51e57d">XmppStateMachine::session</a></div><div class="ttdeci">XmppSession * session()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/xmpp__state__machine_8h_source.html#l00140">xmpp_state_machine.h:140</a></div></div>
<div class="ttc" id="classXmppClientConnection_html"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html">XmppClientConnection</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00323">xmpp_connection.h:323</a></div></div>
<div class="ttc" id="classXmppClientConnection_1_1DeleteActor_html_a9426457d80d08b9f962edc89291447eb"><div class="ttname"><a href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#a9426457d80d08b9f962edc89291447eb">XmppClientConnection::DeleteActor::DeleteActor</a></div><div class="ttdeci">DeleteActor(XmppClient *client, XmppClientConnection *parent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00824">xmpp_connection.cc:824</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_aa279920d9d87feab9a555394ac66fbd7"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#aa279920d9d87feab9a555394ac66fbd7">XmppServerConnection::FillShowInfo</a></div><div class="ttdeci">void FillShowInfo(ShowXmppConnection *show_connection) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00807">xmpp_connection.cc:807</a></div></div>
<div class="ttc" id="classXmppConnection_html_a5e62fc5e141f3c47eb86b0b6d0fa47d4"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a5e62fc5e141f3c47eb86b0b6d0fa47d4">XmppConnection::SendOpen</a></div><div class="ttdeci">virtual bool SendOpen(XmppSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00262">xmpp_connection.cc:262</a></div></div>
<div class="ttc" id="classXmppServerConnection_1_1DeleteActor_html_a08126e125a12f23675f77cd659278ee9"><div class="ttname"><a href="../../df/d4b/classXmppServerConnection_1_1DeleteActor.html#a08126e125a12f23675f77cd659278ee9">XmppServerConnection::DeleteActor::DeleteActor</a></div><div class="ttdeci">DeleteActor(XmppServer *server, XmppServerConnection *parent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00657">xmpp_connection.cc:657</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_ac64bdf526828a08f911fd31a7f01f842"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#ac64bdf526828a08f911fd31a7f01f842">XmppClientConnection::close_reason_</a></div><div class="ttdeci">std::string close_reason_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00341">xmpp_connection.h:341</a></div></div>
<div class="ttc" id="event__manager_8h_html"><div class="ttname"><a href="../../da/d69/event__manager_8h.html">event_manager.h</a></div></div>
<div class="ttc" id="classXmppConnection_html_accb70ab006de6de4e9ffdd5f93eb5797"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#accb70ab006de6de4e9ffdd5f93eb5797">XmppConnection::inc_session_close</a></div><div class="ttdeci">void inc_session_close()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00516">xmpp_connection.cc:516</a></div></div>
<div class="ttc" id="classXmppServer_html_a2c57f24dddfea0d13a6fe99f6c7ca6a8"><div class="ttname"><a href="../../dd/d43/classXmppServer.html#a2c57f24dddfea0d13a6fe99f6c7ca6a8">XmppServer::FindConnectionEndpoint</a></div><div class="ttdeci">XmppConnectionEndpoint * FindConnectionEndpoint(const std::string &amp;endpoint_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d3a/xmpp__server_8cc_source.html#l00683">xmpp_server.cc:683</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppStreamMessage_html_a603da3c791f1b25072b9f78048bff5ecafb6addb0339906dfe398a2ae03027cc6"><div class="ttname"><a href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a603da3c791f1b25072b9f78048bff5ecafb6addb0339906dfe398a2ae03027cc6">XmppStanza::XmppStreamMessage::TLS_FEATURE_REQUEST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00093">xmpp_proto.h:93</a></div></div>
<div class="ttc" id="classXmppConnection_html_ab796b030f7988ac594fbb6a1a1662c54"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ab796b030f7988ac594fbb6a1a1662c54">XmppConnection::state_machine</a></div><div class="ttdeci">XmppStateMachine * state_machine()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00483">xmpp_connection.cc:483</a></div></div>
<div class="ttc" id="classXmppConnection_html_ae4aab76bde939f73814ee902282211e1"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ae4aab76bde939f73814ee902282211e1">XmppConnection::endpoint_</a></div><div class="ttdeci">boost::asio::ip::tcp::endpoint endpoint_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00253">xmpp_connection.h:253</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_aeff44d5b8bf6c23b5ef3a76c6b3e65f1"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#aeff44d5b8bf6c23b5ef3a76c6b3e65f1">XmppConnectionEndpoint::last_flap_</a></div><div class="ttdeci">uint64_t last_flap_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00368">xmpp_connection.h:368</a></div></div>
<div class="ttc" id="classXmppConnection_html_ac73e778cb1e0fbdb38b5db7aaf92e77e"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ac73e778cb1e0fbdb38b5db7aaf92e77e">XmppConnection::LogMsg</a></div><div class="ttdeci">void LogMsg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00407">xmpp_connection.cc:407</a></div></div>
<div class="ttc" id="classXmppConnection_html_a4f2471c01d3644cb972d0abab4602015"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a4f2471c01d3644cb972d0abab4602015">XmppConnection::SwapContents</a></div><div class="ttdeci">void SwapContents(XmppConnection *other)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00984">xmpp_connection.cc:984</a></div></div>
<div class="ttc" id="classXmppConnection_html_ac909e1659d9b3909aeb00ef132afd30f"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ac909e1659d9b3909aeb00ef132afd30f">XmppConnection::session</a></div><div class="ttdeci">const XmppSession * session() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00104">xmpp_connection.cc:104</a></div></div>
<div class="ttc" id="classXmppConnection_html_a0193d0f7737159ccec3e8257696f22cc"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a0193d0f7737159ccec3e8257696f22cc">XmppConnection::clear_session</a></div><div class="ttdeci">void clear_session()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00096">xmpp_connection.cc:96</a></div></div>
<div class="ttc" id="classXmppConnection_html_ab7387f2469c424bd90b98b58ab3623a7"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#ab7387f2469c424bd90b98b58ab3623a7">XmppConnection::local_endpoint</a></div><div class="ttdeci">virtual boost::asio::ip::tcp::endpoint local_endpoint() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00172">xmpp_connection.cc:172</a></div></div>
<div class="ttc" id="classXmppConnection_html_afaf566aaa1d6712efc9c9eace5998357"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#afaf566aaa1d6712efc9c9eace5998357">XmppConnection::SendKeepAlive</a></div><div class="ttdeci">void SendKeepAlive()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00427">xmpp_connection.cc:427</a></div></div>
<div class="ttc" id="classXmppClientConnection_1_1DeleteActor_html_a9c0cb0e93d292953f6cbeea31c26b2dc"><div class="ttname"><a href="../../d1/d1c/classXmppClientConnection_1_1DeleteActor.html#a9c0cb0e93d292953f6cbeea31c26b2dc">XmppClientConnection::DeleteActor::MayDelete</a></div><div class="ttdeci">virtual bool MayDelete() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00829">xmpp_connection.cc:829</a></div></div>
<div class="ttc" id="xmpp__log_8h_html_a1060679c007790e2b21b9746ce57500d"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html#a1060679c007790e2b21b9746ce57500d">XMPP_ALERT</a></div><div class="ttdeci">#define XMPP_ALERT(obj,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/xmpp__log_8h_source.html#l00027">xmpp_log.h:27</a></div></div>
<div class="ttc" id="structXmppConnection_1_1ErrorStats_html_a5e614da29d2df54fa581dc7c6757761e"><div class="ttname"><a href="../../d8/dbd/structXmppConnection_1_1ErrorStats.html#a5e614da29d2df54fa581dc7c6757761e">XmppConnection::ErrorStats::connect_error</a></div><div class="ttdeci">tbb::atomic&lt; uint32_t &gt; connect_error</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00053">xmpp_connection.h:53</a></div></div>
<div class="ttc" id="classXmppConnection_html_a5389a1a4cb416de925232ae1b1236a07"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a5389a1a4cb416de925232ae1b1236a07">XmppConnection::uve_key_str_</a></div><div class="ttdeci">std::string uve_key_str_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00270">xmpp_connection.h:270</a></div></div>
<div class="ttc" id="classXmppConnection_html_a7a35d8341baa08df77e1a5765e93a0b3"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a7a35d8341baa08df77e1a5765e93a0b3">XmppConnection::ToUVEKey</a></div><div class="ttdeci">const std::string &amp; ToUVEKey() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00196">xmpp_connection.cc:196</a></div></div>
<div class="ttc" id="classXmppConnection_html_a61077c30aea5d27fec8f8c08c8fc1295"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a61077c30aea5d27fec8f8c08c8fc1295">XmppConnection::SendStartTls</a></div><div class="ttdeci">virtual bool SendStartTls(XmppSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00322">xmpp_connection.cc:322</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppMessageIq_html_a7d7a6061b8408e381d5c4d1517fae67f"><div class="ttname"><a href="../../d0/d0d/structXmppStanza_1_1XmppMessageIq.html#a7d7a6061b8408e381d5c4d1517fae67f">XmppStanza::XmppMessageIq::is_as_node</a></div><div class="ttdeci">bool is_as_node</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00162">xmpp_proto.h:162</a></div></div>
<div class="ttc" id="classXmppConnection_html_a5e177c4cb37312ddc15fa5436d206e9e"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a5e177c4cb37312ddc15fa5436d206e9e">XmppConnection::dscp_value</a></div><div class="ttdeci">uint8_t dscp_value() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00217">xmpp_connection.h:217</a></div></div>
<div class="ttc" id="structXmppStanza_1_1XmppStreamMessage_html_a603da3c791f1b25072b9f78048bff5eca50937ce877344cf3e58bb148253bbcae"><div class="ttname"><a href="../../d5/dca/structXmppStanza_1_1XmppStreamMessage.html#a603da3c791f1b25072b9f78048bff5eca50937ce877344cf3e58bb148253bbcae">XmppStanza::XmppStreamMessage::TLS_START</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/xmpp__proto_8h_source.html#l00094">xmpp_proto.h:94</a></div></div>
<div class="ttc" id="classXmppConnectionEndpoint_html_abc043df6fe89e6ac2b173c315e110f16"><div class="ttname"><a href="../../d7/dcc/classXmppConnectionEndpoint.html#abc043df6fe89e6ac2b173c315e110f16">XmppConnectionEndpoint::connection_</a></div><div class="ttdeci">XmppConnection * connection_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00369">xmpp_connection.h:369</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_acf60f6489ceb95e084233e197171cf7c"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#acf60f6489ceb95e084233e197171cf7c">XmppClientConnection::flap_count_</a></div><div class="ttdeci">uint32_t flap_count_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00344">xmpp_connection.h:344</a></div></div>
<div class="ttc" id="xmpp__log_8h_html_ac3a7300affb777f66d244c3c88a21a4d"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html#ac3a7300affb777f66d244c3c88a21a4d">XMPP_ERROR</a></div><div class="ttdeci">#define XMPP_ERROR(obj,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/xmpp__log_8h_source.html#l00018">xmpp_log.h:18</a></div></div>
<div class="ttc" id="classXmppServerConnection_html_a9ff0ab5f882d07ff38de42e7766c9fdb"><div class="ttname"><a href="../../df/df7/classXmppServerConnection.html#a9ff0ab5f882d07ff38de42e7766c9fdb">XmppServerConnection::conn_endpoint_</a></div><div class="ttdeci">XmppConnectionEndpoint * conn_endpoint_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00318">xmpp_connection.h:318</a></div></div>
<div class="ttc" id="classTaskScheduler_html_aa50cf620d67afe0938bc4f8da4856217"><div class="ttname"><a href="../../df/ddc/classTaskScheduler.html#aa50cf620d67afe0938bc4f8da4856217">TaskScheduler::HardwareThreadCount</a></div><div class="ttdeci">int HardwareThreadCount()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da4/task_8h_source.html#l00276">task.h:276</a></div></div>
<div class="ttc" id="classXmppConnection_html_aaf1e09316446d795dbc10e97f7dba18a"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#aaf1e09316446d795dbc10e97f7dba18a">XmppConnection::get_handshake_failure</a></div><div class="ttdeci">size_t get_handshake_failure()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00548">xmpp_connection.cc:548</a></div></div>
<div class="ttc" id="classXmppConnection_html_a80a0965225ac7bc1911eae024b121b03"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a80a0965225ac7bc1911eae024b121b03">XmppConnection::XmppDecode</a></div><div class="ttdeci">XmppStanza::XmppMessage * XmppDecode(const std::string &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00592">xmpp_connection.cc:592</a></div></div>
<div class="ttc" id="classXmppClientConnection_html_a7f67ec79dc40faf7af307794d98d1e7e"><div class="ttname"><a href="../../d0/dc0/classXmppClientConnection.html#a7f67ec79dc40faf7af307794d98d1e7e">XmppClientConnection::lifetime_manager</a></div><div class="ttdeci">virtual LifetimeManager * lifetime_manager()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/xmpp__connection_8cc_source.html#l00889">xmpp_connection.cc:889</a></div></div>
<div class="ttc" id="xmpp__log_8h_html_a53a03754223ac0ef89b223bbb0b2e543"><div class="ttname"><a href="../../d5/d9f/xmpp__log_8h.html#a53a03754223ac0ef89b223bbb0b2e543">XMPP_WARNING</a></div><div class="ttdeci">#define XMPP_WARNING(obj,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/xmpp__log_8h_source.html#l00035">xmpp_log.h:35</a></div></div>
<div class="ttc" id="classXmppConnection_html_a44354a2190bbbf60a495a8272031c378"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a44354a2190bbbf60a495a8272031c378">XmppConnection::xmlns_</a></div><div class="ttdeci">std::string xmlns_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00269">xmpp_connection.h:269</a></div></div>
<div class="ttc" id="classTimerManager_html_ab91db5e3454ac9f7941a67a3335e3743"><div class="ttname"><a href="../../d9/d81/classTimerManager.html#ab91db5e3454ac9f7941a67a3335e3743">TimerManager::DeleteTimer</a></div><div class="ttdeci">static bool DeleteTimer(Timer *Timer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d24/timer_8cc_source.html#l00222">timer.cc:222</a></div></div>
<div class="ttc" id="classLifetimeActor_html"><div class="ttname"><a href="../../dd/d9e/classLifetimeActor.html">LifetimeActor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d11/lifetime_8h_source.html#l00116">lifetime.h:116</a></div></div>
<div class="ttc" id="classXmppConnection_html_a36bd7bc049016e397d8a9d99124841eb"><div class="ttname"><a href="../../d0/d64/classXmppConnection.html#a36bd7bc049016e397d8a9d99124841eb">XmppConnection::dscp_value_</a></div><div class="ttdeci">uint8_t dscp_value_</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d09/xmpp__connection_8h_source.html#l00268">xmpp_connection.h:268</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_0a7d39584c34dc4772b798c7b583750f.html">contrail</a></li><li class="navelem"><a class="el" href="../../dir_2a1a0f5bd3fae8c3e47f1701b5222318.html">controller</a></li><li class="navelem"><a class="el" href="../../dir_c5f44869b24dae5488ef95224fa0de41.html">src</a></li><li class="navelem"><a class="el" href="../../dir_0ec852bb622113046c1ebfa3edec4da3.html">xmpp</a></li><li class="navelem"><a class="el" href="../../d5/df9/xmpp__connection_8cc.html">xmpp_connection.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
